!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";var e=window.Slick||{};(e=function(){var e=0;return function(n,o){var i,r=this;r.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:t(n),appendDots:t(n),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,n){return t('<button type="button" />').text(n+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},r.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},t.extend(r,r.initials),r.activeBreakpoint=null,r.animType=null,r.animProp=null,r.breakpoints=[],r.breakpointSettings=[],r.cssTransitions=!1,r.focussed=!1,r.interrupted=!1,r.hidden="hidden",r.paused=!0,r.positionProp=null,r.respondTo=null,r.rowCount=1,r.shouldClick=!0,r.$slider=t(n),r.$slidesCache=null,r.transformType=null,r.transitionType=null,r.visibilityChange="visibilitychange",r.windowWidth=0,r.windowTimer=null,i=t(n).data("slick")||{},r.options=t.extend({},r.defaults,o,i),r.currentSlide=r.options.initialSlide,r.originalSettings=r.options,void 0!==document.mozHidden?(r.hidden="mozHidden",r.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(r.hidden="webkitHidden",r.visibilityChange="webkitvisibilitychange"),r.autoPlay=t.proxy(r.autoPlay,r),r.autoPlayClear=t.proxy(r.autoPlayClear,r),r.autoPlayIterator=t.proxy(r.autoPlayIterator,r),r.changeSlide=t.proxy(r.changeSlide,r),r.clickHandler=t.proxy(r.clickHandler,r),r.selectHandler=t.proxy(r.selectHandler,r),r.setPosition=t.proxy(r.setPosition,r),r.swipeHandler=t.proxy(r.swipeHandler,r),r.dragHandler=t.proxy(r.dragHandler,r),r.keyHandler=t.proxy(r.keyHandler,r),r.instanceUid=e++,r.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,r.registerBreakpoints(),r.init(!0)}}()).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,n,o){var i=this;if("boolean"==typeof n)o=n,n=null;else if(n<0||n>=i.slideCount)return!1;i.unload(),"number"==typeof n?0===n&&0===i.$slides.length?t(e).appendTo(i.$slideTrack):o?t(e).insertBefore(i.$slides.eq(n)):t(e).insertAfter(i.$slides.eq(n)):!0===o?t(e).prependTo(i.$slideTrack):t(e).appendTo(i.$slideTrack),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slides.each(function(e,n){t(n).attr("data-slick-index",e)}),i.$slidesCache=i.$slides,i.reinit()},e.prototype.animateHeight=function(){var t=this;if(1===t.options.slidesToShow&&!0===t.options.adaptiveHeight&&!1===t.options.vertical){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.animate({height:e},t.options.speed)}},e.prototype.animateSlide=function(e,n){var o={},i=this;i.animateHeight(),!0===i.options.rtl&&!1===i.options.vertical&&(e=-e),!1===i.transformsEnabled?!1===i.options.vertical?i.$slideTrack.animate({left:e},i.options.speed,i.options.easing,n):i.$slideTrack.animate({top:e},i.options.speed,i.options.easing,n):!1===i.cssTransitions?(!0===i.options.rtl&&(i.currentLeft=-i.currentLeft),t({animStart:i.currentLeft}).animate({animStart:e},{duration:i.options.speed,easing:i.options.easing,step:function(t){t=Math.ceil(t),!1===i.options.vertical?(o[i.animType]="translate("+t+"px, 0px)",i.$slideTrack.css(o)):(o[i.animType]="translate(0px,"+t+"px)",i.$slideTrack.css(o))},complete:function(){n&&n.call()}})):(i.applyTransition(),e=Math.ceil(e),!1===i.options.vertical?o[i.animType]="translate3d("+e+"px, 0px, 0px)":o[i.animType]="translate3d(0px,"+e+"px, 0px)",i.$slideTrack.css(o),n&&setTimeout(function(){i.disableTransition(),n.call()},i.options.speed))},e.prototype.getNavTarget=function(){var e=this.options.asNavFor;return e&&null!==e&&(e=t(e).not(this.$slider)),e},e.prototype.asNavFor=function(e){var n=this.getNavTarget();null!==n&&"object"==typeof n&&n.each(function(){var n=t(this).slick("getSlick");n.unslicked||n.slideHandler(e,!0)})},e.prototype.applyTransition=function(t){var e=this,n={};!1===e.options.fade?n[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:n[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(n):e.$slides.eq(t).css(n)},e.prototype.autoPlay=function(){var t=this;t.autoPlayClear(),t.slideCount>t.options.slidesToShow&&(t.autoPlayTimer=setInterval(t.autoPlayIterator,t.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var t=this,e=t.currentSlide+t.options.slidesToScroll;t.paused||t.interrupted||t.focussed||(!1===t.options.infinite&&(1===t.direction&&t.currentSlide+1===t.slideCount-1?t.direction=0:0===t.direction&&(e=t.currentSlide-t.options.slidesToScroll,t.currentSlide-1==0&&(t.direction=1))),t.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=t(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=t(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},e.prototype.buildDots=function(){var e,n,o=this;if(!0===o.options.dots){for(o.$slider.addClass("slick-dotted"),n=t("<ul />").addClass(o.options.dotsClass),e=0;e<=o.getDotCount();e+=1)n.append(t("<li />").append(o.options.customPaging.call(this,o,e)));o.$dots=n.appendTo(o.options.appendDots),o.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,n){t(n).attr("data-slick-index",e).data("originalStyling",t(n).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?t('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0!==e.options.centerMode&&!0!==e.options.swipeToSlide||(e.options.slidesToScroll=1),t("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},e.prototype.buildRows=function(){var t,e,n,o,i,r,a,s=this;if(o=document.createDocumentFragment(),r=s.$slider.children(),s.options.rows>1){for(a=s.options.slidesPerRow*s.options.rows,i=Math.ceil(r.length/a),t=0;t<i;t++){var l=document.createElement("div");for(e=0;e<s.options.rows;e++){var c=document.createElement("div");for(n=0;n<s.options.slidesPerRow;n++){var u=t*a+(e*s.options.slidesPerRow+n);r.get(u)&&c.appendChild(r.get(u))}l.appendChild(c)}o.appendChild(l)}s.$slider.empty().append(o),s.$slider.children().children().children().css({width:100/s.options.slidesPerRow+"%",display:"inline-block"})}},e.prototype.checkResponsive=function(e,n){var o,i,r,a=this,s=!1,l=a.$slider.width(),c=window.innerWidth||t(window).width();if("window"===a.respondTo?r=c:"slider"===a.respondTo?r=l:"min"===a.respondTo&&(r=Math.min(c,l)),a.options.responsive&&a.options.responsive.length&&null!==a.options.responsive){for(o in i=null,a.breakpoints)a.breakpoints.hasOwnProperty(o)&&(!1===a.originalSettings.mobileFirst?r<a.breakpoints[o]&&(i=a.breakpoints[o]):r>a.breakpoints[o]&&(i=a.breakpoints[o]));null!==i?null!==a.activeBreakpoint?(i!==a.activeBreakpoint||n)&&(a.activeBreakpoint=i,"unslick"===a.breakpointSettings[i]?a.unslick(i):(a.options=t.extend({},a.originalSettings,a.breakpointSettings[i]),!0===e&&(a.currentSlide=a.options.initialSlide),a.refresh(e)),s=i):(a.activeBreakpoint=i,"unslick"===a.breakpointSettings[i]?a.unslick(i):(a.options=t.extend({},a.originalSettings,a.breakpointSettings[i]),!0===e&&(a.currentSlide=a.options.initialSlide),a.refresh(e)),s=i):null!==a.activeBreakpoint&&(a.activeBreakpoint=null,a.options=a.originalSettings,!0===e&&(a.currentSlide=a.options.initialSlide),a.refresh(e),s=i),e||!1===s||a.$slider.trigger("breakpoint",[a,s])}},e.prototype.changeSlide=function(e,n){var o,i,r=this,a=t(e.currentTarget);switch(a.is("a")&&e.preventDefault(),a.is("li")||(a=a.closest("li")),o=r.slideCount%r.options.slidesToScroll!=0?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case"previous":i=0===o?r.options.slidesToScroll:r.options.slidesToShow-o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-i,!1,n);break;case"next":i=0===o?r.options.slidesToScroll:o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+i,!1,n);break;case"index":var s=0===e.data.index?0:e.data.index||a.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(s),!1,n),a.children().trigger("focus");break;default:return}},e.prototype.checkNavigable=function(t){var e,n;if(n=0,t>(e=this.getNavigableIndexes())[e.length-1])t=e[e.length-1];else for(var o in e){if(t<e[o]){t=n;break}n=e[o]}return t},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(t("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",t.proxy(e.interrupt,e,!0)).off("mouseleave.slick",t.proxy(e.interrupt,e,!1)),!0===e.options.accessibility&&e.$dots.off("keydown.slick",e.keyHandler)),e.$slider.off("focus.slick blur.slick"),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow&&e.$prevArrow.off("keydown.slick",e.keyHandler),e.$nextArrow&&e.$nextArrow.off("keydown.slick",e.keyHandler))),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),t(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&t(e.$slideTrack).children().off("click.slick",e.selectHandler),t(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),t(window).off("resize.slick.slick-"+e.instanceUid,e.resize),t("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),t(window).off("load.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",t.proxy(e.interrupt,e,!0)),e.$list.off("mouseleave.slick",t.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var t,e=this;e.options.rows>1&&((t=e.$slides.children().children()).removeAttr("style"),e.$slider.empty().append(t))},e.prototype.clickHandler=function(t){!1===this.shouldClick&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())},e.prototype.destroy=function(e){var n=this;n.autoPlayClear(),n.touchObject={},n.cleanUpEvents(),t(".slick-cloned",n.$slider).detach(),n.$dots&&n.$dots.remove(),n.$prevArrow&&n.$prevArrow.length&&(n.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.prevArrow)&&n.$prevArrow.remove()),n.$nextArrow&&n.$nextArrow.length&&(n.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.nextArrow)&&n.$nextArrow.remove()),n.$slides&&(n.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){t(this).attr("style",t(this).data("originalStyling"))}),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.detach(),n.$list.detach(),n.$slider.append(n.$slides)),n.cleanUpRows(),n.$slider.removeClass("slick-slider"),n.$slider.removeClass("slick-initialized"),n.$slider.removeClass("slick-dotted"),n.unslicked=!0,e||n.$slider.trigger("destroy",[n])},e.prototype.disableTransition=function(t){var e=this,n={};n[e.transitionType]="",!1===e.options.fade?e.$slideTrack.css(n):e.$slides.eq(t).css(n)},e.prototype.fadeSlide=function(t,e){var n=this;!1===n.cssTransitions?(n.$slides.eq(t).css({zIndex:n.options.zIndex}),n.$slides.eq(t).animate({opacity:1},n.options.speed,n.options.easing,e)):(n.applyTransition(t),n.$slides.eq(t).css({opacity:1,zIndex:n.options.zIndex}),e&&setTimeout(function(){n.disableTransition(t),e.call()},n.options.speed))},e.prototype.fadeSlideOut=function(t){var e=this;!1===e.cssTransitions?e.$slides.eq(t).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(t),e.$slides.eq(t).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(t){var e=this;null!==t&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(t).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(n){n.stopImmediatePropagation();var o=t(this);setTimeout(function(){e.options.pauseOnFocus&&(e.focussed=o.is(":focus"),e.autoPlay())},0)})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){return this.currentSlide},e.prototype.getDotCount=function(){var t=this,e=0,n=0,o=0;if(!0===t.options.infinite)if(t.slideCount<=t.options.slidesToShow)++o;else for(;e<t.slideCount;)++o,e=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else if(!0===t.options.centerMode)o=t.slideCount;else if(t.options.asNavFor)for(;e<t.slideCount;)++o,e=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else o=1+Math.ceil((t.slideCount-t.options.slidesToShow)/t.options.slidesToScroll);return o-1},e.prototype.getLeft=function(t){var e,n,o,i,r=this,a=0;return r.slideOffset=0,n=r.$slides.first().outerHeight(!0),!0===r.options.infinite?(r.slideCount>r.options.slidesToShow&&(r.slideOffset=r.slideWidth*r.options.slidesToShow*-1,i=-1,!0===r.options.vertical&&!0===r.options.centerMode&&(2===r.options.slidesToShow?i=-1.5:1===r.options.slidesToShow&&(i=-2)),a=n*r.options.slidesToShow*i),r.slideCount%r.options.slidesToScroll!=0&&t+r.options.slidesToScroll>r.slideCount&&r.slideCount>r.options.slidesToShow&&(t>r.slideCount?(r.slideOffset=(r.options.slidesToShow-(t-r.slideCount))*r.slideWidth*-1,a=(r.options.slidesToShow-(t-r.slideCount))*n*-1):(r.slideOffset=r.slideCount%r.options.slidesToScroll*r.slideWidth*-1,a=r.slideCount%r.options.slidesToScroll*n*-1))):t+r.options.slidesToShow>r.slideCount&&(r.slideOffset=(t+r.options.slidesToShow-r.slideCount)*r.slideWidth,a=(t+r.options.slidesToShow-r.slideCount)*n),r.slideCount<=r.options.slidesToShow&&(r.slideOffset=0,a=0),!0===r.options.centerMode&&r.slideCount<=r.options.slidesToShow?r.slideOffset=r.slideWidth*Math.floor(r.options.slidesToShow)/2-r.slideWidth*r.slideCount/2:!0===r.options.centerMode&&!0===r.options.infinite?r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)-r.slideWidth:!0===r.options.centerMode&&(r.slideOffset=0,r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)),e=!1===r.options.vertical?t*r.slideWidth*-1+r.slideOffset:t*n*-1+a,!0===r.options.variableWidth&&(o=r.slideCount<=r.options.slidesToShow||!1===r.options.infinite?r.$slideTrack.children(".slick-slide").eq(t):r.$slideTrack.children(".slick-slide").eq(t+r.options.slidesToShow),e=!0===r.options.rtl?o[0]?-1*(r.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,!0===r.options.centerMode&&(o=r.slideCount<=r.options.slidesToShow||!1===r.options.infinite?r.$slideTrack.children(".slick-slide").eq(t):r.$slideTrack.children(".slick-slide").eq(t+r.options.slidesToShow+1),e=!0===r.options.rtl?o[0]?-1*(r.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,e+=(r.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(t){return this.options[t]},e.prototype.getNavigableIndexes=function(){var t,e=this,n=0,o=0,i=[];for(!1===e.options.infinite?t=e.slideCount:(n=-1*e.options.slidesToScroll,o=-1*e.options.slidesToScroll,t=2*e.slideCount);n<t;)i.push(n),n=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,n,o=this;return n=!0===o.options.centerMode?o.slideWidth*Math.floor(o.options.slidesToShow/2):0,!0===o.options.swipeToSlide?(o.$slideTrack.find(".slick-slide").each(function(i,r){if(r.offsetLeft-n+t(r).outerWidth()/2>-1*o.swipeLeft)return e=r,!1}),Math.abs(t(e).attr("data-slick-index")-o.currentSlide)||1):o.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(t,e){this.changeSlide({data:{message:"index",index:parseInt(t)}},e)},e.prototype.init=function(e){var n=this;t(n.$slider).hasClass("slick-initialized")||(t(n.$slider).addClass("slick-initialized"),n.buildRows(),n.buildOut(),n.setProps(),n.startLoad(),n.loadSlider(),n.initializeEvents(),n.updateArrows(),n.updateDots(),n.checkResponsive(!0),n.focusHandler()),e&&n.$slider.trigger("init",[n]),!0===n.options.accessibility&&n.initADA(),n.options.autoplay&&(n.paused=!1,n.autoPlay())},e.prototype.initADA=function(){var e=this,n=Math.ceil(e.slideCount/e.options.slidesToShow),o=e.getNavigableIndexes().filter(function(t){return t>=0&&t<e.slideCount});e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(n){var i=o.indexOf(n);t(this).attr({role:"tabpanel",id:"slick-slide"+e.instanceUid+n,tabindex:-1}),-1!==i&&t(this).attr({"aria-describedby":"slick-slide-control"+e.instanceUid+i})}),e.$dots.attr("role","tablist").find("li").each(function(i){var r=o[i];t(this).attr({role:"presentation"}),t(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+e.instanceUid+i,"aria-controls":"slick-slide"+e.instanceUid+r,"aria-label":i+1+" of "+n,"aria-selected":null,tabindex:"-1"})}).eq(e.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var i=e.currentSlide,r=i+e.options.slidesToShow;i<r;i++)e.$slides.eq(i).attr("tabindex",0);e.activateADA()},e.prototype.initArrowEvents=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.off("click.slick").on("click.slick",{message:"next"},t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow.on("keydown.slick",t.keyHandler),t.$nextArrow.on("keydown.slick",t.keyHandler)))},e.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&(t("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.accessibility&&e.$dots.on("keydown.slick",e.keyHandler)),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&t("li",e.$dots).on("mouseenter.slick",t.proxy(e.interrupt,e,!0)).on("mouseleave.slick",t.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on("mouseenter.slick",t.proxy(e.interrupt,e,!0)),e.$list.on("mouseleave.slick",t.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),t(document).on(e.visibilityChange,t.proxy(e.visibility,e)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&t(e.$slideTrack).children().on("click.slick",e.selectHandler),t(window).on("orientationchange.slick.slick-"+e.instanceUid,t.proxy(e.orientationChange,e)),t(window).on("resize.slick.slick-"+e.instanceUid,t.proxy(e.resize,e)),t("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),t(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),t(e.setPosition)},e.prototype.initUI=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.show(),t.$nextArrow.show()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.show()},e.prototype.keyHandler=function(t){var e=this;t.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===t.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:!0===e.options.rtl?"next":"previous"}}):39===t.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:!0===e.options.rtl?"previous":"next"}}))},e.prototype.lazyLoad=function(){function e(e){t("img[data-lazy]",e).each(function(){var e=t(this),n=t(this).attr("data-lazy"),o=t(this).attr("data-srcset"),i=t(this).attr("data-sizes")||r.$slider.attr("data-sizes"),a=document.createElement("img");a.onload=function(){e.animate({opacity:0},100,function(){o&&(e.attr("srcset",o),i&&e.attr("sizes",i)),e.attr("src",n).animate({opacity:1},200,function(){e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),r.$slider.trigger("lazyLoaded",[r,e,n])})},a.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),r.$slider.trigger("lazyLoadError",[r,e,n])},a.src=n})}var n,o,i,r=this;if(!0===r.options.centerMode?!0===r.options.infinite?i=(o=r.currentSlide+(r.options.slidesToShow/2+1))+r.options.slidesToShow+2:(o=Math.max(0,r.currentSlide-(r.options.slidesToShow/2+1)),i=r.options.slidesToShow/2+1+2+r.currentSlide):(o=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide,i=Math.ceil(o+r.options.slidesToShow),!0===r.options.fade&&(o>0&&o--,i<=r.slideCount&&i++)),n=r.$slider.find(".slick-slide").slice(o,i),"anticipated"===r.options.lazyLoad)for(var a=o-1,s=i,l=r.$slider.find(".slick-slide"),c=0;c<r.options.slidesToScroll;c++)a<0&&(a=r.slideCount-1),n=(n=n.add(l.eq(a))).add(l.eq(s)),a--,s++;e(n),r.slideCount<=r.options.slidesToShow?e(r.$slider.find(".slick-slide")):r.currentSlide>=r.slideCount-r.options.slidesToShow?e(r.$slider.find(".slick-cloned").slice(0,r.options.slidesToShow)):0===r.currentSlide&&e(r.$slider.find(".slick-cloned").slice(-1*r.options.slidesToShow))},e.prototype.loadSlider=function(){var t=this;t.setPosition(),t.$slideTrack.css({opacity:1}),t.$slider.removeClass("slick-loading"),t.initUI(),"progressive"===t.options.lazyLoad&&t.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},e.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var t=this;t.autoPlay(),t.options.autoplay=!0,t.paused=!1,t.focussed=!1,t.interrupted=!1},e.prototype.postSlide=function(e){var n=this;n.unslicked||(n.$slider.trigger("afterChange",[n,e]),n.animating=!1,n.slideCount>n.options.slidesToShow&&n.setPosition(),n.swipeLeft=null,n.options.autoplay&&n.autoPlay(),!0===n.options.accessibility&&(n.initADA(),n.options.focusOnChange&&t(n.$slides.get(n.currentSlide)).attr("tabindex",0).focus()))},e.prototype.prev=e.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},e.prototype.preventDefault=function(t){t.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var n,o,i,r,a,s=this,l=t("img[data-lazy]",s.$slider);l.length?(n=l.first(),o=n.attr("data-lazy"),i=n.attr("data-srcset"),r=n.attr("data-sizes")||s.$slider.attr("data-sizes"),(a=document.createElement("img")).onload=function(){i&&(n.attr("srcset",i),r&&n.attr("sizes",r)),n.attr("src",o).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===s.options.adaptiveHeight&&s.setPosition(),s.$slider.trigger("lazyLoaded",[s,n,o]),s.progressiveLazyLoad()},a.onerror=function(){e<3?setTimeout(function(){s.progressiveLazyLoad(e+1)},500):(n.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),s.$slider.trigger("lazyLoadError",[s,n,o]),s.progressiveLazyLoad())},a.src=o):s.$slider.trigger("allImagesLoaded",[s])},e.prototype.refresh=function(e){var n,o,i=this;o=i.slideCount-i.options.slidesToShow,!i.options.infinite&&i.currentSlide>o&&(i.currentSlide=o),i.slideCount<=i.options.slidesToShow&&(i.currentSlide=0),n=i.currentSlide,i.destroy(!0),t.extend(i,i.initials,{currentSlide:n}),i.init(),e||i.changeSlide({data:{message:"index",index:n}},!1)},e.prototype.registerBreakpoints=function(){var e,n,o,i=this,r=i.options.responsive||null;if("array"===t.type(r)&&r.length){for(e in i.respondTo=i.options.respondTo||"window",r)if(o=i.breakpoints.length-1,r.hasOwnProperty(e)){for(n=r[e].breakpoint;o>=0;)i.breakpoints[o]&&i.breakpoints[o]===n&&i.breakpoints.splice(o,1),o--;i.breakpoints.push(n),i.breakpointSettings[n]=r[e].settings}i.breakpoints.sort(function(t,e){return i.options.mobileFirst?t-e:e-t})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&t(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},e.prototype.resize=function(){var e=this;t(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=t(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(t,e,n){var o=this;if(t="boolean"==typeof t?!0===(e=t)?0:o.slideCount-1:!0===e?--t:t,o.slideCount<1||t<0||t>o.slideCount-1)return!1;o.unload(),!0===n?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(t).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,o.reinit()},e.prototype.setCSS=function(t){var e,n,o=this,i={};!0===o.options.rtl&&(t=-t),e="left"==o.positionProp?Math.ceil(t)+"px":"0px",n="top"==o.positionProp?Math.ceil(t)+"px":"0px",i[o.positionProp]=t,!1===o.transformsEnabled?o.$slideTrack.css(i):(i={},!1===o.cssTransitions?(i[o.animType]="translate("+e+", "+n+")",o.$slideTrack.css(i)):(i[o.animType]="translate3d("+e+", "+n+", 0px)",o.$slideTrack.css(i)))},e.prototype.setDimensions=function(){var t=this;!1===t.options.vertical?!0===t.options.centerMode&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),!0===t.options.centerMode&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),!1===t.options.vertical&&!1===t.options.variableWidth?(t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length))):!0===t.options.variableWidth?t.$slideTrack.width(5e3*t.slideCount):(t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length)));var e=t.$slides.first().outerWidth(!0)-t.$slides.first().width();!1===t.options.variableWidth&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-e)},e.prototype.setFade=function(){var e,n=this;n.$slides.each(function(o,i){e=n.slideWidth*o*-1,!0===n.options.rtl?t(i).css({position:"relative",right:e,top:0,zIndex:n.options.zIndex-2,opacity:0}):t(i).css({position:"relative",left:e,top:0,zIndex:n.options.zIndex-2,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:n.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var t=this;if(1===t.options.slidesToShow&&!0===t.options.adaptiveHeight&&!1===t.options.vertical){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.css("height",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,n,o,i,r,a=this,s=!1;if("object"===t.type(arguments[0])?(o=arguments[0],s=arguments[1],r="multiple"):"string"===t.type(arguments[0])&&(o=arguments[0],i=arguments[1],s=arguments[2],"responsive"===arguments[0]&&"array"===t.type(arguments[1])?r="responsive":void 0!==arguments[1]&&(r="single")),"single"===r)a.options[o]=i;else if("multiple"===r)t.each(o,function(t,e){a.options[t]=e});else if("responsive"===r)for(n in i)if("array"!==t.type(a.options.responsive))a.options.responsive=[i[n]];else{for(e=a.options.responsive.length-1;e>=0;)a.options.responsive[e].breakpoint===i[n].breakpoint&&a.options.responsive.splice(e,1),e--;a.options.responsive.push(i[n])}s&&(a.unload(),a.reinit())},e.prototype.setPosition=function(){var t=this;t.setDimensions(),t.setHeight(),!1===t.options.fade?t.setCSS(t.getLeft(t.currentSlide)):t.setFade(),t.$slider.trigger("setPosition",[t])},e.prototype.setProps=function(){var t=this,e=document.body.style;t.positionProp=!0===t.options.vertical?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||!0===t.options.useCSS&&(t.cssTransitions=!0),t.options.fade&&("number"==typeof t.options.zIndex?t.options.zIndex<3&&(t.options.zIndex=3):t.options.zIndex=t.defaults.zIndex),void 0!==e.OTransform&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(t.animType=!1)),void 0!==e.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.msTransform&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",void 0===e.msTransform&&(t.animType=!1)),void 0!==e.transform&&!1!==t.animType&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=t.options.useTransform&&null!==t.animType&&!1!==t.animType},e.prototype.setSlideClasses=function(t){var e,n,o,i,r=this;if(n=r.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),r.$slides.eq(t).addClass("slick-current"),!0===r.options.centerMode){var a=r.options.slidesToShow%2==0?1:0;e=Math.floor(r.options.slidesToShow/2),!0===r.options.infinite&&(t>=e&&t<=r.slideCount-1-e?r.$slides.slice(t-e+a,t+e+1).addClass("slick-active").attr("aria-hidden","false"):(o=r.options.slidesToShow+t,n.slice(o-e+1+a,o+e+2).addClass("slick-active").attr("aria-hidden","false")),0===t?n.eq(n.length-1-r.options.slidesToShow).addClass("slick-center"):t===r.slideCount-1&&n.eq(r.options.slidesToShow).addClass("slick-center")),r.$slides.eq(t).addClass("slick-center")}else t>=0&&t<=r.slideCount-r.options.slidesToShow?r.$slides.slice(t,t+r.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=r.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(i=r.slideCount%r.options.slidesToShow,o=!0===r.options.infinite?r.options.slidesToShow+t:t,r.options.slidesToShow==r.options.slidesToScroll&&r.slideCount-t<r.options.slidesToShow?n.slice(o-(r.options.slidesToShow-i),o+i).addClass("slick-active").attr("aria-hidden","false"):n.slice(o,o+r.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==r.options.lazyLoad&&"anticipated"!==r.options.lazyLoad||r.lazyLoad()},e.prototype.setupInfinite=function(){var e,n,o,i=this;if(!0===i.options.fade&&(i.options.centerMode=!1),!0===i.options.infinite&&!1===i.options.fade&&(n=null,i.slideCount>i.options.slidesToShow)){for(o=!0===i.options.centerMode?i.options.slidesToShow+1:i.options.slidesToShow,e=i.slideCount;e>i.slideCount-o;e-=1)n=e-1,t(i.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n-i.slideCount).prependTo(i.$slideTrack).addClass("slick-cloned");for(e=0;e<o+i.slideCount;e+=1)n=e,t(i.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n+i.slideCount).appendTo(i.$slideTrack).addClass("slick-cloned");i.$slideTrack.find(".slick-cloned").find("[id]").each(function(){t(this).attr("id","")})}},e.prototype.interrupt=function(t){t||this.autoPlay(),this.interrupted=t},e.prototype.selectHandler=function(e){var n=this,o=t(e.target).is(".slick-slide")?t(e.target):t(e.target).parents(".slick-slide"),i=parseInt(o.attr("data-slick-index"));i||(i=0),n.slideCount<=n.options.slidesToShow?n.slideHandler(i,!1,!0):n.slideHandler(i)},e.prototype.slideHandler=function(t,e,n){var o,i,r,a,s,l=null,c=this;if(e=e||!1,!(!0===c.animating&&!0===c.options.waitForAnimate||!0===c.options.fade&&c.currentSlide===t))if(!1===e&&c.asNavFor(t),o=t,l=c.getLeft(o),a=c.getLeft(c.currentSlide),c.currentLeft=null===c.swipeLeft?a:c.swipeLeft,!1===c.options.infinite&&!1===c.options.centerMode&&(t<0||t>c.getDotCount()*c.options.slidesToScroll))!1===c.options.fade&&(o=c.currentSlide,!0!==n?c.animateSlide(a,function(){c.postSlide(o)}):c.postSlide(o));else if(!1===c.options.infinite&&!0===c.options.centerMode&&(t<0||t>c.slideCount-c.options.slidesToScroll))!1===c.options.fade&&(o=c.currentSlide,!0!==n?c.animateSlide(a,function(){c.postSlide(o)}):c.postSlide(o));else{if(c.options.autoplay&&clearInterval(c.autoPlayTimer),i=o<0?c.slideCount%c.options.slidesToScroll!=0?c.slideCount-c.slideCount%c.options.slidesToScroll:c.slideCount+o:o>=c.slideCount?c.slideCount%c.options.slidesToScroll!=0?0:o-c.slideCount:o,c.animating=!0,c.$slider.trigger("beforeChange",[c,c.currentSlide,i]),r=c.currentSlide,c.currentSlide=i,c.setSlideClasses(c.currentSlide),c.options.asNavFor&&(s=(s=c.getNavTarget()).slick("getSlick")).slideCount<=s.options.slidesToShow&&s.setSlideClasses(c.currentSlide),c.updateDots(),c.updateArrows(),!0===c.options.fade)return!0!==n?(c.fadeSlideOut(r),c.fadeSlide(i,function(){c.postSlide(i)})):c.postSlide(i),void c.animateHeight();!0!==n?c.animateSlide(l,function(){c.postSlide(i)}):c.postSlide(i)}},e.prototype.startLoad=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var t,e,n,o,i=this;return t=i.touchObject.startX-i.touchObject.curX,e=i.touchObject.startY-i.touchObject.curY,n=Math.atan2(e,t),(o=Math.round(180*n/Math.PI))<0&&(o=360-Math.abs(o)),o<=45&&o>=0?!1===i.options.rtl?"left":"right":o<=360&&o>=315?!1===i.options.rtl?"left":"right":o>=135&&o<=225?!1===i.options.rtl?"right":"left":!0===i.options.verticalSwiping?o>=35&&o<=135?"down":"up":"vertical"},e.prototype.swipeEnd=function(t){var e,n,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1,!1;if(o.interrupted=!1,o.shouldClick=!(o.touchObject.swipeLength>10),void 0===o.touchObject.curX)return!1;if(!0===o.touchObject.edgeHit&&o.$slider.trigger("edge",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(n=o.swipeDirection()){case"left":case"down":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case"right":case"up":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}"vertical"!=n&&(o.slideHandler(e),o.touchObject={},o.$slider.trigger("swipe",[o,n]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},e.prototype.swipeHandler=function(t){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==t.type.indexOf("mouse")))switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},e.prototype.swipeMove=function(t){var e,n,o,i,r,a,s=this;return r=void 0!==t.originalEvent?t.originalEvent.touches:null,!(!s.dragging||s.scrolling||r&&1!==r.length)&&(e=s.getLeft(s.currentSlide),s.touchObject.curX=void 0!==r?r[0].pageX:t.clientX,s.touchObject.curY=void 0!==r?r[0].pageY:t.clientY,s.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(s.touchObject.curX-s.touchObject.startX,2))),a=Math.round(Math.sqrt(Math.pow(s.touchObject.curY-s.touchObject.startY,2))),!s.options.verticalSwiping&&!s.swiping&&a>4?(s.scrolling=!0,!1):(!0===s.options.verticalSwiping&&(s.touchObject.swipeLength=a),n=s.swipeDirection(),void 0!==t.originalEvent&&s.touchObject.swipeLength>4&&(s.swiping=!0,t.preventDefault()),i=(!1===s.options.rtl?1:-1)*(s.touchObject.curX>s.touchObject.startX?1:-1),!0===s.options.verticalSwiping&&(i=s.touchObject.curY>s.touchObject.startY?1:-1),o=s.touchObject.swipeLength,s.touchObject.edgeHit=!1,!1===s.options.infinite&&(0===s.currentSlide&&"right"===n||s.currentSlide>=s.getDotCount()&&"left"===n)&&(o=s.touchObject.swipeLength*s.options.edgeFriction,s.touchObject.edgeHit=!0),!1===s.options.vertical?s.swipeLeft=e+o*i:s.swipeLeft=e+o*(s.$list.height()/s.listWidth)*i,!0===s.options.verticalSwiping&&(s.swipeLeft=e+o*i),!0!==s.options.fade&&!1!==s.options.touchMove&&(!0===s.animating?(s.swipeLeft=null,!1):void s.setCSS(s.swipeLeft))))},e.prototype.swipeStart=function(t){var e,n=this;if(n.interrupted=!0,1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow)return n.touchObject={},!1;void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==e?e.pageX:t.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==e?e.pageY:t.clientY,n.dragging=!0},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var t=this;null!==t.$slidesCache&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.appendTo(t.$slideTrack),t.reinit())},e.prototype.unload=function(){var e=this;t(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(t){var e=this;e.$slider.trigger("unslick",[e,t]),e.destroy()},e.prototype.updateArrows=function(){var t=this;Math.floor(t.options.slidesToShow/2),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&!1===t.options.centerMode?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&!0===t.options.centerMode&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},e.prototype.updateDots=function(){var t=this;null!==t.$dots&&(t.$dots.find("li").removeClass("slick-active").end(),t.$dots.find("li").eq(Math.floor(t.currentSlide/t.options.slidesToScroll)).addClass("slick-active"))},e.prototype.visibility=function(){var t=this;t.options.autoplay&&(document[t.hidden]?t.interrupted=!0:t.interrupted=!1)},t.fn.slick=function(){var t,n,o=this,i=arguments[0],r=Array.prototype.slice.call(arguments,1),a=o.length;for(t=0;t<a;t++)if("object"==typeof i||void 0===i?o[t].slick=new e(o[t],i):n=o[t].slick[i].apply(o[t].slick,r),void 0!==n)return n;return o}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.L={})}(this,function(t){"use strict";function e(t){for(var e,n,o=1,i=arguments.length;o<i;o++)for(e in n=arguments[o])t[e]=n[e];return t}var n=Object.create||function(t){return o.prototype=t,new o};function o(){}function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var o=n.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(n.call(arguments)):arguments)}}var r=0;function a(t){return t._leaflet_id=t._leaflet_id||++r,t._leaflet_id}function s(t,e,n){var o,i,r=function(){o=!1,i&&(a.apply(n,i),i=!1)},a=function(){o?i=arguments:(t.apply(n,arguments),setTimeout(r,e),o=!0)};return a}function l(t,e,n){var o=e[1],i=e[0],r=o-i;return t===o&&n?t:((t-i)%r+r)%r+i}function c(){return!1}function u(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function d(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function f(t){return d(t).split(/\s+/)}function h(t,e){for(var o in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[o]=e[o];return t.options}function p(t,e,n){var o=[];for(var i in t)o.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+o.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,function(t,n){var o=e[n];if(void 0===o)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function C(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var x=window.requestAnimationFrame||b("RequestAnimationFrame")||C,S=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function T(t,e,n){if(!n||x!==C)return x.call(window,i(t,e));t.call(e)}function k(t){t&&S.call(window,t)}var E={extend:e,create:n,bind:i,lastId:r,stamp:a,throttle:s,wrapNum:l,falseFn:c,formatNum:u,trim:d,splitWords:f,setOptions:h,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:x,cancelFn:S,requestAnimFrame:T,cancelAnimFrame:k};function A(){}A.extend=function(t){function o(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var i=o.__super__=this.prototype,r=n(i);for(var a in(r.constructor=o).prototype=r,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(o[a]=this[a]);return t.statics&&(e(o,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=e(n(r.options),t.options)),e(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},o},A.include=function(t){return e(this.prototype,t),this},A.mergeOptions=function(t){return e(this.prototype.options,t),this},A.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var P={on:function(t,e,n){if("object"==typeof t)for(var o in t)this._on(o,t[o],e);else for(var i=0,r=(t=f(t)).length;i<r;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var o in t)this._off(o,t[o],e);else for(var i=0,r=(t=f(t)).length;i<r;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var o=this._events[t];o||(o=[],this._events[t]=o),n===this&&(n=void 0);for(var i={fn:e,ctx:n},r=o,a=0,s=r.length;a<s;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(i)},_off:function(t,e,n){var o,i,r;if(this._events&&(o=this._events[t]))if(e){if(n===this&&(n=void 0),o)for(i=0,r=o.length;i<r;i++){var a=o[i];if(a.ctx===n&&a.fn===e)return a.fn=c,this._firingCount&&(this._events[t]=o=o.slice()),void o.splice(i,1)}}else{for(i=0,r=o.length;i<r;i++)o[i].fn=c;delete this._events[t]}},fire:function(t,n,o){if(!this.listens(t,o))return this;var i=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var a=0,s=r.length;a<s;a++){var l=r[a];l.fn.call(l.ctx||this,i)}this._firingCount--}}return o&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var r=i(function(){this.off(t,e,n).off(t,r,n)},this);return this.on(t,e,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var N=A.extend(P);function O(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var D=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function R(t,e,n){return t instanceof O?t:v(t)?new O(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new O(t.x,t.y):new O(t,e,n)}function B(t,e){if(t)for(var n=e?[t,e]:t,o=0,i=n.length;o<i;o++)this.extend(n[o])}function I(t,e){return!t||t instanceof B?t:new B(t,e)}function M(t,e){if(t)for(var n=e?[t,e]:t,o=0,i=n.length;o<i;o++)this.extend(n[o])}function z(t,e){return t instanceof M?t:new M(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function j(t,e,n){return t instanceof F?t:v(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new O(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new O(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},B.prototype={extend:function(t){return t=R(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t=("number"==typeof t[0]||t instanceof O?R:I)(t))instanceof B?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=I(t);var e=this.min,n=this.max,o=t.min,i=t.max,r=i.x>=e.x&&o.x<=n.x,a=i.y>=e.y&&o.y<=n.y;return r&&a},overlaps:function(t){t=I(t);var e=this.min,n=this.max,o=t.min,i=t.max,r=i.x>e.x&&o.x<n.x,a=i.y>e.y&&o.y<n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},M.prototype={extend:function(t){var e,n,o=this._southWest,i=this._northEast;if(t instanceof F)n=e=t;else{if(!(t instanceof M))return t?this.extend(j(t)||z(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return o||i?(o.lat=Math.min(e.lat,o.lat),o.lng=Math.min(e.lng,o.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,o=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new M(new F(e.lat-o,e.lng-i),new F(n.lat+o,n.lng+i))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=("number"==typeof t[0]||t instanceof F||"lat"in t?j:z)(t);var e,n,o=this._southWest,i=this._northEast;return t instanceof M?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=o.lat&&n.lat<=i.lat&&e.lng>=o.lng&&n.lng<=i.lng},intersects:function(t){t=z(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),i=t.getNorthEast(),r=i.lat>=e.lat&&o.lat<=n.lat,a=i.lng>=e.lng&&o.lng<=n.lng;return r&&a},overlaps:function(t){t=z(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),i=t.getNorthEast(),r=i.lat>e.lat&&o.lat<n.lat,a=i.lng>e.lng&&o.lng<n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var H,U={latLngToPoint:function(t,e){var n=this.projection.project(t),o=this.scale(e);return this.transformation._transform(n,o)},pointToLatLng:function(t,e){var n=this.scale(e),o=this.transformation.untransform(t,n);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new B(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!(F.prototype={equals:function(t,e){return!!t&&(t=j(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return $.distance(this,j(t))},wrap:function(){return $.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return z([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),o=e.lat-n.lat,i=e.lng-n.lng;if(0==o&&0==i)return t;var r=t.getSouthWest(),a=t.getNorthEast();return new M(new F(r.lat-o,r.lng-i),new F(a.lat-o,a.lng-i))}},$=e({},U,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,o=t.lat*n,i=e.lat*n,r=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=r*r+Math.cos(o)*Math.cos(i)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),Z=6378137,q={R:Z,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,t.lat),-n),i=Math.sin(o*e);return new O(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:new B([-(H=Z*Math.PI),-H],[H,H])};function W(t,e,n,o){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=o}function V(t,e,n,o){return new W(t,e,n,o)}W.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new O((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var G,K=e({},$,{code:"EPSG:3857",projection:q,transformation:V(G=.5/(Math.PI*q.R),.5,-G,.5)}),X=e({},K,{code:"EPSG:900913"});function Y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t,e){for(var n,o,i,r,a="",s=0,l=t.length;s<l;s++){for(n=0,o=(i=t[s]).length;n<o;n++)a+=(n?"L":"M")+(r=i[n]).x+" "+r.y;a+=e?Nt?"z":"x":""}return a||"M0 0"}var Q=document.documentElement.style,tt="ActiveXObject"in window,et=tt&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),ot=Dt("webkit"),it=Dt("android"),rt=Dt("android 2")||Dt("android 3"),at=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=it&&Dt("Google")&&at<537&&!("AudioNode"in window),lt=!!window.opera,ct=!nt&&Dt("chrome"),ut=Dt("gecko")&&!ot&&!lt&&!tt,dt=!ct&&Dt("safari"),ft=Dt("phantom"),ht="OTransition"in Q,pt=0===navigator.platform.indexOf("Win"),mt=tt&&"transition"in Q,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,vt="MozPerspective"in Q,yt=!window.L_DISABLE_3D&&(mt||gt||vt)&&!ht&&!ft,_t="undefined"!=typeof orientation||Dt("mobile"),bt=_t&&ot,wt=_t&&gt,Ct=!window.PointerEvent&&window.MSPointerEvent,xt=!(!window.PointerEvent&&!Ct),St=!window.L_NO_TOUCH&&(xt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Tt=_t&&lt,kt=_t&&ut,Et=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),At=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t}(),Pt=!!document.createElement("canvas").getContext,Nt=!(!document.createElementNS||!Y("svg").createSVGRect),Ot=!Nt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Dt(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var Lt={ie:tt,ielt9:et,edge:nt,webkit:ot,android:it,android23:rt,androidStock:st,opera:lt,chrome:ct,gecko:ut,safari:dt,phantom:ft,opera12:ht,win:pt,ie3d:mt,webkit3d:gt,gecko3d:vt,any3d:yt,mobile:_t,mobileWebkit:bt,mobileWebkit3d:wt,msPointer:Ct,pointer:xt,touch:St,mobileOpera:Tt,mobileGecko:kt,retina:Et,passiveEvents:At,canvas:Pt,svg:Nt,vml:Ot},Rt=Ct?"MSPointerDown":"pointerdown",Bt=Ct?"MSPointerMove":"pointermove",It=Ct?"MSPointerUp":"pointerup",Mt=Ct?"MSPointerCancel":"pointercancel",zt={},Ft=!1;function jt(t,e,n,o){function r(t){Zt(t,s)}var a,s,l,c,u,d,f,h;function p(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Zt(t,c)}return"touchstart"===e?(u=t,d=n,f=o,h=i(function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Me(t),Zt(t,d)}),u["_leaflet_touchstart"+f]=h,u.addEventListener(Rt,h,!1),Ft||(document.addEventListener(Rt,Ht,!0),document.addEventListener(Bt,Ut,!0),document.addEventListener(It,$t,!0),document.addEventListener(Mt,$t,!0),Ft=!0)):"touchmove"===e?(c=n,(l=t)["_leaflet_touchmove"+o]=p,l.addEventListener(Bt,p,!1)):"touchend"===e&&(s=n,(a=t)["_leaflet_touchend"+o]=r,a.addEventListener(It,r,!1),a.addEventListener(Mt,r,!1)),this}function Ht(t){zt[t.pointerId]=t}function Ut(t){zt[t.pointerId]&&(zt[t.pointerId]=t)}function $t(t){delete zt[t.pointerId]}function Zt(t,e){for(var n in t.touches=[],zt)t.touches.push(zt[n]);t.changedTouches=[t],e(t)}var qt,Wt,Vt,Gt,Kt,Xt,Yt=Ct?"MSPointerDown":xt?"pointerdown":"touchstart",Jt=Ct?"MSPointerUp":xt?"pointerup":"touchend",Qt="_leaflet_",te=ge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ee=ge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ne="webkitTransition"===ee||"OTransition"===ee?ee+"End":"transitionend";function oe(t){return"string"==typeof t?document.getElementById(t):t}function ie(t,e){var n,o=t.style[e]||t.currentStyle&&t.currentStyle[e];return o&&"auto"!==o||!document.defaultView||(o=(n=document.defaultView.getComputedStyle(t,null))?n[e]:null),"auto"===o?null:o}function re(t,e,n){var o=document.createElement(t);return o.className=e||"",n&&n.appendChild(o),o}function ae(t){var e=t.parentNode;e&&e.removeChild(t)}function se(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ce(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ue(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=pe(t);return 0<n.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function de(t,e){var n;if(void 0!==t.classList)for(var o=f(e),i=0,r=o.length;i<r;i++)t.classList.add(o[i]);else ue(t,e)||he(t,((n=pe(t))?n+" ":"")+e)}function fe(t,e){void 0!==t.classList?t.classList.remove(e):he(t,d((" "+pe(t)+" ").replace(" "+e+" "," ")))}function he(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function pe(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,o="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(o)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}(t,e)}function ge(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ve(t,e,n){var o=e||new O(0,0);t.style[te]=(mt?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(n?" scale("+n+")":"")}function ye(t,e){t._leaflet_pos=e,yt?ve(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function _e(t){return t._leaflet_pos||new O(0,0)}function be(){Ee(window,"dragstart",Me)}function we(){Pe(window,"dragstart",Me)}function Ce(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(xe(),Xt=(Kt=t).style.outline,t.style.outline="none",Ee(window,"keydown",xe))}function xe(){Kt&&(Kt.style.outline=Xt,Xt=Kt=void 0,Pe(window,"keydown",xe))}function Se(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function Te(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}Gt="onselectstart"in document?(Vt=function(){Ee(window,"selectstart",Me)},function(){Pe(window,"selectstart",Me)}):(Wt=ge(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),Vt=function(){var t;Wt&&(t=document.documentElement.style,qt=t[Wt],t[Wt]="none")},function(){Wt&&(document.documentElement.style[Wt]=qt,qt=void 0)});var ke={TRANSFORM:te,TRANSITION:ee,TRANSITION_END:ne,get:oe,getStyle:ie,create:re,remove:ae,empty:se,toFront:le,toBack:ce,hasClass:ue,addClass:de,removeClass:fe,setClass:he,getClass:pe,setOpacity:me,testProp:ge,setTransform:ve,setPosition:ye,getPosition:_e,disableTextSelection:Vt,enableTextSelection:Gt,disableImageDrag:be,enableImageDrag:we,preventOutline:Ce,restoreOutline:xe,getSizedParentNode:Se,getScale:Te};function Ee(t,e,n,o){if("object"==typeof e)for(var i in e)De(t,i,e[i],n);else for(var r=0,a=(e=f(e)).length;r<a;r++)De(t,e[r],n,o);return this}var Ae="_leaflet_events";function Pe(t,e,n,o){if("object"==typeof e)for(var i in e)Le(t,i,e[i],n);else if(e)for(var r=0,a=(e=f(e)).length;r<a;r++)Le(t,e[r],n,o);else{for(var s in t[Ae])Le(t,s,t[Ae][s]);delete t[Ae]}return this}function Ne(){return xt&&!nt&&!dt}var Oe={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function De(t,e,n,o){var i=e+a(n)+(o?"_"+a(o):"");if(t[Ae]&&t[Ae][i])return this;var r,s,l,c,u,d,f=function(e){return n.call(o||t,e||window.event)},h=f;function p(t){if(xt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(1<t.touches.length)return;var e=Date.now(),n=e-(c||e);u=t.touches?t.touches[0]:t,d=0<n&&n<=250,c=e}function m(t){if(d&&!u.cancelBubble){if(xt){if("mouse"===t.pointerType)return;var e,n,o={};for(n in u)e=u[n],o[n]=e&&e.bind?e.bind(u):e;u=o}u.type="dblclick",u.button=0,s(u),c=null}}xt&&0===e.indexOf("touch")?jt(t,e,f,i):St&&"dblclick"===e&&!Ne()?(s=f,d=!1,(r=t)[Qt+Yt+(l=i)]=p,r[Qt+Jt+l]=m,r[Qt+"dblclick"+l]=s,r.addEventListener(Yt,p,!!At&&{passive:!1}),r.addEventListener(Jt,m,!!At&&{passive:!1}),r.addEventListener("dblclick",s,!1)):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Oe[e]||e,f,!!At&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(f=function(e){e=e||window.event,qe(t,e)&&h(e)},t.addEventListener(Oe[e],f,!1)):t.addEventListener(e,h,!1):"attachEvent"in t&&t.attachEvent("on"+e,f),t[Ae]=t[Ae]||{},t[Ae][i]=f}function Le(t,e,n,o){var i,r,s,l,c,u,d,f,h=e+a(n)+(o?"_"+a(o):""),p=t[Ae]&&t[Ae][h];if(!p)return this;xt&&0===e.indexOf("touch")?(f=(u=t)["_leaflet_"+(d=e)+h],"touchstart"===d?u.removeEventListener(Rt,f,!1):"touchmove"===d?u.removeEventListener(Bt,f,!1):"touchend"===d&&(u.removeEventListener(It,f,!1),u.removeEventListener(Mt,f,!1))):St&&"dblclick"===e&&!Ne()?(s=(i=t)[Qt+Yt+(r=h)],l=i[Qt+Jt+r],c=i[Qt+"dblclick"+r],i.removeEventListener(Yt,s,!!At&&{passive:!1}),i.removeEventListener(Jt,l,!!At&&{passive:!1}),i.removeEventListener("dblclick",c,!1)):"removeEventListener"in t?t.removeEventListener(Oe[e]||e,p,!1):"detachEvent"in t&&t.detachEvent("on"+e,p),t[Ae][h]=null}function Re(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ze(t),this}function Be(t){return De(t,"wheel",Re),this}function Ie(t){return Ee(t,"mousedown touchstart dblclick",Re),De(t,"click",$e),this}function Me(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ze(t){return Me(t),Re(t),this}function Fe(t,e){if(!e)return new O(t.clientX,t.clientY);var n=Te(e),o=n.boundingClientRect;return new O((t.clientX-o.left)/n.x-e.clientLeft,(t.clientY-o.top)/n.y-e.clientTop)}var je=pt&&ct?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function He(t){return nt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/je:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ue={};function $e(t){Ue[t.type]=!0}function Ze(t){var e=Ue[t.type];return Ue[t.type]=!1,e}function qe(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var We={on:Ee,off:Pe,stopPropagation:Re,disableScrollPropagation:Be,disableClickPropagation:Ie,preventDefault:Me,stop:ze,getMousePosition:Fe,getWheelDelta:He,fakeStop:$e,skipped:Ze,isExternalTarget:qe,addListener:Ee,removeListener:Pe},Ve=N.extend({run:function(t,e,n,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=_e(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(t){var e=new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ye(this._el,n),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ge=N.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=h(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(j(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ee&&yt&&!Tt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,ne,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,o){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(j(t),n,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&!0!==o&&(void 0!==o.animate&&(o.zoom=e({animate:o.animate},o.zoom),o.pan=e({animate:o.animate,duration:o.duration},o.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,o.zoom):this._tryAnimatedPan(t,o.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(yt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(yt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var o=this.getZoomScale(e),i=this.getSize().divideBy(2),r=(t instanceof O?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/o),a=this.containerPointToLatLng(i.add(r));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():z(t);var n=R(e.paddingTopLeft||e.padding||[0,0]),o=R(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(o));if((i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var r=o.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(r),i),zoom:i}},fitBounds:function(t,e){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){return e=e||{},(t=R(t).round()).x||t.y?(!0===e.animate||this.getSize().contains(t)?(this._panAnim||(this._panAnim=new Ve,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate?(de(this._mapPane,"leaflet-pan-anim"),n=this._getMapPanePos().subtract(t).round(),this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)):(this._rawPanBy(t),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this):this.fire("moveend");var n},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!yt)return this.setView(t,e,n);this._stop();var o=this.project(this.getCenter()),i=this.project(t),r=this.getSize(),a=this._zoom;t=j(t),e=void 0===e?a:e;var s=Math.max(r.x,r.y),l=s*this.getZoomScale(a,e),c=i.distanceTo(o)||1,u=1.42,d=u*u;function f(t){var e=(l*l-s*s+(t?-1:1)*d*d*c*c)/(2*(t?l:s)*d*c),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var m=f(0);function g(t){return s*(p(m)*(h(e=m+u*t)/p(e))-h(m))/d;var e}var v=Date.now(),y=(f(1)-m)/u,_=n.duration?1e3*n.duration:1e3*y*.8;return this._moveStart(!0,n.noMoveStart),function n(){var r,l,d=(Date.now()-v)/_,f=(r=d,(1-Math.pow(1-r,1.5))*y);d<=1?(this._flyToFrame=T(n,this),this._move(this.unproject(o.add(i.subtract(o).multiplyBy(g(f)/c)),a),this.getScaleZoom(s/(l=f,s*(p(m)/p(m+u*l))),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),o=this._limitCenter(n,this._zoom,z(t));return n.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n,o,i=R((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=R(e.paddingBottomRight||e.padding||[0,0]),a=this.getCenter(),s=this.project(a),l=this.project(t),c=this.getPixelBounds(),u=c.getSize().divideBy(2),d=I([c.min.add(i),c.max.subtract(r)]);return d.contains(l)||(this._enforcingBounds=!0,n=s.subtract(l),o=R(l.x+n.x,l.y+n.y),(l.x<d.min.x||l.x>d.max.x)&&(o.x=s.x-n.x,0<n.x?o.x+=u.x-i.x:o.x-=u.x-r.x),(l.y<d.min.y||l.y>d.max.y)&&(o.y=s.y-n.y,0<n.y?o.y+=u.y-i.y:o.y-=u.y-r.y),this.panTo(this.unproject(o),e),this._enforcingBounds=!1),this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),r=n.divideBy(2).round(),a=o.divideBy(2).round(),s=r.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=i(this._handleGeolocationResponse,this),o=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,o,t):navigator.geolocation.getCurrentPosition(n,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e,n=new F(t.coords.latitude,t.coords.longitude),o=n.toBounds(2*t.coords.accuracy),i=this._locateOptions;i.setView&&(e=this.getBoundsZoom(o),this.setView(n,i.maxZoom?Math.min(e,i.maxZoom):e));var r={latlng:n,bounds:o,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(r[a]=t.coords[a]);this.fire("locationfound",r)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ae(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=re("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new M(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=z(t),n=R(n||[0,0]);var o=this.getZoom()||0,i=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),c=I(this.project(s,o),this.project(a,o)).getSize(),u=yt?this.options.zoomSnap:1,d=l.x/c.x,f=l.y/c.y,h=e?Math.max(d,f):Math.min(d,f);o=this.getScaleZoom(h,o);return u&&(o=Math.round(o/(u/100))*(u/100),o=e?Math.ceil(o/u)*u:Math.floor(o/u)*u),Math.max(i,Math.min(r,o))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new B(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var o=n.zoom(t*n.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(j(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(j(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,e){return this.options.crs.distance(j(t),j(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return Fe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=oe(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ee(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&yt,de(t,"leaflet-container"+(St?" leaflet-touch":"")+(Et?" leaflet-retina":"")+(et?" leaflet-oldie":"")+(dt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ie(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ye(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(de(t.markerPane,"leaflet-zoom-hide"),de(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ye(this._mapPane,new O(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var o=this._zoom!==e;this._moveStart(o,!1)._move(t,e)._moveEnd(o),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ye(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Pe:Ee;e((this._targets[a(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),yt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=T(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,o=[],i="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,s=!1;r;){if((n=this._targets[a(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!qe(r,t))break;if(o.push(n),i)break}if(r===this._container)break;r=r.parentNode}return o.length||s||i||!qe(r,t)||(o=[this]),o},_handleDOMEvent:function(t){var e;this._loaded&&!Ze(t)&&("mousedown"!==(e=t.type)&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Ce(t.target||t.srcElement),this._fireDOMEvent(t,e))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,o){var i;if("click"===t.type&&((i=e({},t)).type="preclick",this._fireDOMEvent(i,i.type,o)),!t._stopped&&(o=(o||[]).concat(this._findEventTargets(t,n))).length){var r=o[0];"contextmenu"===n&&r.listens(n,!0)&&Me(t);var a,s={originalEvent:t};"keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type&&(a=r.getLatLng&&(!r._radius||r._radius<=10),s.containerPoint=a?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?r.getLatLng():this.layerPointToLatLng(s.layerPoint));for(var l=0;l<o.length;l++)if(o[l].fire(n,s,!0),s.originalEvent._stopped||!1===o[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return _e(this._mapPane)||new O(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return I([this.project(t.getSouthWest(),e)._subtract(o),this.project(t.getNorthWest(),e)._subtract(o),this.project(t.getSouthEast(),e)._subtract(o),this.project(t.getNorthEast(),e)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var o=this.project(t,e),i=this.getSize().divideBy(2),r=new B(o.subtract(i),o.add(i)),a=this._getBoundsOffset(r,n,e);return a.round().equals([0,0])?t:this.unproject(o.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),o=new B(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,n){var o=I(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=o.min.subtract(t.min),r=o.max.subtract(t.max);return new O(this._rebound(i.x,-r.x),this._rebound(i.y,-r.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),o=yt?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){fe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=te,n=this._proxy.style[e];ve(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ve(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/o);return!(!0!==n.animate&&!this.getSize().contains(i)||(T(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,o){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,de(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&fe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),T(function(){this._moveEnd(!0)},this))}});function Ke(t){return new Xe(t)}var Xe=A.extend({options:{position:"topright"},initialize:function(t){h(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),o=t._controlCorners[n];return de(e,"leaflet-control"),-1!==n.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}});Ge.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=re("div",e+"control-container",this._container);function o(o,i){var r=e+o+" "+e+i;t[o+i]=re("div",r,n)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ae(this._controlCorners[t]);ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ye=Xe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,o){return n<o?-1:o<n?1:0}},initialize:function(t,e,n){for(var o in h(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Xe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){de(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(de(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):fe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return fe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=re("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ie(e),Be(e);var o=this._section=re("section",t+"-list");n&&(this._map.on("click",this.collapse,this),it||Ee(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=re("a",t+"-toggle",e);i.href="#",i.title="Layers",St?(Ee(i,"click",ze),Ee(i,"click",this.expand,this)):Ee(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=re("div",t+"-base",o),this._separator=re("div",t+"-separator",o),this._overlaysList=re("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;se(this._baseLayersList),se(this._overlaysList),this._layerControlInputs=[];for(var t,e,n,o=0,i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<o,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var e,n=document.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers_"+a(this),o),this._layerControlInputs.push(e),e.layerId=a(t.layer),Ee(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var r=document.createElement("div");return n.appendChild(r),r.appendChild(e),r.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,o=[],i=[];this._handlingClick=!0;for(var r=n.length-1;0<=r;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.checked?o.push(e):t.checked||i.push(e);for(r=0;r<i.length;r++)this._map.hasLayer(i[r])&&this._map.removeLayer(i[r]);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])||this._map.addLayer(o[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,o=this._map.getZoom(),i=n.length-1;0<=i;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&o<e.options.minZoom||void 0!==e.options.maxZoom&&o>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Je=Xe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=re("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,o,i){var r=re("a",n,o);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),Ie(r),Ee(r,"click",ze),Ee(r,"click",i,this),Ee(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";fe(this._zoomInButton,e),fe(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMinZoom()||de(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMaxZoom()||de(this._zoomInButton,e)}});Ge.mergeOptions({zoomControl:!0}),Ge.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Je,this.addControl(this.zoomControl))});var Qe=Xe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=re("div",e),o=this.options;return this._addScales(o,e+"-line",n),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=re("div",e,n)),t.imperial&&(this._iScale=re("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,o,i=3.2808399*t;5280<i?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(o=this._getRoundNum(i),this._updateScale(this._iScale,o+" ft",o/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}}),tn=Xe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){h(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=re("div","leaflet-control-attribution"),Ie(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ge.mergeOptions({attributionControl:!0}),Ge.addInitHook(function(){this.options.attributionControl&&(new tn).addTo(this)}),Xe.Layers=Ye,Xe.Zoom=Je,Xe.Scale=Qe,Xe.Attribution=tn,Ke.layers=function(t,e,n){return new Ye(t,e,n)},Ke.zoom=function(t){return new Je(t)},Ke.scale=function(t){return new Qe(t)},Ke.attribution=function(t){return new tn(t)};var en=A.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});en.addTo=function(t,e){return t.addHandler(e,this),this};var nn,on={Events:P},rn=St?"touchstart mousedown":"mousedown",an={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},sn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ln=N.extend({options:{clickTolerance:3},initialize:function(t,e,n,o){h(this,o),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ee(this._dragStartTarget,rn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ln._dragging===this&&this.finishDrag(),Pe(this._dragStartTarget,rn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){var e,n;!t._simulated&&this._enabled&&(this._moved=!1,ue(this._element,"leaflet-zoom-anim")||ln._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((ln._dragging=this)._preventOutline&&Ce(this._element),be(),Vt(),this._moving||(this.fire("down"),e=t.touches?t.touches[0]:t,n=Se(this._element),this._startPoint=new O(e.clientX,e.clientY),this._parentScale=Te(n),Ee(document,sn[t.type],this._onMove,this),Ee(document,an[t.type],this._onUp,this))))},_onMove:function(t){var e,n;!t._simulated&&this._enabled&&(t.touches&&1<t.touches.length?this._moved=!0:((n=new O((e=t.touches&&1===t.touches.length?t.touches[0]:t).clientX,e.clientY)._subtract(this._startPoint)).x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Me(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=_e(this._element).subtract(n),de(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),de(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,k(this._animRequest),this._lastEvent=t,this._animRequest=T(this._updatePosition,this,!0))))},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ye(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in fe(document.body,"leaflet-dragging"),this._lastTarget&&(fe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),sn)Pe(document,sn[t],this._onMove,this),Pe(document,an[t],this._onUp,this);we(),Gt(),this._moved&&this._moving&&(k(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ln._dragging=!1}});function cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,o=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);o[0]=o[n-1]=1,function t(e,n,o,i,r){var a,s,l,c=0;for(s=i+1;s<=r-1;s++)c<(l=pn(e[s],e[i],e[r],!0))&&(a=s,c=l);o<c&&(n[a]=1,t(e,n,o,i,a),t(e,n,o,a,r))}(t,o,e,0,n-1);var i,r=[];for(i=0;i<n;i++)o[i]&&r.push(t[i]);return r}(t=function(t,e){for(var n=[t[0]],o=1,i=0,r=t.length;o<r;o++)(function(t,e){var n=e.x-t.x,o=e.y-t.y;return n*n+o*o})(t[o],t[i])>e&&(n.push(t[o]),i=o);return i<r-1&&n.push(t[r-1]),n}(t,n),n)}function un(t,e,n){return Math.sqrt(pn(t,e,n,!0))}function dn(t,e,n,o,i){var r,a,s,l=o?nn:hn(t,n),c=hn(e,n);for(nn=c;;){if(!(l|c))return[t,e];if(l&c)return!1;s=hn(a=fn(t,e,r=l||c,n,i),n),r===l?(t=a,l=s):(e=a,c=s)}}function fn(t,e,n,o,i){var r,a,s=e.x-t.x,l=e.y-t.y,c=o.min,u=o.max;return 8&n?(r=t.x+s*(u.y-t.y)/l,a=u.y):4&n?(r=t.x+s*(c.y-t.y)/l,a=c.y):2&n?(r=u.x,a=t.y+l*(u.x-t.x)/s):1&n&&(r=c.x,a=t.y+l*(c.x-t.x)/s),new O(r,a,i)}function hn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function pn(t,e,n,o){var i,r=e.x,a=e.y,s=n.x-r,l=n.y-a,c=s*s+l*l;return 0<c&&(1<(i=((t.x-r)*s+(t.y-a)*l)/c)?(r=n.x,a=n.y):0<i&&(r+=s*i,a+=l*i)),s=t.x-r,l=t.y-a,o?s*s+l*l:new O(r,a)}function mn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function gn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mn(t)}var vn={simplify:cn,pointToSegmentDistance:un,closestPointOnSegment:function(t,e,n){return pn(t,e,n)},clipSegment:dn,_getEdgeIntersection:fn,_getBitCode:hn,_sqClosestPointOnSegment:pn,isFlat:mn,_flat:gn};function yn(t,e,n){for(var o,i,r,a,s,l,c,u=[1,4,2,8],d=0,f=t.length;d<f;d++)t[d]._code=hn(t[d],e);for(r=0;r<4;r++){for(l=u[r],o=[],d=0,i=(f=t.length)-1;d<f;i=d++)a=t[d],s=t[i],a._code&l?s._code&l||((c=fn(s,a,l,e,n))._code=hn(c,e),o.push(c)):(s._code&l&&((c=fn(s,a,l,e,n))._code=hn(c,e),o.push(c)),o.push(a));t=o}return t}var _n,bn={clipPolygon:yn},wn={project:function(t){return new O(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new B([-180,-90],[180,90])},Cn={R:6378137,R_MINOR:6356752.314245179,bounds:new B([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,o=t.lat*e,i=this.R_MINOR/n,r=Math.sqrt(1-i*i),a=r*Math.sin(o),s=Math.tan(Math.PI/4-o/2)/Math.pow((1-a)/(1+a),r/2);o=-n*Math.log(Math.max(s,1e-10));return new O(t.lng*e*n,o)},unproject:function(t){for(var e,n=180/Math.PI,o=this.R,i=this.R_MINOR/o,r=Math.sqrt(1-i*i),a=Math.exp(-t.y/o),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&1e-7<Math.abs(c);l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new F(s*n,t.x*n/o)}},xn={LonLat:wn,Mercator:Cn,SphericalMercator:q},Sn=e({},$,{code:"EPSG:3395",projection:Cn,transformation:V(_n=.5/(Math.PI*Cn.R),.5,-_n,.5)}),Tn=e({},$,{code:"EPSG:4326",projection:wn,transformation:V(1/180,1,-1/180,.5)}),kn=e({},U,{projection:wn,transformation:V(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(n*n+o*o)},infinite:!0});U.Earth=$,U.EPSG3395=Sn,U.EPSG3857=K,U.EPSG900913=X,U.EPSG4326=Tn,U.Simple=kn;var En=N.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e,n=t.target;n.hasLayer(this)&&(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents&&(e=this.getEvents(),n.on(e,this),this.once("remove",function(){n.off(e,this)},this)),this.onAdd(n),this.getAttribution&&n.attributionControl&&n.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),n.fire("layeradd",{layer:this}))}});Ge.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var i=this._zoomBoundLayers[o].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var An=En.extend({initialize:function(t,e){var n,o;if(h(this,e),this._layers={},t)for(n=0,o=t.length;n<o;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,o=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:a}),Pn=An.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),An.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),An.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new M;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Nn=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){h(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(o,t),o},_setIconStyles:function(t,e){var n=this.options,o=n[e+"Size"];"number"==typeof o&&(o=[o,o]);var i=R(o),r=R("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Et&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),On=Nn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return On.imagePath||(On.imagePath=this._detectIconPath()),(this.options.imagePath||On.imagePath)+Nn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=re("div","leaflet-default-icon-path",document.body),e=ie(t,"background-image")||ie(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Dn=en.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ln(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),de(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&fe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e,n=this._marker,o=n._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,a=_e(n._icon),s=o.getPixelBounds(),l=o.getPixelOrigin(),c=I(s.min._subtract(l).add(r),s.max._subtract(l).subtract(r));c.contains(a)||(e=R((Math.max(c.max.x,a.x)-c.max.x)/(s.max.x-c.max.x)-(Math.min(c.min.x,a.x)-c.min.x)/(s.min.x-c.min.x),(Math.max(c.max.y,a.y)-c.max.y)/(s.max.y-c.max.y)-(Math.min(c.min.y,a.y)-c.min.y)/(s.min.y-c.min.y)).multiplyBy(i),o.panBy(e,{animate:!1}),this._draggable._newPos._add(e),this._draggable._startPos._add(e),ye(n._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=T(this._adjustPan.bind(this,t)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,o=_e(e._icon),i=e._map.layerPointToLatLng(o);n&&ye(n,o),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ln=En.extend({options:{icon:new On,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){h(this,e),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var t;return this._icon&&this._map&&(t=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(t)),this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),o=!1;n!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),de(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),r=!1;i!==this._shadow&&(this._removeShadow(),r=!0),i&&(de(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&r&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ae(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ye(this._icon,t),this._shadow&&ye(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){var t;this.options.interactive&&(de(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Dn&&(t=this.options.draggable,this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Dn(this),t&&this.dragging.enable()))},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Rn=En.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return h(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Bn=Rn.extend({options:{fill:!0,radius:10},initialize:function(t,e){h(this,e),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Rn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),o=[t+n,e+n];this._pxBounds=new B(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),In=Bn.extend({initialize:function(t,n,o){if("number"==typeof n&&(n=e({},o,{radius:n})),h(this,n),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new M(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Rn.prototype.setStyle,_project:function(){var t,e,n,o,i,r,a,s,l=this._latlng.lng,c=this._latlng.lat,u=this._map,d=u.options.crs;d.distance===$.distance?(t=Math.PI/180,e=this._mRadius/$.R/t,n=u.project([c+e,l]),o=u.project([c-e,l]),i=n.add(o).divideBy(2),r=u.unproject(i).lat,a=Math.acos((Math.cos(e*t)-Math.sin(c*t)*Math.sin(r*t))/(Math.cos(c*t)*Math.cos(r*t)))/t,!isNaN(a)&&0!==a||(a=e/Math.cos(Math.PI/180*c)),this._point=i.subtract(u.getPixelOrigin()),this._radius=isNaN(a)?0:i.x-u.project([r,l-a]).x,this._radiusY=i.y-n.y):(s=d.unproject(d.project(this._latlng).subtract([this._mRadius,0])),this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(s).x),this._updateBounds()}}),Mn=Rn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){h(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,o=1/0,i=null,r=pn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var d=r(t,e=l[c-1],n=l[c],!0);d<o&&(o=d,i=r(t,e,n))}return i&&(i.distance=Math.sqrt(o)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,o,i,r,a,s=this._rings[0],l=s.length;if(!l)return null;for(e=t=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(o=t=0;t<l-1;t++)if(i=s[t],r=s[t+1],e<(o+=n=i.distanceTo(r)))return a=(o-e)/n,this._map.layerPointToLatLng([r.x-a*(r.x-i.x),r.y-a*(r.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=j(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new M,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=mn(t),o=0,i=t.length;o<i;o++)n?(e[o]=j(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new O(t,t);this._pxBounds=new B([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var o,i,r=t[0]instanceof F,a=t.length;if(r){for(i=[],o=0;o<a;o++)i[o]=this._map.latLngToLayerPoint(t[o]),n.extend(i[o]);e.push(i)}else for(o=0;o<a;o++)this._projectLatlngs(t[o],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var e,n,o,i,r=this._parts,a=0,s=0,l=this._rings.length;a<l;a++)for(e=0,n=(i=this._rings[a]).length;e<n-1;e++)(o=dn(i[e],i[e+1],t,e,!0))&&(r[s]=r[s]||[],r[s].push(o[0]),o[1]===i[e+1]&&e!==n-2||(r[s].push(o[1]),s++))},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,o=t.length;n<o;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,o,i,r,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(o=0,i=(a=(s=this._parts[n]).length)-1;o<a;i=o++)if((e||0!==o)&&un(t,s[i],s[o])<=l)return!0;return!1}});Mn._flat=gn;var zn=Mn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,o,i,r,a,s,l,c=this._rings[0],u=c.length;if(!u)return null;for(t=r=a=s=0,e=u-1;t<u;e=t++)n=c[t],o=c[e],i=n.y*o.x-o.y*n.x,a+=(n.x+o.x)*i,s+=(n.y+o.y)*i,r+=3*i;return l=0===r?c[0]:[a/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=Mn.prototype._convertLatLngs.call(this,t),n=e.length;return 2<=n&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Mn.prototype._setLatLngs.call(this,t),mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new O(e,e);t=new B(t.min.subtract(n),t.max.add(n));if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var o,i=0,r=this._rings.length;i<r;i++)(o=yn(this._rings[i],t,!0)).length&&this._parts.push(o)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,o,i,r,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(r=0,a=(l=(e=this._parts[i]).length)-1;r<l;a=r++)n=e[r],o=e[a],n.y>t.y!=o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x&&(c=!c);return c||Mn.prototype._containsPoint.call(this,t,!0)}}),Fn=Pn.extend({initialize:function(t,e){h(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,o,i=v(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((o=i[e]).geometries||o.geometry||o.features||o.coordinates)&&this.addData(o);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=jn(t,r);return a?(a.feature=Vn(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function jn(t,e){var n,o,i,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||Un;if(!s&&!a)return null;switch(a.type){case"Point":return Hn(c,t,n=u(s),e);case"MultiPoint":for(i=0,r=s.length;i<r;i++)n=u(s[i]),l.push(Hn(c,t,n,e));return new Pn(l);case"LineString":case"MultiLineString":return o=$n(s,"LineString"===a.type?0:1,u),new Mn(o,e);case"Polygon":case"MultiPolygon":return o=$n(s,"Polygon"===a.type?1:2,u),new zn(o,e);case"GeometryCollection":for(i=0,r=a.geometries.length;i<r;i++){var d=jn({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);d&&l.push(d)}return new Pn(l);default:throw new Error("Invalid GeoJSON object.")}}function Hn(t,e,n,o){return t?t(e,n):new Ln(n,o&&o.markersInheritOptions&&o)}function Un(t){return new F(t[1],t[0],t[2])}function $n(t,e,n){for(var o,i=[],r=0,a=t.length;r<a;r++)o=e?$n(t[r],e-1,n):(n||Un)(t[r]),i.push(o);return i}function Zn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function qn(t,e,n,o){for(var i=[],r=0,a=t.length;r<a;r++)i.push(e?qn(t[r],e-1,n,o):Zn(t[r],o));return!e&&n&&i.push(i[0]),i}function Wn(t,n){return t.feature?e({},t.feature,{geometry:n}):Vn(n)}function Vn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Gn={toGeoJSON:function(t){return Wn(this,{type:"Point",coordinates:Zn(this.getLatLng(),t)})}};function Kn(t,e){return new Fn(t,e)}Ln.include(Gn),In.include(Gn),Bn.include(Gn),Mn.include({toGeoJSON:function(t){var e=!mn(this._latlngs);return Wn(this,{type:(e?"Multi":"")+"LineString",coordinates:qn(this._latlngs,e?1:0,!1,t)})}}),zn.include({toGeoJSON:function(t){var e=!mn(this._latlngs),n=e&&!mn(this._latlngs[0]),o=qn(this._latlngs,n?2:e?1:0,!0,t);return e||(o=[o]),Wn(this,{type:(n?"Multi":"")+"Polygon",coordinates:o})}}),An.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Wn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,o=[];return this.eachLayer(function(e){var i,r;e.toGeoJSON&&(i=e.toGeoJSON(t),n?o.push(i.geometry):"FeatureCollection"===(r=Vn(i)).type?o.push.apply(o,r.features):o.push(r))}),n?Wn(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});var Xn=Kn,Yn=En.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=z(e),h(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(de(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:re("img");de(e,"leaflet-image-layer"),this._zoomAnimated&&de(e,"leaflet-zoom-animated"),this.options.className&&de(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ve(this._image,n,e)},_reset:function(){var t=this._image,e=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ye(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Jn=Yn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:re("video");if(de(e,"leaflet-image-layer"),this._zoomAnimated&&de(e,"leaflet-zoom-animated"),this.options.className&&de(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),o=[],r=0;r<n.length;r++)o.push(n[r].src);this._url=0<n.length?o:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var a=0;a<this._url.length;a++){var s=re("source");s.src=this._url[a],e.appendChild(s)}}}}),Qn=Yn.extend({_initImage:function(){var t=this._image=this._url;de(t,"leaflet-image-layer"),this._zoomAnimated&&de(t,"leaflet-zoom-animated"),this.options.className&&de(t,this.options.className),t.onselectstart=c,t.onmousemove=c}}),to=En.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){h(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&me(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(me(this._container,0),this._removeTimeout=setTimeout(i(ae,void 0,this._container),200)):ae(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&ce(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof En||(n=e,e=t),e instanceof Pn)for(var o in t._layers){e=t._layers[o];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){var t,e,n,o,i;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),n=this._getAnchor(),this._zoomAnimated?ye(this._container,t.add(n)):e=e.add(t).add(n),o=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x,this._container.style.bottom=o+"px",this._container.style.left=i+"px")},_getAnchor:function(){return[0,0]}}),eo=to.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){to.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rn||this._source.on("preclick",Re))},onRemove:function(t){to.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rn||this._source.off("preclick",Re))},getEvents:function(){var t=to.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=this._container=re("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=re("div",e+"-content-wrapper",n);this._contentNode=re("div",e+"-content",o),Ie(n),Be(this._contentNode),Ee(n,"contextmenu",Re),this._tipContainer=re("div",e+"-tip-container",n),this._tip=re("div",e+"-tip",this._tipContainer),this.options.closeButton&&((t=this._closeButton=re("a",e+"-close-button",n)).href="#close",t.innerHTML="&#215;",Ee(t,"click",this._onCloseButtonClick,this))},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth);n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,i=this.options.maxHeight,r="leaflet-popup-scrolled";i&&i<o?(e.height=i+"px",de(t,r)):fe(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ye(this._container,e.add(n))},_adjustPan:function(){var t,e,n,o,i,r,a,s,l,c,u,d;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),t=this._map,e=parseInt(ie(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,o=this._containerWidth,(i=new O(this._containerLeft,-n-this._containerBottom))._add(_e(this._container)),r=t.layerPointToContainerPoint(i),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),l=R(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),d=u=0,r.x+o+l.x>c.x&&(u=r.x+o-c.x+l.x),r.x-u-s.x<0&&(u=r.x-s.x),r.y+n+l.y>c.y&&(d=r.y+n-c.y+l.y),r.y-d-s.y<0&&(d=r.y-s.y),(u||d)&&t.fire("autopanstart").panBy([u,d]))},_onCloseButtonClick:function(t){this._close(),ze(t)},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ge.mergeOptions({closePopupOnClick:!0}),Ge.include({openPopup:function(t,e,n){return t instanceof eo||(t=new eo(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),En.include({bindPopup:function(t,e){return t instanceof eo?(h(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new eo(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(ze(t),e instanceof Rn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var no=to.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){to.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){to.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=to.prototype.getEvents.call(this);return St&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=re("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n=this._map,o=this._container,i=n.latLngToContainerPoint(n.getCenter()),r=n.layerPointToContainerPoint(t),a=this.options.direction,s=o.offsetWidth,l=o.offsetHeight,c=R(this.options.offset),u=this._getAnchor(),d="top"===a?(e=s/2,l):"bottom"===a?(e=s/2,0):(e="center"===a?s/2:"right"===a?0:"left"===a?s:r.x<i.x?(a="right",0):(a="left",s+2*(c.x+u.x)),l/2);t=t.subtract(R(e,d,!0)).add(c).add(u),fe(o,"leaflet-tooltip-right"),fe(o,"leaflet-tooltip-left"),fe(o,"leaflet-tooltip-top"),fe(o,"leaflet-tooltip-bottom"),de(o,"leaflet-tooltip-"+a),ye(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ge.include({openTooltip:function(t,e,n){return t instanceof no||(t=new no(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),En.include({bindTooltip:function(t,e){return t instanceof no?(h(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new no(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){var e,n;!t&&this._tooltipHandlersAdded||(e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),St&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t)},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(fe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,o=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),o=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(o)}});var oo=Nn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e,n=t&&"DIV"===t.tagName?t:document.createElement("div"),o=this.options;return o.html instanceof Element?(se(n),n.appendChild(o.html)):n.innerHTML=!1!==o.html?o.html:"",o.bgPos&&(e=R(o.bgPos),n.style.backgroundPosition=-e.x+"px "+-e.y+"px"),this._setIconStyles(n,"icon"),n},createShadow:function(){return null}});Nn.Default=On;var io=En.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_t,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){h(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ae(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof O?t:new O(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,o=-t(-1/0,1/0),i=0,r=n.length;i<r;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(o=t(o,+e));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et){me(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var o in this._tiles){var i,r=this._tiles[o];r.current&&r.loaded&&(i=Math.min(1,(t-r.loaded)/200),me(r.el,i),i<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0))}n&&!this._noPrune&&this._pruneTiles(),e&&(k(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ae(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var o=this._levels[t],i=this._map;return o||((o=this._levels[t]={}).el=re("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,i.getCenter(),i.getZoom()),o.el.offsetWidth,this._onCreateLevel(o)),this._level=o}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,n,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(n=this._tiles[t]).retain=n.current;for(t in this._tiles)(n=this._tiles[t]).current&&!n.active&&(e=n.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2));for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ae(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,o){var i=Math.floor(t/2),r=Math.floor(e/2),a=n-1,s=new O(+i,+r);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?c.retain=!0:(c&&c.loaded&&(c.retain=!0),o<a&&this._retainParent(i,r,a,o))},_retainChildren:function(t,e,n,o){for(var i=2*t;i<2*t+2;i++)for(var r=2*e;r<2*e+2;r++){var a=new O(i,r);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<o&&this._retainChildren(i,r,n+1,o))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,o){var i=Math.round(e),r=(i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i),this.options.updateWhenZooming&&i!==this._tileZoom);o&&!r||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var o=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,n)).round();yt?ve(t.el,i,o):ye(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),o=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*o);return new B(i.subtract(r),i.add(r))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var o=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(o),r=i.getCenter(),a=[],s=this.options.keepBuffer,l=new B(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new O(u.x,u.y))||(this._tiles[c].current=!1)}if(1<Math.abs(n-this._tileZoom))this._setView(t,n);else{for(var d=i.min.y;d<=i.max.y;d++)for(var f=i.min.x;f<=i.max.x;f++){var h,p=new O(f,d);p.z=this._tileZoom,this._isValidTile(p)&&((h=this._tiles[this._tileCoordsToKey(p)])?h.current=!0:a.push(p))}if(a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),o=t.scaleBy(n),i=o.add(n);return[e.unproject(o,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new M(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new O(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ae(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){de(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,et&&this.options.opacity<1&&me(t,this.options.opacity),it&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&T(i(this._tileReady,this,t,null,r)),ye(r,n),this._tiles[o]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var o=this._tileCoordsToKey(t);(n=this._tiles[o])&&(n.loaded=+new Date,this._map._fadeAnimated?(me(n.el,0),k(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(de(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new O(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new B(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),ro=io.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=h(this,e)).detectRetina&&Et&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),it||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ee(n,"load",i(this._tileOnLoad,this,e,n)),Ee(n,"error",i(this._tileOnError,this,e,n)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n,o={r:Et?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(n=this._globalTileRange.max.y-t.y,this.options.tms&&(o.y=n),o["-y"]=n),g(this._url,e(o,this.options))},_tileOnLoad:function(t,e){et?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var o=this.options.errorTileUrl;o&&e.getAttribute("src")!==o&&(e.src=o),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=_,ae(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return st||e.el.setAttribute("src",_),io.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==_))return io.prototype._tileReady.call(this,t,e,n)}});function ao(t,e){return new ro(t,e)}var so=ro.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var o=e({},this.defaultWmsParams);for(var i in n)i in this.options||(o[i]=n[i]);var r=(n=h(this,n)).detectRetina&&Et?2:1,a=this.getTileSize();o.width=a.x*r,o.height=a.y*r,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,ro.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,o=I(n.project(e[0]),n.project(e[1])),i=o.min,r=o.max,a=(1.3<=this._wmsVersion&&this._crs===Tn?[i.y,i.x,r.y,r.x]:[i.x,i.y,r.x,r.y]).join(","),s=ro.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});ro.WMS=so,ao.wms=function(t,e){return new so(t,e)};var lo=En.extend({options:{padding:.1,tolerance:0},initialize:function(t){h(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&de(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),o=_e(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e).subtract(r),s=i.multiplyBy(-n).add(o).add(i).subtract(a);yt?ve(this._container,s,n):ye(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new B(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),co=lo.extend({getEvents:function(){var t=lo.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){lo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ee(t,"mousemove",this._onMouseMove,this),Ee(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,ae(this._container),Pe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){var t,e,n,o;this._map._animatingZoom&&this._bounds||(lo.prototype._update.call(this),t=this._bounds,e=this._container,n=t.getSize(),o=Et?2:1,ye(e,t.min),e.width=o*n.x,e.height=o*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Et&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update"))},_reset:function(){lo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[a(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,o=e.prev;n?n.prev=o:this._drawLast=o,o?o.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){for(var e,n=t.options.dashArray.split(/[, ]+/),o=[],i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(t){var e;t._pxBounds&&(e=(t.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t,e=this._redrawBounds;e?(t=e.getSize(),this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},_draw:function(){var t,e,n=this._redrawBounds;this._ctx.save(),n&&(e=n.getSize(),this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,e.x,e.y),this._ctx.clip()),this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,o,i,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(o=0,i=a[n].length;o<i;o++)r=a[n][o],l[o?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){var e,n,o,i;this._drawing&&!t._empty()&&(e=t._point,n=this._ctx,o=Math.max(Math.round(t._radius),1),1!=(i=(Math.max(Math.round(t._radiusY),1)||o)/o)&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,o,0,2*Math.PI,!1),1!=i&&n.restore(),this._fillStroke(n,t))},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,o=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(o)&&(("click"===t.type||"preclick"!==t.type)&&this._map._draggableMoved(e)||(n=e));n&&($e(t),this._fireEvent([n],t))},_onMouseMove:function(t){var e;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(e=this._map.mouseEventToLayerPoint(t),this._handleMouseHover(t,e))},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(fe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,o,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(o=n);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(de(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e,n,o=t._order;o&&(e=o.next,n=o.prev,e&&((e.prev=n)?n.next=e:e&&(this._drawFirst=e),o.prev=this._drawLast,(this._drawLast.next=o).next=null,this._drawLast=o,this._requestRedraw(t)))},_bringToBack:function(t){var e,n,o=t._order;o&&(e=o.next,(n=o.prev)&&((n.next=e)?e.prev=n:n&&(this._drawLast=n),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)))}});function uo(t){return Pt?new co(t):null}var fo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ho={_initContainer:function(){this._container=re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(lo.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=fo("shape");de(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=fo("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ae(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,o=t.options,i=t._container;i.stroked=!!o.stroke,i.filled=!!o.fill,o.stroke?(e=e||(t._stroke=fo("stroke")),i.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=v(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(i.removeChild(e),t._stroke=null),o.fill?(n=n||(t._fill=fo("fill")),i.appendChild(n),n.color=o.fillColor||o.color,n.opacity=o.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),o=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+o+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){ce(t._container)}},po=Ot?fo:Y,mo=lo.extend({getEvents:function(){var t=lo.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=po("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=po("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ae(this._container),Pe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){var t,e,n;this._map._animatingZoom&&this._bounds||(lo.prototype._update.call(this),e=(t=this._bounds).getSize(),n=this._container,this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ye(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update"))},_initPath:function(t){var e=t._path=po("path");t.options.className&&de(e,t.options.className),t.options.interactive&&de(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ae(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,J(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),o="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+o+2*n+",0 "+o+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){ce(t._path)}});function go(t){return Nt||Ot?new mo(t):null}Ot&&mo.include(ho),Ge.include({getRenderer:function(t){var e=(e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer());return this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&uo(t)||go(t)}});var vo=zn.extend({initialize:function(t,e){zn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=z(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});mo.create=po,mo.pointsToPath=J,Fn.geometryToLayer=jn,Fn.coordsToLatLng=Un,Fn.coordsToLatLngs=$n,Fn.latLngToCoords=Zn,Fn.latLngsToCoords=qn,Fn.getFeature=Wn,Fn.asFeature=Vn,Ge.mergeOptions({boxZoom:!0});var yo=en.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Vt(),be(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ee(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=re("div","leaflet-zoom-box",this._container),de(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new B(this._point,this._startPoint),n=e.getSize();ye(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ae(this._box),fe(this._container,"leaflet-crosshair")),Gt(),we(),Pe(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){var e;1!==t.which&&1!==t.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0),e=new M(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})))},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ge.addInitHook("addHandler","boxZoom",yo),Ge.mergeOptions({doubleClickZoom:!0});var _o=en.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),o=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-o:n+o;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Ge.addInitHook("addHandler","doubleClickZoom",_o),Ge.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var bo=en.extend({addHooks:function(){var t;this._draggable||(t=this._map,this._draggable=new ln(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))),de(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){fe(this._map._container,"leaflet-grab"),fe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t,e=this._map;e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(t=z(this._map.options.maxBounds),this._offsetLimit=I(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){var e,n;this._map.options.inertia&&(e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(n),this._times.push(e),this._prunePositions(e)),this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){var t,e;this._viscosity&&this._offsetLimit&&(t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit,t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t))},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,o=this._draggable._newPos.x,i=(o-e+n)%t+e-n,r=(o+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(r+n)?i:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e,n,o,i,r,a,s,l,c,u=this._map,d=u.options,f=!d.inertia||this._times.length<2;u.fire("dragend",t),f?u.fire("moveend"):(this._prunePositions(+new Date),e=this._lastPos.subtract(this._positions[0]),n=(this._lastTime-this._times[0])/1e3,o=d.easeLinearity,r=(i=e.multiplyBy(o/n)).distanceTo([0,0]),a=Math.min(d.inertiaMaxSpeed,r),s=i.multiplyBy(a/r),l=a/(d.inertiaDeceleration*o),(c=s.multiplyBy(-l/2).round()).x||c.y?(c=u._limitOffset(c,u.options.maxBounds),T(function(){u.panBy(c,{duration:l,easeLinearity:o,noMoveStart:!0,animate:!0})})):u.fire("moveend"))}});Ge.addInitHook("addHandler","dragging",bo),Ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wo=en.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ee(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var t,e,n,o;this._focused||(t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft,this._map._container.focus(),window.scrollTo(o,n))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){for(var e=this._panKeys={},n=this.keyCodes,o=0,i=n.left.length;o<i;o++)e[n.left[o]]=[-1*t,0];for(o=0,i=n.right.length;o<i;o++)e[n.right[o]]=[t,0];for(o=0,i=n.down.length;o<i;o++)e[n.down[o]]=[0,t];for(o=0,i=n.up.length;o<i;o++)e[n.up[o]]=[0,-1*t]},_setZoomDelta:function(t){for(var e=this._zoomKeys={},n=this.keyCodes,o=0,i=n.zoomIn.length;o<i;o++)e[n.zoomIn[o]]=t;for(o=0,i=n.zoomOut.length;o<i;o++)e[n.zoomOut[o]]=-t},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,o=this._map;if(n in this._panKeys)o._panAnim&&o._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=R(e).multiplyBy(3)),o.panBy(e),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds));else if(n in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!o._popup||!o._popup.options.closeOnEscapeKey)return;o.closePopup()}ze(t)}}});Ge.addInitHook("addHandler","keyboard",wo),Ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Co=en.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=He(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),o),ze(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,r=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(0<this._delta?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ge.addInitHook("addHandler","scrollWheelZoom",Co),Ge.mergeOptions({tap:!0,tapTolerance:15});var xo=en.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Me(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new O(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&de(n,"leaflet-active"),this._holdTimeout=setTimeout(i(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Ee(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){var e,n;clearTimeout(this._holdTimeout),Pe(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches&&((n=(e=t.changedTouches[0]).target)&&n.tagName&&"a"===n.tagName.toLowerCase()&&fe(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e))},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new O(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!St||xt&&!dt||Ge.addInitHook("addHandler","tap",xo),Ge.mergeOptions({touchZoom:St&&!rt,bounceAtZoomLimits:!0});var So=en.extend({addHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e,n,o=this._map;!t.touches||2!==t.touches.length||o._animatingZoom||this._zooming||(e=o.mouseEventToContainerPoint(t.touches[0]),n=o.mouseEventToContainerPoint(t.touches[1]),this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),"center"!==o.options.touchZoom&&(this._pinchStartLatLng=o.containerPointToLatLng(e.add(n)._divideBy(2))),this._startDist=e.distanceTo(n),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend",this._onTouchEnd,this),Me(t))},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&1<r)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==r)return}else{var a=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1==r&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var s=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=T(s,this,!0),Me(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,k(this._animRequest),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ge.addInitHook("addHandler","touchZoom",So),Ge.BoxZoom=yo,Ge.DoubleClickZoom=_o,Ge.Drag=bo,Ge.Keyboard=wo,Ge.ScrollWheelZoom=Co,Ge.Tap=xo,Ge.TouchZoom=So,t.version="1.7.1",t.Control=Xe,t.control=Ke,t.Browser=Lt,t.Evented=N,t.Mixin=on,t.Util=E,t.Class=A,t.Handler=en,t.extend=e,t.bind=i,t.stamp=a,t.setOptions=h,t.DomEvent=We,t.DomUtil=ke,t.PosAnimation=Ve,t.Draggable=ln,t.LineUtil=vn,t.PolyUtil=bn,t.Point=O,t.point=R,t.Bounds=B,t.bounds=I,t.Transformation=W,t.transformation=V,t.Projection=xn,t.LatLng=F,t.latLng=j,t.LatLngBounds=M,t.latLngBounds=z,t.CRS=U,t.GeoJSON=Fn,t.geoJSON=Kn,t.geoJson=Xn,t.Layer=En,t.LayerGroup=An,t.layerGroup=function(t,e){return new An(t,e)},t.FeatureGroup=Pn,t.featureGroup=function(t,e){return new Pn(t,e)},t.ImageOverlay=Yn,t.imageOverlay=function(t,e,n){return new Yn(t,e,n)},t.VideoOverlay=Jn,t.videoOverlay=function(t,e,n){return new Jn(t,e,n)},t.SVGOverlay=Qn,t.svgOverlay=function(t,e,n){return new Qn(t,e,n)},t.DivOverlay=to,t.Popup=eo,t.popup=function(t,e){return new eo(t,e)},t.Tooltip=no,t.tooltip=function(t,e){return new no(t,e)},t.Icon=Nn,t.icon=function(t){return new Nn(t)},t.DivIcon=oo,t.divIcon=function(t){return new oo(t)},t.Marker=Ln,t.marker=function(t,e){return new Ln(t,e)},t.TileLayer=ro,t.tileLayer=ao,t.GridLayer=io,t.gridLayer=function(t){return new io(t)},t.SVG=mo,t.svg=go,t.Renderer=lo,t.Canvas=co,t.canvas=uo,t.Path=Rn,t.CircleMarker=Bn,t.circleMarker=function(t,e){return new Bn(t,e)},t.Circle=In,t.circle=function(t,e,n){return new In(t,e,n)},t.Polyline=Mn,t.polyline=function(t,e){return new Mn(t,e)},t.Polygon=zn,t.polygon=function(t,e){return new zn(t,e)},t.Rectangle=vo,t.rectangle=function(t,e){return new vo(t,e)},t.Map=Ge,t.map=function(t,e){return new Ge(t,e)};var To=window.L;t.noConflict=function(){return window.L=To,this},window.L=t}),function(){"use strict";var t=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},e=function(t){return{eq:t}},n=e(function(t,e){return t===e}),o=function(t){return e(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,i=0;i<o;i++)if(!t.eq(e[i],n[i]))return!1;return!0})},i=function(t,n){return i=o(t),r=function(t){return e=t,o=n,Array.prototype.slice.call(e).sort(o);var e,o},e(function(t,e){return i.eq(r(t),r(e))});var i,r},r=function(t){return e(function(e,o){var r=Object.keys(e),a=Object.keys(o);if(!i(n).eq(r,a))return!1;for(var s=r.length,l=0;l<s;l++){var c=r[l];if(!t.eq(e[c],o[c]))return!1}return!0})},a=e(function(e,n){if(e===n)return!0;var i=t(e);return i===t(n)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(i)?e===n:"array"===i?o(a).eq(e,n):"object"===i&&r(a).eq(e,n))}),s=function(){},l=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t(e.apply(null,n))}},c=function(t){return function(){return t}},u=function(t){return t};function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=e.concat(n);return t.apply(null,i)}}var f,h,p,m=function(t){return function(e){return!t(e)}},g=function(t){return function(){throw new Error(t)}},v=c(!1),y=c(!0),_=function(){return b},b=(f=function(t){return t.isNone()},{fold:function(t,e){return t()},is:v,isSome:v,isNone:y,getOr:p=function(t){return t},getOrThunk:h=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:p,orThunk:h,map:_,each:s,bind:_,exists:v,forall:y,filter:_,equals:f,equals_:f,toArray:function(){return[]},toString:c("none()")}),w=function(t){var e=c(t),n=function(){return i},o=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:y,isNone:v,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return w(e(t))},each:function(e){e(t)},bind:o,exists:o,forall:o,filter:function(e){return e(t)?i:b},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(v,function(e){return n(t,e)})}};return i},C={some:w,none:_,from:function(t){return null==t?b:w(t)}},x=function(t){return function(e){return o=typeof(n=e),(null===n?"null":"object"==o&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==o&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":o)===t;var n,o}},S=function(t){return function(e){return typeof e===t}},T=function(t){return function(e){return t===e}},k=x("string"),E=x("object"),A=x("array"),P=T(null),N=S("boolean"),O=T(void 0),D=function(t){return!(null===(e=t)||void 0===e);var e},L=S("function"),R=S("number"),B=Array.prototype.slice,I=Array.prototype.indexOf,M=Array.prototype.push,z=function(t,e){return I.call(t,e)},F=function(t,e){return-1<z(t,e)},j=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},H=function(t,e){for(var n=t.length,o=new Array(n),i=0;i<n;i++){var r=t[i];o[i]=e(r,i)}return o},U=function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)},$=function(t,e){for(var n=t.length-1;0<=n;n--)e(t[n],n)},Z=function(t,e){for(var n=[],o=0,i=t.length;o<i;o++){var r=t[o];e(r,o)&&n.push(r)}return n},q=function(t,e,n){return $(t,function(t){n=e(n,t)}),n},W=function(t,e,n){return U(t,function(t){n=e(n,t)}),n},V=function(t,e){return function(t,e,n){for(var o=0,i=t.length;o<i;o++){var r=t[o];if(e(r,o))return C.some(r);if(n(r,o))break}return C.none()}(t,e,v)},G=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},K=function(t,e){return function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!A(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);M.apply(e,t[n])}return e}(H(t,e))},X=function(t,e){for(var n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},Y=function(t){var e=B.call(t,0);return e.reverse(),e},J=function(t,e){return Z(t,function(t){return!F(e,t)})},Q=function(t){return 0===t.length?C.none():C.some(t[0])},tt=function(t){return 0===t.length?C.none():C.some(t[t.length-1])},et=L(Array.from)?Array.from:function(t){return B.call(t)},nt=Object.keys,ot=Object.hasOwnProperty,it=function(t,e){for(var n=nt(t),o=0,i=n.length;o<i;o++){var r=n[o];e(t[r],r)}},rt=function(t,e){return at(t,function(t,n){return{k:n,v:e(t,n)}})},at=function(t,e){var n={};return it(t,function(t,o){var i=e(t,o);n[i.k]=i.v}),n},st=function(t){return function(e,n){t[n]=e}},lt=function(t,e,n,o){return it(t,function(t,i){(e(t,i)?n:o)(t,i)}),{}},ct=function(t,e){var n={},o={};return lt(t,e,st(n),st(o)),{t:n,f:o}},ut=function(t,e){var n={};return lt(t,e,st(n),s),n},dt=function(t,e){return ft(t,e)?C.from(t[e]):C.none()},ft=function(t,e){return ot.call(t,e)},ht=Array.isArray,pt=function(t,e,n){var o,i;if(!t)return!1;if(n=n||t,void 0!==t.length){for(o=0,i=t.length;o<i;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(o in t)if(t.hasOwnProperty(o)&&!1===e.call(n,t[o],o,t))return!1;return!0},mt=function(t,e){var n=[];return pt(t,function(o,i){n.push(e(o,i,t))}),n},gt=function(t,e){var n=[];return pt(t,function(o,i){e&&!e(o,i,t)||n.push(o)}),n},vt=function(t,e){if(t)for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},yt=function(t,e,n,o){for(var i=O(n)?t[0]:n,r=0;r<t.length;r++)i=e.call(o,i,t[r],r);return i},_t=function(t,e,n){for(var o=0,i=t.length;o<i;o++)if(e.call(n,t[o],o,t))return o;return-1},bt=function(t){return t[t.length-1]},wt=function(){return(wt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ct(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,i++)o[i]=r[a];return o}var xt,St,Tt,kt,Et,At,Pt,Nt=function(){return Ot(0,0)},Ot=function(t,e){return{major:t,minor:e}},Dt=function(t,e){var n=String(e).toLowerCase();return 0===t.length?Nt():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return Ot(o(1),o(2))}(t,n)},Lt=Nt,Rt=function(t,e){var n=String(e).toLowerCase();return V(t,function(t){return t.search(n)})},Bt=function(t,e){return-1!==t.indexOf(e)},It=function(t,e){return n=t,0,""===(o=e)||n.length>=o.length&&n.substr(0,0+o.length)===o;var n,o},Mt=function(t){return function(e){return e.replace(t,"")}},zt=Mt(/^\s+|\s+$/g),Ft=Mt(/^\s+/g),jt=Mt(/\s+$/g),Ht=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ut=function(t){return function(e){return Bt(e,t)}},$t=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Bt(t,"edge/")&&Bt(t,"chrome")&&Bt(t,"safari")&&Bt(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ht],search:function(t){return Bt(t,"chrome")&&!Bt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Bt(t,"msie")||Bt(t,"trident")}},{name:"Opera",versionRegexes:[Ht,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ut("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ut("firefox")},{name:"Safari",versionRegexes:[Ht,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Bt(t,"safari")||Bt(t,"mobile/"))&&Bt(t,"applewebkit")}}],Zt=[{name:"Windows",search:Ut("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Bt(t,"iphone")||Bt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ut("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ut("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ut("linux"),versionRegexes:[]},{name:"Solaris",search:Ut("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ut("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ut("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],qt={browsers:c($t),oses:c(Zt)},Wt="Firefox",Vt=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:o("Edge"),isChrome:o("Chrome"),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Wt),isSafari:o("Safari")}},Gt=function(){return Vt({current:void 0,version:Lt()})},Kt=Vt,Xt=(c("Edge"),c("Chrome"),c("IE"),c("Opera"),c(Wt),c("Safari"),"Windows"),Yt="Android",Jt="Solaris",Qt="FreeBSD",te="ChromeOS",ee=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:o(Xt),isiOS:o("iOS"),isAndroid:o(Yt),isOSX:o("OSX"),isLinux:o("Linux"),isSolaris:o(Jt),isFreeBSD:o(Qt),isChromeOS:o(te)}},ne=function(){return ee({current:void 0,version:Lt()})},oe=ee,ie=(c(Xt),c("iOS"),c(Yt),c("Linux"),c("OSX"),c(Jt),c(Qt),c(te),function(t,e){var n,o,i,r,a,s,l,u,d,f,h,p,m=qt.browsers(),g=qt.oses(),v=function(t,e){return Rt(t,e).map(function(t){var n=Dt(t.versionRegexes,e);return{current:t.name,version:n}})}(m,t).fold(Gt,Kt),y=function(t,e){return Rt(t,e).map(function(t){var n=Dt(t.versionRegexes,e);return{current:t.name,version:n}})}(g,t).fold(ne,oe);return{browser:v,os:y,deviceType:(o=v,i=t,r=e,a=(n=y).isiOS()&&!0===/ipad/i.test(i),s=n.isiOS()&&!a,l=n.isiOS()||n.isAndroid(),u=l||r("(pointer:coarse)"),d=a||!s&&l&&r("(min-device-width:768px)"),f=s||l&&!d,h=o.isSafari()&&n.isiOS()&&!1===/safari/i.test(i),p=!f&&!d&&!h,{isiPad:c(a),isiPhone:c(s),isTablet:c(d),isPhone:c(f),isTouch:c(u),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:c(h),isDesktop:c(p)})}}),re=function(t){return window.matchMedia(t).matches},ae=(Tt=!(xt=function(){return ie(navigator.userAgent,re)}),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Tt||(Tt=!0,St=xt.apply(null,t)),St}),se=function(){return ae()},le=navigator.userAgent,ce=se(),ue=ce.browser,de=ce.os,fe=ce.deviceType,he=/WebKit/.test(le)&&!ue.isEdge(),pe="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,me=-1!==le.indexOf("Windows Phone"),ge={opera:ue.isOpera(),webkit:he,ie:!(!ue.isIE()&&!ue.isEdge())&&ue.version.major,gecko:ue.isFirefox(),mac:de.isOSX()||de.isiOS(),iOS:fe.isiPad()||fe.isiPhone(),android:de.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:ue.isIE()?document.documentMode||7:10,fileApi:pe,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!ue.isIE(),desktop:fe.isDesktop(),windowsPhone:me,browser:{current:ue.current,version:ue.version,isChrome:ue.isChrome,isEdge:ue.isEdge,isFirefox:ue.isFirefox,isIE:ue.isIE,isOpera:ue.isOpera,isSafari:ue.isSafari},os:{current:de.current,version:de.version,isAndroid:de.isAndroid,isChromeOS:de.isChromeOS,isFreeBSD:de.isFreeBSD,isiOS:de.isiOS,isLinux:de.isLinux,isOSX:de.isOSX,isSolaris:de.isSolaris,isWindows:de.isWindows},deviceType:{isDesktop:fe.isDesktop,isiPad:fe.isiPad,isiPhone:fe.isiPhone,isPhone:fe.isPhone,isTablet:fe.isTablet,isTouch:fe.isTouch,isWebView:fe.isWebView}},ve=/^\s*|\s*$/g,ye=function(t){return null==t?"":(""+t).replace(ve,"")},_e=function(t,e){return e?!("array"!==e||!ht(t))||typeof t===e:void 0!==t},be=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),pt(t,function(t,i){return!1!==e.call(o,t,i,n)&&void be(t,e,n,o)}))},we={trim:ye,isArray:ht,is:_e,toArray:function(t){if(ht(t))return t;for(var e=[],n=0,o=t.length;n<o;n++)e[n]=t[n];return e},makeMap:function(t,e,n){var o;for(e=e||",","string"==typeof(t=t||[])&&(t=t.split(e)),n=n||{},o=t.length;o--;)n[t[o]]={};return n},each:pt,map:mt,grep:gt,inArray:vt,hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},extend:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0;o<e.length;o++){var i,r=e[o];for(var a in r)!r.hasOwnProperty(a)||void 0!==(i=r[a])&&(t[a]=i)}return t},create:function(t,e,n){var o,i,r,a=this,s=0,l=(t=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(t))[3].match(/(^|\.)(\w+)$/i)[2],c=a.createNS(t[3].replace(/\.\w+$/,""),n);if(!c[l]){if("static"===t[2])return c[l]=e,void(this.onCreate&&this.onCreate(t[2],t[3],c[l]));e[l]||(e[l]=function(){},s=1),c[l]=e[l],a.extend(c[l].prototype,e),t[5]&&(o=a.resolve(t[5]).prototype,i=t[5].match(/\.(\w+)$/i)[1],r=c[l],c[l]=s?function(){return o[i].apply(this,arguments)}:function(){return this.parent=o[i],r.apply(this,arguments)},c[l].prototype[l]=c[l],a.each(o,function(t,e){c[l].prototype[e]=o[e]}),a.each(e,function(t,e){o[e]?c[l].prototype[e]=function(){return this.parent=o[e],t.apply(this,arguments)}:e!==l&&(c[l].prototype[e]=t)})),a.each(e.static,function(t,e){c[l][e]=t})}},walk:be,createNS:function(t,e){var n,o;for(e=e||window,t=t.split("."),n=0;n<t.length;n++)e[o=t[n]]||(e[o]={}),e=e[o];return e},resolve:function(t,e){var n,o;for(e=e||window,n=0,o=(t=t.split(".")).length;n<o&&(e=e[t[n]]);n++);return e},explode:function(t,e){return!t||_e(t,"array")?t:mt(t.split(e||","),ye)},_addCacheSuffix:function(t){var e=ge.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Ce=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},xe={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Ce(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return Ce(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return Ce(n)},fromDom:Ce,fromPoint:function(t,e,n){return C.from(t.dom.elementFromPoint(e,n)).map(Ce)}},Se=function(t,e){for(var n=[],o=function(t){return n.push(t),e(t)},i=e(t);(i=i.bind(o)).isSome(););return n},Te=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},ke=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},Ee=function(t,e){return t.dom===e.dom},Ae=function(t,e){return se().browser.isIE()?function(t,e){return n=t.dom,o=e.dom,i=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(n.compareDocumentPosition(o)&i);var n,o,i}(t,e):(n=e,(o=t.dom)!==(i=n.dom)&&o.contains(i));var n,o,i},Pe=("undefined"!=typeof window||Function("return this;")(),function(t){return t.dom.nodeName.toLowerCase()}),Ne=function(t){return t.dom.nodeType},Oe=function(t){return function(e){return Ne(e)===t}},De=Oe(1),Le=Oe(3),Re=Oe(9),Be=Oe(11),Ie=function(t){return xe.fromDom(t.dom.ownerDocument)},Me=function(t){return Re(t)?t:Ie(t)},ze=function(t){return xe.fromDom(Me(t).dom.defaultView)},Fe=function(t){return C.from(t.dom.parentNode).map(xe.fromDom)},je=function(t){return C.from(t.dom.previousSibling).map(xe.fromDom)},He=function(t){return C.from(t.dom.nextSibling).map(xe.fromDom)},Ue=function(t){return Y(Se(t,je))},$e=function(t){return Se(t,He)},Ze=function(t){return H(t.dom.childNodes,xe.fromDom)},qe=function(t,e){var n=t.dom.childNodes;return C.from(n[e]).map(xe.fromDom)},We=function(t){return qe(t,0)},Ve=function(t){return qe(t,t.dom.childNodes.length-1)},Ge=function(t){return Be(t)},Ke=L(Element.prototype.attachShadow)&&L(Node.prototype.getRootNode),Xe=c(Ke),Ye=Ke?function(t){return xe.fromDom(t.dom.getRootNode())}:Me,Je=function(t){return Ge(t)?t:function(t){var e=t.dom.head;if(null==e)throw new Error("Head is not available yet");return xe.fromDom(e)}(Me(t))},Qe=function(t){return xe.fromDom(t.dom.host)},tn=function(t,e){Fe(t).each(function(n){n.dom.insertBefore(e.dom,t.dom)})},en=function(t,e){He(t).fold(function(){Fe(t).each(function(t){on(t,e)})},function(t){tn(t,e)})},nn=function(t,e){We(t).fold(function(){on(t,e)},function(n){t.dom.insertBefore(e.dom,n.dom)})},on=function(t,e){t.dom.appendChild(e.dom)},rn=function(t,e){U(e,function(e){on(t,e)})},an=function(t){t.dom.textContent="",U(Ze(t),function(t){sn(t)})},sn=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},ln=function(t){var e,n=Ze(t);0<n.length&&(e=t,U(n,function(t){tn(e,t)})),sn(t)},cn=function(t){var e=Le(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;var n,o,i,r,a=e.ownerDocument;return i=xe.fromDom(e),r=Ye(i),(Ge(r)?C.some(r):C.none()).fold(function(){return a.body.contains(e)},(n=cn,o=Qe,function(t){return n(o(t))}))},un=function(t,e){return{left:t,top:e,translate:function(n,o){return un(t+n,e+o)}}},dn=un,fn=function(t,e){return void 0!==t?t:void 0!==e?e:0},hn=function(t){var e,n=t.dom,o=n.ownerDocument.body;return o===n?dn(o.offsetLeft,o.offsetTop):cn(t)?(e=n.getBoundingClientRect(),dn(e.left,e.top)):dn(0,0)},pn=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return dn(n,o)},mn=function(t,e,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},gn=function(t,e){se().browser.isSafari()&&L(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},vn=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},yn=function(t){var e,n,o=void 0===t?window:t,i=o.document,r=pn(xe.fromDom(i));return n=void 0===(e=o)?window:e,C.from(n.visualViewport).fold(function(){var t=o.document.documentElement,e=t.clientWidth,n=t.clientHeight;return vn(r.left,r.top,e,n)},function(t){return vn(Math.max(t.pageLeft,r.left),Math.max(t.pageTop,r.top),t.width,t.height)})},_n=function(t){return function(e){return!!e&&e.nodeType===t}},bn=function(t){return!!t&&!Object.getPrototypeOf(t)},wn=_n(1),Cn=function(t){var e=t.map(function(t){return t.toLowerCase()});return function(t){if(t&&t.nodeName){var n=t.nodeName.toLowerCase();return F(e,n)}return!1}},xn=function(t,e){var n=e.toLowerCase().split(" ");return function(e){var o;if(wn(e))for(o=0;o<n.length;o++){var i=e.ownerDocument.defaultView.getComputedStyle(e,null);if((i?i.getPropertyValue(t):null)===n[o])return!0}return!1}},Sn=function(t){return function(e){return wn(e)&&e.hasAttribute(t)}},Tn=function(t){return wn(t)&&t.hasAttribute("data-mce-bogus")},kn=function(t){return wn(t)&&"TABLE"===t.tagName},En=function(t){return function(e){if(wn(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},An=Cn(["textarea","input"]),Pn=_n(3),Nn=_n(8),On=_n(9),Dn=_n(11),Ln=Cn(["br"]),Rn=Cn(["img"]),Bn=En("true"),In=En("false"),Mn=Cn(["td","th"]),zn=Cn(["video","audio","object","embed"]),Fn=function(t){return void 0!==t.style&&L(t.style.getPropertyValue)},jn=function(t,e,n){if(!(k(n)||N(n)||R(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Hn=function(t,e,n){jn(t.dom,e,n)},Un=function(t,e){var n=t.dom;it(e,function(t,e){jn(n,e,t)})},$n=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},Zn=function(t,e){t.dom.removeAttribute(e)},qn=function(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||cn(t)?o:Wn(n,e)},Wn=function(t,e){return Fn(t)?t.style.getPropertyValue(e):""},Vn=function(t,e){var n=t.dom,o=Wn(n,e);return C.from(o).filter(function(t){return 0<t.length})},Gn=function(t){var e={},n=t.dom;if(Fn(n))for(var o=0;o<n.style.length;o++){var i=n.style.item(o);e[i]=n.style[i]}return e},Kn=se().browser,Xn=function(t){return V(t,De)},Yn=function(t,e){return t.children&&F(t.children,e)},Jn=function(t,e,n){var o,i,r,a=0,s=0,l=t.ownerDocument;if(n=n||t,e){if(n===t&&e.getBoundingClientRect&&"static"===qn(xe.fromDom(t),"position"))return{x:a=(i=e.getBoundingClientRect()).left+(l.documentElement.scrollLeft||t.scrollLeft)-l.documentElement.clientLeft,y:s=i.top+(l.documentElement.scrollTop||t.scrollTop)-l.documentElement.clientTop};for(o=e;o&&o!==n&&o.nodeType&&!Yn(o,n);)a+=o.offsetLeft||0,s+=o.offsetTop||0,o=o.offsetParent;for(o=e.parentNode;o&&o!==n&&o.nodeType&&!Yn(o,n);)a-=o.scrollLeft||0,s-=o.scrollTop||0,o=o.parentNode;s+=(r=xe.fromDom(e),Kn.isFirefox()&&"table"===Pe(r)?Xn(Ze(r)).filter(function(t){return"caption"===Pe(t)}).bind(function(t){return Xn($e(t)).map(function(e){var n=e.dom.offsetTop,o=t.dom.offsetTop,i=t.dom.offsetHeight;return n<=o?-i:0})}).getOr(0):0)}return{x:a,y:s}},Qn={},to={exports:Qn};kt=void 0,Et=Qn,At=to,Pt=void 0,function(t){"object"==typeof Et&&void 0!==At?At.exports=t():"function"==typeof kt&&kt.amd?kt([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=t()}(function(){return function t(e,n,o){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof Pt&&Pt;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof Pt&&Pt,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){var o,i,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(t){o=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var c,u=[],d=!1,f=-1;function h(){d&&c&&(d=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!d){var t=l(h);d=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new m(t,e)),1!==u.length||d||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],2:[function(t,e,n){(function(t){function n(){}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n,o=1===t._state?e.onFulfilled:e.onRejected;if(null!==o){try{n=o(t._value)}catch(t){return void a(e.promise,t)}r(e.promise,n)}else(1===t._state?r:a)(e.promise,t._value)})):t._deferreds.push(e)}function r(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void s(t);if("function"==typeof n)return void c((i=n,r=e,function(){i.apply(r,arguments)}),t)}t._state=1,t._value=e,s(t)}catch(e){a(t,e)}var i,r}function a(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function c(t,e){var n=!1;try{t(function(t){n||(n=!0,r(e,t))},function(t){n||(n=!0,a(e,t))})}catch(t){if(n)return;n=!0,a(e,t)}}var u;u=setTimeout,o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var o=new this.constructor(n);return i(this,new l(t,e,o)),o},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)!function i(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){i(r,t)},n)}e[r]=a,0==--o&&t(e)}catch(t){n(t)}}(i,e[i])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var o=0,i=t.length;o<i;o++)t[o].then(e,n)})},o._immediateFn="function"==typeof t?function(e){t(e)}:function(t){u(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o._setImmediateFn=function(t){o._immediateFn=t},o._setUnhandledRejectionFn=function(t){o._unhandledRejectionFn=t},void 0!==e&&e.exports?e.exports=o:this.Promise||(this.Promise=o)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,o){var i=t("process/browser.js").nextTick,r=Function.prototype.apply,a=Array.prototype.slice,s={},l=0;function c(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new c(r.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(r.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n.setImmediate="function"==typeof e?e:function(t){var e=l++,o=!(arguments.length<2)&&a.call(arguments,1);return s[e]=!0,i(function(){s[e]&&(o?t.apply(null,o):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof o?o:function(t){delete s[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var o=t("promise-polyfill"),i="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:i.Promise||o}},{"promise-polyfill":2}]},{},[4])(4)});var eo=to.exports.boltExport,no=function(t){var e=C.none(),n=[],o=function(t){i()?r(t):n.push(t)},i=function(){return e.isSome()},r=function(t){e.each(function(e){setTimeout(function(){t(e)},0)})};return t(function(t){i()||(e=C.some(t),function(t){U(t,r)}(n),n=[])}),{get:o,map:function(t){return no(function(e){o(function(n){e(t(n))})})},isReady:i}},oo={nu:no,pure:function(t){return no(function(e){e(t)})}},io=function(t){setTimeout(function(){throw t},0)},ro=function(t){var e=function(e){t().then(e,io)};return{map:function(e){return ro(function(){return t().then(e)})},bind:function(e){return ro(function(){return t().then(function(t){return e(t).toPromise()})})},anonBind:function(e){return ro(function(){return t().then(function(){return e.toPromise()})})},toLazy:function(){return oo.nu(e)},toCached:function(){var e=null;return ro(function(){return null===e&&(e=t()),e})},toPromise:t,get:e}},ao=function(t){return ro(function(){return new eo(t)})},so=function(t,e){return e(function(e){var n=[],o=0;0===t.length?e([]):U(t,function(i,r){var a;i.get((a=r,function(i){n[a]=i,++o>=t.length&&e(n)}))})})},lo=function(t){return{is:function(e){return t===e},isValue:y,isError:v,getOr:c(t),getOrThunk:c(t),getOrDie:c(t),or:function(e){return lo(t)},orThunk:function(e){return lo(t)},fold:function(e,n){return n(t)},map:function(e){return lo(e(t))},mapError:function(e){return lo(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOptional:function(){return C.some(t)}}},co=function(t){return{is:v,isValue:v,isError:y,getOr:u,getOrThunk:function(t){return t()},getOrDie:function(){return g(String(t))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return co(t)},mapError:function(e){return co(e(t))},each:s,bind:function(e){return co(t)},exists:v,forall:y,toOptional:C.none}},uo={value:lo,error:co,fromOption:function(t,e){return t.fold(function(){return co(e)},lo)}},fo=function(t){if(!A(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return U(t,function(o,i){var r=nt(o);if(1!==r.length)throw new Error("one and only one name per case");var a=r[0],s=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!A(s))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var o=new Array(n),r=0;r<o.length;r++)o[r]=arguments[r];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[i].apply(null,o)},match:function(t){var n=nt(t);if(e.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+n.join(","));if(!X(e,function(t){return F(n,t)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,o)},log:function(t){console.log(t,{constructors:e,constructor:a,params:o})}}}}),n},ho=(fo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t){return t.fold(u,u)});function po(t,e,n,o,i){return t(n,o)?C.some(n):L(i)&&i(n)?C.none():e(n,o,i)}var mo,go,vo,yo,_o=function(t,e,n){for(var o=t.dom,i=L(n)?n:v;o.parentNode;){o=o.parentNode;var r=xe.fromDom(o);if(e(r))return C.some(r);if(i(r))break}return C.none()},bo=function(t,e,n){return po(function(t,e){return e(t)},_o,t,e,n)},wo=function(t,e,n){return _o(t,function(t){return Te(t,e)},n)},Co=function(t,e){return n=e,i=void 0===(o=t)?document:o.dom,ke(i)?C.none():C.from(i.querySelector(n)).map(xe.fromDom);var n,o,i},xo=function(t,e,n){return po(Te,wo,t,e,n)},So=window.Promise?window.Promise:(mo=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},vo=(go=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],Oo(t,To(Eo,this),To(Ao,this))}).immediateFn||"function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,1)},go.prototype.catch=function(t){return this.then(null,t)},go.prototype.then=function(t,e){var n=this;return new go(function(o,i){ko.call(n,new No(t,e,o,i))})},go.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&mo(arguments[0])?arguments[0]:arguments);return new go(function(e,n){if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)!function i(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){i(r,t)},n)}t[r]=a,0==--o&&e(t)}catch(t){n(t)}}(i,t[i])})},go.resolve=function(t){return t&&"object"==typeof t&&t.constructor===go?t:new go(function(e){e(t)})},go.reject=function(t){return new go(function(e,n){n(t)})},go.race=function(t){return new go(function(e,n){for(var o=0,i=t.length;o<i;o++)t[o].then(e,n)})},go);function To(t,e){return function(){t.apply(e,arguments)}}function ko(t){var e=this;null!==this._state?vo(function(){var n,o=e._state?t.onFulfilled:t.onRejected;if(null!==o){try{n=o(e._value)}catch(e){return void t.reject(e)}t.resolve(n)}else(e._state?t.resolve:t.reject)(e._value)}):this._deferreds.push(t)}function Eo(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void Oo(To(e,t),To(Eo,this),To(Ao,this))}this._state=!0,this._value=t,Po.call(this)}catch(t){Ao.call(this,t)}}function Ao(t){this._state=!1,this._value=t,Po.call(this)}function Po(){for(var t=0,e=this._deferreds.length;t<e;t++)ko.call(this,this._deferreds[t]);this._deferreds=null}function No(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}function Oo(t,e,n){var o=!1;try{t(function(t){o||(o=!0,e(t))},function(t){o||(o=!0,n(t))})}catch(t){if(o)return;o=!0,n(t)}}var Do=function(t,e){return"number"!=typeof e&&(e=0),setTimeout(t,e)},Lo=function(t,e){return"number"!=typeof e&&(e=1),setInterval(t,e)},Ro=function(t,e){var n,o=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];clearTimeout(n),n=Do(function(){t.apply(this,o)},e)};return o.stop=function(){clearTimeout(n)},o},Bo={requestAnimationFrame:function(t,e){yo?yo.then(t):yo=new So(function(t){!function(t,e){for(var n=window.requestAnimationFrame,o=["ms","moz","webkit"],i=0;i<o.length&&!n;i++)n=window[o[i]+"RequestAnimationFrame"];(n=n||function(t){window.setTimeout(t,0)})(t,e)}(t,e=e||document.body)}).then(t)},setTimeout:Do,setInterval:Lo,setEditorTimeout:function(t,e,n){return Do(function(){t.removed||e()},n)},setEditorInterval:function(t,e,n){var o=Lo(function(){t.removed?clearInterval(o):e()},n);return o},debounce:Ro,throttle:Ro,clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)}};function Io(t,e){void 0===e&&(e={});var n=0,o={},i=xe.fromDom(t),r=Me(i),a=e.maxLoadTime||5e3,s=function(s,l,c){var u,d=we._addCacheSuffix(s),f=dt(o,d).getOrThunk(function(){return{id:"mce-u"+n++,passed:[],failed:[],count:0}});(o[d]=f).count++;var h,p,m,g=function(t,e){for(var n=t.length;n--;)t[n]();f.status=e,f.passed=[],f.failed=[],u&&(u.onload=null,u.onerror=null,u=null)},v=function(){return g(f.passed,2)},y=function(){return g(f.failed,3)},_=function(){var e;e=_,function(){for(var e=t.styleSheets,n=e.length;n--;){var o=e[n].ownerNode;if(o&&o.id===u.id)return v(),1}}()||(Date.now()-p<a?Bo.setTimeout(e):y())};l&&f.passed.push(l),c&&f.failed.push(c),1!==f.status&&(2!==f.status?3!==f.status?(f.status=1,h=xe.fromTag("link",r.dom),Un(h,{rel:"stylesheet",type:"text/css",id:f.id}),p=Date.now(),e.contentCssCors&&Hn(h,"crossOrigin","anonymous"),e.referrerPolicy&&Hn(h,"referrerpolicy",e.referrerPolicy),(u=h.dom).onload=_,u.onerror=y,m=h,on(Je(i),m),Hn(h,"href",d)):y():v())},u=function(t){return ao(function(e){s(t,l(e,c(uo.value(t))),l(e,c(uo.error(t))))})},d=function(t){var e=we._addCacheSuffix(t);dt(o,e).each(function(t){var n,r;0==--t.count&&(delete o[e],n=t.id,r=Je(i),Co(r,"#"+n).each(sn))})};return{load:s,loadAll:function(t,e,n){var o;o=H(t,u),so(o,ao).get(function(t){var o=function(t,e){for(var n=[],o=[],i=0,r=t.length;i<r;i++){var a=t[i];(e(a)?n:o).push(a)}return{pass:n,fail:o}}(t,function(t){return t.isValue()});0<o.fail.length?n(o.fail.map(ho)):e(o.pass.map(ho))})},unload:d,unloadAll:function(t){U(t,function(t){d(t)})},_setReferrerPolicy:function(t){e.referrerPolicy=t}}}var Mo,zo=(Mo=new WeakMap,{forElement:function(t,e){var n=Ye(t).dom;return C.from(Mo.get(n)).getOrThunk(function(){var t=Io(n,e);return Mo.set(n,t),t})}}),Fo=(jo.prototype.current=function(){return this.node},jo.prototype.next=function(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node},jo.prototype.prev=function(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node},jo.prototype.prev2=function(t){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",t),this.node},jo.prototype.findSibling=function(t,e,n,o){var i,r;if(t){if(!o&&t[e])return t[e];if(t!==this.rootNode){if(i=t[n])return i;for(r=t.parentNode;r&&r!==this.rootNode;r=r.parentNode)if(i=r[n])return i}}},jo.prototype.findPreviousNode=function(t,e,n,o){var i,r,a;if(t){if(i=t[n],this.rootNode&&i===this.rootNode)return;if(i){if(!o)for(a=i[e];a;a=a[e])if(!a[e])return a;return i}if((r=t.parentNode)&&r!==this.rootNode)return r}},jo);function jo(t,e){this.node=t,this.rootNode=e,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}var Ho=function(t){var e;return function(n){return(e=e||function(t,e){for(var n={},o=0,i=t.length;o<i;o++){var r=t[o];n[String(r)]=e(r,o)}return n}(t,y)).hasOwnProperty(Pe(n))}},Uo=Ho(["h1","h2","h3","h4","h5","h6"]),$o=Ho(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Zo=function(t){return De(t)&&!$o(t)},qo=function(t){return De(t)&&"br"===Pe(t)},Wo=Ho(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Vo=Ho(["ul","ol","dl"]),Go=Ho(["li","dd","dt"]),Ko=Ho(["thead","tbody","tfoot"]),Xo=Ho(["td","th"]),Yo=Ho(["pre","script","textarea","style"]),Jo="\ufeff",Qo="",ti=Jo,ei=function(t){return t===Jo},ni=function(t){return t.replace(/\uFEFF/g,"")},oi=wn,ii=Pn,ri=function(t){return ii(t)&&(t=t.parentNode),oi(t)&&t.hasAttribute("data-mce-caret")},ai=function(t){return ii(t)&&ei(t.data)},si=function(t){return ri(t)||ai(t)},li=function(t){return t.firstChild!==t.lastChild||!Ln(t.firstChild)},ci=function(t){var e=t.container();return!!Pn(e)&&(e.data.charAt(t.offset())===ti||t.isAtStart()&&ai(e.previousSibling))},ui=function(t){var e=t.container();return!!Pn(e)&&(e.data.charAt(t.offset()-1)===ti||t.isAtEnd()&&ai(e.nextSibling))},di=function(t){return ii(t)&&t.data[0]===ti},fi=function(t){return ii(t)&&t.data[t.data.length-1]===ti},hi=function(t){return t&&t.hasAttribute("data-mce-caret")?(n=(e=t.getElementsByTagName("br"))[e.length-1],Tn(n)&&n.parentNode.removeChild(n),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("_moz_abspos"),t):null;var e,n},pi=Bn,mi=In,gi=Ln,vi=Pn,yi=Cn(["script","style","textarea"]),_i=Cn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),bi=Cn(["table"]),wi=si,Ci=function(t){return!wi(t)&&(vi(t)?!yi(t.parentNode):_i(t)||gi(t)||bi(t)||xi(t))},xi=function(t){return!1===(wn(e=t)&&"true"===e.getAttribute("unselectable"))&&mi(t);var e},Si=function(t,e){return Ci(t)&&function(t,e){for(t=t.parentNode;t&&t!==e;t=t.parentNode){if(xi(t))return!1;if(pi(t))return!0}return!0}(t,e)},Ti=/^[ \t\r\n]*$/,ki=function(t){return Ti.test(t)},Ei=function(t,e){return Ci(t)&&!1===(i=e,Pn(o=t)&&ki(o.data)&&!1===function(t,e){var n,o,i=xe.fromDom(e);return n=xe.fromDom(t),o=d(Ee,i),wo(n,"pre,code",o).isSome()}(o,i))||wn(n=t)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id"))||Ai(t);var n,o,i},Ai=Sn("data-mce-bookmark"),Pi=Sn("data-mce-bogus"),Ni=("data-mce-bogus","all",function(t){return wn(t)&&"all"===t.getAttribute("data-mce-bogus")}),Oi=function(t,e){return void 0===e&&(e=!0),function(t,e){var n,o=0;if(Ei(t,t))return!1;if(!(n=t.firstChild))return!0;var i=new Fo(n,t);do{if(e){if(Ni(n)){n=i.next(!0);continue}if(Pi(n)){n=i.next();continue}}if(Ln(n))o++,n=i.next();else{if(Ei(n,t))return!1;n=i.next()}}while(n);return o<=1}(t.dom,e)},Di=function(t,e){return D(t)&&(Ei(t,e)||Zo(xe.fromDom(t)))},Li=function(t){return"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type")},Ri=function(t,e,n){var o=n||e;if(wn(e)&&Li(e))return e;for(var i,r,a,s=e.childNodes,l=s.length-1;0<=l;l--)Ri(t,s[l],o);return!wn(e)||1===(i=e.childNodes).length&&Li(i[0])&&e.parentNode.insertBefore(i[0],e),Dn(a=e)||On(a)||Ei(e,o)||wn(r=e)&&0<r.childNodes.length||function(t,e){return Pn(t)&&0<t.data.length&&(i=new Fo(n=t,o=e).prev(!1),r=new Fo(n,o).next(!1),a=O(i)||Di(i,o),s=O(r)||Di(r,o),a&&s);var n,o,i,r,a,s}(e,o)||t.remove(e),e},Bi=we.makeMap,Ii=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mi=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zi=/[<>&\"\']/g,Fi=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ji={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},Hi={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ui={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},$i=function(t,e){var n,o,i,r={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)o=String.fromCharCode(parseInt(t[n],e)),Hi[o]||(i="&"+t[n+1]+";",r[o]=i,r[i]=o);return r}},Zi=$i("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),qi=function(t,e){return t.replace(e?Ii:Mi,function(t){return Hi[t]||t})},Wi=function(t,e){return t.replace(e?Ii:Mi,function(t){return 1<t.length?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":Hi[t]||"&#"+t.charCodeAt(0)+";"})},Vi=function(t,e,n){return n=n||Zi,t.replace(e?Ii:Mi,function(t){return Hi[t]||n[t]||t})},Gi={encodeRaw:qi,encodeAllRaw:function(t){return(""+t).replace(zi,function(t){return Hi[t]||t})},encodeNumeric:Wi,encodeNamed:Vi,getEncodeFunc:function(t,e){var n=$i(e)||Zi,o=Bi(t.replace(/\+/g,","));return o.named&&o.numeric?function(t,e){return t.replace(e?Ii:Mi,function(t){return void 0!==Hi[t]?Hi[t]:void 0!==n[t]?n[t]:1<t.length?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";"})}:o.named?e?function(t,e){return Vi(t,e,n)}:Vi:o.numeric?Wi:qi},decode:function(t){return t.replace(Fi,function(t,e){return e?65535<(e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10))?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):ji[e]||String.fromCharCode(e):Ui[t]||Zi[t]||(n=t,(o=xe.fromTag("div").dom).innerHTML=n,o.textContent||o.innerText||n);var n,o})}},Ki={},Xi={},Yi=we.makeMap,Ji=we.each,Qi=we.extend,tr=we.explode,er=we.inArray,nr=function(t,e){return(t=we.trim(t))?t.split(e||" "):[]},or=function(t){var e,n,o,i,r,a,s={},l=function(t,n,o){var i,r,a=function(t,e){for(var n={},o=0,i=t.length;o<i;o++)n[t[o]]=e||{};return n};n=n||"","string"==typeof(o=o||[])&&(o=nr(o));for(var l=nr(t),c=l.length;c--;)r={attributes:a(i=nr([e,n].join(" "))),attributesOrder:i,children:a(o,Xi)},s[l[c]]=r},c=function(t,e){for(var n,o,i,r=nr(t),a=r.length,l=nr(e);a--;)for(n=s[r[a]],o=0,i=l.length;o<i;o++)n.attributes[l[o]]={},n.attributesOrder.push(l[o])};return Ki[t]?Ki[t]:(e="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(e+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==t&&(e+=" xml:lang",o=[o,a="acronym applet basefont big font strike tt"].join(" "),Ji(nr(a),function(t){l(t,"",o)}),n=[n,r="center dir isindex noframes"].join(" "),i=[n,o].join(" "),Ji(nr(r),function(t){l(t,"",i)})),i=i||[n,o].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),l("address dt dd div caption","",i),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),l("blockquote","cite",i),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",i),l("dl","","dt dd"),l("a","href target rel media hreflang type",o),l("q","cite",o),l("ins del","cite datetime",i),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",i),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),l("param","name value"),l("map","name",[i,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",i),l("th","colspan rowspan headers scope abbr",i),l("form","accept-charset action autocomplete enctype method name novalidate target",i),l("fieldset","disabled form name",[i,"legend"].join(" ")),l("label","form for",o),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?i:o),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[i,"li"].join(" ")),l("noscript","",i),"html4"!==t&&(l("wbr"),l("ruby","",[o,"rt rp"].join(" ")),l("figcaption","",i),l("mark rt rp summary bdi","",o),l("canvas","width height",i),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[o,"option"].join(" ")),l("article section nav aside main header footer","",i),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[i,"figcaption"].join(" ")),l("time","datetime",o),l("dialog","open",i),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",o),l("progress","value max",o),l("meter","value min max low high optimum",o),l("details","open",[i,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==t&&(c("script","language xml:space"),c("style","xml:space"),c("object","declare classid code codebase codetype archive standby align border hspace vspace"),c("embed","align name hspace vspace"),c("param","valuetype type"),c("a","charset name rev shape coords"),c("br","clear"),c("applet","codebase archive code object alt name width height align hspace vspace"),c("img","name longdesc align border hspace vspace"),c("iframe","longdesc frameborder marginwidth marginheight scrolling align"),c("font basefont","size color face"),c("input","usemap align"),c("select"),c("textarea"),c("h1 h2 h3 h4 h5 h6 div p legend caption","align"),c("ul","type compact"),c("li","type"),c("ol dl menu dir","compact"),c("pre","width xml:space"),c("hr","align noshade size width"),c("isindex","prompt"),c("table","summary width frame rules cellspacing cellpadding align bgcolor"),c("col","width align char charoff valign"),c("colgroup","width align char charoff valign"),c("thead","align char charoff valign"),c("tr","align char charoff valign bgcolor"),c("th","axis align char charoff valign nowrap bgcolor width height"),c("form","accept"),c("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),c("tfoot","align char charoff valign"),c("tbody","align char charoff valign"),c("area","nohref"),c("body","background bgcolor text link vlink alink")),"html4"!==t&&(c("input button select textarea","autofocus"),c("input textarea","placeholder"),c("a","download"),c("link script img","crossorigin"),c("img","loading"),c("iframe","sandbox seamless allowfullscreen loading")),Ji(nr("a form meter progress dfn"),function(t){s[t]&&delete s[t].children[t]}),delete s.caption.children.table,delete s.script,Ki[t]=s)},ir=function(t,e){var n;return t&&(n={},"string"==typeof t&&(t={"*":t}),Ji(t,function(t,o){n[o]=n[o.toUpperCase()]=("map"===e?Yi:tr)(t,/[, ]/)})),n};function rr(t){var e={},n={},o=[],i={},r={},a=function(e,n,o){var i=t[e];return i?i=Yi(i,/[, ]/,Yi(i.toUpperCase(),/[, ]/)):(i=Ki[e])||(i=Yi(n," ",Yi(n.toUpperCase()," ")),i=Qi(i,o),Ki[e]=i),i},s=or((t=t||{}).schema);!1===t.verify_html&&(t.valid_elements="*[*]");var l=ir(t.valid_styles),c=ir(t.invalid_styles,"map"),u=ir(t.valid_classes,"map"),d=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=a("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),m="td th iframe video audio object script code",g=a("non_empty_elements",m+" pre",h),v=a("move_caret_before_on_enter_elements",m+" table",h),y=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),_=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",y),b=a("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");Ji((t.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(t){r[t]=new RegExp("</"+t+"[^>]*>","gi")});var w=function(t){return new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$")},C=function(t){var n,i,r,a,s,l,c,u,d,f,h,p,m,g,v,y,_,b,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,x=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(t){var T=nr(t,",");for(e["@"]&&(y=e["@"].attributes,_=e["@"].attributesOrder),n=0,i=T.length;n<i;n++)if(s=C.exec(T[n])){if(g=s[1],d=s[2],v=s[3],u=s[5],l={attributes:p={},attributesOrder:m=[]},"#"===g&&(l.paddEmpty=!0),"-"===g&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),y&&(it(y,function(t,e){p[e]=t}),m.push.apply(m,_)),u)for(r=0,a=(u=nr(u,"|")).length;r<a;r++)if(s=x.exec(u[r])){if(c={},h=s[1],f=s[2].replace(/[\\:]:/g,":"),g=s[3],b=s[4],"!"===h&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(f),c.required=!0),"-"===h){delete p[f],m.splice(er(m,f),1);continue}g&&("="===g&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:f,value:b}),c.defaultValue=b),":"===g&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:f,value:b}),c.forcedValue=b),"<"===g&&(c.validValues=Yi(b,"?"))),S.test(f)?(l.attributePatterns=l.attributePatterns||[],c.pattern=w(f),l.attributePatterns.push(c)):(p[f]||m.push(f),p[f]=c)}y||"@"!==d||(y=p,_=m),v&&(l.outputName=d,e[v]=l),S.test(d)?(l.pattern=w(d),o.push(l)):e[d]=l}}},x=function(t){e={},o=[],C(t),Ji(s,function(t,e){n[e]=t.children})},S=function(t){var o=/^(~)?(.+)$/;t&&(Ki.text_block_elements=Ki.block_elements=null,Ji(nr(t,","),function(t){var r,a=o.exec(t),s="~"===a[1],l=s?"span":"div",c=a[2];n[c]=n[l],i[c]=l,s||(_[c.toUpperCase()]={},_[c]={}),e[c]||(r=e[l],delete(r=Qi({},r)).removeEmptyAttrs,delete r.removeEmpty,e[c]=r),Ji(n,function(t,e){t[l]&&(n[e]=t=Qi({},n[e]),t[c]=t[l])})}))},T=function(e){var o=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Ki[t.schema]=null,e&&Ji(nr(e,","),function(t){var e,i,r=o.exec(t);r&&(i=r[1],e=i?n[r[2]]:n[r[2]]={"#comment":{}},e=n[r[2]],Ji(nr(r[3],"|"),function(t){"-"===i?delete e[t]:e[t]={}}))})},k=function(t){var n,i=e[t];if(i)return i;for(n=o.length;n--;)if((i=o[n]).pattern.test(t))return i};return t.valid_elements?x(t.valid_elements):(Ji(s,function(t,o){e[o]={attributes:t.attributes,attributesOrder:t.attributesOrder},n[o]=t.children}),"html5"!==t.schema&&Ji(nr("strong/b em/i"),function(t){var n=nr(t,"/");e[n[1]].outputName=n[0]}),Ji(nr("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(t){e[t]&&(e[t].removeEmpty=!0)}),Ji(nr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(t){e[t].paddEmpty=!0}),Ji(nr("span"),function(t){e[t].removeEmptyAttrs=!0})),S(t.custom_elements),T(t.valid_children),C(t.extended_valid_elements),T("+ol[ul|ol],+ul[ul|ol]"),Ji({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(t,n){e[n]&&(e[n].parentsRequired=nr(t))}),t.invalid_elements&&Ji(tr(t.invalid_elements),function(t){e[t]&&delete e[t]}),k("span")||C("span[!data-mce-type|*]"),{children:n,elements:e,getValidStyles:function(){return l},getValidClasses:function(){return u},getBlockElements:function(){return _},getInvalidStyles:function(){return c},getShortEndedElements:function(){return h},getTextBlockElements:function(){return y},getTextInlineElements:function(){return b},getBoolAttrs:function(){return p},getElementRule:k,getSelfClosingElements:function(){return f},getNonEmptyElements:function(){return g},getMoveCaretBeforeOnEnterElements:function(){return v},getWhiteSpaceElements:function(){return d},getSpecialElements:function(){return r},isValidChild:function(t,e){var o=n[t.toLowerCase()];return!(!o||!o[e.toLowerCase()])},isValid:function(t,e){var n,o,i=k(t);if(i){if(!e)return!0;if(i.attributes[e])return!0;if(n=i.attributePatterns)for(o=n.length;o--;)if(n[o].pattern.test(t))return!0}return!1},getCustomElements:function(){return i},addValidElements:C,setValidElements:x,addCustomElements:S,addValidChildren:T}}var ar=function(t,e,n,o){var i=function(t){return 1<(t=parseInt(t,10).toString(16)).length?t:"0"+t};return"#"+i(e)+i(n)+i(o)},sr=function(t,e){var n,o,i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/,l={},c=Jo;t=t||{},e&&(n=e.getValidStyles(),o=e.getInvalidStyles());for(var u=("\\\" \\' \\; \\: ; : "+c).split(" "),d=0;d<u.length;d++)l[u[d]]=c+d,l[c+d]=u[d];return{toHex:function(t){return t.replace(i,ar)},parse:function(e){var n,o,u,f,h,p,m,g={},v=t.url_converter,y=t.url_converter_scope||this,_=function(t,e,n){var o=g[t+"-top"+e];if(o){var i=g[t+"-right"+e];if(i){var r=g[t+"-bottom"+e];if(r){var a=g[t+"-left"+e];if(a){var s=[o,i,r,a];for(d=s.length-1;d--&&s[d]===s[d+1];);-1<d&&n||(g[t+e]=-1===d?s[0]:s.join(" "),delete g[t+"-top"+e],delete g[t+"-right"+e],delete g[t+"-bottom"+e],delete g[t+"-left"+e])}}}}},b=function(t){var e,n=g[t];if(n){for(e=(n=n.split(" ")).length;e--;)if(n[e]!==n[0])return!1;return g[t]=n[0],!0}},w=function(t){return f=!0,l[t]},C=function(t,e){return f&&(t=t.replace(/\uFEFF[0-9]/g,function(t){return l[t]})),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t},x=function(t){return String.fromCharCode(parseInt(t.slice(1),16))},S=function(t){return t.replace(/\\[0-9a-f]+/gi,x)},T=function(e,n,o,i,r,a){if(r=r||a)return"'"+(r=C(r)).replace(/\'/g,"\\'")+"'";if(n=C(n||o||i),!t.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!t.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return v&&(n=v.call(y,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,w).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(t){return t.replace(/[;:]/g,w)});n=a.exec(e);)if(a.lastIndex=n.index+n[0].length,o=n[1].replace(s,"").toLowerCase(),u=n[2].replace(s,""),o&&u){if(o=S(o),u=S(u),-1!==o.indexOf(c)||-1!==o.indexOf('"'))continue;if(!t.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(u)))continue;"font-weight"===o&&"700"===u?u="bold":"color"!==o&&"background-color"!==o||(u=u.toLowerCase()),u=(u=u.replace(i,ar)).replace(r,T),g[o]=f?C(u,!0):u}_("border","",!0),_("border","-width"),_("border","-color"),_("border","-style"),_("padding",""),_("margin",""),"border",p="border-style",m="border-color",b(h="border-width")&&b(p)&&b(m)&&(g.border=g[h]+" "+g[p]+" "+g[m],delete g[h],delete g[p],delete g[m]),"medium none"===g.border&&delete g.border,"none"===g["border-image"]&&delete g["border-image"]}return g},serialize:function(t,e){var i="",r=function(e){var o,r=n[e];if(r)for(var a=0,s=r.length;a<s;a++)e=r[a],(o=t[e])&&(i+=(0<i.length?" ":"")+e+": "+o+";")};return e&&n?(r("*"),r(e)):it(t,function(t,n){var r,a,s;!t||o&&(r=n,a=e,(s=o["*"])&&s[r]||(s=o[a])&&s[r])||(i+=(0<i.length?" ":"")+n+": "+t+";")}),i}}},lr=/^(?:mouse|contextmenu)|click/,cr={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1,mozPressure:1},ur=function(){return!1},dr=function(){return!0},fr=function(t,e,n,o){t.addEventListener?t.addEventListener(e,n,o||!1):t.attachEvent&&t.attachEvent("on"+e,n)},hr=function(t,e,n,o){t.removeEventListener?t.removeEventListener(e,n,o||!1):t.detachEvent&&t.detachEvent("on"+e,n)},pr=function(t,e){var n,o,i,r,a,s,l=e||{};for(n in t)cr[n]||(l[n]=t[n]);return l.target||(l.target=l.srcElement||document),l.composedPath&&(l.composedPath=function(){return t.composedPath()}),t&&(a=t,lr.test(a.type))&&void 0===t.pageX&&void 0!==t.clientX&&(i=(o=l.target.ownerDocument||document).documentElement,r=o.body,l.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),l.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),l.preventDefault=function(){l.isDefaultPrevented=dr,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},l.stopPropagation=function(){l.isPropagationStopped=dr,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},!(l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=dr,l.stopPropagation()})==((s=l).isDefaultPrevented===dr||s.isDefaultPrevented===ur)&&(l.isDefaultPrevented=ur,l.isPropagationStopped=ur,l.isImmediatePropagationStopped=ur),void 0===l.metaKey&&(l.metaKey=!1),l},mr=(gr.prototype.bind=function(t,e,n,o){var i,r,a,s,l,c,u=this,d=window,f=function(t){u.executeHandlers(pr(t||d.event),i)};if(t&&3!==t.nodeType&&8!==t.nodeType){t[u.expando]?i=t[u.expando]:(i=u.count++,t[u.expando]=i,u.events[i]={}),o=o||t;for(var h=e.split(" "),p=h.length;p--;)l=f,s=c=!1,"DOMContentLoaded"===(a=h[p])&&(a="ready"),u.domLoaded&&"ready"===a&&"complete"===t.readyState?n.call(o,pr({type:a})):(u.hasMouseEnterLeave||(s=u.mouseEnterLeave[a])&&(l=function(t){var e=t.currentTarget,n=t.relatedTarget;if(n&&e.contains)n=e.contains(n);else for(;n&&n!==e;)n=n.parentNode;n||((t=pr(t||d.event)).type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=e,u.executeHandlers(t,i))}),u.hasFocusIn||"focusin"!==a&&"focusout"!==a||(c=!0,s="focusin"===a?"focus":"blur",l=function(t){(t=pr(t||d.event)).type="focus"===t.type?"focusin":"focusout",u.executeHandlers(t,i)}),(r=u.events[i][a])?"ready"===a&&u.domLoaded?n(pr({type:a})):r.push({func:n,scope:o}):(u.events[i][a]=r=[{func:n,scope:o}],r.fakeName=s,r.capture=c,r.nativeHandler=l,"ready"===a?function(t,e,n){var o,i=t.document,r={type:"ready"};n.domLoaded?e(r):(o=function(){hr(t,"DOMContentLoaded",o),hr(t,"load",o),n.domLoaded||(n.domLoaded=!0,e(r))},"complete"===i.readyState||"interactive"===i.readyState&&i.body?o():fr(t,"DOMContentLoaded",o),fr(t,"load",o))}(t,l,u):fr(t,s||a,l,c)));return t=r=null,n}},gr.prototype.unbind=function(t,e,n){var o,i,r;if(!t||3===t.nodeType||8===t.nodeType)return this;var a=t[this.expando];if(a){if(r=this.events[a],e){for(var s,l,c,u,d=e.split(" "),f=d.length;f--;)if(u=r[i=d[f]]){if(n)for(o=u.length;o--;)u[o].func===n&&(s=u.nativeHandler,l=u.fakeName,c=u.capture,(u=u.slice(0,o).concat(u.slice(o+1))).nativeHandler=s,u.fakeName=l,u.capture=c,r[i]=u);n&&0!==u.length||(delete r[i],hr(t,u.fakeName||i,u.nativeHandler,u.capture))}}else it(r,function(e,n){hr(t,e.fakeName||n,e.nativeHandler,e.capture)}),r={};for(i in r)if(ft(r,i))return this;delete this.events[a];try{delete t[this.expando]}catch(e){t[this.expando]=null}}return this},gr.prototype.fire=function(t,e,n){var o;if(!t||3===t.nodeType||8===t.nodeType)return this;var i=pr(null,n);for(i.type=e,i.target=t;(o=t[this.expando])&&this.executeHandlers(i,o),(t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow)&&!i.isPropagationStopped(););return this},gr.prototype.clean=function(t){var e,n;if(!t||3===t.nodeType||8===t.nodeType)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(this.unbind(t),e=(n=t.getElementsByTagName("*")).length;e--;)(t=n[e])[this.expando]&&this.unbind(t);return this},gr.prototype.destroy=function(){this.events={}},gr.prototype.cancel=function(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1},gr.prototype.executeHandlers=function(t,e){var n=this.events[e],o=n&&n[t.type];if(o)for(var i=0,r=o.length;i<r;i++){var a=o[i];if(a&&!1===a.func.call(a.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}},gr.Event=new gr,gr);function gr(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}var vr,yr,_r,br,wr,Cr,xr,Sr,Tr,kr,Er,Ar,Pr,Nr,Or,Dr,Lr,Rr="sizzle"+-new Date,Br=window.document,Ir=0,Mr=0,zr=ga(),Fr=ga(),jr=ga(),Hr=function(t,e){return t===e&&(kr=!0),0},Ur="undefined",$r={}.hasOwnProperty,Zr=[],qr=Zr.pop,Wr=Zr.push,Vr=Zr.push,Gr=Zr.slice,Kr=Zr.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},Xr="[\\x20\\t\\r\\n\\f]",Yr="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Jr="\\["+Xr+"*("+Yr+")(?:"+Xr+"*([*^$|!~]?=)"+Xr+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Yr+"))|)"+Xr+"*\\]",Qr=":("+Yr+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Jr+")*)|.*)\\)|)",ta=new RegExp("^"+Xr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Xr+"+$","g"),ea=new RegExp("^"+Xr+"*,"+Xr+"*"),na=new RegExp("^"+Xr+"*([>+~]|"+Xr+")"+Xr+"*"),oa=new RegExp("="+Xr+"*([^\\]'\"]*?)"+Xr+"*\\]","g"),ia=new RegExp(Qr),ra=new RegExp("^"+Yr+"$"),aa={ID:new RegExp("^#("+Yr+")"),CLASS:new RegExp("^\\.("+Yr+")"),TAG:new RegExp("^("+Yr+"|[*])"),ATTR:new RegExp("^"+Jr),PSEUDO:new RegExp("^"+Qr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Xr+"*(even|odd|(([+-]|)(\\d*)n|)"+Xr+"*(?:([+-]|)"+Xr+"*(\\d+)|))"+Xr+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+Xr+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Xr+"*((?:-\\d)?\\d*)"+Xr+"*\\)|)(?=[^-]|$)","i")},sa=/^(?:input|select|textarea|button)$/i,la=/^h\d$/i,ca=/^[^{]+\{\s*\[native \w/,ua=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,da=/[+~]/,fa=/'|\\/g,ha=new RegExp("\\\\([\\da-f]{1,6}"+Xr+"?|("+Xr+")|.)","ig"),pa=function(t,e,n){var o="0x"+e-65536;return o!=o||n?e:o<0?String.fromCharCode(65536+o):String.fromCharCode(o>>10|55296,1023&o|56320)};try{Vr.apply(Zr=Gr.call(Br.childNodes),Br.childNodes),Zr[Br.childNodes.length].nodeType}catch(t){Vr={apply:Zr.length?function(t,e){Wr.apply(t,Gr.call(e))}:function(t,e){for(var n=t.length,o=0;t[n++]=e[o++];);t.length=n-1}}}var ma=function(t,e,n,o){var i,r,a,s,l,c,u,d,f,h;if((e?e.ownerDocument||e:Br)!==Ar&&Er(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=(e=e||Ar).nodeType)&&9!==s)return[];if(Nr&&!o){if(i=ua.exec(t))if(a=i[1]){if(9===s){if(!(r=e.getElementById(a))||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(a))&&Lr(e,r)&&r.id===a)return n.push(r),n}else{if(i[2])return Vr.apply(n,e.getElementsByTagName(t)),n;if((a=i[3])&&vr.getElementsByClassName)return Vr.apply(n,e.getElementsByClassName(a)),n}if(vr.qsa&&(!Or||!Or.test(t))){if(d=u=Rr,f=e,h=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(c=wr(t),(u=e.getAttribute("id"))?d=u.replace(fa,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+Ca(c[l]);f=da.test(t)&&ba(e.parentNode)||e,h=c.join(",")}if(h)try{return Vr.apply(n,f.querySelectorAll(h)),n}catch(t){}finally{u||e.removeAttribute("id")}}}return xr(t.replace(ta,"$1"),e,n,o)};function ga(){var t=[];return function e(n,o){return t.push(n+" ")>yr.cacheLength&&delete e[t.shift()],e[n+" "]=o}}function va(t){return t[Rr]=!0,t}function ya(t,e){var n=e&&t,o=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(o)return o;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function _a(t){return va(function(e){return e=+e,va(function(n,o){for(var i,r=t([],n.length,e),a=r.length;a--;)n[i=r[a]]&&(n[i]=!(o[i]=n[i]))})})}function ba(t){return t&&typeof t.getElementsByTagName!=Ur&&t}function wa(){}function Ca(t){for(var e=0,n=t.length,o="";e<n;e++)o+=t[e].value;return o}function xa(t,e,n){var o=e.dir,i=n&&"parentNode"===o,r=Mr++;return e.first?function(e,n,r){for(;e=e[o];)if(1===e.nodeType||i)return t(e,n,r)}:function(e,n,a){var s,l,c=[Ir,r];if(a){for(;e=e[o];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[o];)if(1===e.nodeType||i){if((s=(l=e[Rr]||(e[Rr]={}))[o])&&s[0]===Ir&&s[1]===r)return c[2]=s[2];if((l[o]=c)[2]=t(e,n,a))return!0}}}function Sa(t){return 1<t.length?function(e,n,o){for(var i=t.length;i--;)if(!t[i](e,n,o))return!1;return!0}:t[0]}function Ta(t,e,n,o,i){for(var r,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(r=t[s])&&(n&&!n(r,o,i)||(a.push(r),c&&e.push(s)));return a}function ka(t,e,n,o,i,r){return o&&!o[Rr]&&(o=ka(o)),i&&!i[Rr]&&(i=ka(i,r)),va(function(r,a,s,l){var c,u,d,f=[],h=[],p=a.length,m=r||function(t,e,n){for(var o=0,i=e.length;o<i;o++)ma(t,e[o],n);return n}(e||"*",s.nodeType?[s]:s,[]),g=!t||!r&&e?m:Ta(m,f,t,s,l),v=n?i||(r?t:p||o)?[]:a:g;if(n&&n(g,v,s,l),o)for(c=Ta(v,h),o(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[h[u]]=!(g[h[u]]=d));if(r){if(i||t){if(i){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(g[u]=d);i(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&-1<(c=i?Kr.call(r,d):f[u])&&(r[c]=!(a[c]=d))}}else v=Ta(v===a?v.splice(p,v.length):v),i?i(null,a,v,l):Vr.apply(a,v)})}vr=ma.support={},br=ma.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},Er=ma.setDocument=function(t){var e,n=t?t.ownerDocument||t:Br,o=n.defaultView;return n!==Ar&&9===n.nodeType&&n.documentElement?(Pr=(Ar=n).documentElement,Nr=!br(n),o&&o!==function(t){try{return t.top}catch(t){}return null}(o)&&(o.addEventListener?o.addEventListener("unload",function(){Er()},!1):o.attachEvent&&o.attachEvent("onunload",function(){Er()})),vr.attributes=!0,vr.getElementsByTagName=!0,vr.getElementsByClassName=ca.test(n.getElementsByClassName),vr.getById=!0,yr.find.ID=function(t,e){if(typeof e.getElementById!=Ur&&Nr){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},yr.filter.ID=function(t){var e=t.replace(ha,pa);return function(t){return t.getAttribute("id")===e}},yr.find.TAG=vr.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!=Ur)return e.getElementsByTagName(t)}:function(t,e){var n,o=[],i=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;n=r[i++];)1===n.nodeType&&o.push(n);return o},yr.find.CLASS=vr.getElementsByClassName&&function(t,e){if(Nr)return e.getElementsByClassName(t)},Dr=[],Or=[],vr.disconnectedMatch=!0,Or=Or.length&&new RegExp(Or.join("|")),Dr=Dr.length&&new RegExp(Dr.join("|")),e=ca.test(Pr.compareDocumentPosition),Lr=e||ca.test(Pr.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,o=e&&e.parentNode;return t===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):t.compareDocumentPosition&&16&t.compareDocumentPosition(o)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Hr=e?function(t,e){if(t===e)return kr=!0,0;var o=!t.compareDocumentPosition-!e.compareDocumentPosition;return o||(1&(o=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!vr.sortDetached&&e.compareDocumentPosition(t)===o?t===n||t.ownerDocument===Br&&Lr(Br,t)?-1:e===n||e.ownerDocument===Br&&Lr(Br,e)?1:Tr?Kr.call(Tr,t)-Kr.call(Tr,e):0:4&o?-1:1)}:function(t,e){if(t===e)return kr=!0,0;var o,i=0,r=t.parentNode,a=e.parentNode,s=[t],l=[e];if(!r||!a)return t===n?-1:e===n?1:r?-1:a?1:Tr?Kr.call(Tr,t)-Kr.call(Tr,e):0;if(r===a)return ya(t,e);for(o=t;o=o.parentNode;)s.unshift(o);for(o=e;o=o.parentNode;)l.unshift(o);for(;s[i]===l[i];)i++;return i?ya(s[i],l[i]):s[i]===Br?-1:l[i]===Br?1:0},n):Ar},ma.matches=function(t,e){return ma(t,null,null,e)},ma.matchesSelector=function(t,e){if((t.ownerDocument||t)!==Ar&&Er(t),e=e.replace(oa,"='$1']"),vr.matchesSelector&&Nr&&(!Dr||!Dr.test(e))&&(!Or||!Or.test(e)))try{var n=(void 0).call(t,e);if(n||vr.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return 0<ma(e,Ar,null,[t]).length},ma.contains=function(t,e){return(t.ownerDocument||t)!==Ar&&Er(t),Lr(t,e)},ma.attr=function(t,e){(t.ownerDocument||t)!==Ar&&Er(t);var n=yr.attrHandle[e.toLowerCase()],o=n&&$r.call(yr.attrHandle,e.toLowerCase())?n(t,e,!Nr):void 0;return void 0!==o?o:vr.attributes||!Nr?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ma.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ma.uniqueSort=function(t){var e,n=[],o=0,i=0;if(kr=!vr.detectDuplicates,Tr=!vr.sortStable&&t.slice(0),t.sort(Hr),kr){for(;e=t[i++];)e===t[i]&&(o=n.push(i));for(;o--;)t.splice(n[o],1)}return Tr=null,t},_r=ma.getText=function(t){var e,n="",o=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=_r(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[o++];)n+=_r(e);return n},(yr=ma.selectors={cacheLength:50,createPseudo:va,match:aa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ha,pa),t[3]=(t[3]||t[4]||t[5]||"").replace(ha,pa),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ma.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ma.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return aa.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ia.test(n)&&(e=wr(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(ha,pa).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=zr[t+" "];return e||(e=new RegExp("(^|"+Xr+")"+t+"("+Xr+"|$)"))&&zr(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!=Ur&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(o){var i=ma.attr(o,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&-1<i.indexOf(n):"$="===e?n&&i.slice(-n.length)===n:"~="===e?-1<(" "+i+" ").indexOf(n):"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,o,i){var r="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===o&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,f,h,p,m=r!=a?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(g){if(r){for(;m;){for(d=e;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(h=(c=(u=g[Rr]||(g[Rr]={}))[t]||[])[0]===Ir&&c[1],f=c[0]===Ir&&c[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===e){u[t]=[Ir,h,f];break}}else if(y&&(c=(e[Rr]||(e[Rr]={}))[t])&&c[0]===Ir)f=c[1];else for(;(d=++h&&d&&d[m]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[Rr]||(d[Rr]={}))[t]=[Ir,f]),d!==e)););return(f-=i)===o||f%o==0&&0<=f/o}}},PSEUDO:function(t,e){var n,o=yr.pseudos[t]||yr.setFilters[t.toLowerCase()]||ma.error("unsupported pseudo: "+t);return o[Rr]?o(e):1<o.length?(n=[t,t,"",e],yr.setFilters.hasOwnProperty(t.toLowerCase())?va(function(t,n){for(var i,r=o(t,e),a=r.length;a--;)t[i=Kr.call(t,r[a])]=!(n[i]=r[a])}):function(t){return o(t,0,n)}):o}},pseudos:{not:va(function(t){var e=[],n=[],o=Cr(t.replace(ta,"$1"));return o[Rr]?va(function(t,e,n,i){for(var r,a=o(t,null,i,[]),s=t.length;s--;)(r=a[s])&&(t[s]=!(e[s]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),!n.pop()}}),has:va(function(t){return function(e){return 0<ma(t,e).length}}),contains:va(function(t){return t=t.replace(ha,pa),function(e){return-1<(e.textContent||e.innerText||_r(e)).indexOf(t)}}),lang:va(function(t){return ra.test(t||"")||ma.error("unsupported lang: "+t),t=t.replace(ha,pa).toLowerCase(),function(e){var n;do{if(n=Nr?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===Pr},focus:function(t){return t===Ar.activeElement&&(!Ar.hasFocus||Ar.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!yr.pseudos.empty(t)},header:function(t){return la.test(t.nodeName)},input:function(t){return sa.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:_a(function(){return[0]}),last:_a(function(t,e){return[e-1]}),eq:_a(function(t,e,n){return[n<0?n+e:n]}),even:_a(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:_a(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:_a(function(t,e,n){for(var o=n<0?n+e:n;0<=--o;)t.push(o);return t}),gt:_a(function(t,e,n){for(var o=n<0?n+e:n;++o<e;)t.push(o);return t})}}).pseudos.nth=yr.pseudos.eq,U(["radio","checkbox","file","password","image"],function(t){var e;yr.pseudos[t]=(e=t,function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e})}),U(["submit","reset"],function(t){var e;yr.pseudos[t]=(e=t,function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e})}),wa.prototype=yr.filters=yr.pseudos,yr.setFilters=new wa,wr=ma.tokenize=function(t,e){var n,o,i,r,a,s,l,c=Fr[t+" "];if(c)return e?0:c.slice(0);for(a=t,s=[],l=yr.preFilter;a;){for(r in n&&!(o=ea.exec(a))||(o&&(a=a.slice(o[0].length)||a),s.push(i=[])),n=!1,(o=na.exec(a))&&(n=o.shift(),i.push({value:n,type:o[0].replace(ta," ")}),a=a.slice(n.length)),yr.filter)yr.filter.hasOwnProperty(r)&&(!(o=aa[r].exec(a))||l[r]&&!(o=l[r](o))||(n=o.shift(),i.push({value:n,type:r,matches:o}),a=a.slice(n.length)));if(!n)break}return e?a.length:a?ma.error(t):Fr(t,s).slice(0)},Cr=ma.compile=function(t,e){var n,o,i,r,a,s,l=[],c=[],u=jr[t+" "];if(!u){for(n=(e=e||wr(t)).length;n--;)(u=function t(e){for(var n,o,i,r=e.length,a=yr.relative[e[0].type],s=a||yr.relative[" "],l=a?1:0,c=xa(function(t){return t===n},s,!0),u=xa(function(t){return-1<Kr.call(n,t)},s,!0),d=[function(t,e,o){return!a&&(o||e!==Sr)||((n=e).nodeType?c:u)(t,e,o)}];l<r;l++)if(o=yr.relative[e[l].type])d=[xa(Sa(d),o)];else{if((o=yr.filter[e[l].type].apply(null,e[l].matches))[Rr]){for(i=++l;i<r&&!yr.relative[e[i].type];i++);return ka(1<l&&Sa(d),1<l&&Ca(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(ta,"$1"),o,l<i&&t(e.slice(l,i)),i<r&&t(e=e.slice(i)),i<r&&Ca(e))}d.push(o)}return Sa(d)}(e[n]))[Rr]?l.push(u):c.push(u);(u=jr(t,(o=c,r=0<(i=l).length,a=0<o.length,s=function(t,e,n,s,l){var c,u,d,f=0,h="0",p=t&&[],m=[],g=Sr,v=t||a&&yr.find.TAG("*",l),y=Ir+=null==g?1:Math.random()||.1,_=v.length;for(l&&(Sr=e!==Ar&&e);h!==_&&null!=(c=v[h]);h++){if(a&&c){for(u=0;d=o[u++];)if(d(c,e,n)){s.push(c);break}l&&(Ir=y)}r&&((c=!d&&c)&&f--,t&&p.push(c))}if(f+=h,r&&h!==f){for(u=0;d=i[u++];)d(p,m,e,n);if(t){if(0<f)for(;h--;)p[h]||m[h]||(m[h]=qr.call(s));m=Ta(m)}Vr.apply(s,m),l&&!t&&0<m.length&&1<f+i.length&&ma.uniqueSort(s)}return l&&(Ir=y,Sr=g),p},r?va(s):s))).selector=t}return u},xr=ma.select=function(t,e,n,o){var i,r,a,s,l,c="function"==typeof t&&t,u=!o&&wr(t=c.selector||t);if(n=n||[],1===u.length){if(2<(r=u[0]=u[0].slice(0)).length&&"ID"===(a=r[0]).type&&vr.getById&&9===e.nodeType&&Nr&&yr.relative[r[1].type]){if(!(e=(yr.find.ID(a.matches[0].replace(ha,pa),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(i=aa.needsContext.test(t)?0:r.length;i--&&(a=r[i],!yr.relative[s=a.type]);)if((l=yr.find[s])&&(o=l(a.matches[0].replace(ha,pa),da.test(r[0].type)&&ba(e.parentNode)||e))){if(r.splice(i,1),!(t=o.length&&Ca(r)))return Vr.apply(n,o),n;break}}return(c||Cr(t,u))(o,e,!Nr,n,da.test(t)&&ba(e.parentNode)||e),n},vr.sortStable=Rr.split("").sort(Hr).join("")===Rr,vr.detectDuplicates=!!kr,Er(),vr.sortDetached=!0;var Ea=document,Aa=Array.prototype.push,Pa=Array.prototype.slice,Na=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Oa=mr.Event,Da=we.makeMap("children,contents,next,prev"),La=function(t){return void 0!==t},Ra=function(t){return"string"==typeof t},Ba=function(t,e){var n,o=(e=e||Ea).createElement("div"),i=e.createDocumentFragment();for(o.innerHTML=t;n=o.firstChild;)i.appendChild(n);return i},Ia=function(t,e,n,o){var i;if(Ra(e))e=Ba(e,Xa(t[0]));else if(e.length&&!e.nodeType){if(e=es.makeArray(e),o)for(i=e.length-1;0<=i;i--)Ia(t,e[i],n,o);else for(i=0;i<e.length;i++)Ia(t,e[i],n,o);return t}if(e.nodeType)for(i=t.length;i--;)n.call(t[i],e);return t},Ma=function(t,e){return t&&e&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")},za=function(t,e,n){var o,i;return e=es(e)[0],t.each(function(){n&&o===this.parentNode||(o=this.parentNode,i=e.cloneNode(!1),this.parentNode.insertBefore(i,this)),i.appendChild(this)}),t},Fa=we.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),ja=we.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Ha={for:"htmlFor",class:"className",readonly:"readOnly"},Ua={float:"cssFloat"},$a={},Za={},qa=function(t,e){return new es.fn.init(t,e)},Wa=/^\s*|\s*$/g,Va=function(t){return null==t?"":(""+t).replace(Wa,"")},Ga=function(t,e){var n,o,i,r;if(t)if(void 0===(n=t.length)){for(o in t)if(t.hasOwnProperty(o)&&(r=t[o],!1===e.call(r,o,r)))break}else for(i=0;i<n&&(r=t[i],!1!==e.call(r,i,r));i++);return t},Ka=function(t,e){var n=[];return Ga(t,function(t,o){e(o,t)&&n.push(o)}),n},Xa=function(t){return t?9===t.nodeType?t:t.ownerDocument:Ea};qa.fn=qa.prototype={constructor:qa,selector:"",context:null,length:0,init:function(t,e){var n,o,i=this;if(!t)return i;if(t.nodeType)return i.context=i[0]=t,i.length=1,i;if(e&&e.nodeType)i.context=e;else{if(e)return es(t).attr(e);i.context=e=document}if(Ra(t)){if(!(n="<"===(i.selector=t).charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:Na.exec(t)))return es(e).find(t);if(n[1])for(o=Ba(t,Xa(e)).firstChild;o;)Aa.call(i,o),o=o.nextSibling;else{if(!(o=Xa(e).getElementById(n[2])))return i;if(o.id!==n[2])return i.find(t);i.length=1,i[0]=o}}else this.add(t,!1);return i},toArray:function(){return we.toArray(this)},add:function(t,e){var n,o;if(Ra(t))return this.add(es(t));if(!1!==e)for(n=es.unique(this.toArray().concat(es.makeArray(t))),this.length=n.length,o=0;o<n.length;o++)this[o]=n[o];else Aa.apply(this,es.makeArray(t));return this},attr:function(t,e){var n,o=this;if("object"==typeof t)Ga(t,function(t,e){o.attr(t,e)});else{if(!La(e)){if(o[0]&&1===o[0].nodeType){if((n=$a[t])&&n.get)return n.get(o[0],t);if(ja[t])return o.prop(t)?t:void 0;null===(e=o[0].getAttribute(t,2))&&(e=void 0)}return e}this.each(function(){var n;if(1===this.nodeType){if((n=$a[t])&&n.set)return void n.set(this,e);null===e?this.removeAttribute(t,2):this.setAttribute(t,e,2)}})}return o},removeAttr:function(t){return this.attr(t,null)},prop:function(t,e){var n=this;if("object"==typeof(t=Ha[t]||t))Ga(t,function(t,e){n.prop(t,e)});else{if(!La(e))return n[0]&&n[0].nodeType&&t in n[0]?n[0][t]:e;this.each(function(){1===this.nodeType&&(this[t]=e)})}return n},css:function(t,e){var n,o,i=this,r=function(t){return t.replace(/-(\D)/g,function(t,e){return e.toUpperCase()})},a=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t})};if("object"==typeof t)Ga(t,function(t,e){i.css(t,e)});else if(La(e))t=r(t),"number"!=typeof e||Fa[t]||(e=e.toString()+"px"),i.each(function(){var n=this.style;if((o=Za[t])&&o.set)o.set(this,e);else{try{this.style[Ua[t]||t]=e}catch(t){}null!==e&&""!==e||(n.removeProperty?n.removeProperty(a(t)):n.removeAttribute(t))}});else{if(n=i[0],(o=Za[t])&&o.get)return o.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[r(t)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(t))}catch(t){return}}return i},remove:function(){for(var t,e=this.length;e--;)t=this[e],Oa.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var t,e=this.length;e--;)for(t=this[e];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(t){var e;if(La(t)){e=this.length;try{for(;e--;)this[e].innerHTML=t}catch(n){es(this[e]).empty().append(t)}return this}return this[0]?this[0].innerHTML:""},text:function(t){var e;if(La(t)){for(e=this.length;e--;)"innerText"in this[e]?this[e].innerText=t:this[0].textContent=t;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return Ia(this,arguments,function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(t)})},prepend:function(){return Ia(this,arguments,function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(t,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?Ia(this,arguments,function(t){this.parentNode.insertBefore(t,this)}):this},after:function(){return this[0]&&this[0].parentNode?Ia(this,arguments,function(t){this.parentNode.insertBefore(t,this.nextSibling)},!0):this},appendTo:function(t){return es(t).append(this),this},prependTo:function(t){return es(t).prepend(this),this},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){return za(this,t)},wrapAll:function(t){return za(this,t,!0)},wrapInner:function(t){return this.each(function(){es(this).contents().wrapAll(t)}),this},unwrap:function(){return this.parent().each(function(){es(this).replaceWith(this.childNodes)})},clone:function(){var t=[];return this.each(function(){t.push(this.cloneNode(!0))}),es(t)},addClass:function(t){return this.toggleClass(t,!0)},removeClass:function(t){return this.toggleClass(t,!1)},toggleClass:function(t,e){var n=this;return"string"!=typeof t||(-1!==t.indexOf(" ")?Ga(t.split(" "),function(){n.toggleClass(this,e)}):n.each(function(n,o){var i,r=Ma(o,t);r!==e&&(i=o.className,r?o.className=Va((" "+i+" ").replace(" "+t+" "," ")):o.className+=i?" "+t:t)})),n},hasClass:function(t){return Ma(this[0],t)},each:function(t){return Ga(this,t)},on:function(t,e){return this.each(function(){Oa.bind(this,t,e)})},off:function(t,e){return this.each(function(){Oa.unbind(this,t,e)})},trigger:function(t){return this.each(function(){"object"==typeof t?Oa.fire(this,t.type,t):Oa.fire(this,t)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new es(Pa.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(t){for(var e=[],n=0,o=this.length;n<o;n++)es.find(t,this[n],e);return es(e)},filter:function(t){return es("function"==typeof t?Ka(this.toArray(),function(e,n){return t(n,e)}):es.filter(t,this.toArray()))},closest:function(t){var e=[];return t instanceof es&&(t=t[0]),this.each(function(n,o){for(;o;){if("string"==typeof t&&es(o).is(t)){e.push(o);break}if(o===t){e.push(o);break}o=o.parentNode}}),es(e)},offset:function(t){var e,n,o,i,r=0,a=0;return t?this.css(t):((e=this[0])&&(o=(n=e.ownerDocument).documentElement,e.getBoundingClientRect&&(r=(i=e.getBoundingClientRect()).left+(o.scrollLeft||n.body.scrollLeft)-o.clientLeft,a=i.top+(o.scrollTop||n.body.scrollTop)-o.clientTop)),{left:r,top:a})},push:Aa,sort:Array.prototype.sort,splice:Array.prototype.splice},we.extend(qa,{extend:we.extend,makeArray:function(t){return(e=t)&&e===e.window||t.nodeType?[t]:we.toArray(t);var e},inArray:function(t,e){var n;if(e.indexOf)return e.indexOf(t);for(n=e.length;n--;)if(e[n]===t)return n;return-1},isArray:we.isArray,each:Ga,trim:Va,grep:Ka,find:ma,expr:ma.selectors,unique:ma.uniqueSort,text:ma.getText,contains:ma.contains,filter:function(t,e,n){var o=e.length;for(n&&(t=":not("+t+")");o--;)1!==e[o].nodeType&&e.splice(o,1);return 1===e.length?es.find.matchesSelector(e[0],t)?[e[0]]:[]:es.find.matches(t,e)}});var Ya=function(t,e,n){var o=[],i=t[e];for("string"!=typeof n&&n instanceof es&&(n=n[0]);i&&9!==i.nodeType;){if(void 0!==n){if(i===n)break;if("string"==typeof n&&es(i).is(n))break}1===i.nodeType&&o.push(i),i=i[e]}return o},Ja=function(t,e,n,o){var i=[];for(o instanceof es&&(o=o[0]);t;t=t[e])if(!n||t.nodeType===n){if(void 0!==o){if(t===o)break;if("string"==typeof o&&es(t).is(o))break}i.push(t)}return i},Qa=function(t,e,n){for(t=t[e];t;t=t[e])if(t.nodeType===n)return t;return null};Ga({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Ya(t,"parentNode")},next:function(t){return Qa(t,"nextSibling",1)},prev:function(t){return Qa(t,"previousSibling",1)},children:function(t){return Ja(t.firstChild,"nextSibling",1)},contents:function(t){return we.toArray(("iframe"===t.nodeName?t.contentDocument||t.contentWindow.document:t).childNodes)}},function(t,e){qa.fn[t]=function(n){var o=[];this.each(function(){var t=e.call(o,this,n,o);t&&(es.isArray(t)?o.push.apply(o,t):o.push(t))}),1<this.length&&(Da[t]||(o=es.unique(o)),0===t.indexOf("parents")&&(o=o.reverse()));var i=es(o);return n?i.filter(n):i}}),Ga({parentsUntil:function(t,e){return Ya(t,"parentNode",e)},nextUntil:function(t,e){return Ja(t,"nextSibling",1,e).slice(1)},prevUntil:function(t,e){return Ja(t,"previousSibling",1,e).slice(1)}},function(t,e){qa.fn[t]=function(n,o){var i=[];this.each(function(){var t=e.call(i,this,n,i);t&&(es.isArray(t)?i.push.apply(i,t):i.push(t))}),1<this.length&&(i=es.unique(i),0!==t.indexOf("parents")&&"prevUntil"!==t||(i=i.reverse()));var r=es(i);return o?r.filter(o):r}}),qa.fn.is=function(t){return!!t&&0<this.filter(t).length},qa.fn.init.prototype=qa.fn,qa.overrideDefaults=function(t){var e,n=function(o,i){return e=e||t(),0===arguments.length&&(o=e.element),i=i||e.context,new n.fn.init(o,i)};return es.extend(n,this),n},qa.attrHooks=$a,qa.cssHooks=Za;var ts,es=qa,ns=we.each,os=we.grep,is=ge.ie,rs=/^([a-z0-9],?)+$/i,as=function(t,e,n){var o=e.keep_values,i={set:function(t,o,i){e.url_converter&&(o=e.url_converter.call(e.url_converter_scope||n(),o,i,t[0])),t.attr("data-mce-"+i,o).attr(i,o)},get:function(t,e){return t.attr("data-mce-"+e)||t.attr(e)}},r={style:{set:function(e,n){null===n||"object"!=typeof n?(o&&e.attr("data-mce-style",n),null!==n&&"string"==typeof n?(e.removeAttr("style"),e.css(t.parse(n))):e.attr("style",n)):e.css(n)},get:function(e){var n=e.attr("data-mce-style")||e.attr("style");return t.serialize(t.parse(n),e[0].nodeName)}}};return o&&(r.href=r.src=i),r},ss=function(t,e){var n=e.attr("style"),o=(o=t.serialize(t.parse(n),e[0].nodeName))||null;e.attr("data-mce-style",o)},ls=function(t,e){var n,o,i=0;if(t)for(n=t.nodeType,t=t.previousSibling;t;t=t.previousSibling)o=t.nodeType,(!e||3!==o||o!==n&&t.nodeValue.length)&&(i++,n=o);return i};function cs(t,e){var n=this;void 0===e&&(e={});var o={},i=window,r={},a=0,l=zo.forElement(xe.fromDom(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),c=[],u=e.schema?e.schema:rr({}),d=sr({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),f=e.ownEvents?new mr:mr.Event,h=u.getBlockElements(),p=es.overrideDefaults(function(){return{context:t,element:Z.getRoot()}}),m=function(e){return e&&t&&k(e)?t.getElementById(e):e},g=function(t){return p("string"==typeof t?m(t):t)},v=function(t,e,n){var o,i,r=g(t);return r.length&&(i=(o=q[e])&&o.get?o.get(r,e):r.attr(e)),void 0===i&&(i=n||""),i},y=function(t){var e=m(t);return e?e.attributes:[]},_=function(t,n,o){""===o&&(o=null);var i,r=g(t),a=r.attr(n);r.length&&((i=q[n])&&i.set?i.set(r,o,n):r.attr(n,o),a!==o&&e.onSetAttrib&&e.onSetAttrib({attrElm:r,attrName:n,attrValue:o}))},b=function(){return e.root_element||t.body},w=function(e,n){return Jn(t.body,m(e),n)},C=function(t,e,n){var o=g(t);return n?o.css(e):("float"===(e=e.replace(/-(\D)/g,function(t,e){return e.toUpperCase()}))&&(e=ge.browser.isIE()?"styleFloat":"cssFloat"),o[0]&&o[0].style?o[0].style[e]:void 0)},x=function(t){var e,n;return t=m(t),e=C(t,"width"),n=C(t,"height"),-1===e.indexOf("px")&&(e=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(e,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},S=function(t,e){if(!t)return!1;if(!Array.isArray(t)){if("*"===e)return 1===t.nodeType;if(rs.test(e)){for(var n=e.toLowerCase().split(/,/),o=t.nodeName.toLowerCase(),i=n.length-1;0<=i;i--)if(n[i]===o)return!0;return!1}if(t.nodeType&&1!==t.nodeType)return!1}var r=Array.isArray(t)?t:[t];return 0<ma(e,r[0].ownerDocument||r[0],null,r).length},T=function(t,e,n,o){var i,r=[],a=m(t);for(o=void 0===o,n=n||("BODY"!==b().nodeName?b().parentNode:null),we.is(e,"string")&&(e="*"===(i=e)?function(t){return 1===t.nodeType}:function(t){return S(t,i)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!e||"function"==typeof e&&e(a)){if(!o)return[a];r.push(a)}a=a.parentNode}return o?r:null},E=function(t,e,n){var o=e;if(t)for("string"==typeof e&&(o=function(t){return S(t,e)}),t=t[n];t;t=t[n])if("function"==typeof o&&o(t))return t;return null},A=function(t,e,o){var i,r="string"==typeof t?m(t):t;if(!r)return!1;if(we.isArray(r)&&(r.length||0===r.length))return i=[],ns(r,function(t,n){t&&i.push(e.call(o,"string"==typeof t?m(t):t,n))}),i;var a=o||n;return e.call(a,r)},P=function(t,e){g(t).each(function(t,n){ns(e,function(t,e){_(n,e,t)})})},N=function(t,e){var n=g(t);is?n.each(function(t,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+e,n.removeChild(n.firstChild)}catch(t){es("<div></div>").html("<br>"+e).contents().slice(1).appendTo(n)}return e}}):n.html(e)},O=function(e,n,o,i,r){return A(e,function(e){var a="string"==typeof n?t.createElement(n):n;return P(a,o),i&&("string"!=typeof i&&i.nodeType?a.appendChild(i):"string"==typeof i&&N(a,i)),r?a:e.appendChild(a)})},D=function(e,n,o){return O(t.createElement(e),e,n,o,!0)},L=Gi.decode,R=Gi.encodeAllRaw,B=function(t,e){var n=g(t);return e?n.each(function(){for(var t;t=this.firstChild;)3===t.nodeType&&0===t.data.length?this.removeChild(t):this.parentNode.insertBefore(t,this)}).remove():n.remove(),1<n.length?n.toArray():n[0]},I=function(t,e,n){g(t).toggleClass(e,n).each(function(){""===this.className&&es(this).attr("class",null)})},M=function(t,e,n){return A(e,function(e){return we.is(e,"array")&&(t=t.cloneNode(!0)),n&&ns(os(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},z=function(t){if(wn(t)){var e="a"===t.nodeName.toLowerCase()&&!v(t,"href")&&v(t,"id");if(v(t,"name")||v(t,"data-mce-bookmark")||e)return!0}return!1},F=function(){return t.createRange()},j=function(n,o,r,a){if(we.isArray(n)){for(var s=n.length,l=[];s--;)l[s]=j(n[s],o,r,a);return l}return!e.collect||n!==t&&n!==i||c.push([n,o,r,a]),f.bind(n,o,r,a||Z)},H=function(e,n,o){if(we.isArray(e)){for(var r=e.length,a=[];r--;)a[r]=H(e[r],n,o);return a}if(0<c.length&&(e===t||e===i))for(r=c.length;r--;){var s=c[r];e!==s[0]||n&&n!==s[1]||o&&o!==s[2]||f.unbind(s[0],s[1],s[2])}return f.unbind(e,n,o)},$=function(t){if(t&&wn(t)){var e=t.getAttribute("data-mce-contenteditable");return e&&"inherit"!==e?e:"inherit"!==t.contentEditable?t.contentEditable:null}return null},Z={doc:t,settings:e,win:i,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:l,boundEvents:c,styles:d,schema:u,events:f,isBlock:function(t){if("string"==typeof t)return!!h[t];if(t){var e=t.nodeType;if(e)return!(1!==e||!h[t.nodeName])}return!1},$:p,$$:g,root:null,clone:function(e,n){if(!is||1!==e.nodeType||n)return e.cloneNode(n);var o=t.createElement(e.nodeName);return ns(y(e),function(t){_(o,t.nodeName,v(e,t.nodeName))}),o},getRoot:b,getViewPort:function(t){var e=yn(t);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:function(t){t=m(t);var e=w(t),n=x(t);return{x:e.x,y:e.y,w:n.w,h:n.h}},getSize:x,getParent:function(t,e,n){var o=T(t,e,n,!1);return o&&0<o.length?o[0]:null},getParents:T,get:m,getNext:function(t,e){return E(t,e,"nextSibling")},getPrev:function(t,e){return E(t,e,"previousSibling")},select:function(n,o){return ma(n,m(o)||e.root_element||t,[])},is:S,add:O,create:D,createHTML:function(t,e,n){var o,i="";for(o in i+="<"+t,e)e.hasOwnProperty(o)&&null!==e[o]&&void 0!==e[o]&&(i+=" "+o+'="'+R(e[o])+'"');return void 0!==n?i+">"+n+"</"+t+">":i+" />"},createFragment:function(e){var n,o=t.createElement("div"),i=t.createDocumentFragment();for(i.appendChild(o),e&&(o.innerHTML=e);n=o.firstChild;)i.appendChild(n);return i.removeChild(o),i},remove:B,setStyle:function(t,n,o){var i=k(n)?g(t).css(n,o):g(t).css(n);e.update_styles&&ss(d,i)},getStyle:C,setStyles:function(t,n){var o=g(t).css(n);e.update_styles&&ss(d,o)},removeAllAttribs:function(t){return A(t,function(t){for(var e=t.attributes,n=e.length-1;0<=n;n--)t.removeAttributeNode(e.item(n))})},setAttrib:_,setAttribs:P,getAttrib:v,getPos:w,parseStyle:function(t){return d.parse(t)},serializeStyle:function(t,e){return d.serialize(t,e)},addStyle:function(e){var n,i;if(Z!==cs.DOM&&t===document){if(o[e])return;o[e]=!0}(i=t.getElementById("mceDefaultStyles"))||((i=t.createElement("style")).id="mceDefaultStyles",i.type="text/css",(n=t.getElementsByTagName("head")[0]).firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(t.createTextNode(e))},loadCSS:function(t){U((t=t||"").split(","),function(t){r[t]=!0,l.load(t,s)})},addClass:function(t,e){g(t).addClass(e)},removeClass:function(t,e){I(t,e,!1)},hasClass:function(t,e){return g(t).hasClass(e)},toggleClass:I,show:function(t){g(t).show()},hide:function(t){g(t).hide()},isHidden:function(t){return"none"===g(t).css("display")},uniqueId:function(t){return(t||"mce_")+a++},setHTML:N,getOuterHTML:function(t){var e="string"==typeof t?m(t):t;return wn(e)?e.outerHTML:es("<div></div>").append(es(e).clone()).html()},setOuterHTML:function(t,e){g(t).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=e)}catch(t){}B(es(this).html(e),!0)})},decode:L,encode:R,insertAfter:function(t,e){var n=m(e);return A(t,function(t){var e=n.parentNode,o=n.nextSibling;return o?e.insertBefore(t,o):e.appendChild(t),t})},replace:M,rename:function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=D(e),ns(y(t),function(e){_(n,e.nodeName,v(t,e.nodeName))}),M(n,t,!0)),n||t},findCommonAncestor:function(t,e){for(var n,o=t;o;){for(n=e;n&&o!==n;)n=n.parentNode;if(o===n)break;o=o.parentNode}return!o&&t.ownerDocument?t.ownerDocument.documentElement:o},toHex:function(t){return d.toHex(we.trim(t))},run:A,getAttribs:y,isEmpty:function(t,e){var n,o,i=0;if(z(t))return!1;if(t=t.firstChild){var r=new Fo(t,t.parentNode),a=u?u.getWhiteSpaceElements():{};e=e||(u?u.getNonEmptyElements():null);do{if(n=t.nodeType,wn(t)){var s=t.getAttribute("data-mce-bogus");if(s){t=r.next("all"===s);continue}if(o=t.nodeName.toLowerCase(),e&&e[o]){if("br"!==o)return!1;i++,t=r.next();continue}if(z(t))return!1}if(8===n)return!1;if(3===n&&!ki(t.nodeValue))return!1;if(3===n&&t.parentNode&&a[t.parentNode.nodeName]&&ki(t.nodeValue))return!1;t=r.next()}while(t)}return i<=1},createRng:F,nodeIndex:ls,split:function(t,e,n){var o,i,r,a=F();if(t&&e)return a.setStart(t.parentNode,ls(t)),a.setEnd(e.parentNode,ls(e)),o=a.extractContents(),(a=F()).setStart(e.parentNode,ls(e)+1),a.setEnd(t.parentNode,ls(t)+1),i=a.extractContents(),(r=t.parentNode).insertBefore(Ri(Z,o),t),n?r.insertBefore(n,t):r.insertBefore(e,t),r.insertBefore(Ri(Z,i),t),B(t),n||e},bind:j,unbind:H,fire:function(t,e,n){return f.fire(t,e,n)},getContentEditable:$,getContentEditableParent:function(t){for(var e=b(),n=null;t&&t!==e&&null===(n=$(t));t=t.parentNode);return n},destroy:function(){if(0<c.length)for(var t=c.length;t--;){var e=c[t];f.unbind(e[0],e[1],e[2])}it(r,function(t,e){l.unload(e),delete r[e]}),ma.setDocument&&ma.setDocument()},isChildOf:function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},dumpRng:function(t){return"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset}},q=as(d,e,function(){return Z});return Z}(ts=cs=cs||{}).DOM=ts(document),ts.nodeIndex=ls;var us=cs,ds=us.DOM,fs=we.each,hs=we.grep,ps=(ms.prototype._setReferrerPolicy=function(t){this.settings.referrerPolicy=t},ms.prototype.loadScript=function(t,e,n){var o=ds,i=o.uniqueId(),r=document.createElement("script");r.id=i,r.type="text/javascript",r.src=we._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=function(){o.remove(i),r&&(r.onreadystatechange=r.onload=r=null),e()},r.onerror=function(){L(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)},ms.prototype.isDone=function(t){return 2===this.states[t]},ms.prototype.markDone=function(t){this.states[t]=2},ms.prototype.add=function(t,e,n,o){void 0===this.states[t]&&(this.queue.push(t),this.states[t]=0),e&&(this.scriptLoadedCallbacks[t]||(this.scriptLoadedCallbacks[t]=[]),this.scriptLoadedCallbacks[t].push({success:e,failure:o,scope:n||this}))},ms.prototype.load=function(t,e,n,o){return this.add(t,e,n,o)},ms.prototype.remove=function(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]},ms.prototype.loadQueue=function(t,e,n){this.loadScripts(this.queue,t,e,n)},ms.prototype.loadScripts=function(t,e,n,o){var i=this,r=[],a=function(t,e){fs(i.scriptLoadedCallbacks[e],function(e){L(e[t])&&e[t].call(e.scope)}),i.scriptLoadedCallbacks[e]=void 0};i.queueLoadedCallbacks.push({success:e,failure:o,scope:n||this});var s=function(){var e,n=hs(t);t.length=0,fs(n,function(t){2!==i.states[t]?3!==i.states[t]?1!==i.states[t]&&(i.states[t]=1,i.loading++,i.loadScript(t,function(){i.states[t]=2,i.loading--,a("success",t),s()},function(){i.states[t]=3,i.loading--,r.push(t),a("failure",t),s()})):a("failure",t):a("success",t)}),i.loading||(e=i.queueLoadedCallbacks.slice(0),i.queueLoadedCallbacks.length=0,fs(e,function(t){0===r.length?L(t.success)&&t.success.call(t.scope):L(t.failure)&&t.failure.call(t.scope,r)}))};s()},ms.ScriptLoader=new ms,ms);function ms(t){void 0===t&&(t={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=t}var gs,vs=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},ys={},_s=vs("en"),bs=function(){return dt(ys,_s.get())},ws={getData:function(){return rt(ys,function(t){return wt({},t)})},setCode:function(t){t&&_s.set(t)},getCode:function(){return _s.get()},add:function(t,e){var n=ys[t];n||(ys[t]=n={}),it(e,function(t,e){n[e.toLowerCase()]=t})},translate:function(t){var e,n,o=bs().getOr({}),i=function(t){return L(t)?Object.prototype.toString.call(t):r(t)?"":""+t},r=function(t){return""===t||null==t},a=function(t){var e=i(t);return dt(o,e.toLowerCase()).map(i).getOr(e)},s=function(t){return t.replace(/{context:\w+}$/,"")};if(r(t))return"";if(E(e=t)&&ft(e,"raw"))return i(t.raw);if(A(n=t)&&1<n.length){var l=t.slice(1);return s(a(t[0]).replace(/\{([0-9]+)\}/g,function(t,e){return ft(l,e)?i(l[e]):t}))}return s(a(t))},isRtl:function(){return bs().bind(function(t){return dt(t,"_dir")}).exists(function(t){return"rtl"===t})},hasCode:function(t){return ft(ys,t)}};function Cs(){var t=this,e=[],n={},o={},i=[],r=function(t,e){var n=Z(i,function(n){return n.name===t&&n.state===e});U(n,function(t){return t.callback()})},a=function(t){var e;return o[t]&&(e=o[t].dependencies),e||[]},s=function(t,e){return"object"==typeof e?e:"string"==typeof t?{prefix:"",resource:e,suffix:""}:{prefix:t.prefix,resource:e,suffix:t.suffix}},l=function(t,e,i,c,u){var d,f;n[t]||(0!==(d="string"==typeof e?e:e.prefix+e.resource+e.suffix).indexOf("/")&&-1===d.indexOf("://")&&(d=Cs.baseURL+"/"+d),n[t]=d.substring(0,d.lastIndexOf("/")),f=function(){var n,o,u,d;r(t,"loaded"),n=e,o=i,u=c,d=a(t),U(d,function(t){var e=s(n,t);l(e.resource,e,void 0,void 0)}),o&&(u?o.call(u):o.call(ps))},o[t]?f():ps.ScriptLoader.add(d,f,c,u))},c=function(t,e,r){void 0===r&&(r="added"),ft(o,t)&&"added"===r||ft(n,t)&&"loaded"===r?e():i.push({name:t,state:r,callback:e})};return{items:e,urls:n,lookup:o,_listeners:i,get:function(t){return o[t]?o[t].instance:void 0},dependencies:a,requireLangPack:function(t,e){!1!==Cs.languageLoad&&c(t,function(){var o=ws.getCode();!o||e&&-1===(","+(e||"")+",").indexOf(","+o+",")||ps.ScriptLoader.add(n[t]+"/langs/"+o+".js")},"loaded")},add:function(t,n,i){var a=n;return e.push(a),o[t]={instance:a,dependencies:i},r(t,"added"),a},remove:function(t){delete n[t],delete o[t]},createUrl:s,addComponents:function(e,n){var o=t.urls[e];U(n,function(t){ps.ScriptLoader.add(o+"/"+t)})},load:l,waitFor:c}}(gs=Cs=Cs||{}).PluginManager=gs(),gs.ThemeManager=gs();var xs,Ss=Cs,Ts=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null===n&&(n=setTimeout(function(){t.apply(null,o),n=null},e))}}},ks=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null!==n&&clearTimeout(n),n=setTimeout(function(){t.apply(null,o),n=null},e)}}},Es=function(t,e){var n=$n(t,e);return void 0===n||""===n?[]:n.split(" ")},As=function(t){return void 0!==t.dom.classList},Ps=function(t,e){As(t)?t.dom.classList.add(e):function(t,e){return o=e,i=Es(n=t,"class").concat([o]),Hn(n,"class",i.join(" ")),!0;var n,o,i}(t,e)},Ns=function(t,e){return As(t)&&t.dom.classList.contains(e)},Os=function(t,e){var n=[];return U(Ze(t),function(t){e(t)&&(n=n.concat([t])),n=n.concat(Os(t,e))}),n},Ds=function(t,e){return n=e,i=void 0===(o=t)?document:o.dom,ke(i)?[]:H(i.querySelectorAll(n),xe.fromDom);var n,o,i},Ls=c("mce-annotation"),Rs=c("data-mce-annotation"),Bs=c("data-mce-annotation-uid"),Is=function(t,e){var n=t.selection.getRng(),o=xe.fromDom(n.startContainer),i=xe.fromDom(t.getBody()),r=e.fold(function(){return"."+Ls()},function(t){return"["+Rs()+'="'+t+'"]'}),a=qe(o,n.startOffset).getOr(o),s=xo(a,r,function(t){return Ee(t,i)}),l=function(t,e){return n=e,(o=t.dom)&&o.hasAttribute&&o.hasAttribute(n)?C.some($n(t,e)):C.none();var n,o};return s.bind(function(e){return l(e,""+Bs()).bind(function(n){return l(e,""+Rs()).map(function(e){var o=Ms(t,n);return{uid:n,name:e,elements:o}})})})},Ms=function(t,e){var n=xe.fromDom(t.getBody());return Ds(n,"["+Bs()+'="'+e+'"]')},zs=0,Fs=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++zs+String(e)},js=function(t,e){var n,o,i=Ie(t).dom,r=xe.fromDom(i.createDocumentFragment()),a=(n=e,(o=(i||document).createElement("div")).innerHTML=n,Ze(xe.fromDom(o)));rn(r,a),an(t),on(t,r)},Hs=function(t,e){return xe.fromDom(t.dom.cloneNode(e))},Us=function(t){return Hs(t,!1)},$s=function(t){return Hs(t,!0)},Zs=function(t,e,n){void 0===n&&(n=v);var o=new Fo(t,e),i=function(t){for(var e;(e=o[t]())&&!Pn(e)&&!n(e););return C.from(e).filter(Pn)};return{current:function(){return C.from(o.current()).filter(Pn)},next:function(){return i("next")},prev:function(){return i("prev")},prev2:function(){return i("prev2")}}},qs=function(t,e){var n=e||function(e){return t.isBlock(e)||Ln(e)||In(e)},o=function(t,e,n,i){if(Pn(t)){var r=i(t,e,t.data);if(-1!==r)return C.some({container:t,offset:r})}return n().bind(function(t){return o(t.container,t.offset,n,i)})};return{backwards:function(t,e,i,r){var a=Zs(t,r,n);return o(t,e,function(){return a.prev().map(function(t){return{container:t,offset:t.length}})},i).getOrNull()},forwards:function(t,e,i,r){var a=Zs(t,r,n);return o(t,e,function(){return a.next().map(function(t){return{container:t,offset:0}})},i).getOrNull()}}},Ws=function(t,e,n){return t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none()},Vs=Math.round,Gs=function(t){return t?{left:Vs(t.left),top:Vs(t.top),bottom:Vs(t.bottom),right:Vs(t.right),width:Vs(t.width),height:Vs(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Ks=function(t,e){return t=Gs(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t},Xs=function(t,e,n){return 0<=t&&t<=Math.min(e.height,n.height)/2},Ys=function(t,e){var n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Xs(e.top-t.bottom,t,e)},Js=function(t,e){return t.top>e.bottom||!(t.bottom<e.top)&&Xs(e.bottom-t.top,t,e)},Qs=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},tl=function(t){var e=t.startContainer,n=t.startOffset;return e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},el=function(t,e){return 1===t.nodeType&&t.hasChildNodes()&&(e>=t.childNodes.length&&(e=t.childNodes.length-1),t=t.childNodes[e]),t},nl=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),ol=function(t){return"string"==typeof t&&768<=t.charCodeAt(0)&&nl.test(t)},il=wn,rl=Ci,al=xn("display","block table"),sl=xn("float","left right"),ll=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var n=0;n<t.length;n++)if(!t[n](e))return!1;return!0}}(il,rl,m(sl)),cl=m(xn("white-space","pre pre-line pre-wrap")),ul=Pn,dl=Ln,fl=us.nodeIndex,hl=el,pl=function(t){return"createRange"in t?t.createRange():us.DOM.createRng()},ml=function(t){return t&&/[\r\n\t ]/.test(t)},gl=function(t){return!!t.setStart&&!!t.setEnd},vl=function(t){var e,n=t.startContainer,o=t.startOffset;return!!(ml(t.toString())&&cl(n.parentNode)&&Pn(n)&&(e=n.data,ml(e[o-1])||ml(e[o+1])))},yl=function(t){return 0===t.left&&0===t.right&&0===t.top&&0===t.bottom},_l=function(t){var e=t.getClientRects(),n=0<e.length?Gs(e[0]):Gs(t.getBoundingClientRect());return!gl(t)&&dl(t)&&yl(n)?function(t){var e=t.ownerDocument,n=pl(e),o=e.createTextNode(Qo),i=t.parentNode;i.insertBefore(o,t),n.setStart(o,0),n.setEnd(o,1);var r=Gs(n.getBoundingClientRect());return i.removeChild(o),r}(t):yl(n)&&gl(t)?function(t){var e=t.startContainer,n=t.endContainer,o=t.startOffset,i=t.endOffset;if(e===n&&Pn(n)&&0===o&&1===i){var r=t.cloneRange();return r.setEndAfter(n),_l(r)}return null}(t):n},bl=function(t,e){var n=Ks(t,e);return n.width=1,n.right=n.left+1,n},wl=function(t){var e,n,o=[],i=function(t){var e,n;0!==t.height&&(0<o.length&&(e=t,n=o[o.length-1],e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right)||o.push(t))},r=function(t,e){var n=pl(t.ownerDocument);if(e<t.data.length){if(ol(t.data[e]))return o;if(ol(t.data[e-1])&&(n.setStart(t,e),n.setEnd(t,e+1),!vl(n)))return i(bl(_l(n),!1)),o}0<e&&(n.setStart(t,e-1),n.setEnd(t,e),vl(n)||i(bl(_l(n),!1))),e<t.data.length&&(n.setStart(t,e),n.setEnd(t,e+1),vl(n)||i(bl(_l(n),!0)))};if(ul(t.container()))return r(t.container(),t.offset()),o;if(il(t.container()))if(t.isAtEnd())n=hl(t.container(),t.offset()),ul(n)&&r(n,n.data.length),ll(n)&&!dl(n)&&i(bl(_l(n),!1));else{if(n=hl(t.container(),t.offset()),ul(n)&&r(n,0),ll(n)&&t.isAtEnd())return i(bl(_l(n),!1)),o;e=hl(t.container(),t.offset()-1),ll(e)&&!dl(e)&&(!al(e)&&!al(n)&&ll(n)||i(bl(_l(e),!1))),ll(n)&&i(bl(_l(n),!0))}return o};function Cl(t,e,n){var o=function(){return n=n||wl(Cl(t,e))};return{container:c(t),offset:c(e),toRange:function(){var n=pl(t.ownerDocument);return n.setStart(t,e),n.setEnd(t,e),n},getClientRects:o,isVisible:function(){return 0<o().length},isAtStart:function(){return ul(t),0===e},isAtEnd:function(){return ul(t)?e>=t.data.length:e>=t.childNodes.length},isEqual:function(n){return n&&t===n.container()&&e===n.offset()},getNode:function(n){return hl(t,n?e-1:e)}}}(xs=Cl=Cl||{}).fromRangeStart=function(t){return xs(t.startContainer,t.startOffset)},xs.fromRangeEnd=function(t){return xs(t.endContainer,t.endOffset)},xs.after=function(t){return xs(t.parentNode,fl(t)+1)},xs.before=function(t){return xs(t.parentNode,fl(t))},xs.isAbove=function(t,e){return Ws(Q(e.getClientRects()),tt(t.getClientRects()),Ys).getOr(!1)},xs.isBelow=function(t,e){return Ws(tt(e.getClientRects()),Q(t.getClientRects()),Js).getOr(!1)},xs.isAtStart=function(t){return!!t&&t.isAtStart()},xs.isAtEnd=function(t){return!!t&&t.isAtEnd()},xs.isTextPosition=function(t){return!!t&&Pn(t.container())},xs.isElementPosition=function(t){return!1===xs.isTextPosition(t)};var xl,Sl,Tl=Cl,kl=function(t,e){Pn(e)&&0===e.data.length&&t.remove(e)},El=function(t,e,n){var o,i,r,a,s,l,c;Dn(n)?(r=t,a=e,s=n,l=C.from(s.firstChild),c=C.from(s.lastChild),a.insertNode(s),l.each(function(t){return kl(r,t.previousSibling)}),c.each(function(t){return kl(r,t.nextSibling)})):(o=t,i=n,e.insertNode(i),kl(o,i.previousSibling),kl(o,i.nextSibling))},Al=Pn,Pl=Tn,Nl=us.nodeIndex,Ol=function(t){var e=t.parentNode;return Pl(e)?Ol(e):e},Dl=function(t){return t?yt(t.childNodes,function(t,e){return Pl(e)&&"BR"!==e.nodeName?t=t.concat(Dl(e)):t.push(e),t},[]):[]},Ll=function(t){return function(e){return t===e}},Rl=function(t){return(Al(t)?"text()":t.nodeName.toLowerCase())+"["+function(t){var e=Dl(Ol(t)),n=_t(e,Ll(t),t);e=e.slice(0,n+1);var o=yt(e,function(t,n,o){return Al(n)&&Al(e[o-1])&&t++,t},0);return e=gt(e,Cn([t.nodeName])),(n=_t(e,Ll(t),t))-o}(t)+"]"},Bl=function(t,e){var n,o,i,r=[],a=e.container(),s=e.offset();return Al(a)?n=function(t,e){for(;(t=t.previousSibling)&&Al(t);)e+=t.data.length;return e}(a,s):(s>=(o=a.childNodes).length?(n="after",s=o.length-1):n="before",a=o[s]),r.push(Rl(a)),i=function(t,e,n){var o=[];for(e=e.parentNode;e!==t;e=e.parentNode)o.push(e);return o}(t,a),i=gt(i,m(Tn)),(r=r.concat(mt(i,Rl))).reverse().join("/")+","+n},Il=function(t,e){if(!e)return null;var n=e.split(","),o=n[0].split("/"),i=1<n.length?n[1]:"before",r=yt(o,function(t,e){var n,o,i,r,a=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(e);return a?("text()"===a[1]&&(a[1]="#text"),n=t,o=a[1],i=parseInt(a[2],10),r=Dl(n),r=gt(r,function(t,e){return!Al(t)||!Al(r[e-1])}),(r=gt(r,Cn([o])))[i]):null},t);return r?Al(r)?function(t,e){for(var n,o=t,i=0;Al(o);){if(n=o.data.length,i<=e&&e<=i+n){t=o,e-=i;break}if(!Al(o.nextSibling)){t=o,e=n;break}i+=n,o=o.nextSibling}return Al(t)&&e>t.data.length&&(e=t.data.length),Tl(t,e)}(r,parseInt(i,10)):(i="after"===i?Nl(r)+1:Nl(r),Tl(r.parentNode,i)):null},Ml=In,zl=function(t,e,n,o,i){var r,a=o[i?"startContainer":"endContainer"],s=o[i?"startOffset":"endOffset"],l=[],c=0,u=t.getRoot();for(Pn(a)?l.push(n?function(t,e,n){for(var o=t(e.data.slice(0,n)).length,i=e.previousSibling;i&&Pn(i);i=i.previousSibling)o+=t(i.data).length;return o}(e,a,s):s):(s>=(r=a.childNodes).length&&r.length&&(c=1,s=Math.max(0,r.length-1)),l.push(t.nodeIndex(r[s],n)+c));a&&a!==u;a=a.parentNode)l.push(t.nodeIndex(a,n));return l},Fl=function(t,e,n){var o=0;return we.each(t.select(e),function(t){if("all"!==t.getAttribute("data-mce-bogus"))return t!==n&&void o++}),o},jl=function(t,e){var n,o=e?"start":"end",i=t[o+"Container"],r=t[o+"Offset"];wn(i)&&"TR"===i.nodeName&&(i=(n=i.childNodes)[Math.min(e?r:r-1,n.length-1)])&&(r=e?0:i.childNodes.length,t["set"+(e?"Start":"End")](i,r))},Hl=function(t){return jl(t,!0),jl(t,!1),t},Ul=function(t,e){var n;if(wn(t)&&(t=el(t,e),Ml(t)))return t;if(si(t)){if(Pn(t)&&ri(t)&&(t=t.parentNode),n=t.previousSibling,Ml(n))return n;if(n=t.nextSibling,Ml(n))return n}},$l=function(t,e,n){var o=n.getNode(),i=o?o.nodeName:null,r=n.getRng();if(Ml(o)||"IMG"===i)return{name:i,index:Fl(n.dom,i,o)};var a,s,l,c,u,d,f,h=Ul((a=r).startContainer,a.startOffset)||Ul(a.endContainer,a.endOffset);return h?{name:i=h.tagName,index:Fl(n.dom,i,h)}:(s=t,c=e,u=r,d=(l=n).dom,(f={}).start=zl(d,s,c,u,!0),l.isCollapsed()||(f.end=zl(d,s,c,u,!1)),f)},Zl=function(t,e,n){var o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},ql=function(t,e){var n=t.dom,o=t.getRng(),i=n.uniqueId(),r=t.isCollapsed(),a=t.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:Fl(n,s,a)};var l,c=Hl(o.cloneRange());r||(c.collapse(!1),l=Zl(n,i+"_end",e),El(n,c,l)),(o=Hl(o)).collapse(!0);var u=Zl(n,i+"_start",e);return El(n,o,u),t.moveToBookmark({id:i,keep:!0}),{id:i}},Wl=d($l,u,!0),Vl=us.DOM,Gl=function(t,e,n){var o=t.getParam(e,n);if(-1===o.indexOf("="))return o;var i=t.getParam(e,"","hash");return i.hasOwnProperty(t.id)?i[t.id]:n},Kl=function(t){return t.getParam("content_security_policy","")},Xl=function(t){if(t.getParam("force_p_newlines",!1))return"p";var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},Yl=function(t){return t.getParam("forced_root_block_attrs",{})},Jl=function(t){return t.getParam("automatic_uploads",!0,"boolean")},Ql=function(t){return t.getParam("icons","","string")},tc=function(t){return t.getParam("referrer_policy","","string")},ec=function(t){return t.getParam("language","en","string")},nc=function(t){return t.getParam("indent_use_margin",!1)},oc=function(t){var e=t.getParam("object_resizing");return!1!==e&&!ge.iOS&&(k(e)?e:"table,img,figure.image,div")},ic=function(t){return t.getParam("event_root")},rc=function(t){return t.getParam("theme")},ac=function(t){return!1!==t.getParam("inline_boundaries")},sc=function(t){return t.getParam("plugins","","string")},lc=wn,cc=Pn,uc=function(t){var e=t.parentNode;e&&e.removeChild(t)},dc=function(t){var e=ni(t);return{count:t.length-e.length,text:e}},fc=function(t){for(var e;-1!==(e=t.data.lastIndexOf(ti));)t.deleteData(e,1)},hc=function(t,e){return mc(t),e},pc=function(t,e){return Tl.isTextPosition(e)?function(t,e){return cc(t)&&e.container()===t?(o=e,i=dc((n=t).data.substr(0,o.offset())),r=dc(n.data.substr(o.offset())),0<(i.text+r.text).length?(fc(n),Tl(n,o.offset()-i.count)):o):hc(t,e);var n,o,i,r}(t,e):(n=t,((o=e).container()===n.parentNode?function(t,e){var n,o,i=e.container(),r=(n=et(i.childNodes),(-1===(o=z(n,t))?C.none():C.some(o)).map(function(t){return t<e.offset()?Tl(i,e.offset()-1):e}).getOr(e));return mc(t),r}:hc)(n,o));var n,o},mc=function(t){lc(t)&&si(t)&&(li(t)?t.removeAttribute("data-mce-caret"):uc(t)),cc(t)&&(fc(t),0===t.data.length&&uc(t))},gc=se().browser,vc=In,yc=zn,_c=Mn,bc=function(t,e,n){var o,i,r,a,s=Ks(e.getBoundingClientRect(),n),l="BODY"===t.tagName?(o=t.ownerDocument.documentElement,i=t.scrollLeft||o.scrollLeft,t.scrollTop||o.scrollTop):(a=t.getBoundingClientRect(),i=t.scrollLeft-a.left,t.scrollTop-a.top);return s.left+=i,s.right+=i,s.top+=l,s.bottom+=l,s.width=1,0<(r=e.offsetWidth-e.clientWidth)&&(n&&(r*=-1),s.left+=r,s.right+=r),s},wc=function(t,e,n,o){var i,r,a=vs(C.none()),s=Xl(t),l=0<s.length?s:"p",c=function(){!function(t){for(var e=Ds(xe.fromDom(t),"*[contentEditable=false],video,audio,embed,object"),n=0;n<e.length;n++){var o,i=e[n].dom,r=i.previousSibling;fi(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(o.length-1,1)),r=i.nextSibling,di(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))}}(e),r&&(mc(r),r=null),a.get().each(function(t){es(t.caret).remove(),a.set(C.none())}),i&&(Bo.clearInterval(i),i=null)},u=function(){i=Bo.setInterval(function(){o()?es("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):es("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")},500)};return{show:function(t,o){var i,s;if(c(),_c(o))return null;if(!n(o))return r=function(t,e){var n,o=t.ownerDocument.createTextNode(ti),i=t.parentNode;if(e){if(n=t.previousSibling,ii(n)){if(si(n))return n;if(fi(n))return n.splitText(n.data.length-1)}i.insertBefore(o,t)}else{if(n=t.nextSibling,ii(n)){if(si(n))return n;if(di(n))return n.splitText(1),n}t.nextSibling?i.insertBefore(o,t.nextSibling):i.appendChild(o)}return o}(o,t),s=o.ownerDocument.createRange(),xc(r.nextSibling)?(s.setStart(r,0),s.setEnd(r,0)):(s.setStart(r,1),s.setEnd(r,1)),s;r=function(t,e,n){var o,i=e.ownerDocument.createElement(t);i.setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(((o=document.createElement("br")).setAttribute("data-mce-bogus","1"),o));var r=e.parentNode;return n?r.insertBefore(i,e):e.nextSibling?r.insertBefore(i,e.nextSibling):r.appendChild(i),i}(l,o,t),i=bc(e,o,t),es(r).css("top",i.top);var d=es('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(i).appendTo(e)[0];return a.set(C.some({caret:d,element:o,before:t})),a.get().each(function(e){t&&es(e.caret).addClass("mce-visual-caret-before")}),u(),(s=o.ownerDocument.createRange()).setStart(r,0),s.setEnd(r,0),s},hide:c,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){a.get().each(function(t){var n=bc(e,t.element,t.before);es(t.caret).css(wt({},n))})},destroy:function(){return Bo.clearInterval(i)}}},Cc=function(){return gc.isIE()||gc.isEdge()||gc.isFirefox()},xc=function(t){return vc(t)||yc(t)},Sc=function(t){return xc(t)||kn(t)&&Cc()},Tc=In,kc=zn,Ec=xn("display","block table table-cell table-caption list-item"),Ac=si,Pc=ri,Nc=wn,Oc=Ci,Dc=function(t,e){for(var n;n=t(e);)if(!Pc(n))return n;return null},Lc=function(t,e,n,o,i){var r=new Fo(t,o),a=Tc(t)||Pc(t);if(e<0){if(a&&n(t=Dc(r.prev,!0)))return t;for(;t=Dc(r.prev,i);)if(n(t))return t}if(0<e){if(a&&n(t=Dc(r.next,!0)))return t;for(;t=Dc(r.next,i);)if(n(t))return t}return null},Rc=function(t,e){for(;t&&t!==e;){if(Ec(t))return t;t=t.parentNode}return null},Bc=function(t,e,n){return Rc(t.container(),n)===Rc(e.container(),n)},Ic=function(t,e){if(!e)return null;var n=e.container(),o=e.offset();return Nc(n)?n.childNodes[o+t]:null},Mc=function(t,e){var n=e.ownerDocument.createRange();return t?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStartAfter(e),n.setEndAfter(e)),n},zc=function(t,e,n){for(var o,i,r,a=t?"previousSibling":"nextSibling";n&&n!==e;){if(o=n[a],Ac(o)&&(o=o[a]),Tc(o)||kc(o)){if(r=n,Rc(o,i=e)===Rc(r,i))return o;break}if(Oc(o))break;n=n.parentNode}return null},Fc=d(Mc,!0),jc=d(Mc,!1),Hc=function(t,e,n){var o,i,r=d(zc,!0,e),a=d(zc,!1,e),s=n.startContainer,l=n.startOffset;if(ri(s)){if(Nc(s)||(s=s.parentNode),"before"===(i=s.getAttribute("data-mce-caret"))&&(o=s.nextSibling,Sc(o)))return Fc(o);if("after"===i&&(o=s.previousSibling,Sc(o)))return jc(o)}if(!n.collapsed)return n;if(Pn(s)){if(Ac(s)){if(1===t){if(o=a(s))return Fc(o);if(o=r(s))return jc(o)}if(-1===t){if(o=r(s))return jc(o);if(o=a(s))return Fc(o)}return n}if(fi(s)&&l>=s.data.length-1)return 1===t&&(o=a(s))?Fc(o):n;if(di(s)&&l<=1)return-1===t&&(o=r(s))?jc(o):n;if(l===s.data.length)return(o=a(s))?Fc(o):n;if(0===l)return(o=r(s))?jc(o):n}return n},Uc=function(t,e){return C.from(Ic(t?0:-1,e)).filter(Tc)},$c=function(t,e,n){var o=Hc(t,e,n);return-1===t?Cl.fromRangeStart(o):Cl.fromRangeEnd(o)},Zc=function(t){return C.from(t.getNode()).map(xe.fromDom)},qc=function(t,e){for(;e=t(e);)if(e.isVisible())return e;return e},Wc=function(t,e){var n=Bc(t,e);return!(n||!Ln(t.getNode()))||n};(Sl=xl=xl||{})[Sl.Backwards=-1]="Backwards",Sl[Sl.Forwards=1]="Forwards";var Vc,Gc,Kc=In,Xc=Pn,Yc=wn,Jc=Ln,Qc=Ci,tu=function(t){return _i(t)||!!xi(e=t)&&!0!==W(et(e.getElementsByTagName("*")),function(t,e){return t||pi(e)},!1);var e},eu=Si,nu=function(t,e){return t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null},ou=function(t,e){if(0<t){if(Qc(e.previousSibling)&&!Xc(e.previousSibling))return Tl.before(e);if(Xc(e))return Tl(e,0)}if(t<0){if(Qc(e.nextSibling)&&!Xc(e.nextSibling))return Tl.after(e);if(Xc(e))return Tl(e,e.data.length)}return t<0&&!Jc(e)?Tl.after(e):Tl.before(e)},iu=function(t,e,n){var o,i,r,a;if(!Yc(n)||!e)return null;if(e.isEqual(Tl.after(n))&&n.lastChild){if(a=Tl.after(n.lastChild),t<0&&Qc(n.lastChild)&&Yc(n.lastChild))return Jc(n.lastChild)?Tl.before(n.lastChild):a}else a=e;var s,l,c,u=a.container(),d=a.offset();if(Xc(u)){if(t<0&&0<d)return Tl(u,--d);if(0<t&&d<u.length)return Tl(u,++d);o=u}else{if(t<0&&0<d&&(i=nu(u,d-1),Qc(i)))return!tu(i)&&(r=Lc(i,t,eu,i))?Xc(r)?Tl(r,r.data.length):Tl.after(r):Xc(i)?Tl(i,i.data.length):Tl.before(i);if(0<t&&d<u.childNodes.length&&(i=nu(u,d),Qc(i)))return Jc(i)?(s=n,(c=(l=i).nextSibling)&&Qc(c)?Xc(c)?Tl(c,0):Tl.before(c):iu(xl.Forwards,Tl.after(l),s)):!tu(i)&&(r=Lc(i,t,eu,i))?Xc(r)?Tl(r,0):Tl.before(r):Xc(i)?Tl(i,0):Tl.after(i);o=i||a.getNode()}if((0<t&&a.isAtEnd()||t<0&&a.isAtStart())&&(o=Lc(o,t,y,n,!0),eu(o,n)))return ou(t,o);i=Lc(o,t,eu,n);var f=bt(Z(function(t,e){for(var n=[];t&&t!==e;)n.push(t),t=t.parentNode;return n}(u,n),Kc));return!f||i&&f.contains(i)?i?ou(t,i):null:a=0<t?Tl.after(f):Tl.before(f)},ru=function(t){return{next:function(e){return iu(xl.Forwards,e,t)},prev:function(e){return iu(xl.Backwards,e,t)}}},au=function(t){return Tl.isTextPosition(t)?0===t.offset():Ci(t.getNode())},su=function(t){if(Tl.isTextPosition(t)){var e=t.container();return t.offset()===e.data.length}return Ci(t.getNode(!0))},lu=function(t,e){return!Tl.isTextPosition(t)&&!Tl.isTextPosition(e)&&t.getNode()===e.getNode(!0)},cu=function(t,e,n){var o=ru(e);return C.from(t?o.next(n):o.prev(n))},uu=function(t,e,n){return cu(t,e,n).bind(function(o){return Bc(n,o,e)&&function(t,e,n){return t?!lu(e,n)&&(o=e,!(!Tl.isTextPosition(o)&&Ln(o.getNode())))&&su(e)&&au(n):!lu(n,e)&&au(e)&&su(n);var o}(t,n,o)?cu(t,e,o):C.some(o)})},du=function(t,e,n,o){return uu(t,e,n).bind(function(n){return o(n)?du(t,e,n,o):C.some(n)})},fu=function(t,e){var n,o,i,r,a,s=t?e.firstChild:e.lastChild;return Pn(s)?C.some(Tl(s,t?0:s.data.length)):s?Ci(s)?C.some(t?Tl.before(s):Ln(a=s)?Tl.before(a):Tl.after(a)):(o=e,i=s,r=(n=t)?Tl.before(i):Tl.after(i),cu(n,o,r)):C.none()},hu=d(cu,!0),pu=d(cu,!1),mu=d(fu,!0),gu=d(fu,!1),vu="_mce_caret",yu=function(t){return wn(t)&&t.id===vu},_u=function(t,e){for(;e&&e!==t;){if(e.id===vu)return e;e=e.parentNode}return null},bu=function(t,e){return wn(e)&&t.isBlock(e)&&!e.innerHTML&&!ge.ie&&(e.innerHTML='<br data-mce-bogus="1" />'),e},wu=function(t,e,n){return!(!1!==e.hasChildNodes()||!_u(t,e)||(i=n,r=(o=e).ownerDocument.createTextNode(ti),o.appendChild(r),i.setStart(r,0),i.setEnd(r,0),0));var o,i,r},Cu=function(t,e,n,o){var i,r,a,s,l=n[e?"start":"end"],c=t.getRoot();if(l){for(a=l[0],r=c,i=l.length-1;1<=i;i--){if(s=r.childNodes,wu(c,r,o))return!0;if(l[i]>s.length-1)return!!wu(c,r,o)||function(t,e){return gu(r).fold(function(){return!1},function(t){return e.setStart(t.container(),t.offset()),e.setEnd(t.container(),t.offset()),!0})}(0,o);r=s[l[i]]}3===r.nodeType&&(a=Math.min(l[0],r.nodeValue.length)),1===r.nodeType&&(a=Math.min(l[0],r.childNodes.length)),e?o.setStart(r,a):o.setEnd(r,a)}return!0},xu=function(t){return Pn(t)&&0<t.data.length},Su=function(t,e,n){var o,i,r,a,s,l,c=t.get(n.id+"_"+e),u=n.keep;if(c){if(o=c.parentNode,i="start"===e?u?c.hasChildNodes()?(o=c.firstChild,1):xu(c.nextSibling)?(o=c.nextSibling,0):xu(c.previousSibling)?(o=c.previousSibling,c.previousSibling.data.length):(o=c.parentNode,t.nodeIndex(c)+1):t.nodeIndex(c):u?c.hasChildNodes()?(o=c.firstChild,1):xu(c.previousSibling)?(o=c.previousSibling,c.previousSibling.data.length):(o=c.parentNode,t.nodeIndex(c)):t.nodeIndex(c),s=o,l=i,!u){for(a=c.previousSibling,r=c.nextSibling,we.each(we.grep(c.childNodes),function(t){Pn(t)&&(t.nodeValue=t.nodeValue.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+e);)t.remove(c,!0);a&&r&&a.nodeType===r.nodeType&&Pn(a)&&!ge.opera&&(i=a.nodeValue.length,a.appendData(r.nodeValue),t.remove(r),s=a,l=i)}return C.some(Tl(s,l))}return C.none()},Tu=function(t,e,n){return 2===e?$l(ni,n,t):3===e?(i=(o=t).getRng(),{start:Bl(o.dom.getRoot(),Tl.fromRangeStart(i)),end:Bl(o.dom.getRoot(),Tl.fromRangeEnd(i))}):e?{rng:t.getRng()}:ql(t,!1);var o,i},ku=function(t,e){(function(t,e){var n,o,i,r,a,s,l,c,u,d,f,h,p,m,g=t.dom;if(e){if(m=e,we.isArray(m.start))return h=e,p=(f=g).createRng(),Cu(f,!0,h,p)&&Cu(f,!1,h,p)?C.some(p):C.none();if("string"==typeof e.start)return C.some((c=e,u=(l=g).createRng(),d=Il(l.getRoot(),c.start),u.setStart(d.container(),d.offset()),d=Il(l.getRoot(),c.end),u.setEnd(d.container(),d.offset()),u));if(e.hasOwnProperty("id"))return a=Su(i=g,"start",r=e),s=Su(i,"end",r),Ws(a,s.or(a),function(t,e){var n=i.createRng();return n.setStart(bu(i,t.container()),t.offset()),n.setEnd(bu(i,e.container()),e.offset()),n});if(e.hasOwnProperty("name"))return n=g,o=e,C.from(n.select(o.name)[o.index]).map(function(t){var e=n.createRng();return e.selectNode(t),e});if(e.hasOwnProperty("rng"))return C.some(e.rng)}return C.none()})(t,e).each(function(e){t.setRng(e)})},Eu=function(t){return wn(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type")},Au=(Qo,function(t){return""===t}),Pu=function(t){return""!==t&&-1!==" \f\n\r\t\v".indexOf(t)},Nu=function(t){return!Pu(t)&&!Au(t)},Ou=function(t){return!!t.nodeType},Du=function(t,e,n){var o,i,r,a,s=n.startOffset,l=n.startContainer;if(!(n.startContainer===n.endContainer&&(a=n.startContainer.childNodes[n.startOffset])&&/^(IMG)$/.test(a.nodeName)||1!==l.nodeType))for(s<(r=l.childNodes).length?(l=r[s],o=new Fo(l,t.getParent(l,t.isBlock))):(l=r[r.length-1],(o=new Fo(l,t.getParent(l,t.isBlock))).next(!0)),i=o.current();i;i=o.next())if(3===i.nodeType&&!Iu(i))return n.setStart(i,0),void e.setRng(n)},Lu=function(t,e,n){if(t){var o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(1===t.nodeType||!Iu(t))return t}},Ru=function(t,e){return Ou(e)&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]},Bu=function(t,e,n){return t.schema.isValidChild(e,n)},Iu=function(t){return t&&Pn(t)&&/^([\t \r\n]+|)$/.test(t.nodeValue)},Mu=function(t,e){return"string"!=typeof t?t=t(e):e&&(t=t.replace(/%(\w+)/g,function(t,n){return e[n]||t})),t},zu=function(t,e){return t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()},Fu=function(t,e,n){return"color"!==n&&"backgroundColor"!==n||(e=t.toHex(e)),"fontWeight"===n&&700===e&&(e="bold"),"fontFamily"===n&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e},ju=function(t,e,n){return Fu(t,t.getStyle(e,n),n)},Hu=function(t,e){var n;return t.getParent(e,function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n}),n},Uu=function(t,e,n){return t.getParents(e,n,t.getRoot())},$u=function(t,e,n){var o=["inline","block","selector","attributes","styles","classes"],i=function(t){return ut(t,function(t,e){return j(o,function(t){return t===e})})};return j(t.formatter.get(e),function(e){var o=i(e);return j(t.formatter.get(n),function(t){var e,n,s,l=i(t);return e=o,n=l,void 0===s&&(s=a),r(s).eq(e,n)})})},Zu=Eu,qu=Uu,Wu=Iu,Vu=Ru,Gu=function(t,e){for(var n=e;n;){if(wn(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},Ku=function(t,e,n,o){for(var i=e.data,r=n;t?0<=r:r<i.length;t?r--:r++)if(o(i.charAt(r)))return t?r+1:r;return-1},Xu=function(t,e,n){return Ku(t,e,n,function(t){return Au(t)||Pu(t)})},Yu=function(t,e,n){return Ku(t,e,n,Nu)},Ju=function(t,e,n,o,i,r){var a,s=t.getParent(n,t.isBlock)||e,l=function(e,n,o){var r=qs(t),l=i?r.backwards:r.forwards;return C.from(l(e,n,function(t,e){return Zu(t.parentNode)?-1:o(i,a=t,e)},s))};return l(n,o,Xu).bind(function(t){return r?l(t.container,t.offset+(i?-1:0),Yu):C.some(t)}).orThunk(function(){return a?C.some({container:a,offset:i?0:a.length}):C.none()})},Qu=function(t,e,n,o,i){Pn(o)&&0===o.nodeValue.length&&o[i]&&(o=o[i]);for(var r=qu(t,o),a=0;a<r.length;a++)for(var s=0;s<e.length;s++){var l=e[s];if(!("collapsed"in l&&l.collapsed!==n.collapsed)&&t.is(r[a],l.selector))return r[a]}return o},td=function(t,e,n,o){var i,r,a=t.dom,s=a.getRoot();if(e[0].wrapper||(r=a.getParent(n,e[0].block,s)),r||(i=a.getParent(n,"LI,TD,TH"),r=a.getParent(Pn(n)?n.parentNode:n,function(e){return e!==s&&Vu(t,e)},i)),r&&e[0].wrapper&&(r=qu(a,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r[o]&&!a.isBlock(r[o])&&(r=r[o],!zu(r,"br")););return r||n},ed=function(t,e,n,o,i,r,a){var s,l,c,u=s=a?n:i,d=a?"previousSibling":"nextSibling",f=t.getRoot();if(Pn(u)&&!Wu(u)&&(a?0<o:r<u.nodeValue.length))return u;for(;;){if(!e[0].block_expand&&t.isBlock(s))return s;for(l=s[d];l;l=l[d])if(!Zu(l)&&!Wu(l)&&("BR"!==(c=l).nodeName||!c.getAttribute("data-mce-bogus")||c.nextSibling))return s;if(s===f||s.parentNode===f){u=s;break}s=s.parentNode}return u},nd=function(t,e,n,o){void 0===o&&(o=!1);var i=e.startContainer,r=e.startOffset,a=e.endContainer,s=e.endOffset,l=t.dom;return wn(i)&&i.hasChildNodes()&&(i=el(i,r),Pn(i)&&(r=0)),wn(a)&&a.hasChildNodes()&&(a=el(a,e.collapsed?s:s-1),Pn(a)&&(s=a.nodeValue.length)),i=Gu(l,i),a=Gu(l,a),(Zu(i.parentNode)||Zu(i))&&(i=Zu(i)?i:i.parentNode,i=e.collapsed?i.previousSibling||i:i.nextSibling||i,Pn(i)&&(r=e.collapsed?i.length:0)),(Zu(a.parentNode)||Zu(a))&&(a=Zu(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,Pn(a)&&(s=e.collapsed?0:a.length)),e.collapsed&&(Ju(l,t.getBody(),i,r,!0,o).each(function(t){var e=t.container,n=t.offset;i=e,r=n}),Ju(l,t.getBody(),a,s,!1,o).each(function(t){var e=t.container,n=t.offset;a=e,s=n})),(n[0].inline||n[0].block_expand)&&(n[0].inline&&Pn(i)&&0!==r||(i=ed(l,n,i,r,a,s,!0)),n[0].inline&&Pn(a)&&s!==a.nodeValue.length||(a=ed(l,n,i,r,a,s,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(i=Qu(l,n,e,i,"previousSibling"),a=Qu(l,n,e,a,"nextSibling")),(n[0].block||n[0].selector)&&(i=td(t,n,i,"previousSibling"),a=td(t,n,a,"nextSibling"),n[0].block&&(l.isBlock(i)||(i=ed(l,n,i,r,a,s,!0)),l.isBlock(a)||(a=ed(l,n,i,r,a,s,!1)))),wn(i)&&(r=l.nodeIndex(i),i=i.parentNode),wn(a)&&(s=l.nodeIndex(a)+1,a=a.parentNode),{startContainer:i,startOffset:r,endContainer:a,endOffset:s}},od=function(t,e){var n=t.childNodes;return e>=n.length?e=n.length-1:e<0&&(e=0),n[e]||t},id=function(t,e,n){var o=e.startContainer,i=e.startOffset,r=e.endContainer,a=e.endOffset,s=function(t){var e=t[0];return 3===e.nodeType&&e===o&&i>=e.nodeValue.length&&t.splice(0,1),e=t[t.length-1],0===a&&0<t.length&&e===r&&3===e.nodeType&&t.splice(t.length-1,1),t},l=function(t,e,n){for(var o=[];t&&t!==n;t=t[e])o.push(t);return o},c=function(t,e){do{if(t.parentNode===e)return t;t=t.parentNode}while(t)},u=function(t,e,o){for(var i=o?"nextSibling":"previousSibling",r=t,a=r.parentNode;r&&r!==e;r=a){a=r.parentNode;var c=l(r===t?r:r[i],i);c.length&&(o||c.reverse(),n(s(c)))}};if(1===o.nodeType&&o.hasChildNodes()&&(o=od(o,i)),1===r.nodeType&&r.hasChildNodes()&&(r=od(r,a-1)),o===r)return n(s([o]));for(var d=t.findCommonAncestor(o,r),f=o;f;f=f.parentNode){if(f===r)return u(o,d,!0);if(f===d)break}for(f=r;f;f=f.parentNode){if(f===o)return u(r,d);if(f===d)break}var h=c(o,d)||o,p=c(r,d)||r;u(o,h,!0);var m=l(h===o?h:h.nextSibling,"nextSibling",p===r?p.nextSibling:p);m.length&&n(s(m)),u(r,p)},rd=function(t){var e=[];if(t)for(var n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},ad=function(t,e){var n=Ds(e,"td[data-mce-selected],th[data-mce-selected]");return 0<n.length?n:function(t){return Z(K(t,function(t){var e=tl(t);return e?[xe.fromDom(e)]:[]}),Xo)}(t)},sd=function(t){return ad(rd(t.selection.getSel()),xe.fromDom(t.getBody()))},ld=function(t){return We(t).fold(c([t]),function(e){return[t].concat(ld(e))})},cd=function(t){return Ve(t).fold(c([t]),function(e){return"br"===Pe(e)?je(e).map(function(e){return[t].concat(cd(e))}).getOr([]):[t].concat(cd(e))})},ud=function(t,e){return Ws((a=(r=e).startContainer,s=r.startOffset,Pn(a)?0===s?C.some(xe.fromDom(a)):C.none():C.from(a.childNodes[s]).map(xe.fromDom)),(o=(n=e).endContainer,i=n.endOffset,Pn(o)?i===o.data.length?C.some(xe.fromDom(o)):C.none():C.from(o.childNodes[i-1]).map(xe.fromDom)),function(e,n){var o=V(ld(t),d(Ee,e)),i=V(cd(t),d(Ee,n));return o.isSome()&&i.isSome()}).getOr(!1);var n,o,i,r,a,s},dd=function(t,e,n,o){var i=n,r=new Fo(n,i),a=ut(t.schema.getMoveCaretBeforeOnEnterElements(),function(t,e){return!F(["td","th","table"],e.toLowerCase())});do{if(Pn(n)&&0!==we.trim(n.nodeValue).length)return void(o?e.setStart(n,0):e.setEnd(n,n.nodeValue.length));if(a[n.nodeName])return void(o?e.setStartBefore(n):"BR"===n.nodeName?e.setEndBefore(n):e.setEndAfter(n))}while(n=o?r.next():r.prev());"BODY"===i.nodeName&&(o?e.setStart(i,0):e.setEnd(i,i.childNodes.length))},fd=function(t){var e=t.selection.getSel();return e&&0<e.rangeCount},hd=function(t,e){var n=sd(t);0<n.length?U(n,function(n){var o=n.dom,i=t.dom.createRng();i.setStartBefore(o),i.setEndAfter(o),e(i,!0)}):e(t.selection.getRng(),!1)},pd=function(t,e,n){var o=ql(t,e);n(o),t.moveToBookmark(o)},md=(Vc=Le,"text",{get:function(t){if(!Vc(t))throw new Error("Can only get text value of a text node");return Gc(t).getOr("")},getOption:Gc=function(t){return Vc(t)?C.from(t.dom.nodeValue):C.none()},set:function(t,e){if(!Vc(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=e}}),gd=function(t){return md.get(t)},vd=function(t,e,n,o){var i=e.uid,r=void 0===i?Fs("mce-annotation"):i,a=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n}(e,["uid"]),s=xe.fromTag("span",t);Ps(s,Ls()),Hn(s,""+Bs(),r),Hn(s,""+Rs(),n);var l,c=o(r,a),u=c.attributes,d=void 0===u?{}:u,f=c.classes,h=void 0===f?[]:f;return Un(s,d),l=s,U(h,function(t){Ps(l,t)}),s},yd=function(t,e,n,o,i){var r=[],a=vd(t.getDoc(),i,n,o),s=vs(C.none()),l=function(){s.set(C.none())},c=function(t){U(t,u)},u=function(e){var n,o;switch(function(t,e,n,o){return Fe(e).fold(function(){return"skipping"},function(i){return"br"===o||Le(a=e)&&gd(a)===ti?"valid":De(r=e)&&Ns(r,Ls())?"existing":yu(e.dom)?"caret":Bu(t,n,o)&&Bu(t,Pe(i),n)?"valid":"invalid-child";var r,a})}(t,e,"span",Pe(e))){case"invalid-child":l();var i=Ze(e);c(i),l();break;case"valid":var u=s.get().getOrThunk(function(){var t=Us(a);return r.push(t),s.set(C.some(t)),t});tn(n=e,o=u),on(o,n)}};return id(t.dom,e,function(t){var e;l(),e=H(t,xe.fromDom),c(e)}),r},_d=function(t){var e,n=(e={},{register:function(t,n){e[t]={name:t,settings:n}},lookup:function(t){return e.hasOwnProperty(t)?C.from(e[t]).map(function(t){return t.settings}):C.none()}});!function(t,e){t.on("init",function(){t.serializer.addNodeFilter("span",function(t){U(t,function(t){var n;n=t,C.from(n.attr(Rs())).bind(e.lookup).each(function(e){!1===e.persistent&&t.unwrap()})})})})}(t,n);var o=function(t,e){var n=vs({}),o=function(t,e){i(t,function(t){return e(t),t})},i=function(t,e){var o=n.get(),i=e(o.hasOwnProperty(t)?o[t]:{listeners:[],previous:vs(C.none())});o[t]=i,n.set(o)},r=ks(function(){var e,r,a=n.get(),s=(e=nt(a),(r=B.call(e,0)).sort(void 0),r);U(s,function(e){i(e,function(n){var i=n.previous.get();return Is(t,C.some(e)).fold(function(){var t;i.isSome()&&(o(t=e,function(e){U(e.listeners,function(e){return e(!1,t)})}),n.previous.set(C.none()))},function(t){var e,r,a,s=t.uid,l=t.name,c=t.elements;i.is(s)||(r=s,a=c,o(e=l,function(t){U(t.listeners,function(t){return t(!0,e,{uid:r,nodes:H(a,function(t){return t.dom})})})}),n.previous.set(C.some(s)))}),{previous:n.previous,listeners:n.listeners}})})},30);return t.on("remove",function(){r.cancel()}),t.on("NodeChange",function(){r.throttle()}),{addListener:function(t,e){i(t,function(t){return{previous:t.previous,listeners:t.listeners.concat([e])}})}}}(t);return{register:function(t,e){n.register(t,e)},annotate:function(e,o){n.lookup(e).each(function(n){!function(t,e,n,o){t.undoManager.transact(function(){var i,r,a,s,l=t.selection,c=l.getRng(),u=0<sd(t).length;c.collapsed&&!u&&(a=nd(i=t,r=c,[{inline:!0}]),r.setStart(a.startContainer,a.startOffset),r.setEnd(a.endContainer,a.endOffset),i.selection.setRng(r)),l.getRng().collapsed&&!u?(s=vd(t.getDoc(),o,e,n.decorate),js(s,Qo),l.getRng().insertNode(s.dom),l.select(s.dom)):pd(l,!1,function(){hd(t,function(i){yd(t,i,e,n.decorate,o)})})})}(t,e,n,o)})},annotationChanged:function(t,e){o.addListener(t,e)},remove:function(e){Is(t,C.some(e)).each(function(t){var e=t.elements;U(e,ln)})},getAll:function(e){var n,o,i,r,a,s=(n=t,o=e,i=xe.fromDom(n.getBody()),r=Ds(i,"["+Rs()+'="'+o+'"]'),a={},U(r,function(t){var e=$n(t,Bs()),n=a.hasOwnProperty(e)?a[e]:[];a[e]=n.concat([t])}),a);return rt(s,function(t){return H(t,function(t){return t.dom})})}}};function bd(t){return{getBookmark:d(Tu,t),moveToBookmark:d(ku,t)}}(bd=bd||{}).isBookmarkNode=Eu;var wd,Cd=bd,xd=function(t,e){for(;e&&e!==t;){if(Bn(e)||In(e))return e;e=e.parentNode}return null},Sd=function(t,e,n){if(n.collapsed)return!1;if(ge.browser.isIE()&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var o=n.startContainer.childNodes[n.startOffset];if(wn(o))return j(o.getClientRects(),function(n){return Qs(n,t,e)})}return j(n.getClientRects(),function(n){return Qs(n,t,e)})},Td={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(t){return t.shiftKey||t.ctrlKey||t.altKey||this.metaKeyPressed(t)},metaKeyPressed:function(t){return ge.mac?t.metaKey:t.ctrlKey&&!t.altKey}},kd=In,Ed=function(t,e){var n,o,i,r,a,s,l,c,u,d,f,h,p,m,g=e.dom,v=we.each,y=e.getDoc(),_=document,b=Math.abs,w=Math.round,C=e.getBody(),x={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},S=function(t){return t&&("IMG"===t.nodeName||e.dom.is(t,"figure.image"))},T=function(t){var n=t.target;!function(t,e){if("longpress"!==t.type&&0!==t.type.indexOf("touch"))return S(t.target)&&!Sd(t.clientX,t.clientY,e);var n=t.touches[0];return S(t.target)&&!Sd(n.clientX,n.clientY,e)}(t,e.selection.getRng())||t.isDefaultPrevented()||e.selection.select(n)},k=function(t){return e.dom.is(t,"figure.image")?t.querySelector("img"):t},E=function(t){var n=oc(e);return!!n&&"false"!==t.getAttribute("data-mce-resize")&&t!==e.getBody()&&Te(xe.fromDom(t),n)},A=function(t,e,n){g.setStyles(k(t),{width:e,height:n})},P=function(t){var v,y,_,x,T,k,E,P=t.screenX-a,N=t.screenY-s;f=P*r[2]+l,h=N*r[3]+c,f=f<5?5:f,h=h<5?5:h,(S(n)&&!1!==e.getParam("resize_img_proportional",!0,"boolean")?!Td.modifierPressed(t):Td.modifierPressed(t))&&(b(P)>b(N)?(h=w(f*u),f=w(h/u)):(f=w(h/u),h=w(f*u))),A(o,f,h),v=0<(v=r.startPos.x+P)?v:0,y=0<(y=r.startPos.y+N)?y:0,g.setStyles(i,{left:v,top:y,display:"block"}),i.innerHTML=f+" &times; "+h,r[2]<0&&o.clientWidth<=f&&g.setStyle(o,"left",void 0+(l-f)),r[3]<0&&o.clientHeight<=h&&g.setStyle(o,"top",void 0+(c-h)),(P=C.scrollWidth-p)+(N=C.scrollHeight-m)!=0&&g.setStyles(i,{left:v-P,top:y-N}),d||(_=e,x=n,T=l,k=c,E="corner-"+r.name,_.fire("ObjectResizeStart",{target:x,width:T,height:k,origin:E}),d=!0)},N=function(){var t=d;d=!1;var a,s,l,c,u,p=function(t,o){o&&(n.style[t]||!e.schema.isValid(n.nodeName.toLowerCase(),t)?g.setStyle(k(n),t,o):g.setAttrib(k(n),t,""+o))};t&&(p("width",f),p("height",h)),g.unbind(y,"mousemove",P),g.unbind(y,"mouseup",N),_!==y&&(g.unbind(_,"mousemove",P),g.unbind(_,"mouseup",N)),g.remove(o),g.remove(i),O(n),t&&(a=e,s=n,l=f,c=h,u="corner-"+r.name,a.fire("ObjectResized",{target:s,width:l,height:c,origin:u}),g.setAttrib(n,"style",g.getAttrib(n,"style"))),e.nodeChanged()},O=function(t){D(),B();var d=g.getPos(t,C),b=d.x,w=d.y,S=t.getBoundingClientRect(),T=S.width||S.right-S.left,O=S.height||S.bottom-S.top;n!==t&&(n=t,f=h=0);var L=e.fire("ObjectSelected",{target:t});E(t)&&!L.isDefaultPrevented()?v(x,function(t,e){var d=g.get("mceResizeHandle"+e);d&&g.remove(d),d=g.add(C,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),11===ge.ie&&(d.contentEditable=!1),g.bind(d,"mousedown",function(d){var f;d.stopImmediatePropagation(),d.preventDefault(),a=(f=d).screenX,s=f.screenY,l=k(n).clientWidth,c=k(n).clientHeight,u=c/l,(r=t).name=e,r.startPos={x:T*t[0]+b,y:O*t[1]+w},p=C.scrollWidth,m=C.scrollHeight,o=n.cloneNode(!0),g.addClass(o,"mce-clonedresizable"),g.setAttrib(o,"data-mce-bogus","all"),o.contentEditable=!1,o.unSelectabe=!0,g.setStyles(o,{left:b,top:w,margin:0}),A(o,T,O),o.removeAttribute("data-mce-selected"),C.appendChild(o),g.bind(y,"mousemove",P),g.bind(y,"mouseup",N),_!==y&&(g.bind(_,"mousemove",P),g.bind(_,"mouseup",N)),i=g.add(C,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},l+" &times; "+c)}),t.elm=d,g.setStyles(d,{left:T*t[0]+b-d.offsetWidth/2,top:O*t[1]+w-d.offsetHeight/2})}):D(),n.setAttribute("data-mce-selected","1")},D=function(){B(),n&&n.removeAttribute("data-mce-selected"),it(x,function(t,e){var n=g.get("mceResizeHandle"+e);n&&(g.unbind(n),g.remove(n))})},L=function(n){var o,i=function(t,e){if(t)do{if(t===e)return!0}while(t=t.parentNode)};d||e.removed||(v(g.select("img[data-mce-selected],hr[data-mce-selected]"),function(t){t.removeAttribute("data-mce-selected")}),o="mousedown"===n.type?n.target:t.getNode(),i(o=g.$(o).closest("table,img,figure.image,hr")[0],C)&&(I(),i(t.getStart(!0),o)&&i(t.getEnd(!0),o))?O(o):D())},R=function(t){return kd(xd(e.getBody(),t))},B=function(){it(x,function(t){t.elm&&(g.unbind(t.elm),delete t.elm)})},I=function(){try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(t){}};return e.on("init",function(){var t;I(),(ge.browser.isIE()||ge.browser.isEdge())&&(e.on("mousedown click",function(t){var n=t.target,o=n.nodeName;d||!/^(TABLE|IMG|HR)$/.test(o)||R(n)||(2!==t.button&&e.selection.select(n,"TABLE"===o),"mousedown"===t.type&&e.nodeChanged())}),t=function(t){var n=function(t){Bo.setEditorTimeout(e,function(){return e.selection.select(t)})};if(R(t.target)||zn(t.target))return t.preventDefault(),void n(t.target);/^(TABLE|IMG|HR)$/.test(t.target.nodeName)&&(t.preventDefault(),"IMG"===t.target.tagName&&n(t.target))},g.bind(C,"mscontrolselect",t),e.on("remove",function(){return g.unbind(C,"mscontrolselect",t)}));var o=Bo.throttle(function(t){e.composing||L(t)});e.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",o),e.on("keyup compositionend",function(t){n&&"TABLE"===n.nodeName&&o(t)}),e.on("hide blur",D),e.on("contextmenu longpress",T,!0)}),e.on("remove",B),{isResizable:E,showResizeRect:O,hideResizeRect:D,updateResizeRect:L,destroy:function(){n=o=null}}},Ad=function(t){return Bn(t)||In(t)},Pd=function(t,e,n){var o,i,r,a,s,l=n;if(l.caretPositionFromPoint)(i=l.caretPositionFromPoint(t,e))&&((o=n.createRange()).setStart(i.offsetNode,i.offset),o.collapse(!0));else if(n.caretRangeFromPoint)o=n.caretRangeFromPoint(t,e);else if(l.body.createTextRange){o=l.body.createTextRange();try{o.moveToPoint(t,e),o.collapse(!0)}catch(i){o=function(t,e,n){var o,i=n.elementFromPoint(t,e),r=n.body.createTextRange();if(i&&"HTML"!==i.tagName||(i=n.body),r.moveToElementText(i),0<(o=(o=we.toArray(r.getClientRects())).sort(function(t,n){return(t=Math.abs(Math.max(t.top-e,t.bottom-e)))-Math.abs(Math.max(n.top-e,n.bottom-e))})).length){e=(o[0].bottom+o[0].top)/2;try{return r.moveToPoint(t,e),r.collapse(!0),r}catch(t){}}return null}(t,e,n)}return r=o,a=n.body,s=r&&r.parentElement?r.parentElement():null,In(function(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null}(s,a,Ad))?null:r}return o},Nd=function(t,e){return t&&e&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},Od=function(t,e,n){return null!==function(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null}(t,e,n)},Dd=function(t){return t&&"TABLE"===t.nodeName},Ld=function(t,e,n){for(var o=new Fo(e,t.getParent(e.parentNode,t.isBlock)||t.getRoot());e=o[n?"prev":"next"]();)if(Ln(e))return!0},Rd=function(t,e,n,o,i){var r,a,s=t.getRoot(),l=t.schema.getNonEmptyElements(),c=t.getParent(i.parentNode,t.isBlock)||s;if(o&&Ln(i)&&e&&t.isEmpty(c))return C.some(Cl(i.parentNode,t.nodeIndex(i)));for(var u,d,f=new Fo(i,c);a=f[o?"prev":"next"]();){if("false"===t.getContentEditableParent(a)||(d=s,si(u=a)&&!1===Od(u,d,yu)))return C.none();if(Pn(a)&&0<a.nodeValue.length)return!1===Od(a,s,function(t){return"A"===t.nodeName})?C.some(Cl(a,o?a.nodeValue.length:0)):C.none();if(t.isBlock(a)||l[a.nodeName.toLowerCase()])return C.none();r=a}return n&&r?C.some(Cl(r,0)):C.none()},Bd=function(t,e,n,o){var i,r,a,s=t.getRoot(),l=!1,c=o[(n?"start":"end")+"Container"],u=o[(n?"start":"end")+"Offset"],d=wn(c)&&u===c.childNodes.length,f=t.schema.getNonEmptyElements(),h=n;if(si(c))return C.none();if(wn(c)&&u>c.childNodes.length-1&&(h=!1),On(c)&&(c=s,u=0),c===s){if(h&&(i=c.childNodes[0<u?u-1:0])){if(si(i))return C.none();if(f[i.nodeName]||Dd(i))return C.none()}if(c.hasChildNodes()){if(u=Math.min(!h&&0<u?u-1:u,c.childNodes.length-1),c=c.childNodes[u],u=Pn(c)&&d?c.data.length:0,!e&&c===s.lastChild&&Dd(c))return C.none();if(function(t,e){for(;e&&e!==t;){if(In(e))return!0;e=e.parentNode}return!1}(s,c)||si(c))return C.none();if(c.hasChildNodes()&&!1===Dd(c)){var p=new Fo(i=c,s);do{if(In(i)||si(i)){l=!1;break}if(Pn(i)&&0<i.nodeValue.length){u=h?0:i.nodeValue.length,c=i,l=!0;break}if(f[i.nodeName.toLowerCase()]&&(!(r=i)||!/^(TD|TH|CAPTION)$/.test(r.nodeName))){u=t.nodeIndex(i),c=i.parentNode,h||u++,l=!0;break}}while(i=h?p.next():p.prev())}}}return e&&(Pn(c)&&0===u&&Rd(t,d,e,!0,c).each(function(t){c=t.container(),u=t.offset(),l=!0}),wn(c)&&(!(i=(i=c.childNodes[u])||c.childNodes[u-1])||!Ln(i)||("A",(a=i).previousSibling&&"A"===a.previousSibling.nodeName)||Ld(t,i,!1)||Ld(t,i,!0)||Rd(t,d,e,!0,i).each(function(t){c=t.container(),u=t.offset(),l=!0}))),h&&!e&&Pn(c)&&u===c.nodeValue.length&&Rd(t,d,e,!1,c).each(function(t){c=t.container(),u=t.offset(),l=!0}),l?C.some(Cl(c,u)):C.none()},Id=function(t,e){var n=e.collapsed,o=e.cloneRange(),i=Cl.fromRangeStart(e);return Bd(t,n,!0,o).each(function(t){n&&Cl.isAbove(i,t)||o.setStart(t.container(),t.offset())}),n||Bd(t,n,!1,o).each(function(t){o.setEnd(t.container(),t.offset())}),n&&o.collapse(!0),Nd(e,o)?C.none():C.some(o)},Md=function(t,e){return t.splitText(e)},zd=function(t){var e=t.startContainer,n=t.startOffset,o=t.endContainer,i=t.endOffset;return e===o&&Pn(e)?0<n&&n<e.nodeValue.length&&(e=(o=Md(e,n)).previousSibling,n<i?(e=o=Md(o,i-=n).previousSibling,i=o.nodeValue.length,n=0):i=0):(Pn(e)&&0<n&&n<e.nodeValue.length&&(e=Md(e,n),n=0),Pn(o)&&0<i&&i<o.nodeValue.length&&(i=(o=Md(o,i).previousSibling).nodeValue.length)),{startContainer:e,startOffset:n,endContainer:o,endOffset:i}};function Fd(t){return{walk:function(e,n){return id(t,e,n)},split:zd,normalize:function(e){return Id(t,e).fold(v,function(t){return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),!0})}}}(wd=Fd=Fd||{}).compareRanges=Nd,wd.getCaretRangeFromPoint=Pd,wd.getSelectedNode=tl,wd.getNode=el;var jd,Hd,Ud,$d,Zd,qd=Fd,Wd=(jd="height",Hd=function(t){var e=t.dom;return cn(t)?e.getBoundingClientRect().height:e.offsetHeight},{set:function(t,e){if(!R(e)&&!e.match(/^[0-9]+$/))throw new Error(jd+".set accepts only positive integer values. Value was "+e);var n=t.dom;Fn(n)&&(n.style[jd]=e+"px")},get:Ud=function(t){var e=Hd(t);if(e<=0||null===e){var n=qn(t,jd);return parseFloat(n)||0}return e},getOuter:Ud,aggregate:$d=function(t,e){return W(e,function(e,n){var o=qn(t,n),i=void 0===o?0:parseInt(o,10);return isNaN(i)?e:e+i},0)},max:function(t,e,n){var o=$d(t,n);return o<e?e-o:0}}),Vd=function(t,e){return t.view(e).fold(c([]),function(e){var n=t.owner(e),o=Vd(t,n);return[e].concat(o)})},Gd=Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(xe.fromDom)},owner:Me}),Kd=function(t){return"textarea"===Pe(t)},Xd=function(t,e){var n,o=function(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,i=e.documentElement;if(n===t.dom)return dn(n.offsetLeft,n.offsetTop);var r=fn(null==o?void 0:o.pageYOffset,i.scrollTop),a=fn(null==o?void 0:o.pageXOffset,i.scrollLeft),s=fn(i.clientTop,n.clientTop),l=fn(i.clientLeft,n.clientLeft);return hn(t).translate(a-l,r-s)}(t),i=(n=t,Wd.get(n));return{element:t,bottom:o.top+i,height:i,pos:o,cleanup:e}},Yd=function(t,e,n,o){ef(t,function(i,r){return Qd(t,e,n,o)},n)},Jd=function(t,e,n,o,i){var r,a,s={elm:o.element.dom,alignToTop:i};r=s,t.fire("ScrollIntoView",r).isDefaultPrevented()||(n(e,pn(e).top,o,i),a=s,t.fire("AfterScrollIntoView",a))},Qd=function(t,e,n,o){var i=xe.fromDom(t.getBody()),r=xe.fromDom(t.getDoc());i.dom.offsetWidth;var a=function(t,e){var n=function(t,e){var n=Ze(t);if(0===n.length||Kd(t))return{element:t,offset:e};if(e<n.length&&!Kd(n[e]))return{element:n[e],offset:0};var o=n[n.length-1];return Kd(o)?{element:t,offset:e}:"img"===Pe(o)?{element:o,offset:1}:Le(o)?{element:o,offset:gd(o).length}:{element:o,offset:Ze(o).length}}(t,e),o=xe.fromHtml('<span data-mce-bogus="all">\ufeff</span>');return tn(n.element,o),Xd(o,function(){return sn(o)})}(xe.fromDom(n.startContainer),n.startOffset);Jd(t,r,e,a,o),a.cleanup()},tf=function(t,e,n,o){var i,r=xe.fromDom(t.getDoc());Jd(t,r,n,(i=e,Xd(xe.fromDom(i),s)),o)},ef=function(t,e,n){var o=n.startContainer,i=n.startOffset,r=n.endContainer,a=n.endOffset;e(xe.fromDom(o),xe.fromDom(r));var s=t.dom.createRng();s.setStart(o,i),s.setEnd(r,a),t.selection.setRng(n)},nf=function(t,e,n,o){var i,r=t.pos;n?mn(r.left,r.top,o):(i=r.top-e+t.height,mn(r.left,i,o))},of=function(t,e,n,o,i){var r=n+e,a=o.pos.top,s=o.bottom,l=n<=s-a;a<e?nf(o,n,!1!==i,t):r<a?nf(o,n,l?!1!==i:!0===i,t):r<s&&!l&&nf(o,n,!0===i,t)},rf=function(t,e,n,o){var i=t.dom.defaultView.innerHeight;of(t,e,i,n,o)},af=function(t,e,n,o){var i=t.dom.defaultView.innerHeight;of(t,e,i,n,o);var r=function(t){var e,n,o,i=xe.fromDom(document),r=pn(i),a=(e=t,o=(n=Gd).owner(e),Vd(n,o)),s=hn(t),l=q(a,function(t,e){var n=hn(e);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return dn(l.left+s.left+r.left,l.top+s.top+r.top)}(n.element),a=yn(window);r.top<a.y?gn(n.element,!1!==o):r.top>a.bottom&&gn(n.element,!0===o)},sf=function(t,e,n){(t.inline?function(t,e,n){return Yd(t,rf,e,n)}:function(t,e,n){return Yd(t,af,e,n)})(t,e,n)},lf=function(t){var e=Ye(t).dom;return t.dom===e.activeElement},cf=function(t){return void 0===t&&(t=xe.fromDom(document)),C.from(t.dom.activeElement).map(xe.fromDom)},uf=fo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),df=(uf.before,uf.on,uf.after,fo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}])),ff=(df.domRange,df.relative,df.exact,function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}}),hf=se().browser,pf=function(t,e){var n=Le(e)?gd(e).length:Ze(e).length+1;return n<t?n:t<0?0:t},mf=function(t){return ff(t.start,pf(t.soffset,t.start),t.finish,pf(t.foffset,t.finish))},gf=function(t,e){return!bn(e.dom)&&(Ae(t,e)||Ee(t,e))},vf=function(t){return function(e){return gf(t,e.start)&&gf(t,e.finish)}},yf=function(t){return!0===t.inline||hf.isIE()},_f=function(t){return ff(xe.fromDom(t.startContainer),t.startOffset,xe.fromDom(t.endContainer),t.endOffset)},bf=function(t){var e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch(t){return C.none()}},wf=function(t){var e=yf(t)?function(t){var e;return((e=ze(t).dom.getSelection())&&0!==e.rangeCount?C.from(e.getRangeAt(0)):C.none()).map(_f).filter(vf(t))}(xe.fromDom(t.getBody())):C.none();t.bookmark=e.isSome()?e:t.bookmark},Cf=function(t){return(t.bookmark?t.bookmark:C.none()).bind(function(e){return n=xe.fromDom(t.getBody()),o=e,C.from(o).filter(vf(n)).map(mf);var n,o}).bind(bf)},xf={isEditorUIElement:function(t){var e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Sf=function(t){var e=Ts(function(){wf(t)},0);t.on("init",function(){var n,o,i;t.inline&&(n=t,o=e,i=function(){o.throttle()},us.DOM.bind(document,"mouseup",i),n.on("remove",function(){us.DOM.unbind(document,"mouseup",i)})),function(t,e){var n,o;se().browser.isIE()?(o=t).on("focusout",function(){wf(o)}):(n=e,t.on("mouseup touchend",function(t){n.throttle()})),t.on("keyup NodeChange",function(e){var n;"nodechange"===(n=e).type&&n.selectionChange||wf(t)})}(t,e)}),t.on("remove",function(){e.cancel()})},Tf=us.DOM,kf=function(t,e){var n=t.getParam("custom_ui_selector","","string");return null!==Tf.getParent(e,function(e){return xf.isEditorUIElement(e)||!!n&&t.dom.is(e,n)})},Ef=function(t,e){var n=e.editor;Sf(n),n.on("focusin",function(){var e=t.focusedEditor;e!==this&&(e&&e.fire("blur",{focusedEditor:this}),t.setActive(this),(t.focusedEditor=this).fire("focus",{blurredEditor:e}),this.focus(!0))}),n.on("focusout",function(){var e=this;Bo.setEditorTimeout(e,function(){var n=t.focusedEditor;kf(e,function(t){try{var e=Ye(xe.fromDom(t.getElement()));return cf(e).fold(function(){return document.body},function(t){return t.dom})}catch(t){return document.body}}(e))||n!==e||(e.fire("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Zd||(Zd=function(e){var n=t.activeEditor;n&&function(t){if(Xe()&&D(t.target)){var e=xe.fromDom(t.target);if(De(e)&&function(t){return D(t.dom.shadowRoot)}(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return Q(n)}}return C.from(t.target)}(e).each(function(e){e.ownerDocument===document&&(e===document.body||kf(n,e)||t.focusedEditor!==n||(n.fire("blur",{focusedEditor:null}),t.focusedEditor=null))})},Tf.bind(document,"focusin",Zd))},Af=function(t,e){t.focusedEditor===e.editor&&(t.focusedEditor=null),t.activeEditor||(Tf.unbind(document,"focusin",Zd),Zd=null)},Pf=function(t,e){(function(t,e){return((n=e).collapsed?C.from(el(n.startContainer,n.startOffset)).map(xe.fromDom):C.none()).bind(function(e){return Ko(e)?C.some(e):!1===Ae(t,e)?C.some(t):C.none()});var n})(xe.fromDom(t.getBody()),e).bind(function(t){return mu(t.dom)}).fold(function(){t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})},Nf=function(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},Of=function(t){return t.inline?(n=t.getBody())&&function(t){return lf(t)||cf(Ye(e=t)).filter(function(t){return e.dom.contains(t.dom)}).isSome();var e}(xe.fromDom(n)):(e=t).iframeElement&&lf(xe.fromDom(e.iframeElement));var e,n},Df=function(t){return t.editorManager.setActive(t)},Lf=function(t,e,n,o,i){var r=n?e.startContainer:e.endContainer,a=n?e.startOffset:e.endOffset;return C.from(r).map(xe.fromDom).map(function(t){return o&&e.collapsed?t:qe(t,i(t,a)).getOr(t)}).bind(function(t){return De(t)?C.some(t):Fe(t).filter(De)}).map(function(t){return t.dom}).getOr(t)},Rf=function(t,e,n){return Lf(t,e,!0,n,function(t,e){return Math.min(t.dom.childNodes.length,e)})},Bf=function(t,e,n){return Lf(t,e,!1,n,function(t,e){return 0<e?e-1:e})},If=function(t,e){for(var n=t;t&&Pn(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Mf=function(t,e){return H(e,function(e){var n=t.fire("GetSelectionRange",{range:e});return n.range!==e?n.range:e})},zf={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ff=function(t,e,n){var o=n?"lastChild":"firstChild",i=n?"prev":"next";if(t[o])return t[o];if(t!==e){var r=t[i];if(r)return r;for(var a=t.parent;a&&a!==e;a=a.parent)if(r=a[i])return r}},jf=function(t){var e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e},Hf=(Uf.create=function(t,e){var n=new Uf(t,zf[t]||1);return e&&it(e,function(t,e){n.attr(e,t)}),n},Uf.prototype.replace=function(t){return t.parent&&t.remove(),this.insert(t,this),this.remove(),this},Uf.prototype.attr=function(t,e){var n,o=this;if("string"!=typeof t)return null!=t&&it(t,function(t,e){o.attr(e,t)}),o;if(n=o.attributes){if(void 0===e)return n.map[t];if(null===e){if(t in n.map){delete n.map[t];for(var i=n.length;i--;)if(n[i].name===t)return n.splice(i,1),o}return o}if(t in n.map){for(i=n.length;i--;)if(n[i].name===t){n[i].value=e;break}}else n.push({name:t,value:e});return n.map[t]=e,o}},Uf.prototype.clone=function(){var t,e=new Uf(this.name,this.type);if(t=this.attributes){var n=[];n.map={};for(var o=0,i=t.length;o<i;o++){var r=t[o];"id"!==r.name&&(n[n.length]={name:r.name,value:r.value},n.map[r.name]=r.value)}e.attributes=n}return e.value=this.value,e.shortEnded=this.shortEnded,e},Uf.prototype.wrap=function(t){return this.parent.insert(t,this),t.append(this),this},Uf.prototype.unwrap=function(){for(var t=this.firstChild;t;){var e=t.next;this.insert(t,this,!0),t=e}this.remove()},Uf.prototype.remove=function(){var t=this.parent,e=this.next,n=this.prev;return t&&(t.firstChild===this?(t.firstChild=e)&&(e.prev=null):n.next=e,t.lastChild===this?(t.lastChild=n)&&(n.next=null):e.prev=n,this.parent=this.next=this.prev=null),this},Uf.prototype.append=function(t){t.parent&&t.remove();var e=this.lastChild;return e?((e.next=t).prev=e,this.lastChild=t):this.lastChild=this.firstChild=t,t.parent=this,t},Uf.prototype.insert=function(t,e,n){t.parent&&t.remove();var o=e.parent||this;return n?(e===o.firstChild?o.firstChild=t:e.prev.next=t,t.prev=e.prev,(t.next=e).prev=t):(e===o.lastChild?o.lastChild=t:e.next.prev=t,t.next=e.next,(t.prev=e).next=t),t.parent=o,t},Uf.prototype.getAll=function(t){for(var e=[],n=this.firstChild;n;n=Ff(n,this))n.name===t&&e.push(n);return e},Uf.prototype.empty=function(){if(this.firstChild){for(var t=[],e=this.firstChild;e;e=Ff(e,this))t.push(e);for(var n=t.length;n--;)(e=t[n]).parent=e.firstChild=e.lastChild=e.next=e.prev=null}return this.firstChild=this.lastChild=null,this},Uf.prototype.isEmpty=function(t,e,n){void 0===e&&(e={});var o=this.firstChild;if(jf(this))return!1;if(o)do{if(1===o.type){if(o.attr("data-mce-bogus"))continue;if(t[o.name])return!1;if(jf(o))return!1}if(8===o.type)return!1;if(3===o.type&&!function(t){if(ki(t.value)){var e=t.parent;return!e||"span"===e.name&&!e.attr("style")||!/^[ ]+$/.test(t.value)}}(o))return!1;if(3===o.type&&o.parent&&e[o.parent.name]&&ki(o.value))return!1;if(n&&n(o))return!1}while(o=Ff(o,this));return!0},Uf.prototype.walk=function(t){return Ff(this,null,t)},Uf);function Uf(t,e){this.name=t,1===(this.type=e)&&(this.attributes=[],this.attributes.map={})}var $f=we.makeMap,Zf=function(t){var e=[],n=(t=t||{}).indent,o=$f(t.indent_before||""),i=$f(t.indent_after||""),r=Gi.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"===t.element_format;return{start:function(t,s,l){var c,u,d,f;if(n&&o[t]&&0<e.length&&0<(f=e[e.length-1]).length&&"\n"!==f&&e.push("\n"),e.push("<",t),s)for(c=0,u=s.length;c<u;c++)d=s[c],e.push(" ",d.name,'="',r(d.value,!0),'"');e[e.length]=!l||a?">":" />",l&&n&&i[t]&&0<e.length&&0<(f=e[e.length-1]).length&&"\n"!==f&&e.push("\n")},end:function(t){var o;e.push("</",t,">"),n&&i[t]&&0<e.length&&0<(o=e[e.length-1]).length&&"\n"!==o&&e.push("\n")},text:function(t,n){0<t.length&&(e[e.length]=n?t:r(t))},cdata:function(t){e.push("<![CDATA[",t,"]]>")},comment:function(t){e.push("\x3c!--",t,"--\x3e")},pi:function(t,o){o?e.push("<?",t," ",r(o),"?>"):e.push("<?",t,"?>"),n&&e.push("\n")},doctype:function(t){e.push("<!DOCTYPE",t,">",n?"\n":"")},reset:function(){e.length=0},getContent:function(){return e.join("").replace(/\n$/,"")}}},qf=function(t,e){void 0===e&&(e=rr());var n=Zf(t);return(t=t||{}).validate=!("validate"in t)||t.validate,{serialize:function(o){var i=t.validate,r={3:function(t){n.text(t.value,t.raw)},8:function(t){n.comment(t.value)},7:function(t){n.pi(t.name,t.value)},10:function(t){n.doctype(t.value)},4:function(t){n.cdata(t.value)},11:function(t){if(t=t.firstChild)for(;a(t),t=t.next;);}};n.reset();var a=function(t){var o,s,l,c,u,d,f,h,p,m=r[t.type];if(m)m(t);else{if(o=t.name,s=t.shortEnded,l=t.attributes,i&&l&&1<l.length&&((d=[]).map={},p=e.getElementRule(t.name))){for(f=0,h=p.attributesOrder.length;f<h;f++)(c=p.attributesOrder[f])in l.map&&(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));for(f=0,h=l.length;f<h;f++)(c=l[f].name)in d.map||(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));l=d}if(n.start(t.name,l,s),!s){if(t=t.firstChild)for(;a(t),t=t.next;);n.end(o)}}};return 1!==o.type||t.inner?r[11](o):a(o),n.getContent()}}},Wf=function(t,e){return t.replace(new RegExp(e.prefix+"_[0-9]+","g"),function(t){return dt(e.uris,t).getOr(t)})},Vf=function(t,e,n){var o,i,r=1,a=t.getShortEndedElements(),s=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;for(s.lastIndex=o=n;i=s.exec(e);){if(o=s.lastIndex,"/"===i[1])r--;else if(!i[1]){if(i[2]in a)continue;r++}if(0===r)break}return o};function Gf(t,e){void 0===e&&(e=rr());var n=function(){};!1!==(t=t||{}).fix_self_closing&&(t.fix_self_closing=!0);var o=t.comment?t.comment:n,i=t.cdata?t.cdata:n,r=t.text?t.text:n,a=t.start?t.start:n,s=t.end?t.end:n,l=t.pi?t.pi:n,c=t.doctype?t.doctype:n;return{parse:function(n,u){void 0===u&&(u="html"),function(n,u){void 0===u&&(u="html");for(var d,f,h,p,m,g,v,y,_,b,w,C,x,S,T,k,E,A,P,N=n.html,O=0,D=[],L=0,R=Gi.decode,B=we.makeMap("src,href,data,background,formaction,poster,xlink:href"),I=/((java|vb)script|mhtml):/i,M="html"===u?0:1,z=function(t){for(var e,n=D.length;n--&&D[n].name!==t;);if(0<=n){for(e=D.length-1;n<=e;e--)(t=D[e]).valid&&s(t.name);D.length=n}},F=function(t,e){return r(Wf(t,n),e)},j=function(e){""!==e&&(">"===e.charAt(0)&&(e=" "+e),t.allow_conditional_comments||"[if"!==e.substr(0,3).toLowerCase()||(e=" "+e),o(Wf(e,n)))},H=function(t,e){var n=t||"",o=!It(n,"--"),i=function(t,e,n){void 0===n&&(n=0);var o=t.toLowerCase();if(-1!==o.indexOf("[if ",n)&&(s=n,/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(o.substr(s)))){var i=o.indexOf("[endif]",n);return o.indexOf(">",i)}if(e){var r=o.indexOf(">",n);return-1!==r?r:o.length}var a=/--!?>/;a.lastIndex=n;var s,l=a.exec(t);return l?l.index+l[0].length:o.length}(N,o,e);return t=N.substr(e,i-e),j(o?n+t:t),i+1},U=function(e,o,i,r,a){var s,l,c,u,d,f;if(c=(o=o.toLowerCase())in V?o:R(i||r||a||""),i=dt(n.uris,c).getOr(c),G&&!y&&0==(0===(u=o).indexOf("data-")||0===u.indexOf("aria-"))){if(!(s=S[o])&&T){for(l=T.length;l--&&!(s=T[l]).pattern.test(o););-1===l&&(s=null)}if(!s)return;if(s.validValues&&!(i in s.validValues))return}if(B[o]&&!t.allow_script_urls){var h=i.replace(/[\s\u0000-\u001F]+/g,"");try{h=decodeURIComponent(h)}catch(t){h=unescape(h)}if(I.test(h))return;if(f=h,!(d=t).allow_html_data_urls&&(/^data:image\//i.test(f)?!1===d.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(f):/^data:/i.test(f)))return}y&&(o in B||0===o.indexOf("on"))||(p.map[o]=i,p.push({name:o,value:i}))},$=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),Z=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,q=e.getShortEndedElements(),W=t.self_closing_elements||e.getSelfClosingElements(),V=e.getBoolAttrs(),G=t.validate,K=t.remove_internals,X=t.fix_self_closing,Y=e.getSpecialElements(),J=N+">";d=$.exec(J);){var Q=d[0];if(O<d.index&&F(R(N.substr(O,d.index-O))),f=d[7])":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),z(f);else if(f=d[8]){if(d.index+Q.length>N.length){F(R(N.substr(d.index))),O=d.index+Q.length;continue}":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),_=f in q,X&&W[f]&&0<D.length&&D[D.length-1].name===f&&z(f);var tt=function(t,e){var n=t.exec(e);if(n){var o=n[1],i=n[2];return"string"==typeof o&&"data-mce-bogus"===o.toLowerCase()?i:null}return null}(Z,d[9]);if(null!==tt){if("all"===tt){O=Vf(e,N,$.lastIndex),$.lastIndex=O;continue}w=!1}if(!G||(b=e.getElementRule(f))){if(w=!0,G&&(S=b.attributes,T=b.attributePatterns),(x=d[9])?((y=-1!==x.indexOf("data-mce-type"))&&K&&(w=!1),(p=[]).map={},x.replace(Z,U)):(p=[]).map={},G&&!y){if(k=b.attributesRequired,E=b.attributesDefault,A=b.attributesForced,b.removeEmptyAttrs&&!p.length&&(w=!1),A)for(m=A.length;m--;)v=(C=A[m]).name,"{$uid}"===(P=C.value)&&(P="mce_"+L++),p.map[v]=P,p.push({name:v,value:P});if(E)for(m=E.length;m--;)(v=(C=E[m]).name)in p.map||("{$uid}"===(P=C.value)&&(P="mce_"+L++),p.map[v]=P,p.push({name:v,value:P}));if(k){for(m=k.length;m--&&!(k[m]in p.map););-1===m&&(w=!1)}if(C=p.map["data-mce-bogus"]){if("all"===C){O=Vf(e,N,$.lastIndex),$.lastIndex=O;continue}w=!1}}w&&a(f,p,_)}else w=!1;if(h=Y[f]){h.lastIndex=O=d.index+Q.length,O=(d=h.exec(N))?(w&&(g=N.substr(O,d.index-O)),d.index+d[0].length):(g=N.substr(O),N.length),w&&(0<g.length&&F(g,!0),s(f)),$.lastIndex=O;continue}_||(x&&x.indexOf("/")===x.length-1?w&&s(f):D.push({name:f,valid:w}))}else if(f=d[1])j(f);else if(f=d[2]){if(!(1==M||t.preserve_cdata||0<D.length&&e.isValidChild(D[D.length-1].name,"#cdata"))){O=H("",d.index+2),$.lastIndex=O;continue}i(f)}else if(f=d[3])c(f);else{if((f=d[4])||"<!"===Q){O=H(f,d.index+Q.length),$.lastIndex=O;continue}if(f=d[5]){if(1!=M){O=H("?",d.index+2),$.lastIndex=O;continue}l(f,d[6])}}O=d.index+Q.length}for(O<N.length&&F(R(N.substr(O))),m=D.length-1;0<=m;m--)(f=D[m]).valid&&s(f.name)}(function(t){for(var e,n=/data:[^;]+;base64,([a-z0-9\+\/=]+)/gi,o=[],i={},r=Fs("img"),a=0,s=0;e=n.exec(t);){var l=e[0],c=r+"_"+s++;i[c]=l,a<e.index&&o.push(t.substr(a,e.index-a)),o.push(c),a=e.index+l.length}return 0===a?{prefix:r,uris:i,html:t}:(a<t.length&&o.push(t.substr(a)),{prefix:r,uris:i,html:o.join("")})}(n),u)}}}(Gf=Gf||{}).findEndTag=Vf;var Kf,Xf=Gf,Yf=function(t,e){var n,o,i,r,a,s,l,c=e,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,d=t.schema;a=t.getTempAttrs(),s=c,l=new RegExp(["\\s?("+a.join("|")+')="[^"]+"'].join("|"),"gi"),c=s.replace(l,"");for(var f=d.getShortEndedElements();r=u.exec(c);)o=u.lastIndex,i=r[0].length,n=f[r[1]]?o:Xf.findEndTag(d,c,o),c=c.substring(0,o-i)+c.substring(n),u.lastIndex=o-i;return ni(c)},Jf=Yf,Qf=we.each,th=function(t){this.compare=function(e,n){if(e.nodeName!==n.nodeName)return!1;var o=function(e){var n={};return Qf(t.getAttribs(e),function(o){var i=o.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=t.getAttrib(e,i))}),n},i=function(t,e){var n,o;for(o in t)if(t.hasOwnProperty(o)){if(void 0===(n=e[o]))return!1;if(t[o]!==n)return!1;delete e[o]}for(o in e)if(e.hasOwnProperty(o))return!1;return!0};return!(!i(o(e),o(n))||!i(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(n,"style")))||Eu(e)||Eu(n))}},eh=function(t,e,n){return C.from(n.container()).filter(Pn).exists(function(o){var i=t?0:-1;return e(o.data.charAt(n.offset()+i))})},nh=d(eh,!0,Pu),oh=d(eh,!1,Pu),ih=function(t){var e=t.container();return Pn(e)&&(0===e.data.length||ei(e.data)&&Cd.isBookmarkNode(e.parentNode))},rh=function(t,e){return function(n){return C.from(Ic(t?0:-1,n)).filter(e).isSome()}},ah=function(t){return Rn(t)&&"block"===qn(xe.fromDom(t),"display")},sh=function(t){return In(t)&&!(wn(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},lh=rh(!0,ah),ch=rh(!1,ah),uh=rh(!0,zn),dh=rh(!1,zn),fh=rh(!0,kn),hh=rh(!1,kn),ph=rh(!0,sh),mh=rh(!1,sh),gh=function(t){an(t),on(t,xe.fromHtml('<br data-mce-bogus="1">'))},vh=function(t){Ve(t).each(function(e){je(e).each(function(n){$o(t)&&qo(e)&&$o(n)&&sn(e)})})},yh=function(t,e){return function(t,e,n){return Ae(e,t)?function(t,e){for(var n=L(e)?e:v,o=t.dom,i=[];null!==o.parentNode&&void 0!==o.parentNode;){var r=o.parentNode,a=xe.fromDom(r);if(i.push(a),!0===n(a))break;o=r}return i}(t,function(t){return n(t)||Ee(t,e)}).slice(0,-1):[]}(t,e,v)},_h=function(t,e){return[t].concat(yh(t,e))},bh=function(t,e,n){return du(t,e,n,ih)},wh=function(t,e){return V(_h(xe.fromDom(e.container()),t),$o)},Ch=function(t,e,n){return bh(t,e.dom,n).forall(function(t){return wh(e,n).fold(function(){return!1===Bc(t,n,e.dom)},function(o){return!1===Bc(t,n,e.dom)&&Ae(o,xe.fromDom(t.container()))})})},xh=function(t,e,n){return wh(e,n).fold(function(){return bh(t,e.dom,n).forall(function(t){return!1===Bc(t,n,e.dom)})},function(e){return bh(t,e.dom,n).isNone()})},Sh=d(xh,!1),Th=d(xh,!0),kh=d(Ch,!1),Eh=d(Ch,!0),Ah=function(t){return Zc(t).exists(qo)},Ph=function(t,e,n){var o=Z(_h(xe.fromDom(n.container()),e),$o),i=Q(o).getOr(e);return cu(t,i.dom,n).filter(Ah)},Nh=function(t,e){return Zc(e).exists(qo)||Ph(!0,t,e).isSome()},Oh=function(t,e){return n=e,C.from(n.getNode(!0)).map(xe.fromDom).exists(qo)||Ph(!1,t,e).isSome();var n},Dh=d(Ph,!1),Lh=d(Ph,!0),Rh=function(t){return Cl.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd()},Bh=function(t,e){var n=Z(_h(xe.fromDom(e.container()),t),$o);return Q(n).getOr(t)},Ih=function(t,e){return Rh(e)?oh(e):oh(e)||pu(Bh(t,e).dom,e).exists(oh)},Mh=function(t,e){return Rh(e)?nh(e):nh(e)||hu(Bh(t,e).dom,e).exists(nh)},zh=function(t){return Zc(t).bind(function(t){return bo(t,De)}).exists(function(t){return e=qn(t,"white-space"),F(["pre","pre-wrap"],e);var e})},Fh=function(t,e){return!zh(e)&&(Sh(t,e)||kh(t,e)||Oh(t,e)||Ih(t,e))},jh=function(t,e){return!zh(e)&&(Th(t,e)||Eh(t,e)||Nh(t,e)||Mh(t,e))},Hh=function(t,e){return Fh(t,e)||jh(t,(o=(n=e).container(),i=n.offset(),Pn(o)&&i<o.data.length?Cl(o,i+1):n));var n,o,i},Uh=function(t,e){return Au(t.charAt(e))},$h=function(t){var e=t.container();return Pn(e)&&Bt(e.data,Qo)},Zh=function(t,e){return C.some(e).filter($h).bind(function(e){var n,o,i,r,a,s,l,c,u=e.container();return a=t,l=(s=u).data,c=Cl(s,0),Uh(l,0)&&!Hh(a,c)&&(s.data=" "+l.slice(1),1)||function(t){var e,n=t.data,o=(e=n.split(""),H(e,function(t,n){return Au(t)&&0<n&&n<e.length-1&&Nu(e[n-1])&&Nu(e[n+1])?" ":t}).join(""));return o!==n&&(t.data=o,!0)}(u)||(n=t,i=(o=u).data,r=Cl(o,i.length-1),Uh(i,i.length-1)&&!Hh(n,r)&&(o.data=i.slice(0,-1)+" ",1))?C.some(e):C.none()})},qh=function(t){var e=xe.fromDom(t.getBody());t.selection.isCollapsed()&&Zh(e,Cl.fromRangeStart(t.selection.getRng())).each(function(e){t.selection.setRng(e.toRange())})},Wh=function(t,e,n){var o,i,r,a,s,l,c,u;0!==n&&(o=xe.fromDom(t),i=_o(o,$o).getOr(o),r=t.data.slice(e,e+n),a=e+n>=t.data.length&&jh(i,Tl(t,t.data.length)),s=0===e&&Fh(i,Tl(t,0)),t.replaceData(e,n,(c=s,u=a,W(l=r,function(t,e){return Pu(e)||Au(e)?t.previousCharIsSpace||""===t.str&&c||t.str.length===l.length-1&&u?{previousCharIsSpace:!1,str:t.str+Qo}:{previousCharIsSpace:!0,str:t.str+" "}:{previousCharIsSpace:!1,str:t.str+e}},{previousCharIsSpace:!1,str:""}).str)))},Vh=function(t,e){var n=t.data.slice(e),o=n.length-Ft(n).length;return Wh(t,e,o)},Gh=function(t,e){var n=t.data.slice(0,e),o=n.length-jt(n).length;return Wh(t,e-o,o)},Kh=function(t,e,n,o){void 0===o&&(o=!0);var i=jt(t.data).length,r=o?t:e,a=o?e:t;return o?r.appendData(a.data):r.insertData(0,a.data),sn(xe.fromDom(a)),n&&Vh(r,i),r},Xh=function(t,e){return o=t,i=(n=e).container(),r=n.offset(),!1===Tl.isTextPosition(n)&&i===o.parentNode&&r>Tl.before(o).offset()?Tl(e.container(),e.offset()-1):e;var n,o,i,r},Yh=function(t){return Ci(t.previousSibling)?C.some((e=t.previousSibling,Pn(e)?Tl(e,e.data.length):Tl.after(e))):t.previousSibling?gu(t.previousSibling):C.none();var e},Jh=function(t){return Ci(t.nextSibling)?C.some((e=t.nextSibling,Pn(e)?Tl(e,0):Tl.before(e))):t.nextSibling?mu(t.nextSibling):C.none();var e},Qh=function(t,e,n){return(t?function(t,e){return Jh(e).orThunk(function(){return Yh(e)}).orThunk(function(){return o=e,hu(n=t,Tl.after(o)).fold(function(){return pu(n,Tl.before(o))},C.some);var n,o})}:function(t,e){return Yh(e).orThunk(function(){return Jh(e)}).orThunk(function(){return n=t,o=e,i=Tl.before(o.previousSibling?o.previousSibling:o.parentNode),pu(n,i).fold(function(){return hu(n,Tl.after(o))},C.some);var n,o,i})})(e,n).map(d(Xh,n))},tp=function(t,e,n){n.fold(function(){t.focus()},function(n){t.selection.setRng(n.toRange(),e)})},ep=function(t,e){return e&&ft(t.schema.getBlockElements(),Pe(e))},np=function(t){if(Oi(t)){var e=xe.fromHtml('<br data-mce-bogus="1">');return an(t),on(t,e),C.some(Tl.before(e.dom))}return C.none()},op=function(t,e,n,o){void 0===o&&(o=!0);var i,r,a=Qh(e,t.getBody(),n.dom),s=_o(n,d(ep,t),(i=t.getBody(),function(t){return t.dom===i})),l=function(t,e,n){var o,i,r,a,s=je(t).filter(Le),l=He(t).filter(Le);return sn(t),i=l,r=e,a=function(t,e,o){var i=t.dom,r=e.dom,a=i.data.length;return Kh(i,r,n),o.container()===r?Tl(i,a):o},((o=s).isSome()&&i.isSome()&&r.isSome()?C.some(a(o.getOrDie(),i.getOrDie(),r.getOrDie())):C.none()).orThunk(function(){return n&&(s.each(function(t){return Gh(t.dom,t.dom.length)}),l.each(function(t){return Vh(t.dom,0)})),e})}(n,a,(r=n,ft(t.schema.getTextInlineElements(),Pe(r))));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(np).fold(function(){o&&tp(t,e,l)},function(n){o&&tp(t,e,C.some(n))})},ip=function(t,e){return{start:t,end:e}},rp=fo([{removeTable:["element"]},{emptyCells:["cells"]},{deleteCellSelection:["rng","cell"]}]),ap=function(t,e){return xo(xe.fromDom(t),"td,th",e)},sp=function(t,e){return wo(t,"table",e)},lp=function(t){return!Ee(t.start,t.end)},cp=function(t,e){return sp(t.start,e).bind(function(n){return sp(t.end,e).bind(function(t){return e=Ee(n,t),o=n,e?C.some(o):C.none();var e,o})})},up=function(t){return Ds(t,"td,th")},dp=function(t,e){return cp(e,t).isSome()},fp=function(t,e,n){return t.filter(function(t){return lp(t)&&dp(n,t)}).orThunk(function(){return function(t,e){var n=ap(e.startContainer,t),o=ap(e.endContainer,t);return e.collapsed?C.none():Ws(n,o,ip).fold(function(){return n.fold(function(){return o.bind(function(e){return sp(e,t).bind(function(t){return Q(up(t)).map(function(t){return ip(t,e)})})})},function(e){return sp(e,t).bind(function(t){return tt(up(t)).map(function(t){return ip(e,t)})})})},function(e){return dp(t,e)?C.none():(o=t,sp((n=e).start,o).bind(function(t){return tt(up(t)).map(function(t){return ip(n.start,t)})}));var n,o})}(n,e)}).bind(function(t){return cp(e=t,n).map(function(t){return{rng:e,table:t,cells:up(t)}});var e})},hp=function(t,e){return G(t,function(t){return Ee(t,e)})},pp=function(t){return Ws(hp((e=t).cells,e.rng.start),hp(e.cells,e.rng.end),function(t,n){return e.cells.slice(t,n+1)}).map(function(e){var n=t.cells;return e.length===n.length?rp.removeTable(t.table):rp.emptyCells(e)});var e},mp=function(t,e){var n,o,i,r,a,s=(n=t,function(t){return Ee(n,t)}),l=(i=s,r=ap((o=e).startContainer,i),a=ap(o.endContainer,i),Ws(r,a,ip));return function(t,e,n){return t.filter(function(t){return i=n,!lp(o=t)&&cp(o,i).exists(function(t){var e=t.dom.rows;return 1===e.length&&1===e[0].cells.length})&&ud(t.start,e);var o,i}).map(function(t){return t.start})}(l,e,s).map(function(t){return rp.deleteCellSelection(e,t)}).orThunk(function(){return fp(l,e,s).bind(pp)})},gp=function(t){var e;return(8===Ne(e=t)||"#comment"===Pe(e)?je:Ve)(t).bind(gp).orThunk(function(){return C.some(t)})},vp=function(t,e){return U(e,gh),t.selection.setCursorLocation(e[0].dom,0),!0},yp=function(t,e,n){e.deleteContents();var o,i,r=gp(n).getOr(n),a=xe.fromDom(t.dom.getParent(r.dom,t.dom.isBlock));return Oi(a)&&(gh(a),t.selection.setCursorLocation(a.dom,0)),Ee(n,a)||(o=Fe(a).is(n)?[]:Fe(i=a).map(Ze).map(function(t){return Z(t,function(t){return!Ee(i,t)})}).getOr([]),U(o.concat(Ze(n)),function(t){Ee(t,a)||Ae(t,a)||sn(t)})),!0},_p=function(t,e){return op(t,!1,e),!0},bp=function(t,e){return V(_h(e,t),Xo)},wp=function(t,e){return V(_h(e,t),function(t){return"caption"===Pe(t)})},Cp=function(t,e){return gh(e),t.selection.setCursorLocation(e.dom,0),C.some(!0)},xp=function(t,e){return(t?fh:hh)(e)},Sp=function(t,e,n){var o=xe.fromDom(t.getBody());return wp(o,n).fold(function(){return function(t,e,n,o){var i=Tl.fromRangeStart(t.selection.getRng());return bp(n,o).bind(function(o){return Oi(o)?Cp(t,o):(r=n,a=o,s=i,uu(e,t.getBody(),s).bind(function(t){return bp(r,xe.fromDom(t.getNode())).map(function(t){return!1===Ee(t,a)})}));var r,a,s}).getOr(!1)}(t,e,o,n)||(i=t,r=e,a=Tl.fromRangeStart(i.selection.getRng()),xp(r,a)||cu(r,i.getBody(),a).exists(function(t){return xp(r,t)}));var i,r,a},function(n){return i=t,r=e,a=o,s=n,l=Tl.fromRangeStart(i.selection.getRng()),(Oi(s)?Cp(i,s):function(t,e,n,o,i){return uu(n,t.getBody(),i).bind(function(r){return c=n,u=i,d=r,mu((l=o).dom).bind(function(t){return gu(l.dom).map(function(e){return c?u.isEqual(t)&&d.isEqual(e):u.isEqual(e)&&d.isEqual(t)})}).getOr(!0)?Cp(t,o):(a=o,s=r,wp(e,xe.fromDom(s.getNode())).map(function(t){return!1===Ee(t,a)}));var a,s,l,c,u,d}).or(C.some(!0))}(i,a,r,s,l)).getOr(!1);var i,r,a,s,l})},Tp=function(t,e){var n,o,i,r,a,s=xe.fromDom(t.selection.getStart(!0)),l=sd(t);return t.selection.isCollapsed()&&0===l.length?Sp(t,e,s):(n=t,o=s,i=xe.fromDom(n.getBody()),r=n.selection.getRng(),0!==(a=sd(n)).length?vp(n,a):function(t,e,n,o){return wp(e,o).fold(function(){return o=t,mp(e,n).map(function(t){return t.fold(d(_p,o),d(vp,o),d(yp,o))});var o},function(e){return Cp(t,e)}).getOr(!1)}(n,i,r,o))},kp=function(t){return t.collapsed?t:(e=t,n=Tl.fromRangeStart(e),o=Tl.fromRangeEnd(e),i=e.commonAncestorContainer,cu(!1,i,o).map(function(t){return!Bc(n,o,i)&&Bc(n,t,i)?(r=n.container(),a=n.offset(),s=t.container(),l=t.offset(),(c=document.createRange()).setStart(r,a),c.setEnd(s,l),c):e;var r,a,s,l,c}).getOr(e));var e,n,o,i},Ep=function(t,e){var n,o,i,r=e.firstChild,a=e.lastChild;return r&&"meta"===r.name&&(r=r.next),a&&"mce_marker"===a.attr("id")&&(a=a.prev),o=a,i=(n=t).getNonEmptyElements(),o&&(o.isEmpty(i)||function(t,e){var n,o;return t.getBlockElements()[e.name]&&(o=e).firstChild&&o.firstChild===o.lastChild&&("br"===(n=e.firstChild).name||n.value===Qo)}(n,o))&&(a=a.prev),!(!r||r!==a||"ul"!==r.name&&"ol"!==r.name)},Ap=function(t){return 0<t.length&&(!(e=t[t.length-1]).firstChild||function(t){return t&&t.firstChild&&t.firstChild===t.lastChild&&((e=t.firstChild).data===Qo||Ln(e));var e}(e))?t.slice(0,-1):t;var e},Pp=function(t,e){var n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},Np=function(t,e){var n=Tl.after(t),o=ru(e).prev(n);return o?o.toRange():null},Op=function(t,e,n,o){var i,r,a,s,l,c,u,d,f,h,p,m,g,v,y,_,b,w,C,x=(i=e,r=o,c=t.serialize(r),s=(a=i.createFragment(c)).firstChild,l=a.lastChild,s&&"META"===s.nodeName&&s.parentNode.removeChild(s),l&&"mce_marker"===l.id&&l.parentNode.removeChild(l),a),S=Pp(e,n.startContainer),T=Ap((u=x.firstChild,we.grep(u.childNodes,function(t){return"LI"===t.nodeName}))),k=e.getRoot(),E=function(t){var o=Tl.fromRangeStart(n),i=ru(e.getRoot()),r=1===t?i.prev(o):i.next(o);return!r||Pp(e,r.getNode())!==S};return E(1)?function(t,e,n){var o,i,r,a,s=t.parentNode;return we.each(e,function(e){s.insertBefore(e,t)}),o=t,i=n,r=Tl.before(o),(a=ru(i).next(r))?a.toRange():null}(S,T,k):E(2)?(d=S,f=T,h=k,e.insertAfter(f.reverse(),d),Np(f[0],h)):(m=T,g=k,v=p=S,_=(y=n).cloneRange(),b=y.cloneRange(),_.setStartBefore(v),b.setEndAfter(v),w=[_.cloneContents(),b.cloneContents()],(C=p.parentNode).insertBefore(w[0],p),we.each(m,function(t){C.insertBefore(t,p)}),C.insertBefore(w[1],p),C.removeChild(p),Np(m[m.length-1],g))},Dp=Mn,Lp=function(t,e,n){var o,i,r,a,s,l,c,u,d,f=t.selection,h=t.dom;/^ | $/.test(e)&&(l=h,c=f.getRng(),u=e,d=xe.fromDom(l.getRoot()),u=Fh(d,Tl.fromRangeStart(c))?u.replace(/^ /,"&nbsp;"):u.replace(/^&nbsp;/," "),e=u=jh(d,Tl.fromRangeEnd(c))?u.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):u.replace(/&nbsp;(<br( \/)?>)?$/," "));var p=t.parser,m=n.merge,g=qf({validate:t.getParam("validate")},t.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',y={content:e,format:"html",selection:!0,paste:n.paste};if((y=t.fire("BeforeSetContent",y)).isDefaultPrevented())t.fire("SetContent",{content:y.content,format:"html",selection:!0,paste:n.paste});else{-1===(e=y.content).indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,v);var _,b,w=(a=f.getRng()).startContainer||(a.parentElement?a.parentElement():null),x=t.getBody();w===x&&f.isCollapsed()&&h.isBlock(x.firstChild)&&(_=t,(b=x.firstChild)&&!_.schema.getShortEndedElements()[b.nodeName])&&h.isEmpty(x.firstChild)&&((a=h.createRng()).setStart(x.firstChild,0),a.setEnd(x.firstChild,0),f.setRng(a)),f.isCollapsed()||function(t){var e=t.dom,n=kp(t.selection.getRng());t.selection.setRng(n);var o,i,r=e.getParent(n.startContainer,Dp);o=n,null!==(i=r)&&i===e.getParent(o.endContainer,Dp)&&ud(xe.fromDom(i),o)?yp(t,n,xe.fromDom(r)):t.getDoc().execCommand("Delete",!1,null)}(t);var S,T,k,E,A,P,N,O,D,L,R,B,I,M,z={context:(o=f.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},F=p.parse(e,z);if(!0===n.paste&&Ep(t.schema,F)&&Pp(h,o))return a=Op(g,h,f.getRng(),F),f.setRng(a),void t.fire("SetContent",y);if(function(t){for(var e=F;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}(),"mce_marker"===(s=F.lastChild).attr("id"))for(s=(r=s).prev;s;s=s.walk(!0))if(3===s.type||!h.isBlock(s.name)){t.schema.isValidChild(s.parent.name,"span")&&s.parent.insert(r,s,"br"===s.name);break}if(t._selectionOverrides.showBlockCaretContainer(o),z.invalid){for(t.selection.setContent(v),o=f.getNode(),i=t.getBody(),9===o.nodeType?o=s=i:s=o;s!==i;)s=(o=s).parentNode;e=o===i?i.innerHTML:h.getOuterHTML(o),e=g.serialize(p.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(F)}))),o===i?h.setHTML(i,e):h.setOuterHTML(o,e)}else S=t,T=e=g.serialize(F),"all"===(k=o).getAttribute("data-mce-bogus")?k.parentNode.insertBefore(S.dom.createFragment(T),k):(E=k.firstChild,A=k.lastChild,!E||E===A&&"BR"===E.nodeName?S.dom.setHTML(k,T):S.selection.setContent(T));N=m,L=(P=t).schema.getTextInlineElements(),R=P.dom,N&&(O=P.getBody(),D=new th(R),we.each(R.select("*[data-mce-fragment]"),function(t){for(var e=t.parentNode;e&&e!==O;e=e.parentNode)L[t.nodeName.toLowerCase()]&&D.compare(e,t)&&R.remove(t,!0)})),function(t,e){var n,o,i=t.dom,r=t.selection;if(e){r.scrollIntoView(e);var a=function(e){for(var n=t.getBody();e&&e!==n;e=e.parentNode)if("false"===i.getContentEditable(e))return e;return null}(e);if(a)return i.remove(e),r.select(a);var s=i.createRng(),l=e.previousSibling;l&&3===l.nodeType?(s.setStart(l,l.nodeValue.length),ge.ie||(o=e.nextSibling)&&3===o.nodeType&&(l.appendData(o.data),o.parentNode.removeChild(o))):(s.setStartBefore(e),s.setEndBefore(e));var c=i.getParent(e,i.isBlock);i.remove(e),c&&i.isEmpty(c)&&(t.$(c).empty(),s.setStart(c,0),s.setEnd(c,0),Dp(c)||c.getAttribute("data-mce-fragment")||!(n=function(e){var n=Tl.fromRangeStart(e);if(n=ru(t.getBody()).next(n))return n.toRange()}(s))?i.add(c,i.create("br",{"data-mce-bogus":"1"})):(s=n,i.remove(c))),r.setRng(s)}}(t,h.get("mce_marker")),B=t.getBody(),we.each(B.getElementsByTagName("*"),function(t){t.removeAttribute("data-mce-fragment")}),I=h,M=f.getStart(),C.from(I.getParent(M,"td,th")).map(xe.fromDom).each(vh),t.fire("SetContent",y),t.addVisual()}},Rp=function(t,e){e(t),t.firstChild&&Rp(t.firstChild,e),t.next&&Rp(t.next,e)},Bp=function(t,e,n){var o=function(t,e,n){var o={},i={},r=[];for(var a in n.firstChild&&Rp(n.firstChild,function(n){U(t,function(t){t.name===n.name&&(o[t.name]?o[t.name].nodes.push(n):o[t.name]={filter:t,nodes:[n]})}),U(e,function(t){"string"==typeof n.attr(t.name)&&(i[t.name]?i[t.name].nodes.push(n):i[t.name]={filter:t,nodes:[n]})})}),o)o.hasOwnProperty(a)&&r.push(o[a]);for(var s in i)i.hasOwnProperty(s)&&r.push(i[s]);return r}(t,e,n);U(o,function(t){U(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})})},Ip=function(t){return t instanceof Hf},Mp=function(t,e){var n;t.dom.setHTML(t.getBody(),e),Of(n=t)&&mu(n.getBody()).each(function(t){var e=t.getNode(),o=kn(e)?mu(e).getOr(t):t;n.selection.setRng(o.toRange())})},zp=zu,Fp=function(t,e,n){var o=t.formatter.get(n);if(o)for(var i=0;i<o.length;i++)if(!1===o[i].inherit&&t.dom.is(e,o[i].selector))return!0;return!1},jp=function(t,e,n,o){var i=t.dom.getRoot();return e!==i&&(e=t.dom.getParent(e,function(e){return!!Fp(t,e,n)||e.parentNode===i||!!$p(t,e,n,o,!0)}),$p(t,e,n,o))},Hp=function(t,e,n){return!!zp(e,n.inline)||!!zp(e,n.block)||(n.selector?1===e.nodeType&&t.is(e,n.selector):void 0)},Up=function(t,e,n,o,i,r){var a,s,l,c=n[o];if(n.onmatch)return n.onmatch(e,n,o);if(c)if(void 0===c.length){for(a in c)if(c.hasOwnProperty(a)){if(s="attributes"===o?t.getAttrib(e,a):ju(t,e,a),i&&!s&&!n.exact)return;if((!i||n.exact)&&!zp(s,Fu(t,Mu(c[a],r),a)))return}}else for(l=0;l<c.length;l++)if("attributes"===o?t.getAttrib(e,c[l]):ju(t,e,c[l]))return n;return n},$p=function(t,e,n,o,i){var r,a,s,l,c=t.formatter.get(n),u=t.dom;if(c&&e)for(a=0;a<c.length;a++)if(r=c[a],Hp(t.dom,e,r)&&Up(u,e,r,"attributes",i,o)&&Up(u,e,r,"styles",i,o)){if(l=r.classes)for(s=0;s<l.length;s++)if(!t.dom.hasClass(e,l[s]))return;return r}},Zp=function(t,e,n,o){if(o)return jp(t,o,e,n);if(o=t.selection.getNode(),jp(t,o,e,n))return!0;var i=t.selection.getStart();return!(i===o||!jp(t,i,e,n))},qp=function(t,e,n){var o=[],i={},r=t.selection.getStart();return t.dom.getParent(r,function(r){for(var a=0;a<e.length;a++){var s=e[a];!i[s]&&$p(t,r,s,n)&&(i[s]=!0,o.push(s))}},t.dom.getRoot()),o},Wp=function(t,e){var n,o,i,r,a,s=t.formatter.get(e),l=t.dom;if(s)for(n=t.selection.getStart(),o=Uu(l,n),r=s.length-1;0<=r;r--){if(!(a=s[r].selector)||s[r].defaultBlock)return!0;for(i=o.length-1;0<=i;i--)if(l.is(o[i],a))return!0}return!1},Vp=function(t,e,n){return W(n,function(n,o){var i,r=(i=o,j(t.formatter.get(i),function(t){var e=function(t){return 1<t.length&&"%"===t.charAt(0)};return j(["styles","attributes"],function(n){return dt(t,n).exists(function(t){var n=A(t)?t:function(t){return e=function(t){return t},n=[],it(t,function(t,o){n.push(e(t))}),n;var e,n}(t);return j(n,e)})})}));return t.formatter.matchNode(e,o,{},r)?n.concat([o]):n},[])},Gp=ti,Kp="_mce_caret",Xp=function(t){return 0<function(t){for(var e=[];t;){if(3===t.nodeType&&t.nodeValue!==Gp||1<t.childNodes.length)return[];1===t.nodeType&&e.push(t),t=t.firstChild}return e}(t).length},Yp=function(t){if(t){var e=new Fo(t,t);for(t=e.current();t;t=e.next())if(Pn(t))return t}return null},Jp=function(t){var e=xe.fromTag("span");return Un(e,{id:Kp,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&on(e,xe.fromText(Gp)),e},Qp=function(t,e,n){void 0===n&&(n=!0);var o,i,r,a,s,l,c,u,d=t.dom,f=t.selection;Xp(e)?op(t,!1,xe.fromDom(e),n):(o=f.getRng(),i=d.getParent(e,d.isBlock),r=o.startContainer,a=o.startOffset,s=o.endContainer,l=o.endOffset,(u=Yp(e))&&u.nodeValue.charAt(0)===Gp&&u.deleteData(0,1),c=u,d.remove(e,!0),r===c&&0<a&&o.setStart(c,a-1),s===c&&0<l&&o.setEnd(c,l-1),i&&d.isEmpty(i)&&gh(xe.fromDom(i)),f.setRng(o))},tm=function(t,e,n){void 0===n&&(n=!0);var o=t.dom,i=t.selection;if(e)Qp(t,e,n);else if(!(e=_u(t.getBody(),i.getStart())))for(;e=o.get(Kp);)Qp(t,e,!1)},em=function(t,e){return t.appendChild(e),e},nm=function(t,e){var n=q(t,function(t,e){return em(t,e.cloneNode(!1))},e);return em(n,n.ownerDocument.createTextNode(Gp))},om=function(t,e,n,o){var i,r,a,s,l,c,u,f,h,p,m,g,v,y=t.dom,_=t.selection,b=[],w=_.getRng(),x=w.startContainer,S=w.startOffset,T=x;for(3===x.nodeType&&(S!==x.nodeValue.length&&(i=!0),T=T.parentNode);T;){if($p(t,T,e,n,o)){r=T;break}T.nextSibling&&(i=!0),b.push(T),T=T.parentNode}r&&(i?(a=_.getBookmark(),w.collapse(!0),s=nd(t,w,t.formatter.get(e),!0),s=zd(s),t.formatter.remove(e,n,s,o),_.moveToBookmark(a)):(l=_u(t.getBody(),r),p=c=Jp(!1).dom,m=null!==l?l:r,(v=(g=(h=t).dom).getParent(m,d(Ru,h)))&&g.isEmpty(v)?m.parentNode.replaceChild(p,m):(function(t){var e=Ds(t,"br"),n=Z(function(t){for(var e=[],n=t.dom;n;)e.push(xe.fromDom(n)),n=n.lastChild;return e}(t).slice(-1),qo);e.length===n.length&&U(n,sn)}(xe.fromDom(m)),g.isEmpty(m)?m.parentNode.replaceChild(p,m):g.insertAfter(p,m)),u=function(t,e,n,o,i,r){var a=t.formatter,s=t.dom,l=Z(nt(a.get()),function(t){return t!==o&&!Bt(t,"removeformat")}),c=Vp(t,n,l);if(0<Z(c,function(e){return!$u(t,e,o)}).length){var u=n.cloneNode(!1);return s.add(e,u),a.remove(o,i,u,r),s.remove(u),C.some(u)}return C.none()}(t,c,r,e,n,o),f=nm(b.concat(u.toArray()),c),Qp(t,l,!1),_.setCursorLocation(f,1),y.isEmpty(r)&&y.remove(r)))},im=function(t,e){return t.schema.getTextInlineElements().hasOwnProperty(Pe(e))&&!yu(e.dom)&&!Tn(e.dom)},rm={},am=gt,sm=pt;Kf=function(t){var e,n=t.selection.getRng(),o=Cn(["pre"]);n.collapsed||(e=t.selection.getSelectedBlocks(),sm(am(am(e,o),function(t){return o(t.previousSibling)&&-1!==vt(e,t.previousSibling)}),function(t){var e,n;e=t.previousSibling,es(n=t).remove(),es(e).append("<br><br>").append(n.childNodes)}))},rm["pre"]||(rm.pre=[]),rm.pre.push(Kf);var lm=we.each,cm=function(t){return wn(t)&&!Eu(t)&&!yu(t)&&!Tn(t)},um=function(t,e){for(var n=t;n;n=n[e]){if(Pn(n)&&0!==n.nodeValue.length)return t;if(wn(n)&&!Eu(n))return n}return t},dm=function(t,e,n){var o,i,r=new th(t);if(e&&n&&(e=um(e,"previousSibling"),n=um(n,"nextSibling"),r.compare(e,n))){for(o=e.nextSibling;o&&o!==n;)o=(i=o).nextSibling,e.appendChild(i);return t.remove(n),we.each(we.grep(n.childNodes),function(t){e.appendChild(t)}),e}return n},fm=function(t,e,n,o){var i;o&&!1!==e.merge_siblings&&(i=dm(t,Lu(o),o),dm(t,i,Lu(i,!0)))},hm=function(t,e,n){lm(t.childNodes,function(t){cm(t)&&(e(t)&&n(t),t.hasChildNodes()&&hm(t,e,n))})},pm=function(t,e){return function(n){return!(!n||!ju(t,n,e))}},mm=function(t,e,n){return function(o){var i,r;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),i=t,"SPAN"===(r=o).nodeName&&0===i.getAttribs(r).length&&i.remove(r,!0)}},gm=fo([{keep:[]},{rename:["name"]},{removed:[]}]),vm=/^(src|href|style)$/,ym=we.each,_m=zu,bm=function(t,e,n){return t.isChildOf(e,n)&&e!==n&&!t.isBlock(n)},wm=function(t,e,n){var o,i=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];return wn(i)&&(o=i.childNodes.length-1,!n&&r&&r--,i=i.childNodes[o<r?o:r]),Pn(i)&&n&&r>=i.nodeValue.length&&(i=new Fo(i,t.getBody()).next()||i),Pn(i)&&!n&&0===r&&(i=new Fo(i,t.getBody()).prev()||i),i},Cm=function(t,e){var n=e?"firstChild":"lastChild";if(/^(TR|TH|TD)$/.test(t.nodeName)&&t[n]){var o=t[n];return"TR"===t.nodeName&&o[n]||o}return t},xm=function(t,e,n,o){var i=t.create(n,o);return e.parentNode.insertBefore(i,e),i.appendChild(e),i},Sm=function(t,e,n,o,i){var r=xe.fromDom(e),a=xe.fromDom(t.create(o,i)),s=(n?$e:Ue)(r);return rn(a,s),n?(tn(r,a),nn(a,r)):(en(r,a),on(a,r)),a.dom},Tm=function(t,e,n,o){return!(e=Lu(e,n,o))||"BR"===e.nodeName||t.isBlock(e)},km=function(t,e,n,o,i){var r,a,s,l,c,u=t.dom;if(s=u,!(_m(l=o,(c=e).inline)||_m(l,c.block)||c.selector&&wn(l)&&s.is(l,c.selector)||(a=o,e.links&&"A"===a.nodeName)))return gm.keep();var d,f,h,p,m,g,v,y=o;if(e.inline&&"all"===e.remove&&A(e.preserve_attributes)){var _=Z(u.getAttribs(y),function(t){return F(e.preserve_attributes,t.name.toLowerCase())});if(u.removeAllAttribs(y),U(_,function(t){return u.setAttrib(y,t.name,t.value)}),0<_.length)return gm.rename("span")}if("all"!==e.remove){ym(e.styles,function(t,o){t=Fu(u,Mu(t,n),o+""),R(o)&&(o=t,i=null),!e.remove_similar&&i&&!_m(ju(u,i,o),t)||u.setStyle(y,o,""),r=!0}),r&&""===u.getAttrib(y,"style")&&(y.removeAttribute("style"),y.removeAttribute("data-mce-style")),ym(e.attributes,function(t,o){var r;if(t=Mu(t,n),R(o)&&(o=t,i=null),e.remove_similar||!i||_m(u.getAttrib(i,o),t)){if("class"===o&&(t=u.getAttrib(y,o))&&(r="",U(t.split(/\s+/),function(t){/mce\-\w+/.test(t)&&(r+=(r?" ":"")+t)}),r))return void u.setAttrib(y,o,r);"class"===o&&y.removeAttribute("className"),vm.test(o)&&y.removeAttribute("data-mce-"+o),y.removeAttribute(o)}}),ym(e.classes,function(t){t=Mu(t,n),i&&!u.hasClass(i,t)||u.removeClass(y,t)});for(var b=u.getAttribs(y),w=0;w<b.length;w++){var C=b[w].nodeName;if(0!==C.indexOf("_")&&0!==C.indexOf("data-"))return gm.keep()}}return"none"!==e.remove?(d=t,h=e,m=(f=y).parentNode,g=d.dom,v=Xl(d),h.block&&(v?m===g.getRoot()&&(h.list_block&&_m(f,h.list_block)||U(et(f.childNodes),function(t){Bu(d,v,t.nodeName.toLowerCase())?p?p.appendChild(t):(p=xm(g,t,v),g.setAttribs(p,d.settings.forced_root_block_attrs)):p=0})):g.isBlock(f)&&!g.isBlock(m)&&(Tm(g,f,!1)||Tm(g,f.firstChild,!0,!0)||f.insertBefore(g.create("br"),f.firstChild),Tm(g,f,!0)||Tm(g,f.lastChild,!1,!0)||f.appendChild(g.create("br")))),h.selector&&h.inline&&!_m(h.inline,f)||g.remove(f,!0),gm.removed()):gm.keep()},Em=function(t,e,n,o,i){return km(t,e,n,o,i).fold(v,function(e){return t.dom.rename(o,e),!0},y)},Am=function(t,e,n,o,i){var r,a=t.formatter.get(e),s=a[0],l=!0,u=t.dom,d=t.selection,f=function(o){var r,l,u,d,f,h,p=(l=o,u=e,d=n,f=i,U(Uu((r=t).dom,l.parentNode).reverse(),function(t){var e;h||"_start"===t.id||"_end"===t.id||(e=$p(r,t,u,d,f))&&!1!==e.split&&(h=t)}),h);return function(t,e,n,o,i,r,a,s){var l,u,d,f=t.dom;if(n){for(var h=n.parentNode,p=o.parentNode;p&&p!==h;p=p.parentNode){l=f.clone(p,!1);for(var m=0;m<e.length&&null!==(l=function(t,e,n,o){return km(t,e,s,o,o).fold(c(o),function(e){return t.dom.createFragment().appendChild(o),t.dom.rename(o,e)},c(null))}(t,e[m],0,l));m++);l&&(u&&l.appendChild(u),d=d||l,u=l)}!r||a.mixed&&f.isBlock(n)||(o=f.split(n,o)),u&&(i.parentNode.insertBefore(u,i),d.appendChild(i),a.inline&&fm(f,a,0,u))}return o}(t,a,p,o,o,!0,s,n)},h=function(e){var o,i;wn(e)&&u.getContentEditable(e)&&(o=l,l="true"===u.getContentEditable(e),i=!0);var r=et(e.childNodes);if(l&&!i)for(var c=0;c<a.length&&!Em(t,a[c],n,e,e);c++);if(s.deep&&r.length){for(c=0;c<r.length;c++)h(r[c]);i&&(l=o)}},p=function(t){var e,n=u.get(t?"_start":"_end"),o=n[t?"firstChild":"lastChild"];return Eu(e=o)&&wn(e)&&("_start"===e.id||"_end"===e.id)&&(o=o[t?"firstChild":"lastChild"]),Pn(o)&&0===o.data.length&&(o=t?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),u.remove(n,!0),o},m=function(e){var n,o,i=nd(t,e,a,!0);if(s.split){if(i=zd(i),(n=wm(t,i,!0))!==(o=wm(t,i))){if(n=Cm(n,!0),o=Cm(o,!1),bm(u,n,o)){var r=C.from(n.firstChild).getOr(n);return f(Sm(u,r,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void p(!0)}if(bm(u,o,n))return r=C.from(o.lastChild).getOr(o),f(Sm(u,r,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void p(!1);n=xm(u,n,"span",{id:"_start","data-mce-type":"bookmark"}),o=xm(u,o,"span",{id:"_end","data-mce-type":"bookmark"});var l=u.createRng();l.setStartAfter(n),l.setEndBefore(o),id(u,l,function(t){U(t,function(t){Eu(t)||Eu(t.parentNode)||f(t)})}),f(n),f(o),n=p(!0),o=p()}else n=o=f(n);i.startContainer=n.parentNode?n.parentNode:n,i.startOffset=u.nodeIndex(n),i.endContainer=o.parentNode?o.parentNode:o,i.endOffset=u.nodeIndex(o)+1}id(u,i,function(e){U(e,function(e){h(e),U(["underline","line-through","overline"],function(n){wn(e)&&t.dom.getStyle(e,"text-decoration")===n&&e.parentNode&&Hu(u,e.parentNode)===n&&Em(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},null,e)})})})};if(o)Ou(o)?((r=u.createRng()).setStartBefore(o),r.setEndAfter(o),m(r)):m(o);else if("false"!==u.getContentEditable(d.getNode()))d.isCollapsed()&&s.inline&&!sd(t).length?om(t,e,n,i):(pd(d,!0,function(){hd(t,m)}),s.inline&&Zp(t,e,n,d.getStart())&&Du(u,d,d.getRng()),t.nodeChanged());else{o=d.getNode();for(var g=0;g<a.length&&(!a[g].ceFalseOverride||!Em(t,a[g],n,o,o));g++);}},Pm=we.each,Nm=we.each,Om=function(t,e,n,o){var i,r,a,s=t.formatter.get(e),l=s[0],c=!o&&t.selection.isCollapsed(),u=t.dom,d=t.selection,f=function(t,e){var i;e=e||l,t&&(e.onformat&&e.onformat(t,e,n,o),Nm(e.styles,function(e,o){u.setStyle(t,o,Mu(e,n))}),!e.styles||(i=u.getAttrib(t,"style"))&&u.setAttrib(t,"data-mce-style",i),Nm(e.attributes,function(e,o){u.setAttrib(t,o,Mu(e,n))}),Nm(e.classes,function(e){e=Mu(e,n),u.hasClass(t,e)||u.addClass(t,e)}))},h=function(t,e){var n=!1;return!!l.selector&&(Nm(t,function(t){if(!("collapsed"in t&&t.collapsed!==c))return u.is(e,t.selector)&&!yu(e)?(f(e,t),!(n=!0)):void 0}),n)},p=function(o,i,r,a){var c=[],u=!0,d=l.inline||l.block,p=o.create(d);f(p),id(o,i,function(i){var r,m=function(i){var g=!1,v=u,y=i.nodeName.toLowerCase(),_=i.parentNode.nodeName.toLowerCase();if(wn(i)&&o.getContentEditable(i)&&(v=u,u="true"===o.getContentEditable(i),g=!0),zu(y,"br"))return r=0,void(l.block&&o.remove(i));if(l.wrapper&&$p(t,i,e,n))r=0;else{if(u&&!g&&l.block&&!l.wrapper&&Ru(t,y)&&Bu(t,_,d)){var b=o.rename(i,d);return f(b),c.push(b),void(r=0)}if(l.selector){var w=h(s,i);if(!l.inline||w)return void(r=0)}!u||g||!Bu(t,d,y)||!Bu(t,_,d)||!a&&3===i.nodeType&&1===i.nodeValue.length&&65279===i.nodeValue.charCodeAt(0)||yu(i)||l.inline&&o.isBlock(i)?(r=0,Nm(we.grep(i.childNodes),m),g&&(u=v),r=0):(r||(r=o.clone(p,!1),i.parentNode.insertBefore(r,i),c.push(r)),r.appendChild(i))}};Nm(i,m)}),!0===l.links&&Nm(c,function(t){var e=function(t){"A"===t.nodeName&&f(t,l),Nm(we.grep(t.childNodes),e)};e(t)}),Nm(c,function(i){var r,a,u,d,h,p,m,g,v,y,_,b,w,C,x,S,T,k,E,A,P=(r=0,Nm(i.childNodes,function(t){var e;(e=t)&&Pn(e)&&0===e.length||Eu(t)||r++}),r);!(1<c.length)&&o.isBlock(i)||0!==P?(l.inline||l.wrapper)&&(l.exact||1!==P||((A=function(t){var e=!1;return Nm(t.childNodes,function(t){if((n=t)&&1===n.nodeType&&!Eu(n)&&!yu(n)&&!Tn(n))return e=t,!1;var n}),e}(k=i))&&!Eu(A)&&Hp(o,A,l)&&(E=o.clone(A,!1),f(E),o.replace(E,k,!0),o.remove(A,!0)),i=E||k),function(t,e,n,o){Pm(e,function(e){var i,r,a,s;Pm(t.dom.select(e.inline,o),function(o){cm(o)&&Em(t,e,n,o,e.exact?o:null)}),i=t.dom,a=o,(r=e).clear_child_styles&&(s=r.links?"*:not(a)":"*",lm(i.select(s,a),function(t){cm(t)&&lm(r.styles,function(e,n){i.setStyle(t,n,"")})}))})}(t,s,n,i),C=l,x=e,S=n,$p(w=t,(T=i).parentNode,x,S)&&Em(w,C,S,T)||C.merge_with_parents&&w.dom.getParent(T.parentNode,function(t){if($p(w,t,x,S))return Em(w,C,S,T),!0}),v=o,_=n,b=i,(y=l).styles&&y.styles.backgroundColor&&hm(b,pm(v,"fontSize"),mm(v,"backgroundColor",Mu(y.styles.backgroundColor,_))),h=o,m=i,g=function(t){var e;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(e=Hu(h,t.parentNode),h.getStyle(t,"color")&&e?h.setStyle(t,"text-decoration",e):h.getStyle(t,"text-decoration")===e&&h.setStyle(t,"text-decoration",null))},(p=l).styles&&(p.styles.color||p.styles.textDecoration)&&(we.walk(m,g,"childNodes"),g(m)),a=o,d=i,"sub"!==(u=l).inline&&"sup"!==u.inline||(hm(d,pm(a,"fontSize"),mm(a,"fontSize","")),a.remove(a.select("sup"===u.inline?"sub":"sup",d),!0)),fm(o,l,0,i)):o.remove(i,!0)})};if("false"!==u.getContentEditable(d.getNode()))l&&(o?Ou(o)?h(s,o)||((i=u.createRng()).setStartBefore(o),i.setEndAfter(o),p(u,nd(t,i,s),0,!0)):p(u,o,0,!0):c&&l.inline&&!sd(t).length?function(t,e,n){var o,i=t.selection,r=i.getRng(),a=r.startOffset,s=r.startContainer.nodeValue,l=_u(t.getBody(),i.getStart());l&&(o=Yp(l));var c,u,d,f,h=/[^\s\u00a0\u00ad\u200b\ufeff]/;s&&0<a&&a<s.length&&h.test(s.charAt(a))&&h.test(s.charAt(a-1))?(c=i.getBookmark(),r.collapse(!0),u=nd(t,r,t.formatter.get(e)),u=zd(u),t.formatter.apply(e,n,u),i.moveToBookmark(c)):(l&&o.nodeValue===Gp||(d=t.getDoc(),f=Jp(!0).dom,o=(l=d.importNode(f,!0)).firstChild,r.insertNode(l),a=1),t.formatter.apply(e,n,l),i.setCursorLocation(o,a))}(t,e,n):(r=d.getNode(),t.settings.forced_root_block||!s[0].defaultBlock||u.getParent(r,u.isBlock)||Om(t,s[0].defaultBlock),d.setRng(kp(d.getRng())),pd(d,!0,function(e){hd(t,function(e,n){var o=n?e:nd(t,e,s);p(u,o)})}),Du(u,d,d.getRng()),t.nodeChanged()),a=t,sm(rm[e],function(t){t(a)}));else{o=d.getNode();for(var m=0,g=s.length;m<g;m++)if(s[m].ceFalseOverride&&u.is(o,s[m].selector))return void f(o,s[m])}},Dm=function(t,e){var n=(e||document).createDocumentFragment();return U(t,function(t){n.appendChild(t.dom)}),xe.fromDom(n)},Lm=function(t,e,n){return{element:t,width:e,rows:n}},Rm=function(t,e){return{element:t,cells:e}},Bm=function(t,e){var n=parseInt($n(t,e),10);return isNaN(n)?1:n},Im=function(t){return W(t,function(t,e){return e.cells.length>t?e.cells.length:t},0)},Mm=function(t,e){for(var n=t.rows,o=0;o<n.length;o++)for(var i=n[o].cells,r=0;r<i.length;r++)if(Ee(i[r],e))return C.some({x:r,y:o});return C.none()},zm=function(t,e,n,o,i){for(var r=[],a=t.rows,s=n;s<=i;s++){var l=a[s].cells,c=e<o?l.slice(e,o+1):l.slice(o,e+1);r.push(Rm(a[s].element,c))}return r},Fm=function(t){return n=H((e=t).rows,function(t){var e=H(t.cells,function(t){var e=$s(t);return Zn(e,"colspan"),Zn(e,"rowspan"),e}),n=Us(t.element);return rn(n,e),n}),o=Us(e.element),i=xe.fromTag("tbody"),rn(i,n),on(o,i),o;var e,n,o,i},jm=function(t,e){return V(t,function(t){return"li"===Pe(t)&&ud(t,e)}).fold(c([]),function(e){return V(t,function(t){return"ul"===Pe(t)||"ol"===Pe(t)}).map(function(t){var e=xe.fromTag(Pe(t));return function(t,e){var n=t.dom;it(e,function(t,e){!function(t,e,n){if(!k(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Fn(t)&&t.style.setProperty(e,n)}(n,e,t)})}(e,ut(Gn(t),function(t,e){return It(e,"list-style")})),[xe.fromTag("li"),e]}).getOr([])})},Hm=function(){return Dm([])},Um=function(t,e){return n=xe.fromDom(e.cloneContents()),o=function(t,e){var n,o=xe.fromDom(e.commonAncestorContainer),i=_h(o,t),r=Z(i,function(t){return Zo(t)||Uo(t)}),a=jm(i,e),s=r.concat(a.length?a:Go(n=o)?Fe(n).filter(Vo).fold(c([]),function(t){return[n,t]}):Vo(n)?[n]:[]);return H(s,Us)}(t,e),i=W(o,function(t,e){return on(e,t),e},n),0<o.length?Dm([i]):i;var n,o,i},$m=function(t,e){return n=t,o=e[0],wo(o,"table",d(Ee,n)).bind(function(t){var n=e[0],o=e[e.length-1];return function(t,e,n){return Mm(t,e).bind(function(e){return Mm(t,n).map(function(n){return o=t,r=n,a=(i=e).x,s=i.y,l=r.x,u=s<(c=r.y)?zm(o,a,s,l,c):zm(o,a,c,l,s),Lm(o.element,Im(u),u);var o,i,r,a,s,l,c,u})})}(function(t){var e=Lm(Us(t),0,[]);return U(Ds(t,"tr"),function(t,n){U(Ds(t,"td,th"),function(o,i){!function(t,e,n,o,i){for(var r=Bm(i,"rowspan"),a=Bm(i,"colspan"),s=t.rows,l=n;l<n+r;l++){s[l]||(s[l]=Rm($s(o),[]));for(var c=e;c<e+a;c++)s[l].cells[c]=l===n&&c===e?i:Us(i)}}(e,function(t,e,n){for(;o=e,i=n,((r=t.rows)[i]?r[i].cells:[])[o];)e++;var o,i,r;return e}(e,i,n),n,t,o)})}),Lm(e.element,Im(e.rows),e.rows)}(t),n,o).map(function(t){return Dm([Fm(t)])})}).getOrThunk(Hm);var n,o},Zm=function(t,e){return 0<=e&&e<t.length&&Pu(t.charAt(e))},qm=function(t){var e=ni(t.innerText);return ge.browser.isIE()?e.replace(/^[ \f\n\r\t\v]+/,""):e},Wm=function(t,e,n){if(void 0===n&&(n={}),n.get=!0,n.format=e,n.selection=!0,(n=t.fire("BeforeGetContent",n)).isDefaultPrevented())return t.fire("GetContent",n),n.content;if("text"===n.format)return u=t,C.from(u.selection.getRng()).map(function(t){var e=u.dom.add(u.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),n=qm(e),o=ni(e.textContent);if(u.dom.remove(e),Zm(o,0)||Zm(o,o.length-1)){var i=u.dom.getParent(t.commonAncestorContainer,u.dom.isBlock),r=qm(i),a=r.indexOf(n);return-1===a?n:(Zm(r,a-1)?" ":"")+n+(Zm(r,a+n.length)?" ":"")}return n}).getOr("");n.getInner=!0;var o,i,r,a,s,l,c,u,d=(i=n,r=(o=t).selection.getRng(),a=o.dom.create("body"),s=o.selection.getSel(),l=Mf(o,rd(s)),(c=i.contextual?function(t,e){var n,o,i=ad(e,t);return 0<i.length?$m(t,i):(n=t,0<(o=e).length&&o[0].collapsed?Hm():Um(n,o[0]))}(xe.fromDom(o.getBody()),l).dom:r.cloneContents())&&a.appendChild(c),o.selection.serializer.serialize(a,i));return"tree"===n.format?d:(n.content=t.selection.isCollapsed()?"":d,t.fire("GetContent",n),n.content)},Vm=function(t){return wn(t)?t.outerHTML:Pn(t)?Gi.encodeRaw(t.data,!1):Nn(t)?"\x3c!--"+t.data+"--\x3e":""},Gm=function(t,e){var n=0;U(t,function(t){var o,i,r;0===t[0]?n++:1===t[0]?(function(t,e,n){var o,i=function(t){var e,n=document.createElement("div"),o=document.createDocumentFragment();for(t&&(n.innerHTML=t);e=n.firstChild;)o.appendChild(e);return o}(e);t.hasChildNodes()&&n<t.childNodes.length?(o=t.childNodes[n]).parentNode.insertBefore(i,o):t.appendChild(i)}(e,t[1],n),n++):2===t[0]&&(i=n,(o=e).hasChildNodes()&&i<o.childNodes.length&&(r=o.childNodes[i]).parentNode.removeChild(r))})},Km=vs(C.none()),Xm=function(t){var e,n=(e=t.getBody(),Z(H(et(e.childNodes),Vm),function(t){return 0<t.length})),o=K(n,function(e){var n=Yf(t.serializer,e);return 0<n.length?[n]:[]}),i=o.join("");return-1!==i.indexOf("</iframe>")?{type:"fragmented",fragments:o,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:i,bookmark:null,beforeBookmark:null}},Ym=function(t,e,n){"fragmented"===e.type?function(t,e){var n,o,i,r,a,s,l,c,u,d=H(et(e.childNodes),Vm);Gm((o=t,i=(n=d).length+o.length+2,r=new Array(i),a=new Array(i),s=function(t,e,i,r,a){var l=c(t,e,i,r);if(null===l||l.start===e&&l.diag===e-r||l.end===t&&l.diag===t-i)for(var u=t,d=i;u<e||d<r;)u<e&&d<r&&n[u]===o[d]?(a.push([0,n[u]]),++u,++d):r-i<e-t?(a.push([2,n[u]]),++u):(a.push([1,o[d]]),++d);else{s(t,l.start,i,l.start-l.diag,a);for(var f=l.start;f<l.end;++f)a.push([0,n[f]]);s(l.end,e,l.end-l.diag,r,a)}},l=function(t,e,i,r){for(var a=t;a-e<r&&a<i&&n[a]===o[a-e];)++a;return{start:t,end:a,diag:e}},c=function(t,e,i,s){var c=e-t,u=s-i;if(0==c||0==u)return null;var d,f,h,p,m,g=c-u,v=u+c,y=(v%2==0?v:1+v)/2;for(r[1+y]=t,a[1+y]=e+1,d=0;d<=y;++d){for(f=-d;f<=d;f+=2){for(h=f+y,f===-d||f!==d&&r[h-1]<r[h+1]?r[h]=r[h+1]:r[h]=r[h-1]+1,m=(p=r[h])-t+i-f;p<e&&m<s&&n[p]===o[m];)r[h]=++p,++m;if(g%2!=0&&g-d<=f&&f<=g+d&&a[h-g]<=r[h])return l(a[h-g],f+t-i,e,s)}for(f=g-d;f<=g+d;f+=2){for(h=f+y-g,f===g-d||f!==g+d&&a[h+1]<=a[h-1]?a[h]=a[h+1]-1:a[h]=a[h-1],m=(p=a[h]-1)-t+i-f;t<=p&&i<=m&&n[p]===o[m];)a[h]=p--,m--;if(g%2==0&&-d<=f&&f<=d&&a[h]<=r[h+g])return l(a[h],f+t-i,e,s)}}},u=[],s(0,n.length,0,o.length,u),u),e)}(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(n?e.beforeBookmark:e.bookmark)},Jm=function(t){return"fragmented"===t.type?t.fragments.join(""):t.content},Qm=function(t){var e=xe.fromTag("body",Km.get().getOrThunk(function(){var t=document.implementation.createHTMLDocument("undo");return Km.set(C.some(t)),t}));return js(e,Jm(t)),U(Ds(e,"*[data-mce-bogus]"),ln),e.dom.innerHTML},tg=function(t,e){return!(!t||!e)&&(o=e,Jm(t)===Jm(o)||(n=e,Qm(t)===Qm(n)));var n,o},eg=function(t){return 0===t.get()},ng=function(t,e,n){eg(n)&&(t.typing=e)},og=function(t,e){t.typing&&(ng(t,!1,e),t.add())},ig=function(t){return t instanceof Hf},rg=function(t,e){Bp(t.serializer.getNodeFilters(),t.serializer.getAttributeFilters(),e)},ag=function(t){return{undoManager:{beforeChange:function(e,n){return o=t,i=n,void(eg(e)&&i.set(C.some(Wl(o.selection))));var o,i},addUndoLevel:function(e,n,o,i,r,a){return function(t,e,n,o,i,r,a){var s=Xm(t);if(r=r||{},r=we.extend(r,s),!1===eg(o)||t.removed)return null;var l=e.data[n.get()];if(t.fire("BeforeAddUndo",{level:r,lastLevel:l,originalEvent:a}).isDefaultPrevented())return null;if(l&&tg(l,r))return null;e.data[n.get()]&&i.get().each(function(t){e.data[n.get()].beforeBookmark=t});var c=t.getParam("custom_undo_redo_levels",0,"number");if(c&&e.data.length>c){for(var u=0;u<e.data.length-1;u++)e.data[u]=e.data[u+1];e.data.length--,n.set(e.data.length)}r.bookmark=Wl(t.selection),n.get()<e.data.length-1&&(e.data.length=n.get()+1),e.data.push(r),n.set(e.data.length-1);var d={level:r,lastLevel:l,originalEvent:a};return 0<n.get()?(t.setDirty(!0),t.fire("AddUndo",d),t.fire("change",d)):t.fire("AddUndo",d),r}(t,e,n,o,i,r,a)},undo:function(e,n,o){return i=t,a=n,s=o,(r=e).typing&&(r.add(),r.typing=!1,ng(r,!1,a)),0<s.get()&&(s.set(s.get()-1),l=r.data[s.get()],Ym(i,l,!0),i.setDirty(!0),i.fire("Undo",{level:l})),l;var i,r,a,s,l},redo:function(e,n){return o=t,r=n,(i=e).get()<r.length-1&&(i.set(i.get()+1),a=r[i.get()],Ym(o,a,!1),o.setDirty(!0),o.fire("Redo",{level:a})),a;var o,i,r,a},clear:function(e,n){return o=t,r=n,(i=e).data=[],r.set(0),i.typing=!1,void o.fire("ClearUndos");var o,i,r},reset:function(t){return(e=t).clear(),void e.add();var e},hasUndo:function(e,n){return o=t,i=e,0<n.get()||i.typing&&i.data[0]&&!tg(Xm(o),i.data[0]);var o,i},hasRedo:function(t,e){return n=t,e.get()<n.data.length-1&&!n.typing;var n},transact:function(t,e,n){return i=n,og(o=t,e),o.beforeChange(),o.ignore(i),o.add();var o,i},ignore:function(t,e){try{t.set(t.get()+1),e()}finally{t.set(t.get()-1)}},extra:function(e,n,o,i){return r=t,s=n,l=o,c=i,void((a=e).transact(l)&&(u=a.data[s.get()].bookmark,d=a.data[s.get()-1],Ym(r,d,!0),a.transact(c)&&(a.data[s.get()-1].beforeBookmark=u)));var r,a,s,l,c,u,d}},formatter:{apply:function(e,n,o){return Om(t,e,n,o)},remove:function(e,n,o,i){return Am(t,e,n,o,i)},toggle:function(e,n,o){return r=e,a=n,s=o,l=(i=t).formatter.get(r),void(!Zp(i,r,a,s)||"toggle"in l[0]&&!l[0].toggle?Om:Am)(i,r,a,s);var i,r,a,s,l}},editor:{getContent:function(e,n){return o=t,i=e,r=n,C.from(o.getBody()).fold(c("tree"===i.format?new Hf("body",11):""),function(t){return function(t,e,n,o){var i,r,a,s,l;if(e.format=n,e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),"raw"===e.format)i=we.trim(Jf(t.serializer,o.innerHTML));else if("text"===e.format)i=ni(o.innerText||o.textContent);else{if("tree"===e.format)return t.serializer.serialize(o,e);a=(r=t).serializer.serialize(o,e),s=Xl(r),l=new RegExp("^(<"+s+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+s+">[\r\n]*|<br \\/>[\r\n]*)$"),i=a.replace(l,"")}return"text"===e.format||Yo(xe.fromDom(o))?e.content=i:e.content=we.trim(i),e.no_events||t.fire("GetContent",e),e.content}(o,i,r,t)});var o,i,r},setContent:function(e,n){return o=t,i=e,(r=n).format=r.format?r.format:"html",r.set=!0,r.content=Ip(i)?"":i,Ip(i)||r.no_events||(o.fire("BeforeSetContent",r),i=r.content),C.from(o.getBody()).fold(c(i),function(t){return Ip(i)?function(t,e,n,o){Bp(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);var i=qf({validate:t.validate},t.schema).serialize(n);return o.content=Yo(xe.fromDom(e))?i:we.trim(i),Mp(t,o.content),o.no_events||t.fire("SetContent",o),n}(o,t,i,r):(e=o,n=t,s=r,0===(a=i).length||/^\s+$/.test(a)?(c='<br data-mce-bogus="1">',"TABLE"===n.nodeName?a="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(a="<li>"+c+"</li>"),a=(l=Xl(e))&&e.schema.isValidChild(n.nodeName.toLowerCase(),l.toLowerCase())?(a=c,e.dom.createHTML(l,Yl(e),a)):a||'<br data-mce-bogus="1">',Mp(e,a),e.fire("SetContent",s)):("raw"!==s.format&&(a=qf({validate:e.validate},e.schema).serialize(e.parser.parse(a,{isRootContent:!0,insert:!0}))),s.content=Yo(xe.fromDom(n))?a:we.trim(a),Mp(e,s.content),s.no_events||e.fire("SetContent",s)),s.content);var e,n,a,s,l,c});var o,i,r},insertContent:function(e,n){return Lp(t,e,n)}},selection:{getContent:function(e,n){return Wm(t,e,n)}},raw:{getModel:function(){return C.none()}}}},sg=function(t,e){var n=function(t){return E(t)?t:{}},o=g("Unimplemented feature for rtc");return{undoManager:{beforeChange:s,addUndoLevel:o,undo:function(){return e.undo(),{type:"complete",fragments:[],content:"",bookmark:null,beforeBookmark:null}},redo:function(){return e.redo(),{type:"complete",fragments:[],content:"",bookmark:null,beforeBookmark:null}},clear:o,reset:o,hasUndo:function(){return e.hasUndo()},hasRedo:function(){return e.hasRedo()},transact:function(t,n,o){return e.transact(o),{type:"complete",fragments:[],content:"",bookmark:null,beforeBookmark:null}},ignore:o,extra:o},formatter:{apply:function(t,o,i){return e.applyFormat(t,n(o))},remove:function(t,o,i,r){return e.removeFormat(t,n(o))},toggle:function(t,o,i){return e.toggleFormat(t,n(o))}},editor:{getContent:function(n,o){if("html"!==o&&"tree"!==o)return ag(t).editor.getContent(n,o);var i=e.getContent(),r=qf({inner:!0});return rg(t,i),"tree"===o?i:r.serialize(i)},setContent:function(n,o){var i=ig(n)?n:t.parser.parse(n,{isRootContent:!0,insert:!0});return e.setContent(i),n},insertContent:function(n,o){var i,r=(i=t,C.from(i.selection.getStart(!0)).map(function(t){return t.nodeName.toLowerCase()}).fold(function(){return{}},function(t){return{context:t}})),a=ig(n)?n:t.parser.parse(n,wt(wt({},r),{insert:!0}));e.insertContent(a)}},selection:{getContent:function(n,o){if("html"!==n&&"tree"!==n)return ag(t).selection.getContent(n,o);var i=e.getSelectedContent(),r=qf({});return rg(t,i),"tree"===n?i:r.serialize(i)}},raw:{getModel:function(){return C.some(e.getRawModel())}}}},lg=function(t){return ft(t.plugins,"rtc")},cg=function(t){return t.rtcInstance?t.rtcInstance:ag(t)},ug=function(t){var e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},dg=function(t){return 0===t.dom.length?(sn(t),C.none()):C.some(t)},fg=function(t,e,n,o){t.bind(function(t){return(o?Gh:Vh)(t.dom,o?t.dom.length:0),e.filter(Le).map(function(e){return i=e,r=n,a=o,s=t.dom,l=i.dom,c=a?s.length:l.length,void(a?(Kh(s,l,!1,!a),r.setStart(l,c)):(Kh(l,s,!1,!a),r.setEnd(l,c)));var i,r,a,s,l,c})}).orThunk(function(){var t;return(t=o,e.filter(function(t){return Cd.isBookmarkNode(t.dom)}).bind(t?He:je).or(e).filter(Le)).map(function(t){return n=o,void Fe(e=t).each(function(t){var o=e.dom;n&&Fh(t,Tl(o,0))?Vh(o,0):!n&&jh(t,Tl(o,o.length))&&Gh(o,o.length)});var e,n})})},hg=function(t,e,n){var o;t&&t.hasOwnProperty(e)&&(0===(o=Z(t[e],function(t){return t!==n})).length?delete t[e]:t[e]=o)},pg=function(t){return!!t.select},mg=function(t){return!(!t||!t.ownerDocument)&&Ae(xe.fromDom(t.ownerDocument),xe.fromDom(t))},gg=function(t,e,n,o){var i,r,a,s,l,c,u=function(t,e){return l||(l={},c={},s.on("NodeChange",function(t){var e=t.element,n=a.getParents(e,null,a.getRoot()),o={};we.each(l,function(t,e){we.each(n,function(i){if(a.is(i,e))return c[e]||(we.each(t,function(t){t(!0,{node:i,selector:e,parents:n})}),c[e]=t),o[e]=t,!1})}),we.each(c,function(t,i){o[i]||(delete c[i],we.each(t,function(t){t(!1,{node:e,selector:i,parents:n})}))})})),l[t]||(l[t]=[]),l[t].push(e),{unbind:function(){hg(l,t,e),hg(c,t,e)}}},d=function(t,e){return function(t,e,n){void 0===n&&(n={});var o,i,r=(o=e,wt(wt({format:"html"},n),{set:!0,selection:!0,content:o}));r.no_events||!(r=t.fire("BeforeSetContent",r)).isDefaultPrevented()?(n.content=function(t,e){if("raw"===e.format)return e.content;var n=t.selection.getRng(),o=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),i=o?{context:o.nodeName.toLowerCase()}:{},r=t.parser.parse(e.content,wt(wt({isRootContent:!0,forced_root_block:!1},i),e));return qf({validate:t.validate},t.schema).serialize(r)}(t,r),function(t,e){var n=C.from(e.firstChild).map(xe.fromDom),o=C.from(e.lastChild).map(xe.fromDom);t.deleteContents(),t.insertNode(e);var i=n.bind(je).filter(Le).bind(dg),r=o.bind(He).filter(Le).bind(dg);fg(i,n,t,!0),fg(r,o,t,!1),t.collapse(!1)}(i=t.selection.getRng(),i.createContextualFragment(n.content)),t.selection.setRng(i),sf(t,i),r.no_events||t.fire("SetContent",r)):t.fire("SetContent",r)}(o,t,e)},f=function(t){var e=p();e.collapse(!!t),m(e)},h=function(){return e.getSelection?e.getSelection():e.document.selection},p=function(){var n,a,s,l=function(t,e,n){try{return e.compareBoundaryPoints(t,n)}catch(t){return-1}};if(!e)return null;var c=e.document;if(null==c)return null;if(void 0!==o.bookmark&&!1===Of(o)){var u=Cf(o);if(u.isSome())return u.map(function(t){return Mf(o,[t])[0]}).getOr(c.createRange())}try{(n=h())&&!bn(n.anchorNode)&&(a=0<n.rangeCount?n.getRangeAt(0):n.createRange?n.createRange():c.createRange(),a=Mf(o,[a])[0])}catch(t){}return(a=a||(c.createRange?c.createRange():c.body.createTextRange())).setStart&&9===a.startContainer.nodeType&&a.collapsed&&(s=t.getRoot(),a.setStart(s,0),a.setEnd(s,0)),i&&r&&(0===l(a.START_TO_START,a,i)&&0===l(a.END_TO_END,a,i)?a=r:r=i=null),a},m=function(t,e){var n;if((a=t)&&(pg(a)||mg(a.startContainer)&&mg(a.endContainer))){var a,s=pg(t)?t:null;if(s){r=null;try{s.select()}catch(t){}}else{var l=h();if(t=o.fire("SetSelectionRange",{range:t,forward:e}).range,l){r=t;try{l.removeAllRanges(),l.addRange(t)}catch(t){}!1===e&&l.extend&&(l.collapse(t.endContainer,t.endOffset),l.extend(t.startContainer,t.startOffset)),i=0<l.rangeCount?l.getRangeAt(0):null}t.collapsed||t.startContainer!==t.endContainer||!l.setBaseAndExtent||ge.ie||t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()&&(n=t.startContainer.childNodes[t.startOffset])&&"IMG"===n.tagName&&(l.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),l.anchorNode===t.startContainer&&l.focusNode===t.endContainer||l.setBaseAndExtent(n,0,n,1)),o.fire("AfterSetSelectionRange",{range:t,forward:e})}}},g=function(){var e=h(),n=null==e?void 0:e.anchorNode,o=null==e?void 0:e.focusNode;if(!e||!n||!o||bn(n)||bn(o))return!0;var i=t.createRng();i.setStart(n,e.anchorOffset),i.collapse(!0);var r=t.createRng();return r.setStart(o,e.focusOffset),r.collapse(!0),i.compareBoundaryPoints(i.START_TO_START,r)<=0},v={bookmarkManager:null,controlSelection:null,dom:a=t,win:e,serializer:n,editor:s=o,collapse:f,setCursorLocation:function(e,n){var i=t.createRng();e?(i.setStart(e,n),i.setEnd(e,n),m(i),f(!1)):(dd(t,i,o.getBody(),!0),m(i))},getContent:function(t){return function(t,e){var n,o;return void 0===e&&(e={}),n=e.format?e.format:"html",o=e,ug(t).selection.getContent(n,o)}(o,t)},setContent:d,getBookmark:function(t,e){return y.getBookmark(t,e)},moveToBookmark:function(t){return y.moveToBookmark(t)},select:function(e,n){var o,i,r;return o=t,i=e,r=n,C.from(i).map(function(t){var e=o.nodeIndex(t),n=o.createRng();return n.setStart(t.parentNode,e),n.setEnd(t.parentNode,e+1),r&&(dd(o,n,t,!0),dd(o,n,t,!1)),n}).each(m),e},isCollapsed:function(){var t=p(),e=h();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!e||t.collapsed)},isForward:g,setNode:function(e){return d(t.getOuterHTML(e)),e},getNode:function(){return function(t,e){var n,o;if(!e)return t;n=e.startContainer,o=e.endContainer;var i=e.startOffset,r=e.endOffset,a=e.commonAncestorContainer;return!e.collapsed&&(n===o&&r-i<2&&n.hasChildNodes()&&(a=n.childNodes[i]),3===n.nodeType&&3===o.nodeType&&(n=n.length===i?If(n.nextSibling,!0):n.parentNode,o=0===r?If(o.previousSibling,!1):o.parentNode,n&&n===o))?n:a&&3===a.nodeType?a.parentNode:a}(o.getBody(),p())},getSel:h,setRng:m,getRng:p,getStart:function(t){return Rf(o.getBody(),p(),t)},getEnd:function(t){return Bf(o.getBody(),p(),t)},getSelectedBlocks:function(e,n){return function(t,e,n,o){var i,r=[],a=t.getRoot();if(n=t.getParent(n||Rf(a,e,e.collapsed),t.isBlock),o=t.getParent(o||Bf(a,e,e.collapsed),t.isBlock),n&&n!==a&&r.push(n),n&&o&&n!==o)for(var s=new Fo(i=n,a);(i=s.next())&&i!==o;)t.isBlock(i)&&r.push(i);return o&&n!==o&&o!==a&&r.push(o),r}(t,p(),e,n)},normalize:function(){var e=p(),n=h();if(1<rd(n).length||!fd(o))return e;var i=Id(t,e);return i.each(function(t){m(t,g())}),i.getOr(e)},selectorChanged:function(t,e){return u(t,e),v},selectorChangedWithUnbind:u,getScrollContainer:function(){for(var e,n=t.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){e=n;break}n=n.parentNode}return e},scrollIntoView:function(t,e){return i=t,r=e,void((n=o).inline?function(t,e,n){return tf(t,e,rf,n)}:function(t,e,n){return tf(t,e,af,n)})(n,i,r);var n,i,r},placeCaretAt:function(t,e){return m(Pd(t,e,o.getDoc()))},getBoundingClientRect:function(){var t=p();return t.collapsed?Tl.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:function(){e=i=r=null,_.destroy()}},y=Cd(v),_=Ed(v,o);return v.bookmarkManager=y,v.controlSelection=_,v},vg=function(t,e){var n,o=sr();e.convert_fonts_to_spans&&function(t,e,n){t.addNodeFilter("font",function(t){U(t,function(t){var o,i=e.parse(t.attr("style")),r=t.attr("color"),a=t.attr("face"),s=t.attr("size");r&&(i.color=r),a&&(i["font-family"]=a),s&&(i["font-size"]=n[parseInt(t.attr("size"),10)-1]),t.name="span",t.attr("style",e.serialize(i)),o=t,U(["color","face","size"],function(t){o.attr(t,null)})})})}(t,o,we.explode(e.font_size_legacy_values)),n=o,t.addNodeFilter("strike",function(t){U(t,function(t){var e=n.parse(t.attr("style"));e["text-decoration"]="line-through",t.name="span",t.attr("style",n.serialize(e))})})},yg=function(t){var e,n=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(e=o[1]),{type:e,data:n[1]}},_g=function(t,e){var n;try{n=atob(e)}catch(t){return C.none()}for(var o=new Uint8Array(n.length),i=0;i<o.length;i++)o[i]=n.charCodeAt(i);return C.some(new Blob([o],{type:t}))},bg=function(t){return 0===t.indexOf("blob:")?(e=t,new So(function(t,n){var o=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200===this.status?t(this.response):o()},i.onerror=o,i.send()}catch(t){o()}})):0===t.indexOf("data:")?(n=t,new So(function(t){var e=yg(n),o=e.type,i=e.data;_g(o,i).fold(function(){return t(new Blob([]))},t)})):null;var e,n},wg=0,Cg=function(t){return(t||"blobid")+wg++},xg=function(t,e,n,o){var i,r,a,s,l;0!==e.src.indexOf("blob:")?(r=(i=yg(e.src)).data,a=i.type,s=r,(l=t.getByData(s,a))?n({image:e,blobInfo:l}):bg(e.src).then(function(o){l=t.create(Cg(),o,s),t.add(l),n({image:e,blobInfo:l})},function(t){o(t)})):(l=t.getByUri(e.src))?n({image:e,blobInfo:l}):bg(e.src).then(function(o){var i;i=o,new So(function(t){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(i)}).then(function(i){s=yg(i).data,l=t.create(Cg(),o,s),t.add(l),n({image:e,blobInfo:l})})},function(t){o(t)})};var Sg,Tg,kg=function(t,e,n,o){(t.padd_empty_with_br||e.insert)&&n[o.name]?o.empty().append(new Hf("br",1)).shortEnded=!0:o.empty().append(new Hf("#text",3)).value=Qo},Eg=function(t,e){return t&&t.firstChild&&t.firstChild===t.lastChild&&t.firstChild.name===e},Ag=function(t,e,n,o){return o.isEmpty(e,n,function(e){return n=e,(o=t.getElementRule(n.name))&&o.paddEmpty;var n,o})},Pg=function(t,e){var n=t.schema;e.remove_trailing_brs&&t.addNodeFilter("br",function(t,o,i){var r,a,s,l,c,u,d,f,h=t.length,p=we.extend({},n.getBlockElements()),m=n.getNonEmptyElements(),g=n.getWhiteSpaceElements();for(p.body=1,r=0;r<h;r++)if(s=(a=t[r]).parent,p[a.parent.name]&&a===s.lastChild){for(c=a.prev;c;){if("span"!==(u=c.name)||"bookmark"!==c.attr("data-mce-type")){"br"===u&&(a=null);break}c=c.prev}a&&(a.remove(),Ag(n,m,g,s)&&(d=n.getElementRule(s.name))&&(d.removeEmpty?s.remove():d.paddEmpty&&kg(e,i,p,s)))}else{for(l=a;s&&s.firstChild===l&&s.lastChild===l&&!p[(l=s).name];)s=s.parent;l===s&&!0!==e.padd_empty_with_br&&((f=new Hf("#text",3)).value=Qo,a.replace(f))}}),t.addAttributeFilter("href",function(t){var n,o,i=t.length;if(!e.allow_unsafe_link_target)for(;i--;){var r=t[i];"a"===r.name&&"_blank"===r.attr("target")&&r.attr("rel",(o=(n=r.attr("rel"))?we.trim(n):"",/\b(noopener)\b/g.test(o)?o:o.split(" ").filter(function(t){return 0<t.length}).concat(["noopener"]).sort().join(" ")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",function(t){for(var e,n,o,i,r=t.length;r--;)if("a"===(i=t[r]).name&&i.firstChild&&!i.attr("href"))for(o=i.parent,e=i.lastChild;n=e.prev,o.insert(e,i),e=n;);}),e.fix_list_elements&&t.addNodeFilter("ul,ol",function(t){for(var e,n,o,i=t.length;i--;)"ul"!==(o=(n=t[i]).parent).name&&"ol"!==o.name||(n.prev&&"li"===n.prev.name?n.prev.append(n):((e=new Hf("li",1)).attr("style","list-style-type: none"),n.wrap(e)))}),e.validate&&n.getValidClasses()&&t.addAttributeFilter("class",function(t){for(var e,o,i,r,a,s,l,c=t.length,u=n.getValidClasses();c--;){for(o=(e=t[c]).attr("class").split(" "),a="",i=0;i<o.length;i++)r=o[i],l=!1,(s=u["*"])&&s[r]&&(l=!0),s=u[e.name],!l&&s&&s[r]&&(l=!0),l&&(a&&(a+=" "),a+=r);a.length||(a=null),e.attr("class",a)}}),function(t,e){var n=e.blob_cache,o=function(t){var o,i,r=t.attr("src");(o=t).attr("src")===ge.transparentSrc||o.attr("data-mce-placeholder")||t.attr("data-mce-bogus")||((i=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(r))?C.some({type:i[1],data:decodeURIComponent(i[2])}):C.none()).filter(function(){return function(t,e){if(e.images_dataimg_filter){var n=new Image;return n.src=t.attr("src"),it(t.attributes.map,function(t,e){n.setAttribute(e,t)}),e.images_dataimg_filter(n)}return!0}(t,e)}).bind(function(t){var e=t.type,o=t.data;return C.from(n.getByData(o,e)).orThunk(function(){return _g(e,o).map(function(t){var e=n.create(Cg(),t,o);return n.add(e),e})})}).each(function(e){t.attr("src",e.blobUri())})};n&&t.addAttributeFilter("src",function(t){return U(t,o)})}(t,e)},Ng=we.makeMap,Og=we.each,Dg=we.explode,Lg=we.extend,Rg=function(t,e){void 0===e&&(e=rr());var n={},o=[],i={},r={};(t=t||{}).validate=!("validate"in t)||t.validate,t.root_name=t.root_name||"body";var a,s,l=function(t){var e,a,s=t.name;s in n&&((a=i[s])?a.push(t):i[s]=[t]),e=o.length;for(;e--;)(s=o[e].name)in t.attributes.map&&((a=r[s])?a.push(t):r[s]=[t]);return t},c={schema:e,addAttributeFilter:function(t,e){Og(Dg(t),function(t){for(var n=0;n<o.length;n++)if(o[n].name===t)return void o[n].callbacks.push(e);o.push({name:t,callbacks:[e]})})},getAttributeFilters:function(){return[].concat(o)},addNodeFilter:function(t,e){Og(Dg(t),function(t){var o=n[t];o||(n[t]=o=[]),o.push(e)})},getNodeFilters:function(){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push({name:e,callbacks:n[e]});return t},filterNode:l,parse:function(a,s){var c,u,d,f,h,p,m,g,v=[];s=s||{},i={},r={};var y,_=Lg(Ng("script,style,head,html,body,title,meta,param"),e.getBlockElements()),b=e.getNonEmptyElements(),w=e.children,C=t.validate,x=!1===(y="forced_root_block"in s?s.forced_root_block:t.forced_root_block)?"":!0===y?"p":y,S=e.getWhiteSpaceElements(),T=/^[ \t\r\n]+/,k=/[ \t\r\n]+$/,E=/[ \t\r\n]+/g,A=/^[ \t\r\n]+$/,P=S.hasOwnProperty(s.context)||S.hasOwnProperty(t.root_name),N=function(t,e){var o,r=new Hf(t,e);return t in n&&((o=i[t])?o.push(r):i[t]=[r]),r},O=function(t){for(var n,o,i,r=e.getBlockElements(),a=t.prev;a&&3===a.type;){if(0<(o=a.value.replace(k,"")).length)return void(a.value=o);if(n=a.next){if(3===n.type&&n.value.length){a=a.prev;continue}if(!r[n.name]&&"script"!==n.name&&"style"!==n.name){a=a.prev;continue}}i=a.prev,a.remove(),a=i}},D=Xf({validate:C,allow_html_data_urls:t.allow_html_data_urls,allow_script_urls:t.allow_script_urls,allow_conditional_comments:t.allow_conditional_comments,preserve_cdata:t.preserve_cdata,self_closing_elements:function(t){var e,n={};for(e in t)"li"!==e&&"p"!==e&&(n[e]=t[e]);return n}(e.getSelfClosingElements()),cdata:function(t){g.append(N("#cdata",4)).value=t},text:function(t,e){var n,o;P||(t=t.replace(E," "),(o=g.lastChild)&&(_[o.name]||"br"===o.name)&&(t=t.replace(T,""))),0!==t.length&&((n=N("#text",3)).raw=!!e,g.append(n).value=t)},comment:function(t){g.append(N("#comment",8)).value=t},pi:function(t,e){g.append(N(t,7)).value=e,O(g)},doctype:function(t){g.append(N("#doctype",10)).value=t,O(g)},start:function(t,n,i){var a,s,l,c,u=C?e.getElementRule(t):{};if(u){for((a=N(u.outputName||t,1)).attributes=n,a.shortEnded=i,g.append(a),(c=w[g.name])&&w[a.name]&&!c[a.name]&&v.push(a),s=o.length;s--;)(l=o[s].name)in n.map&&((p=r[l])?p.push(a):r[l]=[a]);_[t]&&O(a),i||(g=a),!P&&S[t]&&(P=!0)}},end:function(n){var o,i,r,a,l,c=C?e.getElementRule(n):{};if(c){if(_[n]&&!P){if((o=g.firstChild)&&3===o.type)if(0<(i=o.value.replace(T,"")).length)o.value=i,o=o.next;else for(r=o.next,o.remove(),o=r;o&&3===o.type;)i=o.value,r=o.next,0!==i.length&&!A.test(i)||(o.remove(),o=r),o=r;if((o=g.lastChild)&&3===o.type)if(0<(i=o.value.replace(k,"")).length)o.value=i,o=o.prev;else for(r=o.prev,o.remove(),o=r;o&&3===o.type;)i=o.value,r=o.prev,0!==i.length&&!A.test(i)||(o.remove(),o=r),o=r}if(P&&S[n]&&(P=!1),c.removeEmpty&&Ag(e,b,S,g))return a=g.parent,_[g.name]?g.empty().remove():g.unwrap(),void(g=a);c.paddEmpty&&(Eg(l=g,"#text")&&l.firstChild.value===Qo||Ag(e,b,S,g))&&kg(t,s,_,g),g=g.parent}}},e),L=g=new Hf(s.context||t.root_name,11);if(D.parse(a,s.format),C&&v.length&&(s.context?s.invalid=!0:function(t){for(var n,o,i,r,a,s,c,u,d,f,h=Ng("tr,td,th,tbody,thead,tfoot,table"),p=e.getNonEmptyElements(),m=e.getWhiteSpaceElements(),g=e.getTextBlockElements(),v=e.getSpecialElements(),y=0;y<t.length;y++)if((n=t[y]).parent&&!n.fixed)if(g[n.name]&&"li"===n.parent.name){for(d=n.next;d&&g[d.name];)d.name="li",d.fixed=!0,n.parent.insert(d,n.parent),d=d.next;n.unwrap(n)}else{for(i=[n],o=n.parent;o&&!e.isValidChild(o.name,n.name)&&!h[o.name];o=o.parent)i.push(o);if(o&&1<i.length){for(i.reverse(),r=a=l(i[0].clone()),u=0;u<i.length-1;u++){for(e.isValidChild(a.name,i[u].name)?(s=l(i[u].clone()),a.append(s)):s=a,c=i[u].firstChild;c&&c!==i[u+1];)f=c.next,s.append(c),c=f;a=s}Ag(e,p,m,r)?o.insert(n,i[0],!0):(o.insert(r,i[0],!0),o.insert(n,r)),o=i[0],(Ag(e,p,m,o)||Eg(o,"br"))&&o.empty().remove()}else if(n.parent){if("li"===n.name){if((d=n.prev)&&("ul"===d.name||"ol"===d.name)){d.append(n);continue}if((d=n.next)&&("ul"===d.name||"ol"===d.name)){d.insert(n,d.firstChild,!0);continue}n.wrap(l(new Hf("ul",1)));continue}e.isValidChild(n.parent.name,"div")&&e.isValidChild("div",n.name)?n.wrap(l(new Hf("div",1))):v[n.name]?n.empty().remove():n.unwrap()}}}(v)),x&&("body"===L.name||s.isRootContent)&&function(){var n,o,i=L.firstChild,r=function(t){t&&((i=t.firstChild)&&3===i.type&&(i.value=i.value.replace(T,"")),(i=t.lastChild)&&3===i.type&&(i.value=i.value.replace(k,"")))};if(e.isValidChild(L.name,x.toLowerCase())){for(;i;)n=i.next,3===i.type||1===i.type&&"p"!==i.name&&!_[i.name]&&!i.attr("data-mce-type")?(o||((o=N(x,1)).attr(t.forced_root_block_attrs),L.insert(o,i)),o.append(i)):(r(o),o=null),i=n;r(o)}}(),!s.invalid){for(m in i)if(i.hasOwnProperty(m)){for(p=n[m],f=(c=i[m]).length;f--;)c[f].parent||c.splice(f,1);for(u=0,d=p.length;u<d;u++)p[u](c,m,s)}for(u=0,d=o.length;u<d;u++)if((p=o[u]).name in r){for(f=(c=r[p.name]).length;f--;)c[f].parent||c.splice(f,1);for(f=0,h=p.callbacks.length;f<h;f++)p.callbacks[f](c,p.name,s)}}return L}};return Pg(c,t),a=c,(s=t).inline_styles&&vg(a,s),c},Bg=function(t,e,n){-1===we.inArray(e,n)&&(t.addAttributeFilter(n,function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}),e.push(n))},Ig=function(t,e){var n=["data-mce-selected"],o=e&&e.dom?e.dom:us.DOM,i=e&&e.schema?e.schema:rr(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;var r,a,s,l=Rg(t,i);return a=t,s=o,(r=l).addAttributeFilter("data-mce-tabindex",function(t,e){for(var n,o=t.length;o--;)(n=t[o]).attr("tabindex",n.attr("data-mce-tabindex")),n.attr(e,null)}),r.addAttributeFilter("src,href,style",function(t,e){for(var n,o,i=t.length,r="data-mce-"+e,l=a.url_converter,c=a.url_converter_scope;i--;)void 0!==(o=(n=t[i]).attr(r))?(n.attr(e,0<o.length?o:null),n.attr(r,null)):(o=n.attr(e),"style"===e?o=s.serializeStyle(s.parseStyle(o),n.name):l&&(o=l.call(c,o,e,n.name)),n.attr(e,0<o.length?o:null))}),r.addAttributeFilter("class",function(t){for(var e,n,o=t.length;o--;)(n=(e=t[o]).attr("class"))&&(n=e.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),e.attr("class",0<n.length?n:null))}),r.addAttributeFilter("data-mce-type",function(t,e,n){for(var o,i=t.length;i--;)"bookmark"!==(o=t[i]).attr("data-mce-type")||n.cleanup||(C.from(o.firstChild).exists(function(t){return!ei(t.value)})?o.unwrap():o.remove())}),r.addNodeFilter("noscript",function(t){for(var e,n=t.length;n--;)(e=t[n].firstChild)&&(e.value=Gi.decode(e.value))}),r.addNodeFilter("script,style",function(t,e){for(var n,o,i,r=t.length,s=function(t){return t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};r--;)o=(n=t[r]).firstChild?n.firstChild.value:"","script"===e?((i=n.attr("type"))&&n.attr("type","mce-no/type"===i?null:i.replace(/^mce\-/,"")),"xhtml"===a.element_format&&0<o.length&&(n.firstChild.value="// <![CDATA[\n"+s(o)+"\n// ]]>")):"xhtml"===a.element_format&&0<o.length&&(n.firstChild.value="\x3c!--\n"+s(o)+"\n--\x3e")}),r.addNodeFilter("#comment",function(t){for(var e,n=t.length;n--;)e=t[n],a.preserve_cdata&&0===e.value.indexOf("[CDATA[")?(e.name="#cdata",e.type=4,e.value=s.decode(e.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===e.value.indexOf("mce:protected ")&&(e.name="#text",e.type=3,e.raw=!0,e.value=unescape(e.value).substr(14))}),r.addNodeFilter("xml:namespace,input",function(t,e){for(var n,o=t.length;o--;)7===(n=t[o]).type?n.remove():1===n.type&&("input"!==e||n.attr("type")||n.attr("type","text"))}),r.addAttributeFilter("data-mce-type",function(t){U(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(r.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),r.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}),{schema:i,addNodeFilter:l.addNodeFilter,addAttributeFilter:l.addAttributeFilter,serialize:function(n,r){void 0===r&&(r={});var a,s,c,u,d,f,h,p,m,g,v,y,_=wt({format:"html"},r),b=function(t,e,n){return i=n,(o=t)&&o.hasEventListeners("PreProcess")&&!i.no_events?function(t,e,n){var o,i,r=t.dom;e=e.cloneNode(!0);var a,s,l=document.implementation;return l.createHTMLDocument&&(o=l.createHTMLDocument(""),we.each("BODY"===e.nodeName?e.childNodes:[e],function(t){o.body.appendChild(o.importNode(t,!0))}),e="BODY"!==e.nodeName?o.body.firstChild:o.body,i=r.doc,r.doc=o),a=t,s=wt(wt({},n),{node:e}),a.fire("PreProcess",s),i&&(r.doc=i),e}(t,e,n):e;var o,i}(e,n,_),w=(a=o,s=b,u=ni((c=_).getInner?s.innerHTML:a.getOuterHTML(s)),c.selection||Yo(xe.fromDom(s))?u:we.trim(u)),C=(d=l,f=w,v=(h=_).selection?wt({forced_root_block:!1},h):h,!(m=function(t){return t&&"br"===t.name})(g=(y=d.parse(f,v)).lastChild)||m(p=g.prev)&&(g.remove(),p.remove()),y);return"tree"===_.format?C:function(t,e,n,o,i){var r,a,s,l,c,u;return a=t,r=o,l=qf(e,n).serialize(r),(s=i).no_events||!a?l:(c=a,u=wt(wt({},s),{content:l}),c.fire("PostProcess",u).content)}(e,t,i,C,_)},addRules:function(t){i.addValidElements(t)},setRules:function(t){i.setValidElements(t)},addTempAttr:d(Bg,l,n),getTempAttrs:function(){return n},getNodeFilters:l.getNodeFilters,getAttributeFilters:l.getAttributeFilters}},Mg=function(t,e){var n=Ig(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},zg=function(t,e,n){return void 0===n&&(n={}),o=e,i=n,cg(t).editor.setContent(o,i);var o,i},Fg=us.DOM,jg=function(t){return C.from(t).each(function(t){return t.destroy()})},Hg=Object.prototype.hasOwnProperty,Ug=(Sg=function(t,e){return E(t)&&E(e)?Ug(t,e):e},function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},o=0;o<t.length;o++){var i=t[o];for(var r in i)Hg.call(i,r)&&(n[r]=Sg(n[r],i[r]))}return n}),$g=se().deviceType,Zg=$g.isTouch(),qg=$g.isPhone(),Wg=$g.isTablet(),Vg=["lists","autolink","autosave"],Gg={table_grid:!1,object_resizing:!1,resize:!1},Kg=function(t){var e=A(t)?t.join(" "):t,n=H(k(e)?e.split(" "):[],zt);return Z(n,function(t){return 0<t.length})},Xg=function(t,e){return t.sections().hasOwnProperty(e)},Yg=function(t,e){return dt(t,"toolbar_mode").orThunk(function(){return dt(t,"toolbar_drawer").map(function(t){return!1===t?"wrap":t})}).getOr(e)},Jg=function(t,e,n,o,i){var r,a,s,l,u,f,h=t?{mobile:(r=i.mobile||{},a=e,s={resize:!1,toolbar_mode:Yg(r,"scrolling"),toolbar_sticky:!1},wt(wt(wt({},Gg),s),a?{menubar:!1}:{}))}:{},p=function(t,e){var n,o,i=ct(e,function(e,n){return F(t,n)});return n=i.t,o=i.f,{sections:c(n),settings:c(o)}}(["mobile"],Ug(h,i)),m=we.extend(n,o,p.settings(),t&&Xg(p,"mobile")?function(t,e,n){void 0===n&&(n={});var o=p.sections(),i=o.hasOwnProperty(e)?o[e]:{};return we.extend({},n,i)}(0,"mobile"):{},{validate:!0,external_plugins:(l=o,u=p.settings(),f=u.external_plugins?u.external_plugins:{},l&&l.external_plugins?we.extend({},l.external_plugins,f):f)});return function(t,e,n,o){var i,r,a,s,l,c,u=Kg(n.forced_plugins),f=Kg(o.plugins),h=Xg(i=e,"mobile")?i.sections().mobile:{},p=h.plugins?Kg(h.plugins):f,m=(c=t&&(s=a="mobile",l=(r=e).sections(),Xg(r,a)&&l[a].theme===s)?Z(p,d(F,Vg)):t&&Xg(e,"mobile")?p:f,[].concat(Kg(u)).concat(Kg(c)));return we.extend(o,{plugins:m.join(" ")})}(t,p,o,m)},Qg=function(t,e,n,o,i){var r,a,s,l,c=(r=n,a=Zg,s=t,l={id:e,theme:"silver",toolbar_mode:Yg(i,"floating"),plugins:"",document_base_url:r,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:s.convertURL,url_converter_scope:s},wt(wt({},l),a?Gg:{}));return Jg(qg||Wg,qg,c,o,i)},tv=function(t,e,n){return C.from(e.settings[n]).filter(t)},ev=(Tg={},{add:function(t,e){Tg[t]=e},get:function(t){return Tg[t]?Tg[t]:{icons:{}}},has:function(t){return ft(Tg,t)}}),nv=function(t,e){return e.dom[t]},ov=function(t,e){return parseInt(qn(e,t),10)},iv=d(nv,"clientWidth"),rv=d(nv,"clientHeight"),av=d(ov,"margin-top"),sv=d(ov,"margin-left"),lv=function(t,e,n){var o,i,r,a,s,l,c,u,d,f,h,p=xe.fromDom(t.getBody()),m=t.inline?p:(o=p,xe.fromDom(Me(o).dom.documentElement)),g=(i=t.inline,a=e,s=n,l=(r=m).dom.getBoundingClientRect(),{x:a-(i?l.left+r.dom.clientLeft+sv(r):0),y:s-(i?l.top+r.dom.clientTop+av(r):0)});return u=g.x,d=g.y,f=iv(c=m),h=rv(c),0<=u&&0<=d&&u<=f&&d<=h},cv=function(t){var e;return e=t.inline?t.getBody():t.getContentAreaContainer(),C.from(e).map(xe.fromDom).map(cn).getOr(!1)};function uv(t){var e,n=[],o=function(){var e,n=t.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:e,reposition:e,getArgs:e}},i=function(){return C.from(n[0])},r=function(){0<n.length&&o().reposition(n)},a=function(t){G(n,function(e){return e===t}).each(function(t){n.splice(t,1)})},s=function(e){if(!t.removed&&cv(t))return V(n,function(t){return n=o().getArgs(t),i=e,!(n.type!==i.type||n.text!==i.text||n.progressBar||n.timeout||i.progressBar||i.timeout);var n,i}).getOrThunk(function(){t.editorManager.setActive(t);var s,l=o().open(e,function(){a(l),r(),i().fold(function(){return t.focus()},function(t){return xe.fromDom(t.getEl()).dom.focus()})});return s=l,n.push(s),r(),l})};return(e=t).on("SkinLoaded",function(){var t=e.getParam("service_message");t&&s({text:t,type:"warning",timeout:0})}),e.on("ResizeEditor ResizeWindow NodeChange",function(){Bo.requestAnimationFrame(r)}),e.on("remove",function(){U(n.slice(),function(t){o().close(t)})}),{open:s,close:function(){i().each(function(t){o().close(t),a(t),r()})},getNotifications:function(){return n}}}var dv=Ss.PluginManager,fv=Ss.ThemeManager,hv=function(t){var e=[],n=function(){var e,n=t.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:e=function(){throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}},o=function(t,e){return function(){return e?e.apply(t,arguments):void 0}},i=function(n){var o;o=n,t.fire("CloseWindow",{dialog:o}),0===(e=Z(e,function(t){return t!==n})).length&&t.focus()},r=function(n){t.editorManager.setActive(t),wf(t);var o=n();return function(n){var o;e.push(n),o=n,t.fire("OpenWindow",{dialog:o})}(o),o};return t.on("remove",function(){U(e,function(t){n().close(t)})}),{open:function(t,e){return r(function(){return n().open(t,e,i)})},openUrl:function(t){return r(function(){return n().openUrl(t,i)})},alert:function(t,e,i){n().alert(t,o(i||this,e))},confirm:function(t,e,i){n().confirm(t,o(i||this,e))},close:function(){C.from(e[e.length-1]).each(function(t){n().close(t),i(t)})}}},pv=function(t,e){t.notificationManager.open({type:"error",text:e})},mv=function(t,e){t._skinLoaded?pv(t,e):t.on("SkinLoaded",function(){pv(t,e)})},gv=function(t,e,n){var o,i;o=e,i={message:n},t.fire(o,i),console.error(n)},vv=function(t,e,n){return n?"Failed to load "+t+": "+n+" from url "+e:"Failed to load "+t+" url: "+e},yv=function(t,e,n){gv(t,"PluginLoadError",vv("plugin",e,n))},_v=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=window.console;o&&(o.error?o.error.apply(o,Ct([t],e)):o.log.apply(o,Ct([t],e)))};function bv(t,e){var n={},o=function(t,n,o,i){var r=new XMLHttpRequest;r.open("POST",e.url),r.withCredentials=e.credentials,r.upload.onprogress=function(t){i(t.loaded/t.total*100)},r.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+r.status)},r.onload=function(){var t,i,a;r.status<200||300<=r.status?o("HTTP Error: "+r.status):(t=JSON.parse(r.responseText))&&"string"==typeof t.location?n((i=e.basePath,a=t.location,i?i.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a)):o("Invalid JSON: "+r.responseText)};var a=new FormData;a.append("file",t.blob(),t.filename()),r.send(a)},i=function(t,e){return{url:e,blobInfo:t,status:!0}},r=function(t,e,n){return{url:"",blobInfo:t,status:!1,error:{message:e,options:n}}},a=function(t,e){we.each(n[t],function(t){t(e)}),delete n[t]};return!1===L(e.handler)&&(e.handler=o),{upload:function(s,l){return e.url||e.handler!==o?function(o,s){return o=we.grep(o,function(e){return!t.isUploaded(e.blobUri())}),So.all(we.map(o,function(o){return t.isPending(o.blobUri())?(d=o.blobUri(),new So(function(t){n[d]=n[d]||[],n[d].push(t)})):(l=o,c=e.handler,u=s,t.markPending(l.blobUri()),new So(function(e){var n;try{var o=function(){n&&n.close()};c(l,function(n){o(),t.markUploaded(l.blobUri(),n),a(l.blobUri(),i(l,n)),e(i(l,n))},function(n,i){var s=i||{};o(),t.removeFailed(l.blobUri()),a(l.blobUri(),r(l,n,s)),e(r(l,n,s))},function(t){t<0||100<t||(n=n||u()).progressBar.value(t)})}catch(t){e(r(l,t.message,{}))}}));var l,c,u,d}))}(s,l):new So(function(t){t([])})}}}var wv=0,Cv=function(t){return t+wv+++(e=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+e()+e()+e());var e},xv=function(t){var e,n,o,i,r,a,s,l,u,d=(e=[],n=function(t){if(!t.blob||!t.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var e=t.id||Cv("blobid"),n=t.name||e;return{id:c(e),name:c(n),filename:c(n+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[t.blob.type.toLowerCase()]||"dat")),blob:c(t.blob),base64:c(t.base64),blobUri:c(t.blobUri||URL.createObjectURL(t.blob)),uri:c(t.uri)}},{create:function(t,e,o,i){if(k(t))return n({id:t,name:i,blob:e,base64:o});if(E(t))return n(t);throw new Error("Unknown input type")},add:function(t){i(t.id())||e.push(t)},get:i=function(t){return o(function(e){return e.id()===t})},getByUri:function(t){return o(function(e){return e.blobUri()===t})},getByData:function(t,e){return o(function(n){return n.base64()===t&&n.blob().type===e})},findFirst:o=function(t){return V(e,t).getOrUndefined()},removeByUri:function(t){e=Z(e,function(e){return e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)})},destroy:function(){U(e,function(t){URL.revokeObjectURL(t.blobUri())}),e=[]}}),f=(s={},l=function(t,e){return{status:t,resultUri:e}},{hasBlobUri:u=function(t){return t in s},getResultUri:function(t){var e=s[t];return e?e.resultUri:null},isPending:function(t){return!!u(t)&&1===s[t].status},isUploaded:function(t){return!!u(t)&&2===s[t].status},markPending:function(t){s[t]=l(1,null)},markUploaded:function(t,e){s[t]=l(2,e)},removeFailed:function(t){delete s[t]},destroy:function(){s={}}}),h=[],p=function(e){return function(n){return t.selection?e(n):[]}},m=function(t,e,n){for(var o=0;-1!==(o=t.indexOf(e,o))&&(t=t.substring(0,o)+n+t.substr(o+e.length),o+=n.length-e.length+1),-1!==o;);return t},g=function(t,e,n){var o='src="'+n+'"'+(n===ge.transparentSrc?' data-mce-placeholder="1"':"");return t=m(t,'src="'+e+'"',o),m(t,'data-mce-src="'+e+'"','data-mce-src="'+n+'"')},v=function(e,n){U(t.undoManager.data,function(t){"fragmented"===t.type?t.fragments=H(t.fragments,function(t){return g(t,e,n)}):t.content=g(t.content,e,n)})},_=function(){return t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},b=function(e){return r=r||bv(f,{url:t.getParam("images_upload_url","","string"),basePath:t.getParam("images_upload_base_path","","string"),credentials:t.getParam("images_upload_credentials",!1,"boolean"),handler:t.getParam("images_upload_handler",null,"function")}),x().then(p(function(n){var o=H(n,function(t){return t.blobInfo});return r.upload(o,_).then(p(function(o){var i=[],r=H(o,function(e,o){var r,a,s=n[o].blobInfo,l=n[o].image;return e.status&&t.getParam("images_replace_blob_uris",!0,"boolean")?(d.removeByUri(l.src),function(e,n){var o,i=t.convertURL(n,"src");v(e.src,n),t.$(e).attr({src:t.getParam("images_reuse_filename",!1,"boolean")?(o=n)+(-1===o.indexOf("?")?"?":"&")+(new Date).getTime():n,"data-mce-src":i})}(l,e.url)):e.error&&(e.error.options.remove&&(v(l.getAttribute("src"),ge.transparentSrc),i.push(l)),r=t,a=e.error.message,mv(r,ws.translate(["Failed to upload image: {0}",a]))),{element:l,status:e.status,uploadUri:e.url,blobInfo:s}});return 0<i.length&&(lg(t)?console.error("Removing images on failed uploads is currently unsupported for RTC"):t.undoManager.transact(function(){U(i,function(e){t.dom.remove(e),d.removeByUri(e.src)})})),e&&e(r),r}))}))},w=function(e){if(Jl(t))return b(e)},C=function(e){return!1!==X(h,function(t){return t(e)})&&(0!==e.getAttribute("src").indexOf("data:")||t.getParam("images_dataimg_filter",y,"function")(e))},x=function(){return(a=a||function(t,e){var n={};return{findAll:function(o,i){i=i||y;var r,a=Z((r=o)?et(r.getElementsByTagName("img")):[],function(e){var n=e.src;return!!ge.fileApi&&!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!n||n===ge.transparentSrc)&&(0===n.indexOf("blob:")?!t.isUploaded(n)&&i(e):0===n.indexOf("data:")&&i(e))}),s=H(a,function(t){if(void 0!==n[t.src])return new So(function(e){n[t.src].then(function(n){return"string"==typeof n?n:void e({image:t,blobInfo:n.blobInfo})})});var o=new So(function(n,o){xg(e,t,n,o)}).then(function(t){return delete n[t.image.src],t}).catch(function(e){return delete n[t.src],e});return n[t.src]=o});return So.all(s)}}}(f,d)).findAll(t.getBody(),C).then(p(function(e){return e=Z(e,function(e){return"string"!=typeof e||(mv(t,e),!1)}),U(e,function(t){v(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")}),e}))},S=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var o=f.getResultUri(n);if(o)return'src="'+o+'"';var i=d.getByUri(n);return(i=i||W(t.editorManager.get(),function(t,e){return t||e.editorUpload&&e.editorUpload.blobCache.getByUri(n)},null))?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':e})};return t.on("SetContent",function(){(Jl(t)?w:x)()}),t.on("RawSaveContent",function(t){t.content=S(t.content)}),t.on("GetContent",function(t){t.source_view||"raw"===t.format||(t.content=S(t.content))}),t.on("PostRender",function(){t.parser.addNodeFilter("img",function(t){U(t,function(t){var e,n=t.attr("src");d.getByUri(n)||(e=f.getResultUri(n))&&t.attr("src",e)})})}),{blobCache:d,addFilter:function(t){h.push(t)},uploadImages:b,uploadImagesAuto:w,scanForImages:x,destroy:function(){d.destroy(),f.destroy(),a=r=null}}},Sv=function(t,e,n,o){return ct(t,function(t,i){return!!ft(e,i)||(U(t,function(t){t(!1,{node:n,format:i,parents:o})}),!1)}).t},Tv=function(t,e,n,o,i){var r,a,s,l,c,u,d,f;return null===e.get()&&(a=t,s=vs({}),(r=e).set({}),a.on("NodeChange",function(t){!function(t,e,n,o){var i=nt(n.get()),r={},a={},s=Z(Uu(t.dom,e),function(t){return 1===t.nodeType&&!t.getAttribute("data-mce-bogus")});it(o,function(e,n){we.each(s,function(o){return t.formatter.matchNode(o,n,{},e.similar)?(-1===i.indexOf(n)&&(U(e.callbacks,function(t){t(!0,{node:o,format:n,parents:s})}),r[n]=e.callbacks),a[n]=e.callbacks,!1):!Fp(t,o,n)&&void 0})});var l=Sv(n.get(),a,e,s);n.set(wt(wt({},r),l))}(a,t.element,s,r.get())})),c=n,u=o,d=i,f=(l=e).get(),U(c.split(","),function(t){f[t]||(f[t]={similar:d,callbacks:[]}),f[t].callbacks.push(u)}),l.set(f),{unbind:function(){return i=n,r=o,a=(t=e).get(),U(i.split(","),function(t){a[t].callbacks=Z(a[t].callbacks,function(t){return t!==r}),0===a[t].callbacks.length&&delete a[t]}),void t.set(a);var t,i,r,a}}};var kv,Ev,Av=we.each,Pv=us.DOM,Nv=function(t,e){var n,o,i,r=e&&e.schema||rr({}),a=function(t){o="string"==typeof t?{name:t,classes:[],attrs:{}}:t;var e,n,i=Pv.create(o.name);return e=i,(n=o).classes.length&&Pv.addClass(e,n.classes.join(" ")),Pv.setAttribs(e,n.attrs),i},s=function(t,e,n){var o,i,l,c,u,d,f,h=0<e.length&&e[0],p=h&&h.name,m=(c=p,u="string"!=typeof(l=t)?l.nodeName.toLowerCase():l,!(!(f=(d=r.getElementRule(u))&&d.parentsRequired)||!f.length)&&(c&&-1!==we.inArray(f,c)?c:f[0]));if(m)p===m?(i=e[0],e=e.slice(1)):i=m;else if(h)i=e[0],e=e.slice(1);else if(!n)return t;return i&&(o=a(i)).appendChild(t),n&&(o||(o=Pv.create("div")).appendChild(t),we.each(n,function(e){var n=a(e);o.insertBefore(n,t)})),s(o,e,i&&i.siblings)};return t&&t.length?(o=t[0],n=a(o),(i=Pv.create("div")).appendChild(s(n,t.slice(1),o.siblings)),i):""},Ov=function(t){var e,n={classes:[],attrs:{}};return"*"!==(t=n.selector=we.trim(t))&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(t,e,o,i,r){switch(e){case"#":n.attrs.id=o;break;case".":n.classes.push(o);break;case":":-1!==we.inArray("checked disabled enabled read-only required".split(" "),o)&&(n.attrs[o]=o)}var a;return"["!==i||(a=r.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(n.attrs[a[1]]=a[2]),""})),n.name=e||"div",n},Dv=function(t,e){var n,o,i,r="",a=(i=t.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),k(i)?i:"");if(""===a)return"";var s=function(t){return t.replace(/%(\w+)/g,"")};if("string"==typeof e){if(!(e=t.formatter.get(e)))return;e=e[0]}if("preview"in e){var l=dt(e,"preview");if(l.is(!1))return"";a=l.getOr(a)}n=e.block||e.inline||"span";var c,u=(c=e.selector)&&"string"==typeof c?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),we.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),function(t){var e=we.map(t.split(/(?:~\+|~|\+)/),Ov),n=e.pop();return e.length&&(n.siblings=e),n}).reverse()):[],d=u.length?(u[0].name||(u[0].name=n),n=e.selector,Nv(u,t)):Nv([n],t),f=Pv.select(n,d)[0]||d.firstChild;return Av(e.styles,function(t,e){var n=s(t);n&&Pv.setStyle(f,e,n)}),Av(e.attributes,function(t,e){var n=s(t);n&&Pv.setAttrib(f,e,n)}),Av(e.classes,function(t){var e=s(t);Pv.hasClass(f,e)||Pv.addClass(f,e)}),t.fire("PreviewFormats"),Pv.setStyles(d,{position:"absolute",left:-65535}),t.getBody().appendChild(d),o=Pv.getStyle(t.getBody(),"fontSize",!0),o=/px$/.test(o)?parseInt(o,10):0,Av(a.split(" "),function(e){var n=Pv.getStyle(f,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=Pv.getStyle(t.getBody(),e,!0),"#ffffff"===Pv.toHex(n).toLowerCase())||"color"===e&&"#000000"===Pv.toHex(n).toLowerCase())){if("font-size"===e&&/em|%$/.test(n)){if(0===o)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*o+"px"}"border"===e&&n&&(r+="padding:0 2px;"),r+=e+":"+n+";"}}),t.fire("AfterPreviewFormats"),Pv.remove(d),r},Lv=function(t){var e,n=function(t){var e,n,o={},i=function(t,e){t&&("string"!=typeof t?we.each(t,function(t,e){i(e,t)}):(A(e)||(e=[e]),we.each(e,function(t){void 0===t.deep&&(t.deep=!t.selector),void 0===t.split&&(t.split=!t.selector||t.inline),void 0===t.remove&&t.selector&&!t.inline&&(t.remove="none"),t.selector&&t.inline&&(t.mixed=!0,t.block_expand=!0),"string"==typeof t.classes&&(t.classes=t.classes.split(/\s+/))}),o[t]=e))};return i((e=t.dom,n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(t,e,n){return wn(t)&&t.hasAttribute("href")},onformat:function(t,n,o){we.each(o,function(n,o){e.setAttrib(t,o,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},we.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(t){n[t]={block:t,remove:"all"}}),n)),i(t.getParam("formats")),{get:function(t){return t?o[t]:o},has:function(t){return ft(o,t)},register:i,unregister:function(t){return t&&o[t]&&delete o[t],o}}}(t),o=vs(null);return function(t){t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(var e=1;e<=6;e++)t.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])}(t),(e=t).on("mouseup keydown",function(t){var n,o,i,r;n=e,o=t.keyCode,i=n.selection,r=n.getBody(),tm(n,null,!1),8!==o&&46!==o||!i.isCollapsed()||i.getStart().innerHTML!==Gp||tm(n,_u(r,i.getStart())),37!==o&&39!==o||tm(n,_u(r,i.getStart()))}),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:function(e,n,o){var i,r,a;i=e,r=n,a=o,ug(t).formatter.apply(i,r,a)},remove:function(e,n,o,i){var r,a,s,l;r=e,a=n,s=o,l=i,ug(t).formatter.remove(r,a,s,l)},toggle:function(e,n,o){var i,r,a;i=e,r=n,a=o,ug(t).formatter.toggle(i,r,a)},match:d(Zp,t),matchAll:d(qp,t),matchNode:d($p,t),canApply:d(Wp,t),formatChanged:d(Tv,t,o),getCssText:d(Dv,t)}},Rv=function(t){var e,n,o,i,r,a,s=vs(C.none()),l=vs(0),c=vs(0),u={data:[],typing:!1,beforeChange:function(){var e,n;e=l,n=s,ug(t).undoManager.beforeChange(e,n)},add:function(e,n){return o=u,i=c,r=l,a=s,d=e,f=n,ug(t).undoManager.addUndoLevel(o,i,r,a,d,f);var o,i,r,a,d,f},undo:function(){return e=u,n=l,o=c,ug(t).undoManager.undo(e,n,o);var e,n,o},redo:function(){return e=t,n=c,o=u.data,ug(e).undoManager.redo(n,o);var e,n,o},clear:function(){var e,n;e=u,n=c,ug(t).undoManager.clear(e,n)},reset:function(){var e;e=u,ug(t).undoManager.reset(e)},hasUndo:function(){return e=u,n=c,ug(t).undoManager.hasUndo(e,n);var e,n},hasRedo:function(){return e=u,n=c,ug(t).undoManager.hasRedo(e,n);var e,n},transact:function(e){return n=u,o=l,i=e,ug(t).undoManager.transact(n,o,i);var n,o,i},ignore:function(e){var n,o;n=l,o=e,ug(t).undoManager.ignore(n,o)},extra:function(e,n){var o,i,r,a;o=u,i=c,r=e,a=n,ug(t).undoManager.extra(o,i,r,a)}};return lg(t)||(n=t,o=u,i=l,r=vs(!1),a=function(t){ng(o,!1,i),o.add({},t)},n.on("init",function(){o.add()}),n.on("BeforeExecCommand",function(t){var e=t.command.toLowerCase();"undo"!==e&&"redo"!==e&&"mcerepaint"!==e&&(og(o,i),o.beforeChange())}),n.on("ExecCommand",function(t){var e=t.command.toLowerCase();"undo"!==e&&"redo"!==e&&"mcerepaint"!==e&&a(t)}),n.on("ObjectResizeStart cut",function(){o.beforeChange()}),n.on("SaveContent ObjectResized blur",a),n.on("dragend",a),n.on("keyup",function(t){var e=t.keyCode;t.isDefaultPrevented()||((33<=e&&e<=36||37<=e&&e<=40||45===e||t.ctrlKey)&&(a(),n.nodeChanged()),46!==e&&8!==e||n.nodeChanged(),r.get()&&o.typing&&!1===tg(Xm(n),o.data[0])&&(!1===n.isDirty()&&(n.setDirty(!0),n.fire("change",{level:o.data[0],lastLevel:null})),n.fire("TypingUndo"),r.set(!1),n.nodeChanged()))}),n.on("keydown",function(t){var e,n=t.keyCode;t.isDefaultPrevented()||(33<=n&&n<=36||37<=n&&n<=40||45===n?o.typing&&a(t):(e=t.ctrlKey&&!t.altKey||t.metaKey,!(n<16||20<n)||224===n||91===n||o.typing||e||(o.beforeChange(),ng(o,!0,i),o.add({},t),r.set(!0))))}),n.on("mousedown",function(t){o.typing&&a(t)}),n.on("input",function(t){var e,n;t.inputType&&("insertReplacementText"===t.inputType||"insertText"===(n=t).inputType&&null===n.data||"insertFromPaste"===(e=t).inputType||"insertFromDrop"===e.inputType)&&a(t)}),n.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||n.nodeChanged()})),(e=t).addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),u},Bv=[9,27,Td.HOME,Td.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Td.DOWN,Td.UP,Td.LEFT,Td.RIGHT].concat(ge.browser.isFirefox()?[224]:[]),Iv="data-mce-placeholder",Mv=function(t){return"keydown"===t.type||"keyup"===t.type},zv=function(t){var e=t.keyCode;return e===Td.BACKSPACE||e===Td.DELETE},Fv=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,jv=function(t,e){return Te(xe.fromDom(e),t.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string"))},Hv=function(t,e,n){var o,i,r,a=(o=t,i=e,r=n,Z(us.DOM.getParents(r.container(),"*",i),o));return C.from(a[a.length-1])},Uv=function(t,e){if(!e)return e;var n=e.container(),o=e.offset();return t?ai(n)?Pn(n.nextSibling)?Tl(n.nextSibling,0):Tl.after(n):ci(e)?Tl(n,o+1):e:ai(n)?Pn(n.previousSibling)?Tl(n.previousSibling,n.previousSibling.data.length):Tl.before(n):ui(e)?Tl(n,o-1):e},$v=d(Uv,!0),Zv=d(Uv,!1),qv=function(t,e){return Ae(t,e)?bo(e,function(t){return Wo(t)||Go(t)},(n=t,function(t){return Ee(n,xe.fromDom(t.dom.parentNode))})):C.none();var n},Wv=function(t){var e,n,o;t.dom.isEmpty(t.getBody())&&(t.setContent(""),o=(n=(e=t).getBody()).firstChild&&e.dom.isBlock(n.firstChild)?n.firstChild:n,e.selection.setCursorLocation(o,0))},Vv=function(t,e){return{from:t,to:e}},Gv=function(t,e){var n=xe.fromDom(t),o=xe.fromDom(e.container());return qv(n,o).map(function(t){return{block:t,position:e}})},Kv=function(t){var e,n=(e=Ze(t),G(e,$o).fold(function(){return e},function(t){return e.slice(0,t)}));return U(n,sn),n},Xv=function(t,e){var n=_h(e,t);return V(n.reverse(),function(t){return Oi(t)}).each(sn)},Yv=function(t,e,n,o){if(Oi(n))return gh(n),mu(n.dom);0===Z(Ue(o),function(t){return!Oi(t)}).length&&Oi(e)&&tn(o,xe.fromTag("br"));var i=pu(n.dom,Tl.before(o.dom));return U(Kv(e),function(t){tn(o,t)}),Xv(t,e),i},Jv=function(t,e,n){if(Oi(n))return sn(n),Oi(e)&&gh(e),mu(e.dom);var o=gu(n.dom);return U(Kv(e),function(t){on(n,t)}),Xv(t,e),o},Qv=function(t,e){fu(t,e.dom).map(function(t){return t.getNode()}).map(xe.fromDom).filter(qo).each(sn)},ty=function(t,e,n){return Qv(!0,e),Qv(!1,n),function(t,e){return Ae(e,t)?(n=_h(t,e),C.from(n[n.length-1])):C.none();var n}(e,n).fold(d(Jv,t,e,n),d(Yv,t,e,n))},ey=function(t,e,n,o){return e?ty(t,o,n):ty(t,n,o)},ny=function(t,e){var n,o,i,r=xe.fromDom(t.getBody()),a=(n=r.dom,o=e,((i=t.selection.getRng()).collapsed?function(t,e,n){var o=Gv(t,Tl.fromRangeStart(n)),i=o.bind(function(n){return cu(e,t,n.position).bind(function(n){return Gv(t,n).map(function(n){return o=t,i=e,Ln((r=n).position.getNode())&&!1===Oi(r.block)?fu(!1,r.block.dom).bind(function(t){return t.isEqual(r.position)?cu(i,o,t).bind(function(t){return Gv(o,t)}):C.some(r)}).getOr(r):r;var o,i,r})})});return Ws(o,i,Vv).filter(function(t){return!1===Ee((o=t).from.block,o.to.block)&&Fe((n=t).from.block).bind(function(t){return Fe(n.to.block).filter(function(e){return Ee(t,e)})}).isSome()&&!1===In((e=t).from.block.dom)&&!1===In(e.to.block.dom);var e,n,o})}(n,o,i):C.none()).bind(function(t){return ey(r,e,t.from.block,t.to.block)}));return a.each(function(e){t.selection.setRng(e.toRange())}),a.isSome()},oy=function(t,e){var n=xe.fromDom(e),o=d(Ee,t);return _o(n,Xo,o).isSome()},iy=function(t){var e,n,o,i,r=xe.fromDom(t.getBody());return function(t,e){var n,o,i=pu(t.dom,Tl.fromRangeStart(e)).isNone(),r=hu(t.dom,Tl.fromRangeEnd(e)).isNone();return!(oy(n=t,(o=e).startContainer)||oy(n,o.endContainer))&&i&&r}(r,t.selection.getRng())?((i=t).setContent(""),i.selection.setCursorLocation(),!0):(e=r,n=t.selection,o=n.getRng(),Ws(qv(e,xe.fromDom(o.startContainer)),qv(e,xe.fromDom(o.endContainer)),function(t,i){return!1===Ee(t,i)&&(o.deleteContents(),ey(e,!0,t,i).each(function(t){n.setRng(t.toRange())}),!0)}).getOr(!1))},ry=function(t,e){return!t.selection.isCollapsed()&&iy(t)},ay=Bn,sy=In,ly=function(t,e,n,o,i){return C.from(e._selectionOverrides.showCaret(t,n,o,i))},cy=function(t,e){var n,o;return t.fire("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some(((o=(n=e).ownerDocument.createRange()).selectNode(n),o))},uy=function(t,e,n){var o=Hc(1,t.getBody(),e),i=Tl.fromRangeStart(o),r=i.getNode();if(xc(r))return ly(1,t,r,!i.isAtEnd(),!1);var a=i.getNode(!0);if(xc(a))return ly(1,t,a,!1,!1);var s=t.dom.getParent(i.getNode(),function(t){return sy(t)||ay(t)});return xc(s)?ly(1,t,s,!1,n):C.none()},dy=function(t,e,n){return e.collapsed?uy(t,e,n).getOr(e):e},fy=function(t){return ph(t)||uh(t)},hy=function(t){return mh(t)||dh(t)},py=function(t,e,n,o,i,r){var a,s;return ly(o,t,r.getNode(!i),i,!0).each(function(n){var o;e.collapsed?(o=e.cloneRange(),i?o.setEnd(n.startContainer,n.startOffset):o.setStart(n.endContainer,n.endOffset),o.deleteContents()):e.deleteContents(),t.selection.setRng(n)}),a=t.dom,Pn(s=n)&&0===s.data.length&&a.remove(s),!0},my=function(t,e){var n=t.selection.getRng();if(!Pn(n.commonAncestorContainer))return!1;var o=e?xl.Forwards:xl.Backwards,i=ru(t.getBody()),r=d(qc,e?i.next:i.prev),a=e?fy:hy,s=$c(o,t.getBody(),n),l=Uv(e,r(s));if(!l||!Wc(s,l))return!1;if(a(l))return py(t,n,s.getNode(),o,e,l);var c=r(l);return!!(c&&a(c)&&Wc(l,c))&&py(t,n,s.getNode(),o,e,c)},gy=fo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vy=function(t,e,n){return cu(e,t,n).bind(function(o){return c=o.getNode(),Xo(xe.fromDom(c))||Go(xe.fromDom(c))?C.none():(i=t,s=o,l=function(t){return Zo(xe.fromDom(t))&&!Bc(a,s,i)},Uc(!(r=e),a=n).fold(function(){return Uc(r,s).fold(v,l)},l)?C.none():e&&In(o.getNode())||!1===e&&In(o.getNode(!0))?function(t,e,n,o){var i=o.getNode(!1===e);return qv(xe.fromDom(t),xe.fromDom(n.getNode())).map(function(t){return Oi(t)?gy.remove(t.dom):gy.moveToElement(i)}).orThunk(function(){return C.some(gy.moveToElement(i))})}(t,e,n,o):e&&mh(n)||!1===e&&ph(n)?C.some(gy.moveToPosition(o)):C.none());var i,r,a,s,l,c})},yy=function(t,e){return C.from(xd(t.getBody(),e))},_y=function(t,e){var n=t.selection.getNode();return yy(t,n).filter(In).fold(function(){return n=t.getBody(),o=e,i=t.selection.getRng(),r=Hc(o?1:-1,n,i),a=Tl.fromRangeStart(r),s=xe.fromDom(n),(!1===o&&mh(a)?C.some(gy.remove(a.getNode(!0))):o&&ph(a)?C.some(gy.remove(a.getNode())):!1===o&&ph(a)&&Oh(s,a)?Dh(s,a).map(function(t){return gy.remove(t.getNode())}):o&&mh(a)&&Nh(s,a)?Lh(s,a).map(function(t){return gy.remove(t.getNode())}):function(t,e,n){return r=e,a=n.getNode(!1===r),s=r?"after":"before",wn(a)&&a.getAttribute("data-mce-caret")===s?(o=e,i=n.getNode(!1===e),(o&&In(i.nextSibling)?C.some(gy.moveToElement(i.nextSibling)):!1===o&&In(i.previousSibling)?C.some(gy.moveToElement(i.previousSibling)):C.none()).fold(function(){return vy(t,e,n)},C.some)):vy(t,e,n).bind(function(e){return o=t,i=n,e.fold(function(t){return C.some(gy.remove(t))},function(t){return C.some(gy.moveToElement(t))},function(t){return Bc(i,t,o)?C.none():C.some(gy.moveToPosition(t))});var o,i});var o,i,r,a,s}(n,o,a)).exists(function(n){return n.fold(function(t){return a._selectionOverrides.hideFakeCaret(),op(a,s,xe.fromDom(t)),!0},(r=s=e,function(t){var e=r?Tl.before(t):Tl.after(t);return i.selection.setRng(e.toRange()),!0}),(o=i=a=t,function(t){return o.selection.setRng(t.toRange()),!0}));var o,i,r,a,s});var n,o,i,r,a,s},y)},by=function(t){var e,n=t.dom,o=t.selection,i=xd(t.getBody(),o.getNode());return Bn(i)&&n.isBlock(i)&&n.isEmpty(i)&&(e=n.create("br",{"data-mce-bogus":"1"}),n.setHTML(i,""),i.appendChild(e),o.setRng(Tl.before(e).toRange())),!0},wy=function(t,e){return(t.selection.isCollapsed()?_y:function(t,e){var n=t.selection.getNode();return!!In(n)&&yy(t,n.parentNode).filter(In).fold(function(){var n;return n=xe.fromDom(t.getBody()),U(Ds(n,".mce-offscreen-selection"),sn),op(t,e,xe.fromDom(t.selection.getNode())),Wv(t),!0},function(){return!0})})(t,e)},Cy=function(t,e){return!!t.selection.isCollapsed()&&(n=t,o=e,i=Tl.fromRangeStart(n.selection.getRng()),cu(o,n.getBody(),i).filter(function(t){return(o?lh:ch)(t)}).bind(function(t){return C.from(Ic(o?0:-1,t))}).exists(function(t){return n.selection.select(t),!0}));var n,o,i},xy=Pn,Sy=function(t){return xy(t)&&t.data[0]===ti},Ty=function(t){return xy(t)&&t.data[t.data.length-1]===ti},ky=function(t){return t.ownerDocument.createTextNode(ti)},Ey=function(t,e){return(t?function(t){if(xy(t.previousSibling))return Ty(t.previousSibling)||t.previousSibling.appendData(ti),t.previousSibling;if(xy(t))return Sy(t)||t.insertData(0,ti),t;var e=ky(t);return t.parentNode.insertBefore(e,t),e}:function(t){if(xy(t.nextSibling))return Sy(t.nextSibling)||t.nextSibling.insertData(0,ti),t.nextSibling;if(xy(t))return Ty(t)||t.appendData(ti),t;var e=ky(t);return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e})(e)},Ay=d(Ey,!0),Py=d(Ey,!1),Ny=function(t,e){return Pn(t.container())?Ey(e,t.container()):Ey(e,t.getNode())},Oy=function(t,e){var n=e.get();return n&&t.container()===n&&ai(n)},Dy=function(t,e){return e.fold(function(e){mc(t.get());var n=Ay(e);return t.set(n),C.some(Tl(n,n.length-1))},function(e){return mu(e).map(function(e){if(Oy(e,t))return Tl(t.get(),1);mc(t.get());var n=Ny(e,!0);return t.set(n),Tl(n,1)})},function(e){return gu(e).map(function(e){if(Oy(e,t))return Tl(t.get(),t.get().length-1);mc(t.get());var n=Ny(e,!1);return t.set(n),Tl(n,n.length-1)})},function(e){mc(t.get());var n=Py(e);return t.set(n),C.some(Tl(n,1))})},Ly=function(t,e){for(var n=0;n<t.length;n++){var o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},Ry=fo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),By=function(t,e){return Rc(e,t)||t},Iy=function(t,e,n){var o=$v(n),i=By(e,o.container());return Hv(t,i,o).fold(function(){return hu(i,o).bind(d(Hv,t,i)).map(function(t){return Ry.before(t)})},C.none)},My=function(t,e){return null===_u(t,e)},zy=function(t,e,n){return Hv(t,e,n).filter(d(My,e))},Fy=function(t,e,n){var o=Zv(n);return zy(t,e,o).bind(function(t){return pu(t,o).isNone()?C.some(Ry.start(t)):C.none()})},jy=function(t,e,n){var o=$v(n);return zy(t,e,o).bind(function(t){return hu(t,o).isNone()?C.some(Ry.end(t)):C.none()})},Hy=function(t,e,n){var o=Zv(n),i=By(e,o.container());return Hv(t,i,o).fold(function(){return pu(i,o).bind(d(Hv,t,i)).map(function(t){return Ry.after(t)})},C.none)},Uy=function(t){return!1===function(t){return"rtl"===us.DOM.getStyle(t,"direction",!0)||(e=t.textContent,Fv.test(e));var e}(Zy(t))},$y=function(t,e,n){return Ly([Iy,Fy,jy,Hy],[t,e,n]).filter(Uy)},Zy=function(t){return t.fold(u,u,u,u)},qy=function(t){return t.fold(c("before"),c("start"),c("end"),c("after"))},Wy=function(t){return t.fold(Ry.before,Ry.before,Ry.after,Ry.after)},Vy=function(t){return t.fold(Ry.start,Ry.start,Ry.end,Ry.end)},Gy=function(t,e,n,o,i,r){return Ws(Hv(e,n,o),Hv(e,n,i),function(e,o){return e!==o&&(a=o,s=Rc(e,i=n),l=Rc(a,i),s&&s===l)?Ry.after(t?e:o):r;var i,a,s,l}).getOr(r)},Ky=function(t,e){return t.fold(y,function(t){return o=e,!(qy(n=t)===qy(o)&&Zy(n)===Zy(o));var n,o})},Xy=function(t,e){return t?e.fold(l(C.some,Ry.start),C.none,l(C.some,Ry.after),C.none):e.fold(C.none,l(C.some,Ry.before),C.none,l(C.some,Ry.end))},Yy=function(t,e,n,o){var i=Uv(t,o),r=$y(e,n,i);return $y(e,n,i).bind(d(Xy,t)).orThunk(function(){return a=e,s=n,l=r,c=Uv(i=t,o),cu(i,s,c).map(d(Uv,i)).fold(function(){return l.map(Wy)},function(t){return $y(a,s,t).map(d(Gy,i,a,s,c,t)).filter(d(Ky,l))}).filter(Uy);var i,a,s,l,c})},Jy=(d(Yy,!1),d(Yy,!0),function(t,e,n){var o=t?1:-1;return e.setRng(Tl(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0}),Qy=function(t,e){var n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},t_=function(t,e){t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},e_=function(t,e,n){return Dy(e,n).map(function(e){return Qy(t,e),n})},n_=function(t,e,n){return!!ac(t)&&(i=e,r=n,a=(o=t).getBody(),s=Tl.fromRangeStart(o.selection.getRng()),l=d(jv,o),Yy(r,l,a,s).bind(function(t){return e_(o,i,t)}).isSome());var o,i,r,a,s,l},o_=function(t,e,n){return!!ac(e)&&function(t,e){var n=e.selection.getRng(),o=t?Tl.fromRangeEnd(n):Tl.fromRangeStart(n);return!!L(e.selection.getSel().modify)&&(t&&ci(o)?Jy(!0,e.selection,o):!(t||!ui(o))&&Jy(!1,e.selection,o))}(t,e)},i_=function(t){var e=vs(null),n=d(jv,t);return t.on("NodeChange",function(o){var i,r,a,s,l,c,u,f,h,p,m;!ac(t)||ge.browser.isIE()&&o.initial||(c=n,u=t.dom,f=o.parents,h=H(Ds(xe.fromDom(u.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(t){return t.dom}),p=Z(h,c),m=Z(f,c),U(J(p,m),d(t_,!1)),U(J(m,p),d(t_,!0)),function(t,e){var n,o;t.selection.isCollapsed()&&!0!==t.composing&&e.get()&&(n=Tl.fromRangeStart(t.selection.getRng()),Tl.isTextPosition(n)&&!1===(ci(o=n)||ui(o))&&(Qy(t,pc(e.get(),n)),e.set(null)))}(t,e),i=n,r=t,a=e,s=o.parents,r.selection.isCollapsed()&&(l=Z(s,i),U(l,function(t){var e=Tl.fromRangeStart(r.selection.getRng());$y(i,r.getBody(),e).bind(function(t){return e_(r,a,t)})})))}),e},r_=d(o_,!0),a_=d(o_,!1),s_=function(t,e){return function(n){return Dy(e,n).exists(function(e){return Qy(t,e),!0})}},l_=function(t,e,n,o){var i=t.getBody(),r=d(jv,t);t.undoManager.ignore(function(){var a,s,l;t.selection.setRng((a=n,s=o,(l=document.createRange()).setStart(a.container(),a.offset()),l.setEnd(s.container(),s.offset()),l)),t.execCommand("Delete"),$y(r,i,Tl.fromRangeStart(t.selection.getRng())).map(Vy).map(s_(t,e))}),t.nodeChanged()},c_=function(t,e,n){if(t.selection.isCollapsed()&&ac(t)){var o=Tl.fromRangeStart(t.selection.getRng());return function(t,e,n,o){var i,r,a=(i=t.getBody(),r=o.container(),Rc(r,i)||i),s=d(jv,t),l=$y(s,a,o);return l.bind(function(t){return n?t.fold(c(C.some(Vy(t))),C.none,c(C.some(Wy(t))),C.none):t.fold(C.none,c(C.some(Wy(t))),C.none,c(C.some(Vy(t))))}).map(s_(t,e)).getOrThunk(function(){var i=uu(n,a,o),r=i.bind(function(t){return $y(s,a,t)});return Ws(l,r,function(){return Hv(s,a,o).exists(function(e){return!!Ws(mu(o=e),gu(o),function(t,e){var n=Uv(!0,t),i=Uv(!1,e);return hu(o,n).forall(function(t){return t.isEqual(i)})}).getOr(!0)&&(op(t,n,xe.fromDom(e)),!0);var o})}).orThunk(function(){return r.bind(function(r){return i.map(function(i){return n?l_(t,e,o,i):l_(t,e,i,o),!0})})}).getOr(!1)})}(t,e,n,o)}return!1},u_=function(t){return 1===Ze(t).length},d_=function(t,e){var n,o=xe.fromDom(t.getBody()),i=xe.fromDom(t.selection.getStart()),r=Z((n=_h(i,o),G(n,$o).fold(c(n),function(t){return n.slice(0,t)})),u_);return tt(r).exists(function(n){var o,i,a,s,l=Tl.fromRangeStart(t.selection.getRng());return i=e,a=l,s=n.dom,!(!Ws(mu(s),gu(s),function(t,e){var n=Uv(!0,t),o=Uv(!1,e),r=Uv(!1,a);return i?hu(s,r).exists(function(t){return t.isEqual(o)&&a.isEqual(n)}):pu(s,r).exists(function(t){return t.isEqual(n)&&a.isEqual(o)})}).getOr(!0)||yu((o=n).dom)&&Xp(o.dom)||(function(t,e,n,o){var i,r,a,s,l,c=d(im,e),u=H(Z(o,c),function(t){return t.dom});0===u.length?op(e,t,n):(r=n.dom,a=u,s=Jp(!1),l=nm(a,s.dom),tn(xe.fromDom(r),s),sn(xe.fromDom(r)),i=Tl(l,0),e.selection.setRng(i.toRange()))}(e,t,n,r),0))})},f_=function(t,e){return!!t.selection.isCollapsed()&&d_(t,e)},h_=function(t,e,n){return t._selectionOverrides.hideFakeCaret(),op(t,e,xe.fromDom(n)),!0},p_=function(t,e){return t.selection.isCollapsed()?(r=t,s=(a=e)?uh:dh,l=a?xl.Forwards:xl.Backwards,c=$c(l,r.getBody(),r.selection.getRng()),s(c)?h_(r,a,c.getNode(!a)):C.from(Uv(a,c)).filter(function(t){return s(t)&&Wc(c,t)}).exists(function(t){return h_(r,a,t.getNode(!a))})):(o=e,i=(n=t).selection.getNode(),!!zn(i)&&h_(n,o,i));var n,o,i,r,a,s,l,c},m_=function(t){var e=parseInt(t,10);return isNaN(e)?0:e},g_=function(t,e){return(t||"table"===Pe(e)?"margin":"padding")+("rtl"===qn(e,"direction")?"-right":"-left")},v_=function(t){var e,n=__(t);return!t.mode.isReadOnly()&&(1<n.length||(e=t,X(n,function(t){var n=g_(nc(e),t),o=Vn(t,n).map(m_).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&0<o})))},y_=function(t){return Vo(t)||Go(t)},__=function(t){return Z(H(t.selection.getSelectedBlocks(),xe.fromDom),function(t){return!y_(t)&&!Fe(t).map(y_).getOr(!1)&&bo(t,function(t){return Bn(t.dom)||In(t.dom)}).exists(function(t){return Bn(t.dom)})})},b_=function(t,e){var n=t.dom,o=t.selection,i=t.formatter,r=t.getParam("indentation","40px","string"),a=/[a-z%]+$/i.exec(r)[0],s=parseInt(r,10),l=nc(t),c=Xl(t);t.queryCommandState("InsertUnorderedList")||t.queryCommandState("InsertOrderedList")||""!==c||n.getParent(o.getNode(),n.isBlock)||i.apply("div"),U(__(t),function(t){var o,i,r,c,u,d,f,h;o=n,i=e,r=l,c=s,u=a,d=t.dom,h=g_(r,xe.fromDom(d)),"outdent"===i?(f=Math.max(0,m_(d.style[h])-c),o.setStyle(d,h,f?f+u:"")):(f=m_(d.style[h])+c+u,o.setStyle(d,h,f))})},w_=function(t,e){if(t.selection.isCollapsed()&&v_(t)){var n=t.dom,o=t.selection.getRng(),i=Tl.fromRangeStart(o),r=n.getParent(o.startContainer,n.isBlock);if(null!==r&&Sh(xe.fromDom(r),i))return b_(t,"outdent"),!0}return!1},C_=function(t,e){t.getDoc().execCommand(e,!1,null)},x_=function(t){return void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0])},S_=function(t,e){return t.hasOwnProperty(e.nodeName)},T_=function(t){var e,n,o,i=t.dom,r=t.selection,a=t.schema,s=a.getBlockElements(),l=r.getStart(),c=t.getBody(),u=Xl(t);if(l&&wn(l)&&u){var d=c.nodeName.toLowerCase();if(a.isValidChild(d,u.toLowerCase())&&(f=s,h=c,p=l,!j(yh(xe.fromDom(p),xe.fromDom(h)),function(t){return S_(f,t.dom)}))){var f,h,p,m,g,v=r.getRng(),y=v.startContainer,_=v.startOffset,b=v.endContainer,w=v.endOffset,C=Of(t);for(l=c.firstChild;l;)if(m=s,Pn(g=l)||wn(g)&&!S_(m,g)&&!Eu(g)){if(function(t,e){if(Pn(e)){if(0===e.nodeValue.length)return!0;if(/^\s+$/.test(e.nodeValue)&&(!e.nextSibling||S_(t,e.nextSibling)))return!0}return!1}(s,l)){l=(n=l).nextSibling,i.remove(n);continue}e||(e=i.create(u,Yl(t)),l.parentNode.insertBefore(e,l),o=!0),l=(n=l).nextSibling,e.appendChild(n)}else e=null,l=l.nextSibling;o&&C&&(v.setStart(y,_),v.setEnd(b,w),r.setRng(v),t.nodeChanged())}}},k_=function(t,e){var n;e.hasAttribute("data-mce-caret")&&(hi(e),(n=t).selection.setRng(n.selection.getRng()),t.selection.scrollIntoView(e))},E_=function(t,e){var n,o=(n=t,Co(xe.fromDom(n.getBody()),"*[data-mce-caret]").fold(c(null),function(t){return t.dom}));if(o)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void k_(t,o)):void(li(o)&&(k_(t,o),t.undoManager.add()))};(Ev=kv=kv||{})[Ev.Br=0]="Br",Ev[Ev.Block=1]="Block",Ev[Ev.Wrap=2]="Wrap",Ev[Ev.Eol=3]="Eol";var A_,P_,N_=function(t,e){return t===xl.Backwards?Y(e):e},O_=function(t,e,n,o){for(var i,r,a,s,l,c,u=ru(n),d=o,f=[];d&&(l=u,c=d,i=e===xl.Forwards?l.next(c):l.prev(c));){if(Ln(i.getNode(!1)))return e===xl.Forwards?{positions:N_(e,f).concat([i]),breakType:kv.Br,breakAt:C.some(i)}:{positions:N_(e,f),breakType:kv.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(d,i)){var h=(r=e,a=d,Ln((s=i).getNode(r===xl.Forwards))?kv.Br:!1===Bc(a,s)?kv.Block:kv.Wrap);return{positions:N_(e,f),breakType:h,breakAt:C.some(i)}}f.push(i),d=i}else d=i}return{positions:N_(e,f),breakType:kv.Eol,breakAt:C.none()}},D_=function(t,e,n,o){return e(n,o).breakAt.map(function(o){var i=e(n,o).positions;return t===xl.Backwards?i.concat(o):[o].concat(i)}).getOr([])},L_=function(t,e){return W(t,function(t,n){return t.fold(function(){return C.some(n)},function(o){return Ws(Q(o.getClientRects()),Q(n.getClientRects()),function(t,i){var r=Math.abs(e-t.left);return Math.abs(e-i.left)<=r?n:o}).or(t)})},C.none())},R_=function(t,e){return Q(e.getClientRects()).bind(function(e){return L_(t,e.left)})},B_=d(O_,Cl.isAbove,-1),I_=d(O_,Cl.isBelow,1),M_=d(D_,-1,B_),z_=d(D_,1,I_),F_=function(t){var e=function(e){return H(e,function(e){return(e=Gs(e)).node=t,e})};if(wn(t))return e(t.getClientRects());if(Pn(t)){var n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}},j_=function(t){return K(t,F_)};(P_=A_=A_||{})[P_.Up=-1]="Up",P_[P_.Down=1]="Down";var H_=function(t,e,n,o,i,r){var a=0,s=[],l=function(o){var r,l,u=j_([o]);for(-1===t&&(u=u.reverse()),r=0;r<u.length;r++)if(l=u[r],!n(l,c)){if(0<s.length&&e(l,bt(s))&&a++,l.line=a,i(l))return!0;s.push(l)}},c=bt(r.getClientRects());if(!c)return s;var u=r.getNode();return l(u),function(t,e,n,o){for(;o=Lc(o,t,Si,e);)if(n(o))return}(t,o,l,u),s},U_=d(H_,A_.Up,Ys,Js),$_=d(H_,A_.Down,Js,Ys),Z_=function(t){return function(e){return n=t,e.line>n;var n}},q_=function(t){return function(e){return n=t,e.line===n;var n}},W_=In,V_=Lc,G_=function(t,e){return Math.abs(t.left-e)},K_=function(t,e){return Math.abs(t.right-e)},X_=function(t,e){return t>=e.left&&t<=e.right},Y_=function(t,e){return t>=e.top&&t<=e.bottom},J_=function(t,e){return yt(t,function(t,n){var o=Math.min(G_(t,e),K_(t,e)),i=Math.min(G_(n,e),K_(n,e));return X_(e,n)||!X_(e,t)&&(i===o&&W_(n.node)||i<o)?n:t})},Q_=function(t,e,n,o,i){var r=V_(o,t,Si,e,!i);do{if(!r||n(r))return}while(r=V_(r,t,Si,e))},tb=function(t,e){t.selection.setRng(e),sf(t,t.selection.getRng())},eb=function(t,e,n){return C.some(dy(t,e,n))},nb=function(t,e,n,o,i,r){var a=e===xl.Forwards,s=ru(t.getBody()),l=d(qc,a?s.next:s.prev),c=a?o:i;if(!n.collapsed){var u=tl(n);if(r(u))return ly(e,t,u,e===xl.Backwards,!1)}var f=$c(e,t.getBody(),n);if(c(f))return cy(t,f.getNode(!a));var h=Uv(a,l(f)),p=ri(n.startContainer);if(!h)return p?C.some(n):C.none();if(c(h))return ly(e,t,h.getNode(!a),a,!1);var m=l(h);return m&&c(m)&&Wc(h,m)?ly(e,t,m.getNode(!a),a,!1):p?eb(t,h.toRange(),!1):C.none()},ob=function(t,e,n,o,i,r){var a=$c(e,t.getBody(),n),s=bt(a.getClientRects()),l=e===A_.Down;if(!s)return C.none();var c,u=(l?$_:U_)(t.getBody(),Z_(1),a),d=Z(u,q_(1)),f=s.left,h=J_(d,f);if(h&&r(h.node)){var p=Math.abs(f-h.left),m=Math.abs(f-h.right);return ly(e,t,h.node,p<m,!1)}if(c=o(a)?a.getNode():i(a)?a.getNode(!0):tl(n)){var g=function(t,e,n,o){var i,r,a,s,l=ru(e),c=[],u=0,d=function(t){return bt(t.getClientRects())},f=1===t?(i=l.next,r=Js,a=Ys,Tl.after(o)):(i=l.prev,r=Ys,a=Js,Tl.before(o)),h=d(f);do{if(f.isVisible()&&!a(s=d(f),h)){if(0<c.length&&r(s,bt(c))&&u++,(s=Gs(s)).position=f,s.line=u,n(s))return c;c.push(s)}}while(f=i(f));return c}(e,t.getBody(),Z_(1),c),v=J_(Z(g,q_(1)),f);if(v)return eb(t,v.position.toRange(),!1);if(v=bt(Z(g,q_(0))))return eb(t,v.position.toRange(),!1)}return 0===d.length?ib(t,l).filter(l?i:o).map(function(e){return dy(t,e.toRange(),!1)}):C.none()},ib=function(t,e){var n=t.selection.getRng(),o=t.getBody();if(e){var i=Tl.fromRangeEnd(n),r=I_(o,i);return tt(r.positions)}return i=Tl.fromRangeStart(n),r=B_(o,i),Q(r.positions)},rb=function(t,e,n){return ib(t,e).filter(n).exists(function(e){return t.selection.setRng(e.toRange()),!0})},ab=In,sb=function(t,e,n){var o,i,r=ru(t.getBody()),a=d(qc,1===e?r.next:r.prev);if(n.collapsed&&""!==Xl(t)){var s,l=t.dom.getParent(n.startContainer,"PRE");if(!l)return;a(Tl.fromRangeStart(n))||(i=(o=t).dom.create(Xl(o)),(!ge.ie||11<=ge.ie)&&(i.innerHTML='<br data-mce-bogus="1">'),s=i,1===e?t.$(l).after(s):t.$(l).before(s),t.selection.select(s,!0),t.selection.collapse())}},lb=function(t,e){return function(t,e){var n=e?xl.Forwards:xl.Backwards,o=t.selection.getRng();return nb(t,n,o,ph,mh,ab).orThunk(function(){return sb(t,n,o),C.none()})}(t,e).exists(function(e){return tb(t,e),!0})},cb=function(t,e){return function(t,e){var n=e?1:-1,o=t.selection.getRng();return ob(t,n,o,function(t){return ph(t)||fh(t)},function(t){return mh(t)||hh(t)},ab).orThunk(function(){return sb(t,n,o),C.none()})}(t,e).exists(function(e){return tb(t,e),!0})},ub=function(t,e){return rb(t,e,e?mh:ph)},db=function(t){return F(["figcaption"],Pe(t))},fb=function(t){var e=document.createRange();return e.setStartBefore(t.dom),e.setEndBefore(t.dom),e},hb=function(t,e,n){(n?on:nn)(t,e)},pb=function(t,e){var n,o,i=xe.fromDom(t.getBody()),r=Tl.fromRangeStart(t.selection.getRng()),a=Xl(t),s=Yl(t);return n=r,o=d(Ee,i),bo(xe.fromDom(n.container()),$o,o).filter(db).exists(function(){if(function(t,e,n){return e?(i=t.dom,I_(i,n).breakAt.isNone()):(o=t.dom,B_(o,n).breakAt.isNone());var o,i}(i,e,r)){var n=function(t,e,n,o){return""===e?(u=t,d=o,f=xe.fromTag("br"),hb(u,f,d),fb(f)):(i=t,r=o,a=e,s=n,l=xe.fromTag(a),c=xe.fromTag("br"),Un(l,s),on(l,c),hb(i,l,r),fb(c));var i,r,a,s,l,c,u,d,f}(i,a,s,e);return t.selection.setRng(n),!0}return!1})},mb=function(t,e){return!!t.selection.isCollapsed()&&pb(t,e)},gb=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(null,e)}},vb=function(t,e){return V(function(t,e){return K(H(t,function(t){return wt({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:s},t)}),function(t){return n=t,(o=e).keyCode===n.keyCode&&o.shiftKey===n.shiftKey&&o.altKey===n.altKey&&o.ctrlKey===n.ctrlKey&&o.metaKey===n.metaKey?[t]:[];var n,o})}(t,e),function(t){return t.action()})},yb=function(t,e){var n=e?xl.Forwards:xl.Backwards,o=t.selection.getRng();return nb(t,n,o,uh,dh,zn).exists(function(e){return tb(t,e),!0})},_b=function(t,e){var n=e?1:-1,o=t.selection.getRng();return ob(t,n,o,uh,dh,zn).exists(function(e){return tb(t,e),!0})},bb=function(t,e){return rb(t,e,e?dh:uh)},wb=function(t,e,n,o,i){var r,a,s=Ds(xe.fromDom(n),"td,th,caption").map(function(t){return t.dom}),l=Z(function(t,e){return K(e,function(e){var n,o,i=(o=-1,{left:(n=Gs(e.getBoundingClientRect())).left-o,top:n.top-o,right:n.right+-2,bottom:n.bottom+-2,width:n.width+o,height:n.height+o});return[{x:i.left,y:t(i),cell:e},{x:i.right,y:t(i),cell:e}]})}(t,s),function(t){return e(t,i)});return r=o,a=i,W(l,function(t,e){return t.fold(function(){return C.some(e)},function(t){var n=Math.sqrt(Math.abs(t.x-r)+Math.abs(t.y-a)),o=Math.sqrt(Math.abs(e.x-r)+Math.abs(e.y-a));return C.some(o<n?e:t)})},C.none()).map(function(t){return t.cell})},Cb=d(wb,function(t){return t.bottom},function(t,e){return t.y<e}),xb=d(wb,function(t){return t.top},function(t,e){return t.y>e}),Sb=function(t,e,n){var o,i,r,a,s=t(e,n);return(a=s).breakType===kv.Wrap&&0===a.positions.length||!Ln(n.getNode())&&(r=s).breakType===kv.Br&&1===r.positions.length?(o=t,i=e,!s.breakAt.exists(function(t){return o(i,t).breakAt.isSome()})):s.breakAt.isNone()},Tb=d(Sb,B_),kb=d(Sb,I_),Eb=function(t,e,n,o){var i,r,a,s,l=t.selection.getRng(),c=e?1:-1;return!(!Cc()||(i=e,r=l,a=n,s=Tl.fromRangeStart(r),!fu(!i,a).exists(function(t){return t.isEqual(s)}))||(ly(c,t,n,!e,!1).each(function(e){tb(t,e)}),0))},Ab=function(t,e,n){var o=function(t,e){var n=e.getNode(t);return wn(n)&&"TABLE"===n.nodeName?C.some(n):C.none()}(!!e,n),i=!1===e;o.fold(function(){return tb(t,n.toRange())},function(o){return fu(i,t.getBody()).filter(function(t){return t.isEqual(n)}).fold(function(){return tb(t,n.toRange())},function(i){return r=e,s=o,l=n,void((c=Xl(a=t))?a.undoManager.transact(function(){var t=xe.fromTag(c);Un(t,Yl(a)),on(t,xe.fromTag("br")),(r?en:tn)(xe.fromDom(s),t);var e=a.dom.createRng();e.setStart(t.dom,0),e.setEnd(t.dom,0),tb(a,e)}):tb(a,l.toRange()));var r,a,s,l,c})})},Pb=function(t,e,n,o){var i,r,a,s,l,c,u=t.selection.getRng(),d=Tl.fromRangeStart(u),f=t.getBody();if(!e&&Tb(o,d)){var h=(s=f,function(t,e){return Q(e.getClientRects()).bind(function(e){return Cb(t,e.left,e.top)}).bind(function(t){return R_(gu(n=t).map(function(t){return B_(n,t).positions.concat(t)}).getOr([]),e);var n})}(l=n,c=d).orThunk(function(){return Q(c.getClientRects()).bind(function(t){return L_(M_(s,Tl.before(l)),t.left)})}).getOr(Tl.before(l)));return Ab(t,e,h),!0}return!(!e||!kb(o,d))&&(i=f,h=function(t,e){return tt(e.getClientRects()).bind(function(e){return xb(t,e.left,e.top)}).bind(function(t){return R_(mu(n=t).map(function(t){return[t].concat(I_(n,t).positions)}).getOr([]),e);var n})}(r=n,a=d).orThunk(function(){return Q(a.getClientRects()).bind(function(t){return L_(z_(i,Tl.after(r)),t.left)})}).getOr(Tl.after(r)),Ab(t,e,h),!0)},Nb=function(t,e,n){return C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(function(o){return C.from(t.dom.getParent(o,"table")).map(function(i){return n(t,e,i,o)})}).getOr(!1)},Ob=function(t,e){return Nb(t,e,Eb)},Db=function(t,e){return Nb(t,e,Pb)},Lb=function(t,e){var n,o,i=e,r=t.dom,a=t.schema.getMoveCaretBeforeOnEnterElements();if(e){!/^(LI|DT|DD)$/.test(e.nodeName)||(o=function(t){for(;t;){if(1===t.nodeType||3===t.nodeType&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}}(e.firstChild))&&/^(UL|OL|DL)$/.test(o.nodeName)&&e.insertBefore(r.doc.createTextNode(Qo),e.firstChild);var s=r.createRng();if(e.normalize(),e.hasChildNodes()){for(var l=new Fo(e,e);n=l.current();){if(Pn(n)){s.setStart(n,0),s.setEnd(n,0);break}if(a[n.nodeName.toLowerCase()]){s.setStartBefore(n),s.setEndBefore(n);break}i=n,n=l.next()}n||(s.setStart(i,0),s.setEnd(i,0))}else Ln(e)?e.nextSibling&&r.isBlock(e.nextSibling)?(s.setStartBefore(e),s.setEndBefore(e)):(s.setStartAfter(e),s.setEndAfter(e)):(s.setStart(e,0),s.setEnd(e,0));t.selection.setRng(s),sf(t,s)}},Rb=function(t){return C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock))},Bb=function(t,e){return t&&t.parentNode&&t.parentNode.nodeName===e},Ib=function(t){return t&&/^(OL|UL|LI)$/.test(t.nodeName)},Mb=function(t){var e=t.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:t},zb=function(t,e,n){for(var o=t[n?"firstChild":"lastChild"];o&&!wn(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},Fb=function(t){t.innerHTML='<br data-mce-bogus="1">'},jb=function(t,e){return t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e},Hb=function(t,e){return e&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==t.getContentEditable(e)},Ub=function(t,e,n){return!1===Pn(e)?n:t?1===n&&e.data.charAt(n-1)===ti?0:n:n===e.data.length-1&&e.data.charAt(n)===ti?e.data.length:n},$b=function(t,e){for(var n,o=t.getRoot(),i=e;i!==o&&"false"!==t.getContentEditable(i);)"true"===t.getContentEditable(i)&&(n=i),i=i.parentNode;return i!==o?n:o},Zb=function(t,e){var n=Xl(t);n&&n.toLowerCase()===e.tagName.toLowerCase()&&function(t,e,n){var o=t.dom;C.from(n.style).map(o.parseStyle).each(function(t){var n=Gn(xe.fromDom(e)),i=wt(wt({},n),t);o.setStyles(e,i)});var i=C.from(n.class).map(function(t){return t.split(/\s+/)}),r=C.from(e.className).map(function(t){return Z(t.split(/\s+/),function(t){return""!==t})});Ws(i,r,function(t,n){var i=Z(n,function(e){return!F(t,e)}),r=Ct(t,i);o.setAttrib(e,"class",r.join(" "))});var a=["style","class"],s=ut(n,function(t,e){return!F(a,e)});o.setAttribs(e,s)}(t,e,Yl(t))},qb=function(t,e){var n,o,i,r,a,s,l,c,u,d=t.dom,f=t.schema,h=f.getNonEmptyElements(),p=t.selection.getRng(),m=function(e){var n,i=o,a=f.getTextInlineElements(),s=e||"TABLE"===c||"HR"===c?d.create(e||S):r.cloneNode(!1),l=s;if(!1===t.getParam("keep_styles",!0))d.setAttrib(s,"style",null),d.setAttrib(s,"class",null);else do{if(a[i.nodeName]){if(yu(i)||Eu(i))continue;n=i.cloneNode(!1),d.setAttrib(n,"id",""),s.hasChildNodes()?n.appendChild(s.firstChild):l=n,s.appendChild(n)}}while((i=i.parentNode)&&i!==T);return Zb(t,s),Fb(l),s},g=function(t){var e,n,a=Ub(t,o,i);if(Pn(o)&&(t?0<a:a<o.nodeValue.length))return!1;if(o.parentNode===r&&u&&!t)return!0;if(t&&wn(o)&&o===r.firstChild)return!0;if(jb(o,"TABLE")||jb(o,"HR"))return u&&!t||!u&&t;var s=new Fo(o,r);for(Pn(o)&&(t&&0===a?s.prev():t||a!==o.nodeValue.length||s.next());e=s.current();){if(wn(e)){if(!e.getAttribute("data-mce-bogus")&&(n=e.nodeName.toLowerCase(),h[n]&&"br"!==n))return!1}else if(Pn(e)&&!ki(e.nodeValue))return!1;t?s.prev():s.next()}return!0},v=function(){a=/^(H[1-6]|PRE|FIGURE)$/.test(c)&&"HGROUP"!==b?m(S):m(),t.getParam("end_container_on_empty_block",!1)&&Hb(d,l)&&d.isEmpty(r)?a=d.split(l,r):d.insertAfter(a,r),Lb(t,a)};Id(d,p).each(function(t){p.setStart(t.startContainer,t.startOffset),p.setEnd(t.endContainer,t.endOffset)}),o=p.startContainer,i=p.startOffset,S=Xl(t);var y=!(!e||!e.shiftKey),_=!(!e||!e.ctrlKey);wn(o)&&o.hasChildNodes()&&(u=i>o.childNodes.length-1,o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o,i=u&&Pn(o)?o.nodeValue.length:0);var b,w,C,x,S,T=$b(d,o);T&&((S&&!y||!S&&y)&&(o=function(t,e,n,o,i){var r,a,s,l,c,u,d=S||"P",f=t.dom,h=$b(f,o),p=f.getParent(o,f.isBlock);if(!p||!Hb(f,p)){if(c=(p=p||h)===t.getBody()||(u=p)&&/^(TD|TH|CAPTION)$/.test(u.nodeName)?p.nodeName.toLowerCase():p.parentNode.nodeName.toLowerCase(),!p.hasChildNodes())return r=f.create(d),Zb(t,r),p.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r;for(s=o;s.parentNode!==p;)s=s.parentNode;for(;s&&!f.isBlock(s);)s=(a=s).previousSibling;if(a&&t.schema.isValidChild(c,d.toLowerCase())){for(r=f.create(d),Zb(t,r),a.parentNode.insertBefore(r,a),s=a;s&&!f.isBlock(s);)l=s.nextSibling,r.appendChild(s),s=l;n.setStart(o,i),n.setEnd(o,i)}}return o}(t,0,p,o,i)),r=d.getParent(o,d.isBlock),l=r?d.getParent(r.parentNode,d.isBlock):null,c=r?r.nodeName.toUpperCase():"","LI"!==(b=l?l.nodeName.toUpperCase():"")||_||(l=(r=l).parentNode,c=b),/^(LI|DT|DD)$/.test(c)&&d.isEmpty(r)?function(t,e,n,o,i){var r,a,s,l,c,u=t.dom,d=t.selection.getRng();n!==t.getBody()&&(Ib(r=n)&&Ib(r.parentNode)&&(i="LI"),a=i?e(i):u.create("BR"),zb(n,o,!0)&&zb(n,o,!1)?Bb(n,"LI")?u.insertAfter(a,Mb(n)):u.replace(a,n):zb(n,o,!0)?Bb(n,"LI")?(u.insertAfter(a,Mb(n)),a.appendChild(u.doc.createTextNode(" ")),a.appendChild(n)):n.parentNode.insertBefore(a,n):zb(n,o,!1)?u.insertAfter(a,Mb(n)):(n=Mb(n),(s=d.cloneRange()).setStartAfter(o),s.setEndAfter(n),l=s.extractContents(),"LI"===i&&(c=l).firstChild&&"LI"===c.firstChild.nodeName?(a=l.firstChild,u.insertAfter(l,n)):(u.insertAfter(l,n),u.insertAfter(a,n))),u.remove(o),Lb(t,a))}(t,m,l,r,S):S&&r===t.getBody()||(S=S||"P",ri(r)?(a=hi(r),d.isEmpty(r)&&Fb(r),Zb(t,a),Lb(t,a)):g()?v():g(!0)?(a=r.parentNode.insertBefore(m(),r),Lb(t,jb(r,"HR")?a:r)):((x=(C=p).cloneRange()).setStart(C.startContainer,Ub(!0,C.startContainer,C.startOffset)),x.setEnd(C.endContainer,Ub(!1,C.endContainer,C.endOffset)),(n=x.cloneRange()).setEndAfter(r),w=s=n.extractContents(),U(Os(xe.fromDom(w),Le),function(t){var e=t.dom;e.nodeValue=ni(e.nodeValue)}),function(t){for(;Pn(t)&&(t.nodeValue=t.nodeValue.replace(/^[\r\n]+/,"")),t=t.firstChild;);}(s),a=s.firstChild,d.insertAfter(s,r),function(t,e,n){var o,i,r,a=n,s=[];if(a){for(;a=a.firstChild;){if(t.isBlock(a))return;wn(a)&&!e[a.nodeName.toLowerCase()]&&s.push(a)}for(o=s.length;o--;)!(a=s[o]).hasChildNodes()||a.firstChild===a.lastChild&&""===a.firstChild.nodeValue?t.remove(a):(i=t,(r=a)&&"A"===r.nodeName&&i.isEmpty(r)&&t.remove(a))}}(d,h,a),function(t,e){e.normalize();var n=e.lastChild;n&&!/^(left|right)$/gi.test(t.getStyle(n,"float",!0))||t.add(e,"br")}(d,r),d.isEmpty(r)&&Fb(r),a.normalize(),d.isEmpty(a)?(d.remove(a),v()):(Zb(t,a),Lb(t,a))),d.setAttrib(a,"id",""),t.fire("NewBlock",{newBlock:a})))},Wb=function(t,e,n){var o=t.create("span",{},"&nbsp;");n.parentNode.insertBefore(o,n),e.scrollIntoView(o),t.remove(o)},Vb=function(t,e,n,o){var i=t.createRng();o?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),e.setRng(i)},Gb=function(t,e){var n=xe.fromTag("br");tn(xe.fromDom(e),n),t.undoManager.add()},Kb=function(t,e){Xb(t.getBody(),e)||en(xe.fromDom(e),xe.fromTag("br"));var n=xe.fromTag("br");en(xe.fromDom(e),n),Wb(t.dom,t.selection,n.dom),Vb(t.dom,t.selection,n.dom,!1),t.undoManager.add()},Xb=function(t,e){return n=Tl.after(e),!!Ln(n.getNode())||hu(t,Tl.after(e)).map(function(t){return Ln(t.getNode())}).getOr(!1);var n},Yb=function(t){return t&&"A"===t.nodeName&&"href"in t},Jb=function(t){return t.fold(v,Yb,Yb,v)},Qb=function(t,e){e.fold(s,d(Gb,t),d(Kb,t),s)},tw=function(t,e){var n,o,i,r=(o=d(jv,n=t),i=Tl.fromRangeStart(n.selection.getRng()),$y(o,n.getBody(),i).filter(Jb));r.isSome()?r.each(d(Qb,t)):function(t,e){var n,o,i=t.selection,r=t.dom,a=i.getRng();Id(r,a).each(function(t){a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset)});var s,l=a.startOffset,c=a.startContainer;1===c.nodeType&&c.hasChildNodes()&&(s=l>c.childNodes.length-1,c=c.childNodes[Math.min(l,c.childNodes.length-1)]||c,l=s&&3===c.nodeType?c.nodeValue.length:0);var u=r.getParent(c,r.isBlock),d=u?r.getParent(u.parentNode,r.isBlock):null,f=d?d.nodeName.toUpperCase():"",h=!(!e||!e.ctrlKey);"LI"!==f||h||(u=d),c&&3===c.nodeType&&l>=c.nodeValue.length&&!function(t,e,n){for(var o,i=new Fo(c,u),r=t.getNonEmptyElements();o=i.next();)if(r[o.nodeName.toLowerCase()]||0<o.length)return!0}(t.schema)&&(n=r.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),o=!0),n=r.create("br"),El(r,a,n),Wb(r,i,n),Vb(r,i,n,o),t.undoManager.add()}(t,e)},ew=function(t,e){return Rb(t).filter(function(t){return 0<e.length&&Te(xe.fromDom(t),e)}).isSome()},nw=fo([{br:[]},{block:[]},{none:[]}]),ow=function(t,e){return ew(n=t,n.getParam("no_newline_selector",""));var n},iw=function(t){return function(e,n){return""===Xl(e)===t}},rw=function(t){return function(e,n){return Rb(e).filter(function(t){return Go(xe.fromDom(t))}).isSome()===t}},aw=function(t,e){return function(n,o){return Rb(n).fold(c(""),function(t){return t.nodeName.toUpperCase()})===t.toUpperCase()===e}},sw=function(t){return aw("pre",t)},lw=function(t){return function(e,n){return e.getParam("br_in_pre",!0)===t}},cw=function(t,e){return ew(n=t,n.getParam("br_newline_selector",".mce-toc h2,figcaption,caption"));var n},uw=function(t,e){return e},dw=function(t){var e=Xl(t),n=function(t,e){for(var n,o=t.getRoot(),i=e;i!==o&&"false"!==t.getContentEditable(i);)"true"===t.getContentEditable(i)&&(n=i),i=i.parentNode;return i!==o?n:o}(t.dom,t.selection.getStart());return n&&t.schema.isValidChild(n.nodeName,e||"P")},fw=function(t,e){return function(n,o){return W(t,function(t,e){return t&&e(n,o)},!0)?C.some(e):C.none()}},hw=function(t,e){(function(t,e){return Ly([fw([ow],nw.none()),fw([aw("summary",!0)],nw.br()),fw([sw(!0),lw(!1),uw],nw.br()),fw([sw(!0),lw(!1)],nw.block()),fw([sw(!0),lw(!0),uw],nw.block()),fw([sw(!0),lw(!0)],nw.br()),fw([rw(!0),uw],nw.br()),fw([rw(!0)],nw.block()),fw([iw(!0),uw,dw],nw.block()),fw([iw(!0)],nw.br()),fw([cw],nw.br()),fw([iw(!1),uw],nw.br()),fw([dw],nw.block())],[t,!(!e||!e.shiftKey)]).getOr(nw.none())})(t,e).fold(function(){tw(t,e)},function(){qb(t,e)},s)},pw=se().browser,mw=function(t,e){var n=e.container(),o=e.offset();return Pn(n)?(n.insertData(o,t),C.some(Cl(n,o+t.length))):Zc(e).map(function(n){var o=xe.fromText(t);return(e.isAtEnd()?en:tn)(n,o),Cl(o.dom,t.length)})},gw=d(mw,Qo),vw=d(mw," "),yw=function(t,e){return function(n){return o=t,(!zh(i=n)&&(function(t,e){return o=e,pu(t.dom,o).isNone()||(n=e,hu(t.dom,n).isNone())||Sh(t,e)||Th(t,e)||Oh(t,e)||Nh(t,e);var n,o}(o,i)||Ih(o,i)||Mh(o,i))?gw:vw)(e);var o,i}},_w=function(t){var e,n,o=Tl.fromRangeStart(t.selection.getRng()),i=xe.fromDom(t.getBody());if(t.selection.isCollapsed()){var r=d(jv,t),a=Tl.fromRangeStart(t.selection.getRng());return $y(r,t.getBody(),a).bind((n=i,function(t){return t.fold(function(t){return pu(n.dom,Tl.before(t))},function(t){return mu(t)},function(t){return gu(t)},function(t){return hu(n.dom,Tl.after(t))})})).bind(yw(i,o)).exists((e=t,function(t){return e.selection.setRng(t.toRange()),e.nodeChanged(),!0}))}return!1},bw=function(t){var e,n,o,i,r,a=i_(t);return(e=t).on("keyup compositionstart",d(E_,e)),r=a,(i=t).on("keydown",function(t){var e,n,o,a;!1===t.isDefaultPrevented()&&(e=i,n=r,o=t,a=se().os,vb([{keyCode:Td.RIGHT,action:gb(lb,e,!0)},{keyCode:Td.LEFT,action:gb(lb,e,!1)},{keyCode:Td.UP,action:gb(cb,e,!1)},{keyCode:Td.DOWN,action:gb(cb,e,!0)},{keyCode:Td.RIGHT,action:gb(Ob,e,!0)},{keyCode:Td.LEFT,action:gb(Ob,e,!1)},{keyCode:Td.UP,action:gb(Db,e,!1)},{keyCode:Td.DOWN,action:gb(Db,e,!0)},{keyCode:Td.RIGHT,action:gb(yb,e,!0)},{keyCode:Td.LEFT,action:gb(yb,e,!1)},{keyCode:Td.UP,action:gb(_b,e,!1)},{keyCode:Td.DOWN,action:gb(_b,e,!0)},{keyCode:Td.RIGHT,action:gb(n_,e,n,!0)},{keyCode:Td.LEFT,action:gb(n_,e,n,!1)},{keyCode:Td.RIGHT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:gb(r_,e,n)},{keyCode:Td.LEFT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:gb(a_,e,n)},{keyCode:Td.UP,action:gb(mb,e,!1)},{keyCode:Td.DOWN,action:gb(mb,e,!0)}],o).each(function(t){o.preventDefault()}))}),function(t,e){t.on("keydown",function(n){var o,i,r;!1===n.isDefaultPrevented()&&(o=t,i=e,r=n,vb([{keyCode:Td.BACKSPACE,action:gb(w_,o,!1)},{keyCode:Td.BACKSPACE,action:gb(wy,o,!1)},{keyCode:Td.DELETE,action:gb(wy,o,!0)},{keyCode:Td.BACKSPACE,action:gb(my,o,!1)},{keyCode:Td.DELETE,action:gb(my,o,!0)},{keyCode:Td.BACKSPACE,action:gb(c_,o,i,!1)},{keyCode:Td.DELETE,action:gb(c_,o,i,!0)},{keyCode:Td.BACKSPACE,action:gb(Tp,o,!1)},{keyCode:Td.DELETE,action:gb(Tp,o,!0)},{keyCode:Td.BACKSPACE,action:gb(Cy,o,!1)},{keyCode:Td.DELETE,action:gb(Cy,o,!0)},{keyCode:Td.BACKSPACE,action:gb(p_,o,!1)},{keyCode:Td.DELETE,action:gb(p_,o,!0)},{keyCode:Td.BACKSPACE,action:gb(ry,o,!1)},{keyCode:Td.DELETE,action:gb(ry,o,!0)},{keyCode:Td.BACKSPACE,action:gb(ny,o,!1)},{keyCode:Td.DELETE,action:gb(ny,o,!0)},{keyCode:Td.BACKSPACE,action:gb(f_,o,!1)},{keyCode:Td.DELETE,action:gb(f_,o,!0)}],r).each(function(t){r.preventDefault()}))}),t.on("keyup",function(e){var n,o;!1===e.isDefaultPrevented()&&(n=t,o=e,vb([{keyCode:Td.BACKSPACE,action:gb(by,n)},{keyCode:Td.DELETE,action:gb(by,n)}],o))})}(t,a),(o=t).on("keydown",function(t){var e,n,i;t.keyCode===Td.ENTER&&(e=o,(n=t).isDefaultPrevented()||(n.preventDefault(),(i=e.undoManager).typing&&(i.typing=!1,i.add()),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),hw(e,n)})))}),(n=t).on("keydown",function(t){var e,o;!1===t.isDefaultPrevented()&&(e=n,o=t,vb([{keyCode:Td.SPACEBAR,action:gb(_w,e)}],o).each(function(t){o.preventDefault()}))}),function(t){var e,n;e=t,n=Ts(function(){e.composing||qh(e)},0),pw.isIE()&&(e.on("keypress",function(t){n.throttle()}),e.on("remove",function(t){n.cancel()})),t.on("input",function(e){!1===e.isComposing&&qh(t)})}(t),function(t){t.on("keydown",function(e){var n,o;!1===e.isDefaultPrevented()&&(n=t,o=e,vb([{keyCode:Td.END,action:gb(ub,n,!0)},{keyCode:Td.HOME,action:gb(ub,n,!1)},{keyCode:Td.END,action:gb(bb,n,!0)},{keyCode:Td.HOME,action:gb(bb,n,!1)}],o).each(function(t){o.preventDefault()}))})}(t),a},ww=(Cw.prototype.nodeChanged=function(t){var e,n,o,i=this.editor.selection;this.editor.initialized&&i&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(o=this.editor.getBody(),(e=i.getStart(!0)||o).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(e,o)||(e=o),n=[],this.editor.dom.getParent(e,function(t){return t===o||void n.push(t)}),(t=t||{}).element=e,t.parents=n,this.editor.fire("NodeChange",t))},Cw.prototype.isSameElementPath=function(t){var e,n=this.editor.$(t).parentsUntil(this.editor.getBody()).add(t);if(n.length===this.lastPath.length){for(e=n.length;0<=e&&n[e]===this.lastPath[e];e--);if(-1===e)return this.lastPath=n,!0}return this.lastPath=n,!1},Cw);function Cw(t){var e;this.lastPath=[],this.editor=t;var n=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",function(n){var o=t.selection.getRng(),i={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset};"nodechange"!==n.type&&Nd(i,e)||t.fire("SelectionChange"),e=i}),t.on("contextmenu",function(){t.fire("SelectionChange")}),t.on("SelectionChange",function(){var e=t.selection.getStart(!0);!e||!ge.range&&t.selection.isCollapsed()||fd(t)&&!n.isSameElementPath(e)&&t.dom.isChildOf(e,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",function(e){!e.isDefaultPrevented()&&fd(t)&&("IMG"===t.selection.getNode().nodeName?Bo.setEditorTimeout(t,function(){t.nodeChanged()}):t.nodeChanged())})}var xw=function(t){return wn(t)&&Wo(xe.fromDom(t))},Sw=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,o=n.documentElement,i=n.defaultView;return{top:e.top+i.pageYOffset-o.clientTop,left:e.left+i.pageXOffset-o.clientLeft}},Tw=function(t,e){return n=(s=t).inline?Sw(s.getBody()):{left:0,top:0},a=(r=t).getBody(),o=r.inline?{left:a.scrollLeft,top:a.scrollTop}:{left:0,top:0},{pageX:(i=function(t,e){if(e.target.ownerDocument===t.getDoc())return{left:e.pageX,top:e.pageY};var n,o,i,r,a,s=Sw(t.getContentAreaContainer()),l=(o=(n=t).getBody(),i=n.getDoc().documentElement,r={left:o.scrollLeft,top:o.scrollTop},a={left:o.scrollLeft||i.scrollLeft,top:o.scrollTop||i.scrollTop},n.inline?r:a);return{left:e.pageX-s.left+l.left,top:e.pageY-s.top+l.top}}(t,e)).left-n.left+o.left,pageY:i.top-n.top+o.top};var n,o,i,r,a,s},kw=In,Ew=Bn,Aw=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},Pw=function(t){t.on(function(t){Aw(t.ghost)}),t.clear()},Nw=function(t){var e,n,o,i=(e=vs(C.none()),{clear:function(){return e.set(C.none())},set:function(t){return e.set(C.some(t))},isSet:function(){return e.get().isSome()},on:function(t){return e.get().each(t)}}),r=us.DOM,a=document,s=function(t,e){return function(n){var o,i,r,a,s,l;0===n.button&&(o=V(e.dom.getParents(n.target),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var n=0;n<t.length;n++)if(t[n](e))return!0;return!1}}(kw,Ew)).getOr(null),s=e.getBody(),kw(l=o)&&l!==s&&(i=e.dom.getPos(o),r=e.getBody(),a=e.getDoc().documentElement,t.set({element:o,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(e.inline?r.scrollWidth:a.offsetWidth)-2,maxY:(e.inline?r.scrollHeight:a.offsetHeight)-2,relX:n.pageX-i.x,relY:n.pageY-i.y,width:o.offsetWidth,height:o.offsetHeight,ghost:function(t,e,n,o){var i=t.dom,r=e.cloneNode(!0);i.setStyles(r,{width:n,height:o}),i.setAttrib(r,"data-mce-selected",null);var a=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),i.setStyles(r,{margin:0,boxSizing:"border-box"}),a.appendChild(r),a}(e,o,o.offsetWidth,o.offsetHeight)})))}}(i,t),l=function(t,e){var n=Bo.throttle(function(t,n){e._selectionOverrides.hideFakeCaret(),e.selection.placeCaretAt(t,n)},0);return function(o){return t.on(function(t){var i,r,a,s,l,c,u,d,f,h,p,m,g,v=Math.max(Math.abs(o.screenX-t.screenX),Math.abs(o.screenY-t.screenY));if(!t.dragging&&10<v){if(e.fire("dragstart",{target:t.element}).isDefaultPrevented())return;t.dragging=!0,e.focus()}t.dragging&&(m=t,i={pageX:(g=Tw(e,o)).pageX-m.relX,pageY:g.pageY+5},h=t.ghost,p=e.getBody(),h.parentNode!==p&&p.appendChild(h),r=t.ghost,a=i,s=t.width,l=t.height,c=t.maxX,u=t.maxY,f=d=0,r.style.left=a.pageX+"px",r.style.top=a.pageY+"px",a.pageX+s>c&&(d=a.pageX+s-c),a.pageY+l>u&&(f=a.pageY+l-u),r.style.width=s-d+"px",r.style.height=l-f+"px",n(o.clientX,o.clientY))})}}(i,t),c=function(t,e){return function(n){t.on(function(t){var o,i,r,a,s,l;t.dragging&&((a=3===(l=(r=e).selection.getSel().getRangeAt(0).startContainer).nodeType?l.parentNode:l)===(s=t.element)||r.dom.isChildOf(a,s)||kw(a)||((i=t.element.cloneNode(!0)).removeAttribute("data-mce-selected"),o=i,e.fire("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||e.undoManager.transact(function(){Aw(t.element),e.insertContent(e.dom.getOuterHTML(o)),e._selectionOverrides.hideFakeCaret()})))}),Pw(t)}}(i,t),u=(n=i,function(){n.on(function(t){t.dragging&&o.fire("dragend")}),Pw(n)});(o=t).on("mousedown",s),t.on("mousemove",l),t.on("mouseup",c),r.bind(a,"mousemove",l),r.bind(a,"mouseup",u),t.on("remove",function(){r.unbind(a,"mousemove",l),r.unbind(a,"mouseup",u)})},Ow=Bn,Dw=In,Lw=function(t,e){return xd(t.getBody(),e)},Rw=function(t){var e,n=t.selection,o=t.dom,i=o.isBlock,r=t.getBody(),a=wc(t,r,i,function(){return Of(t)}),s="sel-"+o.uniqueId(),l="data-mce-selected",c=function(t){return Dw(t)||zn(t)},u=function(t){t&&n.setRng(t)},f=n.getRng,h=function(e,o,i,r){return void 0===r&&(r=!0),t.fire("ShowCaret",{target:o,direction:e,before:i}).isDefaultPrevented()?null:(r&&n.scrollIntoView(o,-1===e),a.show(i,o))},p=function(t){return si(t)||di(t)||fi(t)},m=function(t){return p(t.startContainer)||p(t.endContainer)},g=function(i){var r=i.cloneNode(!0),a=t.fire("ObjectSelected",{target:i,targetClone:r});if(a.isDefaultPrevented())return null;var c=function(e,i,r){var a=t.$,l=Co(xe.fromDom(t.getBody()),"#"+s).fold(function(){return a([])},function(t){return a([t.dom])});0===l.length&&(l=a('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",s)).appendTo(t.getBody());var c=o.createRng();i===r&&ge.ie?(l.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(i),c.setStartAfter(l[0].firstChild.firstChild),c.setEndAfter(i)):(l.empty().append(Qo).append(i).append(Qo),c.setStart(l[0].firstChild,1),c.setEnd(l[0].lastChild,0)),l.css({top:o.getPos(e,t.getBody()).y}),l[0].focus();var u=n.getSel();return u.removeAllRanges(),u.addRange(c),c}(i,a.targetClone,r),u=xe.fromDom(i);return U(Ds(xe.fromDom(t.getBody()),"*[data-mce-selected]"),function(t){Ee(u,t)||Zn(t,l)}),o.getAttrib(i,l)||i.setAttribute(l,"1"),e=i,_(),c},v=function(t,e){if(!t)return null;if(t.collapsed){if(!m(t)){var n=e?1:-1,i=$c(n,r,t),a=i.getNode(!e);if(Sc(a))return h(n,a,!!e&&!i.isAtEnd(),!1);var s=i.getNode(e);if(Sc(s))return h(n,s,!e&&!i.isAtEnd(),!1)}return null}var l=t.startContainer,u=t.startOffset,d=t.endOffset;if(3===l.nodeType&&0===u&&Dw(l.parentNode)&&(l=l.parentNode,u=o.nodeIndex(l),l=l.parentNode),1!==l.nodeType)return null;if(d===u+1&&l===t.endContainer){var f=l.childNodes[u];if(c(f))return g(f)}return null},y=function(){e&&e.removeAttribute(l),Co(xe.fromDom(t.getBody()),"#"+s).each(sn),e=null},_=function(){a.hide()};return ge.ceFalse&&function(){t.on("mouseup",function(e){var n=f();n.collapsed&&lv(t,e.clientX,e.clientY)&&uy(t,n,!1).each(u)}),t.on("click",function(e){var i=Lw(t,e.target);i&&(Dw(i)&&(e.preventDefault(),t.focus()),Ow(i)&&o.isChildOf(i,n.getNode())&&y())}),t.on("blur NewBlock",y),t.on("ResizeWindow FullscreenStateChanged",a.reposition);var l,p,g,b=function(e,n){var r,a,s=o.getParent(e,i),l=o.getParent(n,i);return!(!s||e===l||!o.isChildOf(s,l)||!1!==Dw(Lw(t,s)))||s&&(r=s,a=l,!(o.getParent(r,i)===o.getParent(a,i)))&&function(t){var e=ru(t);if(!t.firstChild)return!1;var n,o=Tl.before(t.firstChild),i=e.next(o);return i&&!(ph(n=i)||mh(n)||uh(n)||dh(n))}(s)};t.on("tap",function(e){var n=e.target,o=Lw(t,n);Dw(o)?(e.preventDefault(),cy(t,o).each(v)):c(n)&&cy(t,n).each(v)},!0),t.on("mousedown",function(e){var i,a,s,l=e.target;l!==r&&"HTML"!==l.nodeName&&!o.isChildOf(l,r)||!1===lv(t,e.clientX,e.clientY)||((i=Lw(t,l))?Dw(i)?(e.preventDefault(),cy(t,i).each(v)):(y(),Ow(i)&&e.shiftKey||Sd(e.clientX,e.clientY,n.getRng())||(_(),n.placeCaretAt(e.clientX,e.clientY))):c(l)?cy(t,l).each(v):!1===Sc(l)&&(y(),_(),(a=function(t,e,n){var o,i,r=j_(Z(et(t.getElementsByTagName("*")),Sc)),a=Z(r,d(Y_,n));if(s=J_(a,e)){var s,l=!kn(s.node)&&!zn(s.node);if((s=J_(function(t,e,n){void 0===n&&(n=!0);var o=[],i=function(t,n){var i=Z(j_([n]),function(n){return!t(n,e)});return o=o.concat(i),0===i.length};return o.push(e),Q_(A_.Up,t,d(i,Ys),e.node,n),Q_(A_.Down,t,d(i,Js),e.node,n),o}(t,s,l),e))&&Sc(s.node))return i=e,{node:(o=s).node,before:G_(o,i)<K_(o,i)}}return null}(r,e.clientX,e.clientY))&&(b(l,a.node)||(e.preventDefault(),s=h(1,a.node,a.before,!1),t.getBody().focus(),u(s)))))}),t.on("keypress",function(t){Td.modifierPressed(t)||Dw(n.getNode())&&t.preventDefault()}),t.on("GetSelectionRange",function(t){var n=t.range;if(e){if(!e.parentNode)return void(e=null);(n=n.cloneRange()).selectNode(e),t.range=n}}),t.on("SetSelectionRange",function(e){e.range=function(e){var n=t.schema.getShortEndedElements(),i=o.createRng(),r=e.startContainer,a=e.startOffset,s=e.endContainer,l=e.endOffset;return ft(n,r.nodeName.toLowerCase())?0===a?i.setStartBefore(r):i.setStartAfter(r):i.setStart(r,a),ft(n,s.nodeName.toLowerCase())?0===l?i.setEndBefore(s):i.setEndAfter(s):i.setEnd(s,l),i}(e.range);var n=v(e.range,e.forward);n&&(e.range=n)}),t.on("AfterSetSelectionRange",function(t){var e,n=t.range,i=n.startContainer.parentNode;m(n)||"mcepastebin"===i.id||_(),e=i,o.hasClass(e,"mce-offscreen-selection")||y()}),t.on("copy",function(t){var e,n,i=t.clipboardData;t.isDefaultPrevented()||!t.clipboardData||ge.ie||(e=(n=o.get(s))?n.getElementsByTagName("*")[0]:n)&&(t.preventDefault(),i.clearData(),i.setData("text/html",e.outerHTML),i.setData("text/plain",e.outerText||e.innerText))}),function(t){var e,n,o,i,r;Nw(t),(e=t).on("drop",function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;!kw(n)&&"false"!==e.dom.getContentEditableParent(n)||t.preventDefault()}),t.getParam("block_unsupported_drop",!0,"boolean")&&(o=function(t){var e;t.defaultPrevented||(e=t.dataTransfer)&&(F(e.types,"Files")||0<e.files.length)&&(t.preventDefault(),"drop"===t.type&&mv(n,"Dropped file type is not supported"))},i=function(t){kf(n,t.target)&&o(t)},r=function(){var t=us.DOM,e=n.dom,r=document,a=n.inline?n.getBody():n.getDoc(),s=["drop","dragover"];U(s,function(n){t.bind(r,n,i),e.bind(a,n,o)}),n.on("remove",function(){U(s,function(n){t.unbind(r,n,i),e.unbind(a,n,o)})})},(n=t).on("init",function(){Bo.setEditorTimeout(n,r,0)}))}(t),p=Ts(function(){var t,e;l.removed||!l.getBody().contains(document.activeElement)||(t=l.selection.getRng()).collapsed&&(e=dy(l,t,!1),l.selection.setRng(e))},0),(l=t).on("focus",function(){p.throttle()}),l.on("blur",function(){p.cancel()}),(g=t).on("init",function(){g.on("focusin",function(t){var e,n,o=t.target;zn(o)&&(e=xd(g.getBody(),o),n=In(e)?e:o,g.selection.getNode()!==n&&cy(g,n).each(function(t){return g.selection.setRng(t)}))})})}(),{showCaret:h,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(hi(t),u(f()),n.scrollIntoView(t))},hideFakeCaret:_,destroy:function(){a.destroy(),e=null}}},Bw=us.DOM,Iw=function(t){return ut(t,function(t){return!1===O(t)})},Mw=function(t){var e,n=t.settings,o=t.editorUpload.blobCache;return Iw({allow_conditional_comments:n.allow_conditional_comments,allow_html_data_urls:n.allow_html_data_urls,allow_html_in_named_anchor:n.allow_html_in_named_anchor,allow_script_urls:n.allow_script_urls,allow_unsafe_link_target:n.allow_unsafe_link_target,convert_fonts_to_spans:n.convert_fonts_to_spans,fix_list_elements:n.fix_list_elements,font_size_legacy_values:n.font_size_legacy_values,forced_root_block:n.forced_root_block,forced_root_block_attrs:n.forced_root_block_attrs,padd_empty_with_br:n.padd_empty_with_br,preserve_cdata:n.preserve_cdata,remove_trailing_brs:n.remove_trailing_brs,inline_styles:n.inline_styles,root_name:(e=t).inline?e.getElement().nodeName.toLowerCase():void 0,validate:!0,blob_cache:o,images_dataimg_filter:n.images_dataimg_filter})},zw=function(t){var e;t.bindPendingEventDelegates(),t.initialized=!0,t.fire("Init"),t.focus(!0),function(t){var e=t.dom.getRoot();t.inline||fd(t)&&t.selection.getStart(!0)!==e||mu(e).each(function(e){var n,o,i,r,a=e.getNode(),s=kn(a)?mu(a).getOr(e):e;ge.browser.isIE()?(n=t,o=s.toRange(),i=xe.fromDom(n.getBody()),r=(yf(n)?C.from(o):C.none()).map(_f).filter(vf(i)),n.bookmark=r.isSome()?r:n.bookmark):t.selection.setRng(s.toRange())})}(t),t.nodeChanged({initial:!0}),t.execCallback("init_instance_callback",t),(e=t).settings.auto_focus&&Bo.setEditorTimeout(e,function(){var t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus);t.destroyed||t.focus()},100)},Fw=function(t,e){var n=t.settings,o=t.getDoc(),i=t.getBody();n.browser_spellcheck||n.gecko_spellcheck||(o.body.spellcheck=!1,Bw.setAttrib(i,"spellcheck","false")),t.quirks=function(t){var e,n,o,i=we.each,r=Td.BACKSPACE,a=Td.DELETE,s=t.dom,l=t.selection,c=t.parser,u=ge.gecko,d=ge.ie,f=ge.webkit,h="data:text/mce-internal,",p=d?"Text":"URL",m=function(e,n){try{t.getDoc().execCommand(e,!1,n)}catch(t){}},g=function(t){return t.isDefaultPrevented()},v=function(){t.shortcuts.add("meta+a",null,"SelectAll")},y=function(){t.on("keydown",function(t){if(!g(t)&&t.keyCode===r&&l.isCollapsed()&&0===l.getRng().startOffset){var e=l.getNode().previousSibling;if(e&&e.nodeName&&"table"===e.nodeName.toLowerCase())return t.preventDefault(),!1}})},_=function(){t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",function(e){var n;if("HTML"===e.target.nodeName){if(11<ge.ie)return void t.getBody().focus();n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged()}}))};return t.on("keydown",function(e){var n;if(!g(e)&&e.keyCode===Td.BACKSPACE){var o=(n=l.getRng()).startContainer,i=n.startOffset,r=s.getRoot(),a=o;if(n.collapsed&&0===i){for(;a&&a.parentNode&&a.parentNode.firstChild===a&&a.parentNode!==r;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(t.formatter.toggle("blockquote",null,a),(n=s.createRng()).setStart(o,0),n.setEnd(o,0),l.setRng(n))}}}),e=function(t){var e=s.create("body"),n=t.cloneContents();return e.appendChild(n),l.serializer.serialize(e,{format:"html"})},t.on("keydown",function(n){var o,i,l,c,u,d=n.keyCode;if(!g(n)&&(d===a||d===r)){if(o=t.selection.isCollapsed(),i=t.getBody(),o&&!s.isEmpty(i))return;if(!o&&(l=t.selection.getRng(),c=e(l),(u=s.createRng()).selectNode(t.getBody()),c!==e(u)))return;n.preventDefault(),t.setContent(""),i.firstChild&&s.isBlock(i.firstChild)?t.selection.setCursorLocation(i.firstChild,0):t.selection.setCursorLocation(i,0),t.nodeChanged()}}),ge.windowsPhone||t.on("keyup focusin mouseup",function(t){Td.modifierPressed(t)||l.normalize()},!0),f&&(t.inline||s.bind(t.getDoc(),"mousedown mouseup",function(e){var n;if(e.target===t.getDoc().documentElement)if(n=l.getRng(),t.getBody().focus(),"mousedown"===e.type){if(si(n.startContainer))return;l.placeCaretAt(e.clientX,e.clientY)}else l.setRng(n)}),t.on("click",function(e){var n=e.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==s.getContentEditableParent(n)&&(e.preventDefault(),t.selection.select(n),t.nodeChanged()),"A"===n.nodeName&&s.hasClass(n,"mce-item-anchor")&&(e.preventDefault(),l.select(n))}),Xl(t)&&t.on("init",function(){m("DefaultParagraphSeparator",Xl(t))}),t.on("init",function(){t.dom.bind(t.getBody(),"submit",function(t){t.preventDefault()})}),y(),c.addNodeFilter("br",function(t){for(var e=t.length;e--;)"Apple-interchange-newline"===t[e].attr("class")&&t[e].remove()}),ge.iOS?(t.inline||t.on("keydown",function(){document.activeElement===document.body&&t.getWin().focus()}),_(),t.on("click",function(t){var e=t.target;do{if("A"===e.tagName)return void t.preventDefault()}while(e=e.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):v()),11<=ge.ie&&(_(),y()),ge.ie&&(v(),m("AutoUrlDetect",!1),t.on("dragstart",function(e){var n,o,i;(n=e).dataTransfer&&(t.selection.isCollapsed()&&"IMG"===n.target.tagName&&l.select(n.target),0<(o=t.selection.getContent()).length&&(i=h+escape(t.id)+","+escape(o),n.dataTransfer.setData(p,i)))}),t.on("drop",function(e){var n,o,i,r,a;g(e)||(n=(r=e).dataTransfer&&(a=r.dataTransfer.getData(p))&&0<=a.indexOf(h)?(a=a.substr(h.length).split(","),{id:unescape(a[0]),html:unescape(a[1])}):null)&&n.id!==t.id&&(e.preventDefault(),o=Pd(e.x,e.y,t.getDoc()),l.setRng(o),i=n.html,t.queryCommandSupported("mceInsertClipboardContent")?t.execCommand("mceInsertClipboardContent",!1,{content:i,internal:!0}):t.execCommand("mceInsertContent",!1,i))})),u&&(t.on("keydown",function(e){if(!g(e)&&e.keyCode===r){if(!t.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var n=l.getNode(),o=n.previousSibling;if("HR"===n.nodeName)return s.remove(n),void e.preventDefault();o&&o.nodeName&&"hr"===o.nodeName.toLowerCase()&&(s.remove(o),e.preventDefault())}}}),Range.prototype.getClientRects||t.on("mousedown",function(e){var n;g(e)||"HTML"!==e.target.nodeName||((n=t.getBody()).blur(),Bo.setEditorTimeout(t,function(){n.focus()}))}),n=function(){var e=s.getAttribs(l.getStart().cloneNode(!1));return function(){var n=l.getStart();n!==t.getBody()&&(s.setAttrib(n,"style",null),i(e,function(t){n.setAttributeNode(t.cloneNode(!0))}))}},o=function(){return!l.isCollapsed()&&s.getParent(l.getStart(),s.isBlock)!==s.getParent(l.getEnd(),s.isBlock)},t.on("keypress",function(e){var i;if(!g(e)&&(8===e.keyCode||46===e.keyCode)&&o())return i=n(),t.getDoc().execCommand("delete",!1,null),i(),e.preventDefault(),!1}),s.bind(t.getDoc(),"cut",function(e){var i;!g(e)&&o()&&(i=n(),Bo.setEditorTimeout(t,function(){i()}))}),t.getParam("readonly")||t.on("BeforeExecCommand mousedown",function(){m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),oc(t)||m("enableObjectResizing",!1)}),t.on("SetContent ExecCommand",function(t){"setcontent"!==t.type&&"mceInsertLink"!==t.command||i(s.select("a"),function(t){var e=t.parentNode,n=s.getRoot();if(e.lastChild===t){for(;e&&!s.isBlock(e);){if(e.parentNode.lastChild!==e||e===n)return;e=e.parentNode}s.add(e,"br",{"data-mce-bogus":1})}})}),t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),ge.mac&&t.on("keydown",function(e){!Td.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),t.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))}),y()),{refreshContentEditable:function(){},isHidden:function(){if(!u||t.removed)return!1;var e=t.selection.getSel();return!e||!e.rangeCount||0===e.rangeCount}}}(t),t.fire("PostRender");var r,a,s,l,c,u,d,f,h,p,m,g=t.getParam("directionality",ws.isRtl()?"rtl":void 0);void 0!==g&&(i.dir=g),n.protect&&t.on("BeforeSetContent",function(t){we.each(n.protect,function(e){t.content=t.content.replace(e,function(t){return"\x3c!--mce:protected "+escape(t)+"--\x3e"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),!1===e&&t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),0<t.contentStyles.length&&(r="",we.each(t.contentStyles,function(t){r+=t+"\r\n"}),t.dom.addStyle(r)),s=(a=t).contentCSS,u=function(){a.on("remove",function(){return c.unloadAll(s)}),zw(a)},(c=(l=a).inline?l.ui.styleSheetLoader:l.dom.styleSheetLoader).loadAll(s,u,u),n.content_style&&(d=t,f=n.content_style,h=xe.fromDom(d.getBody()),p=Je(Ye(h)),m=xe.fromTag("style"),Hn(m,"type","text/css"),on(m,xe.fromText(f)),on(p,m),d.on("remove",function(){sn(m)}))},jw=function(t,e){var n=t.settings,o=t.getElement(),i=t.getDoc();n.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline||(i.open(),i.write(t.iframeHTML),i.close()),t.inline&&(Bw.addClass(o,"mce-content-body"),t.contentDocument=i=document,t.contentWindow=window,t.bodyElement=o,t.contentAreaContainer=o);var r,a,s,l,c=t.getBody();c.disabled=!0,t.readonly=!!n.readonly,t.readonly||(t.inline&&"static"===Bw.getStyle(c,"position",!0)&&(c.style.position="relative"),c.contentEditable=t.getParam("content_editable_state",!0)),c.disabled=!1,t.editorUpload=xv(t),t.schema=rr(n),t.dom=us(i,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:t.inline?t.getBody():null,collect:function(){return t.inline},schema:t.schema,contentCssCors:t.getParam("content_css_cors",!1,"boolean"),referrerPolicy:tc(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=((a=Rg(Mw(r=t),r.schema)).addAttributeFilter("src,href,style,tabindex",function(t,e){for(var n,o,i=t.length,a=r.dom,s="data-mce-"+e;i--;)if((o=(n=t[i]).attr(e))&&!n.attr(s)){if(0===o.indexOf("data:")||0===o.indexOf("blob:"))continue;"style"===e?((o=a.serializeStyle(a.parseStyle(o),n.name)).length||(o=null),n.attr(s,o),n.attr(e,o)):"tabindex"===e?(n.attr(s,o),n.attr(e,null)):n.attr(s,r.convertURL(o,e,n.name))}}),a.addNodeFilter("script",function(t){for(var e=t.length;e--;){var n=t[e],o=n.attr("type")||"no/type";0!==o.indexOf("mce-")&&n.attr("type","mce-"+o)}}),r.settings.preserve_cdata&&a.addNodeFilter("#cdata",function(t){for(var e=t.length;e--;){var n=t[e];n.type=8,n.name="#comment",n.value="[CDATA["+r.dom.encode(n.value)+"]]"}}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var e=t.length,n=r.schema.getNonEmptyElements();e--;){var o=t[e];o.isEmpty(n)&&0===o.getAll("br").length&&(o.append(new Hf("br",1)).shortEnded=!0)}}),a),t.serializer=Mg((l=(s=t).settings,wt(wt({},Mw(s)),Iw({url_converter:l.url_converter,url_converter_scope:l.url_converter_scope,element_format:l.element_format,entities:l.entities,entity_encoding:l.entity_encoding,indent:l.indent,indent_after:l.indent_after,indent_before:l.indent_before,block_elements:l.block_elements,boolean_attributes:l.boolean_attributes,custom_elements:l.custom_elements,extended_valid_elements:l.extended_valid_elements,invalid_elements:l.invalid_elements,invalid_styles:l.invalid_styles,move_caret_before_on_enter_elements:l.move_caret_before_on_enter_elements,non_empty_elements:l.non_empty_elements,schema:l.schema,self_closing_elements:l.self_closing_elements,short_ended_elements:l.short_ended_elements,special:l.special,text_block_elements:l.text_block_elements,text_inline_elements:l.text_inline_elements,valid_children:l.valid_children,valid_classes:l.valid_classes,valid_elements:l.valid_elements,valid_styles:l.valid_styles,verify_html:l.verify_html,whitespace_elements:l.whitespace_elements}))),t),t.selection=gg(t.dom,t.getWin(),t.serializer,t),t.annotator=_d(t),t.formatter=Lv(t),t.undoManager=Rv(t),t._nodeChangeDispatcher=new ww(t),t._selectionOverrides=Rw(t),function(t){var e=vs(C.none()),n=vs(!1),o=ks(function(e){t.fire("longpress",wt(wt({},e),{type:"longpress"})),n.set(!0)},400);t.on("touchstart",function(t){x_(t).each(function(i){o.cancel();var r={x:i.clientX,y:i.clientY,target:t.target};o.throttle(t),n.set(!1),e.set(C.some(r))})},!0),t.on("touchmove",function(i){o.cancel(),x_(i).each(function(o){e.get().each(function(i){var r,a,s,l;r=o,a=i,s=Math.abs(r.clientX-a.x),l=Math.abs(r.clientY-a.y),(5<s||5<l)&&(e.set(C.none()),n.set(!1),t.fire("longpresscancel"))})})},!0),t.on("touchend touchcancel",function(i){o.cancel(),"touchcancel"!==i.type&&e.get().filter(function(t){return t.target.isEqualNode(i.target)}).each(function(){n.get()?i.preventDefault():t.fire("tap",wt(wt({},i),{type:"tap"}))})},!0)}(t),function(t){var e,n;(e=t).on("click",function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()}),(n=t).parser.addNodeFilter("details",function(t){U(t,function(t){t.attr("data-mce-open",t.attr("open")),t.attr("open","open")})}),n.serializer.addNodeFilter("details",function(t){U(t,function(t){var e=t.attr("data-mce-open");t.attr("open",k(e)?e:null),t.attr("data-mce-open",null)})})}(t),lg(t)||function(t){t.on("click",function(e){var n,o,i,r,a;3<=e.detail&&(i=(n=t).selection.getRng(),r=Cl.fromRangeStart(i),a=Cl.fromRangeEnd(i),Cl.isElementPosition(r)&&(o=r.container(),xw(o)&&mu(o).each(function(t){return i.setStart(t.container(),t.offset())})),Cl.isElementPosition(a)&&(o=r.container(),xw(o)&&gu(o).each(function(t){return i.setEnd(t.container(),t.offset())})),n.selection.setRng(kp(i)))})}(t);var u,f,h,p,m=lg(u=t)?vs(null):bw(u);(function(t,e){t.addCommand("delete",function(){var n,o;o=e,w_(n=t)||wy(n,!1)||my(n,!1)||c_(n,o,!1)||ny(n,!1)||Tp(n)||Cy(n,!1)||p_(n,!1)||ry(n)||f_(n,!1)||(C_(n,"Delete"),Wv(n))}),t.addCommand("forwardDelete",function(){var n,o;o=e,wy(n=t,!0)||my(n,!0)||c_(n,o,!0)||ny(n,!0)||Tp(n)||Cy(n,!0)||p_(n,!0)||ry(n)||f_(n,!0)||C_(n,"ForwardDelete")})})(t,m),Xl(f=t)&&f.on("NodeChange",d(T_,f)),function(t){var e,n=t.dom,o=Xl(t),i=(e=t).getParam("placeholder",Vl.getAttrib(e.getElement(),"placeholder"),"string"),r=function(e,a){var s,l,c,u;!function(t){if(Mv(t)){var e=t.keyCode;return!zv(t)&&(Td.metaKeyPressed(t)||t.altKey||112<=e&&e<=123||F(Bv,e))}return!1}(e)&&(s=t.getBody(),l=!(Mv(c=e)&&!(zv(c)||"keyup"===c.type&&229===c.keyCode))&&function(t,e,n){if(Oi(xe.fromDom(e),!1)){var o=""===n,i=e.firstElementChild;return!i||!t.getStyle(e.firstElementChild,"padding-left")&&!t.getStyle(e.firstElementChild,"padding-right")&&(o?!t.isBlock(i):n===i.nodeName.toLowerCase())}return!1}(n,s,o),""!==n.getAttrib(s,Iv)===l&&!a||(n.setAttrib(s,Iv,l?i:null),n.setAttrib(s,"aria-placeholder",l?i:null),u=l,t.fire("PlaceholderToggle",{state:u}),t.on(l?"keydown":"keyup",r),t.off(l?"keyup":"keydown",r)))};i&&t.on("init",function(e){r(e,!0),t.on("change SetContent ExecCommand",r),t.on("paste",function(e){return Bo.setEditorTimeout(t,function(){return r(e)})})})}(t),t.fire("PreInit"),dt((p=h=t).plugins,"rtc").fold(function(){return p.rtcInstance=ag(h),C.none()},function(t){return C.some(t.setup().then(function(t){return p.rtcInstance=sg(h,t),t.isRemote}))}).fold(function(){Fw(t,!1)},function(e){t.setProgressState(!0),e.then(function(e){t.setProgressState(!1),Fw(t,e)})})},Hw=us.DOM,Uw=function(t,e){var n,o,i,r,a=t.editorManager.translate("Rich Text Area. Press ALT-0 for help."),s=(n=t.id,o=a,e.height,i=t.getParam("iframe_attrs",{}),r=xe.fromTag("iframe"),Un(r,i),Un(r,{id:n+"_ifr",frameBorder:"0",allowTransparency:"true",title:o}),Ps(r,"tox-edit-area__iframe"),r.dom);s.onload=function(){s.onload=null,t.fire("load")};var l=function(t,e){if(document.domain!==window.location.hostname&&ge.browser.isIE()){var n=Cv("mce");t[n]=function(){jw(t)};var o='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return Hw.setAttrib(e,"src",o),!0}return!1}(t,s);return t.contentAreaContainer=e.iframeContainer,t.iframeElement=s,t.iframeHTML=function(t){var e=t.getParam("doctype","<!DOCTYPE html>")+"<html><head>";t.getParam("document_base_url","")!==t.documentBaseUrl&&(e+='<base href="'+t.documentBaseURI.getURI()+'" />'),e+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=Gl(t,"body_id","tinymce"),o=Gl(t,"body_class","");return Kl(t)&&(e+='<meta http-equiv="Content-Security-Policy" content="'+Kl(t)+'" />'),e+'</head><body id="'+n+'" class="mce-content-body '+o+'" data-id="'+t.id+'"><br></body></html>'}(t),Hw.add(e.iframeContainer,s),l},$w=us.DOM,Zw=function(t,e,n){var o=dv.get(n),i=dv.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=we.trim(n),o&&-1===we.inArray(e,n)){if(we.each(dv.dependencies(n),function(n){Zw(t,e,n)}),t.plugins[n])return;try{var r=new o(t,i,t.$);(t.plugins[n]=r).init&&(r.init(t,i),e.push(n))}catch(e){!function(t,e,n){var o=ws.translate(["Failed to initialize plugin: {0}",e]);_v(o,n),mv(t,o)}(t,n,e)}}},qw=function(t){return t.replace(/^\-/,"")},Ww=function(t){return{editorContainer:t,iframeContainer:t,api:{}}},Vw=function(t){var e,n,o,i=t.getElement();return t.orgDisplay=i.style.display,k(rc(t))?t.theme.renderUI():L(rc(t))?(n=(e=t).getElement(),(o=rc(e)(e,n)).editorContainer.nodeType&&(o.editorContainer.id=o.editorContainer.id||e.id+"_parent"),o.iframeContainer&&o.iframeContainer.nodeType&&(o.iframeContainer.id=o.iframeContainer.id||e.id+"_iframecontainer"),o.height=o.iframeHeight?o.iframeHeight:n.offsetHeight,o):function(t){var e,n,o=t.getElement();return t.inline?Ww(null):(e=o,n=$w.create("div"),$w.insertAfter(n,e),Ww(n))}(t)},Gw=function(t){var e,n,o,i,r,a,s,l,c;t.fire("ScriptsLoaded"),e=t,n=we.trim(Ql(e)),o=e.ui.registry.getAll().icons,i=wt(wt({},ev.get("default").icons),ev.get(n).icons),it(i,function(t,n){ft(o,n)||e.ui.registry.addIcon(n,t)}),s=rc(r=t),k(s)?(r.settings.theme=qw(s),a=fv.get(s),r.theme=new a(r,fv.urls[s]),r.theme.init&&r.theme.init(r,fv.urls[s]||r.documentBaseUrl.replace(/\/$/,""),r.$)):r.theme={},l=t,c=[],we.each(sc(l).split(/[ ,]/),function(t){Zw(l,c,qw(t))});var u=Vw(t);t.ui=wt(wt({},t.ui),u.api);var d,f,h,p,m={editorContainer:u.editorContainer,iframeContainer:u.iframeContainer};return t.editorContainer=m.editorContainer?m.editorContainer:null,(d=t).contentCSS=d.contentCSS.concat(function(t){var e,n,o=(n=(e=t).getParam("content_css"),k(n)?H(n.split(","),zt):A(n)?n:!1===n||e.inline?[]:["default"]),i=t.editorManager.baseURL+"/skins/content",r="content"+t.editorManager.suffix+".css",a=!0===t.inline;return H(o,function(e){return/^[a-z0-9\-]+$/i.test(e)&&!a?i+"/"+e+"/"+r:t.documentBaseURI.toAbsolute(e)})}(d)),t.inline?jw(t):(p=Uw(f=t,h=m),h.editorContainer&&(Hw.get(h.editorContainer).style.display=f.orgDisplay,f.hidden=Hw.isHidden(h.editorContainer)),f.getElement().style.display="none",Hw.setAttrib(f.id,"aria-hidden","true"),void(p||jw(f)))},Kw=us.DOM,Xw=function(t){return"-"===t.charAt(0)},Yw=function(t,e,n){return C.from(e).filter(function(t){return 0<t.length&&!ev.has(t)}).map(function(e){return{url:t.editorManager.baseURL+"/icons/"+e+"/icons"+n+".js",name:C.some(e)}})},Jw=function(t,e){var n,o,i,r,a,l,c=ps.ScriptLoader;n=c,i=e,r=function(){var n,o;(function(t,e){var n,o=ec(e),i=e.getParam("language_url","","string");!1===ws.hasCode(o)&&"en"!==o&&(n=""!==i?i:e.editorManager.baseURL+"/langs/"+o+".js",t.add(n,s,void 0,function(){gv(e,"LanguageLoadError",vv("language",n,o))}))})(c,t),function(t,e,n){var o,i=Yw(e,"default",n),r=(o=e,C.from(o.getParam("icons_url","","string")).filter(function(t){return 0<t.length}).map(function(t){return{url:t,name:C.none()}}).orThunk(function(){return Yw(e,Ql(e),"")}));U(function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e}([i,r]),function(n){t.add(n.url,s,void 0,function(){var t,o,i;t=e,o=n.url,i=n.name.getOrUndefined(),gv(t,"IconsLoadError",vv("icons",o,i))})})}(c,t,e),n=t,o=e,we.each(n.getParam("external_plugins"),function(t,e){dv.load(e,t,s,void 0,function(){yv(n,t,e)}),n.settings.plugins+=" "+e}),we.each(sc(n).split(/[ ,]/),function(t){var e,i;(t=we.trim(t))&&!dv.urls[t]&&(Xw(t)?(t=t.substr(1,t.length),e=dv.dependencies(t),we.each(e,function(t){var e={prefix:"plugins/",resource:t,suffix:"/plugin"+o+".js"},i=dv.createUrl(e,t);dv.load(i.resource,i,s,void 0,function(){yv(n,i.prefix+i.resource+i.suffix,i.resource)})})):(i={prefix:"plugins/",resource:t,suffix:"/plugin"+o+".js"},dv.load(t,i,s,void 0,function(){yv(n,i.prefix+i.resource+i.suffix,t)})))}),c.loadQueue(function(){t.removed||Gw(t)},t,function(){t.removed||Gw(t)})},l=rc(o=t),k(l)?(Xw(l)||fv.urls.hasOwnProperty(l)||((a=o.getParam("theme_url"))?fv.load(l,o.documentBaseURI.toAbsolute(a)):fv.load(l,"themes/"+l+"/theme"+i+".js")),n.loadQueue(function(){fv.waitFor(l,r)})):r()},Qw=function(t){return L(t)?t:v},tC=function(t,e,n){var o=e(t),i=Qw(n);return o.orThunk(function(){return i(t)?C.none():function(t,e,n){for(var o=t.dom,i=Qw(n);o.parentNode;){o=o.parentNode;var r=xe.fromDom(o),a=e(r);if(a.isSome())return a;if(i(r))break}return C.none()}(t,e,i)})},eC={"font-size":"size","font-family":"face"},nC=function(t){return function(e,n){return C.from(n).map(xe.fromDom).filter(De).bind(function(n){return function(t,e,n){return tC(xe.fromDom(n),function(e){return Vn(e,t).orThunk(function(){return"font"===Pe(e)?dt(eC,t).bind(function(t){return n=e,o=t,C.from($n(n,o));var n,o}):C.none()})},function(t){return Ee(xe.fromDom(e),t)})}(t,e,n.dom).or((o=t,i=n.dom,C.from(us.DOM.getStyle(i,o,!0))));var o,i}).getOr("")}},oC=nC("font-size"),iC=l(function(t){return t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},nC("font-family")),rC=function(t){return mu(t.getBody()).map(function(t){var e=t.container();return Pn(e)?e.parentNode:e})},aC=function(t,e){return n=t,C.from(n.selection.getRng()).bind(function(t){var e=n.getBody();return t.startContainer===e&&0===t.startOffset?C.none():C.from(n.selection.getStart(!0))}).orThunk(d(rC,t)).map(xe.fromDom).filter(De).map(e);var n},sC=function(t,e){if(/^[0-9.]+$/.test(e)){var n=parseInt(e,10);if(1<=n&&n<=7){var o=(a=t,we.explode(a.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))),i=(r=t,we.explode(r.getParam("font_size_classes","")));return i?i[n-1]||e:o[n-1]||e}return e}return e;var r,a},lC=we.each,cC=we.map,uC=we.inArray,dC=(fC.prototype.execCommand=function(t,e,n,o){var i,r,a=!1,s=this;if(!s.editor.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus?(r=s.editor,Cf(r).each(function(t){return r.selection.setRng(t)})):s.editor.focus(),(o=s.editor.fire("BeforeExecCommand",{command:t,ui:e,value:n})).isDefaultPrevented())return!1;var l=t.toLowerCase();if(i=s.commands.exec[l])return i(l,e,n),s.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0;if(lC(this.editor.plugins,function(o){if(o.execCommand&&o.execCommand(t,e,n))return s.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!(a=!0)}),a)return a;if(s.editor.theme&&s.editor.theme.execCommand&&s.editor.theme.execCommand(t,e,n))return s.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0;try{a=s.editor.getDoc().execCommand(t,e,n)}catch(t){}return!!a&&(s.editor.fire("ExecCommand",{command:t,ui:e,value:n}),!0)}},fC.prototype.queryCommandState=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.state[t])return e(t);try{return this.editor.getDoc().queryCommandState(t)}catch(t){}return!1}},fC.prototype.queryCommandValue=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.value[t])return e(t);try{return this.editor.getDoc().queryCommandValue(t)}catch(t){}}},fC.prototype.addCommands=function(t,e){void 0===e&&(e="exec");var n=this;lC(t,function(t,o){lC(o.toLowerCase().split(","),function(o){n.commands[e][o]=t})})},fC.prototype.addCommand=function(t,e,n){var o=this;t=t.toLowerCase(),this.commands.exec[t]=function(t,i,r,a){return e.call(n||o.editor,i,r,a)}},fC.prototype.queryCommandSupported=function(t){if(t=t.toLowerCase(),this.commands.exec[t])return!0;try{return this.editor.getDoc().queryCommandSupported(t)}catch(t){}return!1},fC.prototype.addQueryStateHandler=function(t,e,n){var o=this;t=t.toLowerCase(),this.commands.state[t]=function(){return e.call(n||o.editor)}},fC.prototype.addQueryValueHandler=function(t,e,n){var o=this;t=t.toLowerCase(),this.commands.value[t]=function(){return e.call(n||o.editor)}},fC.prototype.hasCustomCommand=function(t){return t=t.toLowerCase(),!!this.commands.exec[t]},fC.prototype.execNativeCommand=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=null),this.editor.getDoc().execCommand(t,e,n)},fC.prototype.isFormatMatch=function(t){return this.editor.formatter.match(t)},fC.prototype.toggleFormat=function(t,e){this.editor.formatter.toggle(t,e?{value:e}:void 0),this.editor.nodeChanged()},fC.prototype.storeSelection=function(t){this.selectionBookmark=this.editor.selection.getBookmark(t)},fC.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},fC.prototype.setupCommands=function(t){var e=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){t.undoManager.add()},"Cut,Copy,Paste":function(n){var o,i,r=t.getDoc();try{e.execNativeCommand(n)}catch(t){o=!0}"paste"!==n||r.queryCommandEnabled(n)||(o=!0),!o&&r.queryCommandSupported(n)||(i=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),ge.mac&&(i=i.replace(/Ctrl\+/g,"+")),t.notificationManager.open({text:i,type:"error"}))},unlink:function(){var e;t.selection.isCollapsed()?(e=t.dom.getParent(t.selection.getStart(),"a"))&&t.dom.remove(e,!0):t.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var o=n.substring(7);"full"===o&&(o="justify"),lC("left,center,right,justify".split(","),function(e){o!==e&&t.formatter.remove("align"+e)}),"none"!==o&&e.toggleFormat("align"+o)},"InsertUnorderedList,InsertOrderedList":function(n){var o;e.execNativeCommand(n);var i=t.dom.getParent(t.selection.getNode(),"ol,ul");i&&(o=i.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(o.nodeName)&&(e.storeSelection(),t.dom.split(o,i),e.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){e.toggleFormat(t)},"ForeColor,HiliteColor":function(t,n,o){e.toggleFormat(t,o)},FontName:function(e,n,o){!function(t,e){var n,o=sC(t,e);t.formatter.toggle("fontname",{value:(n=o.split(/\s*,\s*/),H(n,function(t){return-1===t.indexOf(" ")||It(t,'"')||It(t,"'")?t:"'"+t+"'"}).join(","))}),t.nodeChanged()}(t,o)},FontSize:function(e,n,o){var i,r;r=o,(i=t).formatter.toggle("fontsize",{value:sC(i,r)}),i.nodeChanged()},LineHeight:function(e,n,o){var i,r;r=o,(i=t).undoManager.transact(function(){i.formatter.toggle("lineheight",{value:String(r)}),i.nodeChanged()})},RemoveFormat:function(e){t.formatter.remove(e)},mceBlockQuote:function(){e.toggleFormat("blockquote")},FormatBlock:function(t,n,o){return e.toggleFormat(o||"p")},mceCleanup:function(){var e=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(e)},mceRemoveNode:function(n,o,i){var r=i||t.selection.getNode();r!==t.getBody()&&(e.storeSelection(),t.dom.remove(r,!0),e.restoreSelection())},mceSelectNodeDepth:function(e,n,o){var i=0;t.dom.getParent(t.selection.getNode(),function(e){if(1===e.nodeType&&i++===o)return t.selection.select(e),!1},t.getBody())},mceSelectNode:function(e,n,o){t.selection.select(o)},mceInsertContent:function(e,n,o){!function(t,e){var n,o,i,r,a="string"!=typeof(n=e)?(o=we.extend({paste:n.paste,data:{paste:n.paste}},n),{content:n.content,details:o}):{content:n,details:{}};i=a.content,r=a.details,cg(t).editor.insertContent(i,r)}(t,o)},mceInsertRawHTML:function(e,n,o){t.selection.setContent("tiny_mce_marker");var i=t.getContent();t.setContent(i.replace(/tiny_mce_marker/g,function(){return o}))},mceInsertNewLine:function(e,n,o){hw(t,o)},mceToggleFormat:function(t,n,o){e.toggleFormat(o)},mceSetContent:function(e,n,o){t.setContent(o)},"Indent,Outdent":function(e){b_(t,e)},mceRepaint:function(){},InsertHorizontalRule:function(){t.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){t.hasVisual=!t.hasVisual,t.addVisual()},mceReplaceContent:function(e,n,o){t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceInsertLink:function(e,n,o){"string"==typeof o&&(o={href:o});var i=t.dom.getParent(t.selection.getNode(),"a");o.href=o.href.replace(/ /g,"%20"),i&&o.href||t.formatter.remove("link"),o.href&&t.formatter.apply("link",o,i)},selectAll:function(){var e,n=t.dom.getParent(t.selection.getStart(),Bn);n&&((e=t.dom.createRng()).selectNodeContents(n),t.selection.setRng(e))},mceNewDocument:function(){t.setContent("")},InsertLineBreak:function(e,n,o){return tw(t,o),!0}});var n=function(e){return function(){var n=t.selection,o=n.isCollapsed()?[t.dom.getParent(n.getNode(),t.dom.isBlock)]:n.getSelectedBlocks(),i=cC(o,function(n){return!!t.formatter.matchNode(n,e)});return-1!==uC(i,!0)}};e.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){return e.isFormatMatch(t)},mceBlockQuote:function(){return e.isFormatMatch("blockquote")},Outdent:function(){return v_(t)},"InsertUnorderedList,InsertOrderedList":function(e){var n=t.dom.getParent(t.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===e&&"UL"===n.tagName||"insertorderedlist"===e&&"OL"===n.tagName)}},"state"),e.addCommands({Undo:function(){t.undoManager.undo()},Redo:function(){t.undoManager.redo()}}),e.addQueryValueHandler("FontName",function(){return aC(e=t,function(t){return iC(e.getBody(),t.dom)}).getOr("");var e},this),e.addQueryValueHandler("FontSize",function(){return aC(e=t,function(t){return oC(e.getBody(),t.dom)}).getOr("");var e},this),e.addQueryValueHandler("LineHeight",function(){return aC(e=t,function(t){var n=xe.fromDom(e.getBody());return tC(t,function(t){return Vn(t,"line-height")},d(Ee,n)).getOrThunk(function(){var e=parseFloat(qn(t,"line-height")),n=parseFloat(qn(t,"font-size"));return String(e/n)})}).getOr("");var e},this)},fC);function fC(t){this.commands={state:{},exec:{},value:{}},this.editor=t,this.setupCommands(t)}var hC="data-mce-contenteditable",pC=function(t,e,n){var o,i;Ns(t,e)&&!1===n?(i=e,As(o=t)?o.dom.classList.remove(i):function(t,e){return i=e,0<(r=Z(Es(n=t,o="class"),function(t){return t!==i})).length?Hn(n,o,r.join(" ")):Zn(n,o),!1;var n,o,i,r}(o,i),function(t){0===(As(t)?t.dom.classList:Es(t,"class")).length&&Zn(t,"class")}(o)):n&&Ps(t,e)},mC=function(t,e,n){try{t.getDoc().execCommand(e,!1,String(n))}catch(t){}},gC=function(t,e){t.dom.contentEditable=e?"true":"false"},vC=function(t,e){var n,o,i,r=xe.fromDom(t.getBody());pC(r,"mce-content-readonly",e),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),i=t,C.from(i.selection.getNode()).each(function(t){t.removeAttribute("data-mce-selected")}),t.readonly=!0,gC(r,!1),U(Ds(r,'*[contenteditable="true"]'),function(t){Hn(t,hC,"true"),gC(t,!1)})):(t.readonly=!1,gC(r,!0),U(Ds(r,"*["+hC+'="true"]'),function(t){Zn(t,hC),gC(t,!0)}),mC(t,"StyleWithCSS",!1),mC(t,"enableInlineTableEditing",!1),mC(t,"enableObjectResizing",!1),(Of(o=t)||function(t){return cf().filter(function(e){return!(void 0!==(n=e.dom.classList)&&(n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body")))&&kf(t,e.dom);var n}).isSome()}(o))&&t.focus(),(n=t).selection.setRng(n.selection.getRng()),t.nodeChanged())},yC=function(t){return t.readonly},_C=function(t){t.parser.addAttributeFilter("contenteditable",function(e){yC(t)&&U(e,function(t){t.attr(hC,t.attr("contenteditable")),t.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(hC,function(e){yC(t)&&U(e,function(t){t.attr("contenteditable",t.attr(hC))})}),t.serializer.addTempAttr(hC)},bC=we.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),wC=(CC.isNative=function(t){return!!bC[t.toLowerCase()]},CC.prototype.fire=function(t,e){var n=t.toLowerCase(),o=e||{};o.type=n,o.target||(o.target=this.scope),o.preventDefault||(o.preventDefault=function(){o.isDefaultPrevented=y},o.stopPropagation=function(){o.isPropagationStopped=y},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=y},o.isDefaultPrevented=v,o.isPropagationStopped=v,o.isImmediatePropagationStopped=v),this.settings.beforeFire&&this.settings.beforeFire(o);var i=this.bindings[n];if(i)for(var r=0,a=i.length;r<a;r++){var s=i[r];if(s.once&&this.off(n,s.func),o.isImmediatePropagationStopped())return o.stopPropagation(),o;if(!1===s.func.call(this.scope,o))return o.preventDefault(),o}return o},CC.prototype.on=function(t,e,n,o){if(!1===e&&(e=v),e){var i={func:e};o&&we.extend(i,o);for(var r=t.toLowerCase().split(" "),a=r.length;a--;){var s=r[a],l=this.bindings[s];l||(l=this.bindings[s]=[],this.toggleEvent(s,!0)),n?l.unshift(i):l.push(i)}}return this},CC.prototype.off=function(t,e){var n=this;if(t)for(var o=t.toLowerCase().split(" "),i=o.length;i--;){var r=o[i],a=this.bindings[r];if(!r)return it(this.bindings,function(t,e){n.toggleEvent(e,!1),delete n.bindings[e]}),this;if(a){if(e)for(var s=a.length;s--;)a[s].func===e&&(a=a.slice(0,s).concat(a.slice(s+1)),this.bindings[r]=a);else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}else it(this.bindings,function(t,e){n.toggleEvent(e,!1)}),this.bindings={};return this},CC.prototype.once=function(t,e,n){return this.on(t,e,n,{once:!0})},CC.prototype.has=function(t){return t=t.toLowerCase(),!(!this.bindings[t]||0===this.bindings[t].length)},CC);function CC(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||v}var xC,SC=function(t){return t._eventDispatcher||(t._eventDispatcher=new wC({scope:t,toggleEvent:function(e,n){wC.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher},TC={fire:function(t,e,n){if(this.removed&&"remove"!==t&&"detach"!==t)return e;var o=SC(this).fire(t,e);if(!1!==n&&this.parent)for(var i=this.parent();i&&!o.isPropagationStopped();)i.fire(t,o,!1),i=i.parent();return o},on:function(t,e,n){return SC(this).on(t,e,n)},off:function(t,e){return SC(this).off(t,e)},once:function(t,e){return SC(this).once(t,e)},hasEventListeners:function(t){return SC(this).has(t)}},kC=us.DOM,EC=function(t,e){if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e))return t.getDoc().documentElement;var n=ic(t);return n?(t.eventRoot||(t.eventRoot=kC.select(n)[0]),t.eventRoot):t.getBody()},AC=function(t,e,n){var o,i,r,a,s;(s=t).hidden||yC(s)?yC(t)&&(o=t,a=(i=n).target,"click"!==i.type||Td.metaKeyPressed(i)||(r=a,null===o.dom.getParent(r,"a"))||i.preventDefault()):t.fire(e,n)},PC=function(t,e){var n;if(t.delegates||(t.delegates={}),!t.delegates[e]&&!t.removed){var o=EC(t,e);if(ic(t)){if(xC||(xC={},t.editorManager.on("removeEditor",function(){t.editorManager.activeEditor||xC&&(it(xC,function(e,n){t.dom.unbind(EC(t,n))}),xC=null)})),xC[e])return;n=function(n){for(var o=n.target,i=t.editorManager.get(),r=i.length;r--;){var a=i[r].getBody();a!==o&&!kC.isChildOf(o,a)||AC(i[r],e,n)}},xC[e]=n,kC.bind(o,e,n)}else n=function(n){AC(t,e,n)},kC.bind(o,e,n),t.delegates[e]=n}},NC=wt(wt({},TC),{bindPendingEventDelegates:function(){var t=this;we.each(t._pendingNativeEvents,function(e){PC(t,e)})},toggleNativeEvent:function(t,e){var n=this;"focus"!==t&&"blur"!==t&&(e?n.initialized?PC(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&(n.dom.unbind(EC(n,t),t,n.delegates[t]),delete n.delegates[t]))},unbindAllNativeEvents:function(){var t=this,e=t.getBody(),n=t.dom;t.delegates&&(it(t.delegates,function(e,n){t.dom.unbind(EC(t,n),n,e)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}}),OC=["design","readonly"],DC=function(t,e,n,o){var i,r=n[e.get()],a=n[o];try{a.activate()}catch(t){return void console.error("problem while activating editor mode "+o+":",t)}r.deactivate(),r.editorReadOnly!==a.editorReadOnly&&vC(t,a.editorReadOnly),e.set(o),i=o,t.fire("SwitchMode",{mode:i})},LC=function(t){var e,n,o=vs("design"),i=vs({design:{activate:s,deactivate:s,editorReadOnly:!1},readonly:{activate:s,deactivate:s,editorReadOnly:!0}});return(e=t).serializer?_C(e):e.on("PreInit",function(){_C(e)}),(n=t).on("ShowCaret",function(t){yC(n)&&t.preventDefault()}),n.on("ObjectSelected",function(t){yC(n)&&t.preventDefault()}),{isReadOnly:function(){return yC(t)},set:function(e){return function(t,e,n,o){if(o!==n.get()){if(!ft(e,o))throw new Error("Editor mode '"+o+"' is invalid");t.initialized?DC(t,n,e,o):t.on("init",function(){return DC(t,n,e,o)})}}(t,i.get(),o,e)},get:function(){return o.get()},register:function(t,e){i.set(function(t,e,n){var o;if(F(OC,e))throw new Error("Cannot override default mode "+e);return wt(wt({},t),((o={})[e]=wt(wt({},n),{deactivate:function(){try{n.deactivate()}catch(t){console.error("problem while deactivating editor mode "+e+":",t)}}}),o))}(i.get(),t,e))}}},RC=we.each,BC=we.explode,IC={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},MC=we.makeMap("alt,ctrl,shift,meta,access"),zC=(FC.prototype.add=function(t,e,n,o){var i=this,r=i.normalizeCommandFunc(n);return RC(BC(we.trim(t)),function(t){var n=i.createShortcut(t,e,r,o);i.shortcuts[n.id]=n}),!0},FC.prototype.remove=function(t){var e=this.createShortcut(t);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)},FC.prototype.normalizeCommandFunc=function(t){var e=this,n=t;return"string"==typeof n?function(){e.editor.execCommand(n,!1,null)}:we.isArray(n)?function(){e.editor.execCommand(n[0],n[1],n[2])}:n},FC.prototype.parseShortcut=function(t){var e,n={};RC(BC(t.toLowerCase(),"+"),function(t){t in MC?n[t]=!0:/^[0-9]{2,}$/.test(t)?n.keyCode=parseInt(t,10):(n.charCode=t.charCodeAt(0),n.keyCode=IC[t]||t.toUpperCase().charCodeAt(0))});var o=[n.keyCode];for(e in MC)n[e]?o.push(e):n[e]=!1;return n.id=o.join(","),n.access&&(n.alt=!0,ge.mac?n.ctrl=!0:n.shift=!0),n.meta&&(ge.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},FC.prototype.createShortcut=function(t,e,n,o){var i=we.map(BC(t,">"),this.parseShortcut);return i[i.length-1]=we.extend(i[i.length-1],{func:n,scope:o||this.editor}),we.extend(i[0],{desc:this.editor.translate(e),subpatterns:i.slice(1)})},FC.prototype.hasModifier=function(t){return t.altKey||t.ctrlKey||t.metaKey},FC.prototype.isFunctionKey=function(t){return"keydown"===t.type&&112<=t.keyCode&&t.keyCode<=123},FC.prototype.matchShortcut=function(t,e){return!!e&&e.ctrl===t.ctrlKey&&e.meta===t.metaKey&&e.alt===t.altKey&&e.shift===t.shiftKey&&!!(t.keyCode===e.keyCode||t.charCode&&t.charCode===e.charCode)&&(t.preventDefault(),!0)},FC.prototype.executeShortcutAction=function(t){return t.func?t.func.call(t.scope):null},FC);function FC(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;var e=this;t.on("keyup keypress keydown",function(t){!e.hasModifier(t)&&!e.isFunctionKey(t)||t.isDefaultPrevented()||(RC(e.shortcuts,function(n){if(e.matchShortcut(t,n))return e.pendingPatterns=n.subpatterns.slice(0),"keydown"===t.type&&e.executeShortcutAction(n),!0}),e.matchShortcut(t,e.pendingPatterns[0])&&(1===e.pendingPatterns.length&&"keydown"===t.type&&e.executeShortcutAction(e.pendingPatterns[0]),e.pendingPatterns.shift()))})}var jC=function(){var t,e,n,o,i,r,a,s,l=(e={},n={},o={},i={},r={},a={},{addButton:(s=function(t,e){return function(n,o){return t[n.toLowerCase()]=wt(wt({},o),{type:e})}})(t={},"button"),addGroupToolbarButton:s(t,"grouptoolbarbutton"),addToggleButton:s(t,"togglebutton"),addMenuButton:s(t,"menubutton"),addSplitButton:s(t,"splitbutton"),addMenuItem:s(e,"menuitem"),addNestedMenuItem:s(e,"nestedmenuitem"),addToggleMenuItem:s(e,"togglemenuitem"),addAutocompleter:s(n,"autocompleter"),addContextMenu:s(i,"contextmenu"),addContextToolbar:s(r,"contexttoolbar"),addContextForm:s(r,"contextform"),addSidebar:s(a,"sidebar"),addIcon:function(t,e){return o[t.toLowerCase()]=e},getAll:function(){return{buttons:t,menuItems:e,icons:o,popups:n,contextMenus:i,contextToolbars:r,sidebars:a}}});return{addAutocompleter:l.addAutocompleter,addButton:l.addButton,addContextForm:l.addContextForm,addContextMenu:l.addContextMenu,addContextToolbar:l.addContextToolbar,addIcon:l.addIcon,addMenuButton:l.addMenuButton,addMenuItem:l.addMenuItem,addNestedMenuItem:l.addNestedMenuItem,addSidebar:l.addSidebar,addSplitButton:l.addSplitButton,addToggleButton:l.addToggleButton,addGroupToolbarButton:l.addGroupToolbarButton,addToggleMenuItem:l.addToggleMenuItem,getAll:l.getAll}},HC=we.each,UC=we.trim,$C="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),ZC={ftp:21,http:80,https:443,mailto:25},qC=(WC.parseDataUri=function(t){var e,n=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(e=o[1]),{type:e,data:n[1]}},WC.getDocumentBaseUrl=function(t){var e=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?t.href:t.protocol+"//"+t.host+t.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},WC.prototype.setPath=function(t){var e=/^(.*?)\/?(\w+)?$/.exec(t);this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},WC.prototype.toRelative=function(t){var e;if("./"===t)return t;var n=new WC(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();var o=this.getURI(),i=n.getURI();return o===i||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===i?o:(e=this.toRelPath(this.path,n.path),n.query&&(e+="?"+n.query),n.anchor&&(e+="#"+n.anchor),e)},WC.prototype.toAbsolute=function(t,e){var n=new WC(t,{base_uri:this});return n.getURI(e&&this.isSameOrigin(n))},WC.prototype.isSameOrigin=function(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;var e=ZC[this.protocol];if(e&&(this.port||e)==(t.port||e))return!0}return!1},WC.prototype.toRelPath=function(t,e){var n,o,i=0,r="",a=t.substring(0,t.lastIndexOf("/")).split("/"),s=e.split("/");if(a.length>=s.length)for(n=0,o=a.length;n<o;n++)if(n>=s.length||a[n]!==s[n]){i=n+1;break}if(a.length<s.length)for(n=0,o=s.length;n<o;n++)if(n>=a.length||a[n]!==s[n]){i=n+1;break}if(1===i)return e;for(n=0,o=a.length-(i-1);n<o;n++)r+="../";for(n=i-1,o=s.length;n<o;n++)r+=n!==i-1?"/"+s[n]:s[n];return r},WC.prototype.toAbsPath=function(t,e){var n,o,i=0,r=[],a=/\/$/.test(e)?"/":"",s=t.split("/"),l=e.split("/");for(HC(s,function(t){t&&r.push(t)}),s=r,n=l.length-1,r=[];0<=n;n--)0!==l[n].length&&"."!==l[n]&&(".."!==l[n]?0<i?i--:r.push(l[n]):i++);return 0!==(o=(n=s.length-i)<=0?Y(r).join("/"):s.slice(0,n).join("/")+"/"+Y(r).join("/")).indexOf("/")&&(o="/"+o),a&&o.lastIndexOf("/")!==o.length-1&&(o+=a),o},WC.prototype.getURI=function(t){var e;return void 0===t&&(t=!1),this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source},WC);function WC(t,e){t=UC(t),this.settings=e||{};var n,o,i,r,a=this.settings.base_uri,s=this;/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)?s.source=t:(n=0===t.indexOf("//"),0!==t.indexOf("/")||n||(t=(a&&a.protocol||"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(o=this.settings.base_uri?this.settings.base_uri.path:new WC(document.location.href).directory,t=this.settings.base_uri&&""==this.settings.base_uri.protocol?"//mce_host"+s.toAbsPath(o,t):(i=/([^#?]*)([#?]?.*)/.exec(t),(a&&a.protocol||"http")+"://mce_host"+s.toAbsPath(o,i[1])+i[2])),t=t.replace(/@@/g,"(mce_at)"),r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),HC($C,function(t,e){var n=(n=r[e])&&n.replace(/\(mce_at\)/g,"@@");s[t]=n}),a&&(s.protocol||(s.protocol=a.protocol),s.userInfo||(s.userInfo=a.userInfo),s.port||"mce_host"!==s.host||(s.port=a.port),s.host&&"mce_host"!==s.host||(s.host=a.host),s.source=""),n&&(s.protocol=""))}var VC=us.DOM,GC=we.extend,KC=we.each,XC=we.resolve,YC=ge.ie,JC=(QC.prototype.render=function(){!function(t){var e=t.id;ws.setCode(ec(t));var n,o,i,r,a,s=function(){Kw.unbind(window,"ready",s),t.render()};mr.Event.domLoaded?t.getElement()&&ge.contentEditable&&(n=xe.fromDom(t.getElement()),o=W(n.dom.attributes,function(t,e){return t[e.name]=e.value,t},{}),t.on("remove",function(){$(n.dom.attributes,function(t){return Zn(n,t.name),0}),Un(n,o)}),t.ui.styleSheetLoader=(i=n,r=t,zo.forElement(i,{contentCssCors:r.getParam("content_css_cors"),referrerPolicy:tc(r)})),t.getParam("inline")?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden"),(a=t.getElement().form||Kw.getParent(e,"form"))&&(t.formElement=a,t.getParam("hidden_input")&&!An(t.getElement())&&(Kw.insertAfter(Kw.create("input",{type:"hidden",name:e}),e),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},Kw.bind(a,"submit reset",t.formEventDelegate),t.on("reset",function(){t.resetContent()}),!t.getParam("submit_patch")||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)})),t.windowManager=hv(t),t.notificationManager=uv(t),"xml"===t.getParam("encoding")&&t.on("GetContent",function(t){t.save&&(t.content=Kw.encode(t.content))}),t.getParam("add_form_submit_trigger")&&t.on("submit",function(){t.initialized&&t.save()}),t.getParam("add_unload_trigger")&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),Jw(t,t.suffix)):Kw.bind(window,"ready",s)}(this)},QC.prototype.focus=function(t){var e;e=t,this.removed||(e?Df:function(t){var e=t.selection,n=t.getBody(),o=e.getRng();t.quirks.refreshContentEditable(),void 0!==t.bookmark&&!1===Of(t)&&Cf(t).each(function(e){t.selection.setRng(e),o=e});var i,r,a=(i=t,r=e.getNode(),i.dom.getParent(r,function(t){return"true"===i.dom.getContentEditable(t)}));if(t.$.contains(n,a))return Nf(a),Pf(t,o),void Df(t);t.inline||(ge.opera||Nf(n),t.getWin().focus()),(ge.gecko||t.inline)&&(Nf(n),Pf(t,o)),Df(t)})(this)},QC.prototype.hasFocus=function(){return Of(this)},QC.prototype.execCallback=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o,i=this.settings[t];if(i)return this.callbackLookup&&(o=this.callbackLookup[t])&&(i=o.func,o=o.scope),"string"==typeof i&&(o=(o=i.replace(/\.\w+$/,""))?XC(o):0,i=XC(i),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[t]={func:i,scope:o}),i.apply(o||this,e)},QC.prototype.translate=function(t){return ws.translate(t)},QC.prototype.getParam=function(t,e,n){return function(t,e,n,o){var i,r,a,s=e in t.settings?t.settings[e]:n;return"hash"===o?(a={},"string"==typeof(r=s)?U(0<r.indexOf("=")?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(t){var e=t.split("=");1<e.length?a[we.trim(e[0])]=we.trim(e[1]):a[we.trim(e[0])]=we.trim(e[0])}):a=r,a):"string"===o?tv(k,t,e).getOr(n):"number"===o?tv(R,t,e).getOr(n):"boolean"===o?tv(N,t,e).getOr(n):"object"===o?tv(E,t,e).getOr(n):"array"===o?tv(A,t,e).getOr(n):"string[]"===o?tv((i=k,function(t){return A(t)&&X(t,i)}),t,e).getOr(n):"function"===o?tv(L,t,e).getOr(n):s}(this,t,e,n)},QC.prototype.hasPlugin=function(t,e){return!(!F(sc(this).split(/[ ,]/),t)||e&&void 0===dv.get(t))},QC.prototype.nodeChanged=function(t){this._nodeChangeDispatcher.nodeChanged(t)},QC.prototype.addCommand=function(t,e,n){this.editorCommands.addCommand(t,e,n)},QC.prototype.addQueryStateHandler=function(t,e,n){this.editorCommands.addQueryStateHandler(t,e,n)},QC.prototype.addQueryValueHandler=function(t,e,n){this.editorCommands.addQueryValueHandler(t,e,n)},QC.prototype.addShortcut=function(t,e,n,o){this.shortcuts.add(t,e,n,o)},QC.prototype.execCommand=function(t,e,n,o){return this.editorCommands.execCommand(t,e,n,o)},QC.prototype.queryCommandState=function(t){return this.editorCommands.queryCommandState(t)},QC.prototype.queryCommandValue=function(t){return this.editorCommands.queryCommandValue(t)},QC.prototype.queryCommandSupported=function(t){return this.editorCommands.queryCommandSupported(t)},QC.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(VC.show(this.getContainer()),VC.hide(this.id)),this.load(),this.fire("show"))},QC.prototype.hide=function(){var t=this,e=t.getDoc();t.hidden||(YC&&e&&!t.inline&&e.execCommand("SelectAll"),t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(VC.hide(t.getContainer()),VC.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.fire("hide"))},QC.prototype.isHidden=function(){return!!this.hidden},QC.prototype.setProgressState=function(t,e){this.fire("ProgressState",{state:t,time:e})},QC.prototype.load=function(t){var e=this.getElement();if(this.removed)return"";if(e){(t=t||{}).load=!0;var n=An(e)?e.value:e.innerHTML,o=this.setContent(n,t);return t.element=e,t.no_events||this.fire("LoadContent",t),t.element=e=null,o}},QC.prototype.save=function(t){var e,n,o=this,i=o.getElement();if(i&&o.initialized&&!o.removed)return(t=t||{}).save=!0,t.element=i,t.content=o.getContent(t),t.no_events||o.fire("SaveContent",t),"raw"===t.format&&o.fire("RawSaveContent",t),e=t.content,An(i)?i.value=e:(!t.is_removing&&o.inline||(i.innerHTML=e),(n=VC.getParent(o.id,"form"))&&KC(n.elements,function(t){if(t.name===o.id)return t.value=e,!1})),t.element=i=null,!1!==t.set_dirty&&o.setDirty(!1),e},QC.prototype.setContent=function(t,e){return zg(this,t,e)},QC.prototype.getContent=function(t){return function(t,e){var n,o;return void 0===e&&(e={}),n=e,o=e.format?e.format:"html",cg(t).editor.getContent(n,o)}(this,t)},QC.prototype.insertContent=function(t,e){e&&(t=GC({content:t},e)),this.execCommand("mceInsertContent",!1,t)},QC.prototype.resetContent=function(t){void 0===t?zg(this,this.startContent,{format:"raw"}):zg(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},QC.prototype.isDirty=function(){return!this.isNotDirty},QC.prototype.setDirty=function(t){var e=!this.isNotDirty;this.isNotDirty=!t,t&&t!==e&&this.fire("dirty")},QC.prototype.getContainer=function(){return this.container||(this.container=VC.get(this.editorContainer||this.id+"_parent")),this.container},QC.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},QC.prototype.getElement=function(){return this.targetElm||(this.targetElm=VC.get(this.id)),this.targetElm},QC.prototype.getWin=function(){var t;return this.contentWindow||(t=this.iframeElement)&&(this.contentWindow=t.contentWindow),this.contentWindow},QC.prototype.getDoc=function(){var t;return this.contentDocument||(t=this.getWin())&&(this.contentDocument=t.document),this.contentDocument},QC.prototype.getBody=function(){var t=this.getDoc();return this.bodyElement||(t?t.body:null)},QC.prototype.convertURL=function(t,e,n){var o=this.settings;return o.urlconverter_callback?this.execCallback("urlconverter_callback",t,n,!0,e):!o.convert_urls||n&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length?t:o.relative_urls?this.documentBaseURI.toRelative(t):t=this.documentBaseURI.toAbsolute(t,o.remove_script_host)},QC.prototype.addVisual=function(t){var e,n=this,o=n.settings,i=n.dom;t=t||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=o.visual),KC(i.select("table,a",t),function(t){var r;switch(t.nodeName){case"TABLE":return e=o.visual_table_class||"mce-item-table",void((r=i.getAttrib(t,"border"))&&"0"!==r||!n.hasVisual?i.removeClass(t,e):i.addClass(t,e));case"A":return void(i.getAttrib(t,"href")||(r=i.getAttrib(t,"name")||t.id,e=o.visual_anchor_class||"mce-item-anchor",r&&n.hasVisual?i.addClass(t,e):i.removeClass(t,e)))}}),n.fire("VisualAid",{element:t,hasVisual:n.hasVisual})},QC.prototype.remove=function(){var t,e,n,o,i,r;(t=this).removed||(e=t._selectionOverrides,n=t.editorUpload,o=t.getBody(),i=t.getElement(),o&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&i&&Fg.remove(i.nextSibling),t.fire("remove"),t.editorManager.remove(t),!t.inline&&o&&(r=t,Fg.setStyle(r.id,"display",r.orgDisplay)),t.fire("detach"),Fg.remove(t.getContainer()),jg(e),jg(n),t.destroy())},QC.prototype.destroy=function(t){!function(t,e){var n,o,i,r=t.selection,a=t.dom;t.destroyed||(e||t.removed?(e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),jg(r),jg(a)),(o=(n=t).formElement)&&(o._mceOldSubmit&&(o.submit=o._mceOldSubmit,o._mceOldSubmit=null),Fg.unbind(o,"submit reset",n.formEventDelegate)),(i=t).contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null,i.selection&&(i.selection=i.selection.win=i.selection.dom=i.selection.dom.doc=null),t.destroyed=!0):t.remove())}(this,t)},QC.prototype.uploadImages=function(t){return this.editorUpload.uploadImages(t)},QC.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},QC.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},QC.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},QC.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},QC.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},QC);function QC(t,e,n){var o=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,GC(this,NC),this.settings=Qg(this,t,this.documentBaseUrl,n.defaultSettings,e),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(ps.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),us.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),Ss.languageLoad=this.settings.language_load,Ss.baseURL=n.baseURL,this.id=t,this.setDirty(!1),this.documentBaseURI=new qC(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new zC(this),this.editorCommands=new dC(this),this.settings.cache_suffix&&(ge.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:jC(),styleSheetLoader:void 0,show:s,hide:s};var i=LC(this);this.mode=i,this.setMode=i.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=es.overrideDefaults(function(){return{context:o.inline?o.getBody():o.getDoc(),element:o.getBody()}})}var tx,ex=us.DOM,nx=we.explode,ox=we.each,ix=we.extend,rx=0,ax=!1,sx=[],lx=[],cx=function(t){var e=t.type;ox(hx.get(),function(n){switch(e){case"scroll":n.fire("ScrollWindow",t);break;case"resize":n.fire("ResizeWindow",t)}})},ux=function(t){t!==ax&&(t?es(window).on("resize scroll",cx):es(window).off("resize scroll",cx),ax=t)},dx=function(t){var e=lx;delete sx[t.id];for(var n=0;n<sx.length;n++)if(sx[n]===t){sx.splice(n,1);break}return lx=Z(lx,function(e){return t!==e}),hx.activeEditor===t&&(hx.activeEditor=0<lx.length?lx[0]:null),hx.focusedEditor===t&&(hx.focusedEditor=null),e.length!==lx.length},fx="CSS1Compat"!==document.compatMode,hx=wt(wt({},TC),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:es,majorVersion:"5",minorVersion:"5.1",releaseDate:"2020-10-01",editors:sx,i18n:ws,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var t,e="",n=qC.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));var o,i=window.tinymce||window.tinyMCEPreInit;if(i)t=i.base||i.baseURL,e=i.suffix;else{for(var r,a=document.getElementsByTagName("script"),s=0;s<a.length;s++)if(""!==(r=a[s].src||"")){var l=r.substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==l.indexOf(".min")&&(e=".min"),t=r.substring(0,r.lastIndexOf("/"));break}}!t&&document.currentScript&&(-1!==(r=document.currentScript.src).indexOf(".min")&&(e=".min"),t=r.substring(0,r.lastIndexOf("/")))}this.baseURL=new qC(n).toAbsolute(t),this.documentBaseURL=n,this.baseURI=new qC(this.baseURL),this.suffix=e,(o=this).on("AddEditor",d(Ef,o)),o.on("RemoveEditor",d(Af,o))},overrideDefaults:function(t){var e=t.base_url;e&&this._setBaseUrl(e);var n=t.suffix;t.suffix&&(this.suffix=n);var o=(this.defaultSettings=t).plugin_base_urls;void 0!==o&&it(o,function(t,e){Ss.PluginManager.urls[e]=t})},init:function(t){var e,n=this,o=we.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=function(t){var e=t.id;return e||(e=dt(t,"name").filter(function(t){return!ex.get(t)}).getOrThunk(ex.uniqueId),t.setAttribute("id",e)),e},r=function(t,e){return e.constructor===RegExp?e.test(t.className):ex.hasClass(t,e)},a=function(t){e=t},s=function(){var e,l=0,c=[],u=function(t,o,i){var r=new JC(t,o,n);c.push(r),r.on("init",function(){++l===e.length&&a(c)}),r.targetElm=r.targetElm||i,r.render()};ex.unbind(window,"ready",s),function(e){var o=t.onpageload;o&&o.apply(n,Array.prototype.slice.call(arguments,2))}("onpageload"),e=es.unique(function(t){var e=[];if(ge.browser.isIE()&&ge.browser.version.major<11)return _v("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(fx)return _v("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(t.types)return ox(t.types,function(t){e=e.concat(ex.select(t.selector))}),e;if(t.selector)return ex.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":var n=t.elements||"";0<n.length&&ox(nx(n),function(t){var n=ex.get(t);n?e.push(n):ox(document.forms,function(n){ox(n.elements,function(n){n.name===t&&(t="mce_editor_"+rx++,ex.setAttrib(n,"id",t),e.push(n))})})});break;case"textareas":case"specific_textareas":ox(ex.select("textarea"),function(n){t.editor_deselector&&r(n,t.editor_deselector)||t.editor_selector&&!r(n,t.editor_selector)||e.push(n)})}return e}(t)),t.types?ox(t.types,function(n){we.each(e,function(e){return!ex.is(e,n.selector)||(u(i(e),ix({},t,n),e),!1)})}):(we.each(e,function(t){var e;(e=n.get(t.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(dx(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null)}),0===(e=we.grep(e,function(t){return!n.get(t.id)})).length?a([]):ox(e,function(e){var n;n=e,t.inline&&n.tagName.toLowerCase()in o?_v("Could not initialize inline editor on invalid inline target element",e):u(i(e),t,e)}))};return n.settings=t,ex.bind(window,"ready",s),new So(function(t){e?t(e):a=function(e){t(e)}})},get:function(t){return 0===arguments.length?lx.slice(0):k(t)?V(lx,function(e){return e.id===t}).getOr(null):R(t)&&lx[t]?lx[t]:null},add:function(t){var e=this;return sx[t.id]===t||(null===e.get(t.id)&&("length"!==t.id&&(sx[t.id]=t),sx.push(t),lx.push(t)),ux(!0),e.activeEditor=t,e.fire("AddEditor",{editor:t}),tx||(tx=function(t){var n=e.fire("BeforeUnload");if(n.returnValue)return t.preventDefault(),t.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",tx))),t},createEditor:function(t,e){return this.add(new JC(t,e,this))},remove:function(t){var e,n,o=this;if(t){if(!k(t))return n=t,P(o.get(n.id))?null:(dx(n)&&o.fire("RemoveEditor",{editor:n}),0===lx.length&&window.removeEventListener("beforeunload",tx),n.remove(),ux(0<lx.length),n);ox(ex.select(t),function(t){(n=o.get(t.id))&&o.remove(n)})}else for(e=lx.length-1;0<=e;e--)o.remove(lx[e])},execCommand:function(t,e,n){var o=this.get(n);switch(t){case"mceAddEditor":return this.get(n)||new JC(n,this.settings,this).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(this.execCommand("mceAddEditor",0,n),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(t,e,n)},triggerSave:function(){ox(lx,function(t){t.save()})},addI18n:function(t,e){ws.add(t,e)},translate:function(t){return ws.translate(t)},setActive:function(t){var e=this.activeEditor;this.activeEditor!==t&&(e&&e.fire("deactivate",{relatedTarget:t}),t.fire("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl:function(t){this.baseURL=new qC(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new qC(this.baseURL)}});hx.setup();var px,mx,gx,vx,yx=Math.min,_x=Math.max,bx=Math.round,wx=function(t,e,n){var o=e.x,i=e.y,r=t.w,a=t.h,s=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(i+=l),"r"===c[1]&&(o+=s),"c"===c[0]&&(i+=bx(l/2)),"c"===c[1]&&(o+=bx(s/2)),"b"===c[3]&&(i-=a),"r"===c[4]&&(o-=r),"c"===c[3]&&(i-=bx(a/2)),"c"===c[4]&&(o-=bx(r/2)),Cx(o,i,r,a)},Cx=function(t,e,n,o){return{x:t,y:e,w:n,h:o}},xx={inflate:function(t,e,n){return Cx(t.x-e,t.y-n,t.w+2*e,t.h+2*n)},relativePosition:wx,findBestRelativePosition:function(t,e,n,o){for(var i,r=0;r<o.length;r++)if((i=wx(t,e,o[r])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return o[r];return null},intersect:function(t,e){var n=_x(t.x,e.x),o=_x(t.y,e.y),i=yx(t.x+t.w,e.x+e.w),r=yx(t.y+t.h,e.y+e.h);return i-n<0||r-o<0?null:Cx(n,o,i-n,r-o)},clamp:function(t,e,n){var o=t.x,i=t.y,r=t.x+t.w,a=t.y+t.h,s=e.x+e.w,l=e.y+e.h,c=_x(0,e.x-o),u=_x(0,e.y-i),d=_x(0,r-s),f=_x(0,a-l);return o+=c,i+=u,n&&(r+=c,a+=u,o-=d,i-=f),Cx(o,i,(r-=d)-o,(a-=f)-i)},create:Cx,fromClientRect:function(t){return Cx(t.left,t.top,t.width,t.height)}},Sx=(px={},mx={},{load:function(t,e){var n='Script at URL "'+e+'" failed to load',o='Script at URL "'+e+"\" did not call `tinymce.Resource.add('"+t+"', data)` within 1 second";if(void 0!==px[t])return px[t];var i=new So(function(i,r){var a=function(t,e,n){void 0===n&&(n=1e3);var o=!1,i=null,r=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o||(o=!0,null!==i&&(clearTimeout(i),i=null),t.apply(null,e))}},a=r(t),s=r(e);return{start:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o||null!==i||(i=setTimeout(function(){return s.apply(null,t)},n))},resolve:a,reject:s}}(i,r);mx[t]=a.resolve,ps.ScriptLoader.loadScript(e,function(){return a.start(o)},function(){return a.reject(n)})});return px[t]=i},add:function(t,e){void 0!==mx[t]&&(mx[t](e),delete mx[t]),px[t]=So.resolve(e)}}),Tx=we.each,kx=we.extend,Ex=function(){};Ex.extend=gx=function(t){var e=this.prototype,n=function(){var t,e,n;if(!vx&&(this.init&&this.init.apply(this,arguments),e=this.Mixins))for(t=e.length;t--;)(n=e[t]).init&&n.init.apply(this,arguments)},o=function(){return this};vx=!0;var i=new this;return vx=!1,t.Mixins&&(Tx(t.Mixins,function(e){for(var n in e)"init"!==n&&(t[n]=e[n])}),e.Mixins&&(t.Mixins=e.Mixins.concat(t.Mixins))),t.Methods&&Tx(t.Methods.split(","),function(e){t[e]=o}),t.Properties&&Tx(t.Properties.split(","),function(e){var n="_"+e;t[e]=function(t){return void 0!==t?(this[n]=t,this):this[n]}}),t.Statics&&Tx(t.Statics,function(t,e){n[e]=t}),t.Defaults&&e.Defaults&&(t.Defaults=kx({},e.Defaults,t.Defaults)),it(t,function(t,n){var o,r;"function"==typeof t&&e[n]?i[n]=(o=n,r=t,function(){var t=this._super;this._super=e[o];var n=r.apply(this,arguments);return this._super=t,n}):i[n]=t}),n.prototype=i,(n.constructor=n).extend=gx,n};var Ax=Math.min,Px=Math.max,Nx=Math.round,Ox={serialize:function(t){var e=JSON.stringify(t);return k(e)?e.replace(/[\u0080-\uFFFF]/g,function(t){var e=t.charCodeAt(0).toString(16);return"\\u"+"0000".substring(e.length)+e}):e},parse:function(t){try{return JSON.parse(t)}catch(t){}}},Dx={callbacks:{},count:0,send:function(t){var e=this,n=us.DOM,o=void 0!==t.count?t.count:e.count,i="tinymce_jsonp_"+o;e.callbacks[o]=function(r){n.remove(i),delete e.callbacks[o],t.callback(r)},n.add(n.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),e.count++}},Lx=wt(wt({},TC),{send:function(t){var e,n=0,o=function(){!t.async||4===e.readyState||1e4<n++?(t.success&&n<1e4&&200===e.status?t.success.call(t.success_scope,""+e.responseText,e,t):t.error&&t.error.call(t.error_scope,1e4<n?"TIMED_OUT":"GENERAL",e,t),e=null):Bo.setTimeout(o,10)};if(t.scope=t.scope||this,t.success_scope=t.success_scope||t.scope,t.error_scope=t.error_scope||t.scope,t.async=!1!==t.async,t.data=t.data||"",Lx.fire("beforeInitialize",{settings:t}),(e=new XMLHttpRequest).overrideMimeType&&e.overrideMimeType(t.content_type),e.open(t.type||(t.data?"POST":"GET"),t.url,t.async),t.crossDomain&&(e.withCredentials=!0),t.content_type&&e.setRequestHeader("Content-Type",t.content_type),t.requestheaders&&we.each(t.requestheaders,function(t){e.setRequestHeader(t.key,t.value)}),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),(e=Lx.fire("beforeSend",{xhr:e,settings:t}).xhr).send(t.data),!t.async)return o();Bo.setTimeout(o,10)}}),Rx=we.extend,Bx=(Ix.sendRPC=function(t){return(new Ix).send(t)},Ix.prototype.send=function(t){var e=t.error,n=t.success,o=Rx(this.settings,t);o.success=function(t,i){void 0===(t=Ox.parse(t))&&(t={error:"JSON Parse error."}),t.error?e.call(o.error_scope||o.scope,t.error,i):n.call(o.success_scope||o.scope,t.result)},o.error=function(t,n){e&&e.call(o.error_scope||o.scope,t,n)},o.data=Ox.serialize({id:t.id||"c"+this.count++,method:t.method,params:t.params}),o.content_type="application/json",Lx.send(o)},Ix);function Ix(t){this.settings=Rx({},t),this.count=0}try{var Mx,zx="__storage_test__";(Mx=window.localStorage).setItem(zx,zx),Mx.removeItem(zx)}catch(t){Mx=function(){return t={},e=[],n={getItem:function(e){return t[e]||null},setItem:function(n,o){e.push(n),t[n]=String(o)},key:function(t){return e[t]},removeItem:function(n){e=e.filter(function(t){return t===n}),delete t[n]},clear:function(){e=[],t={}},length:0},Object.defineProperty(n,"length",{get:function(){return e.length},configurable:!1,enumerable:!1}),n;var t,e,n}()}var Fx,jx={geom:{Rect:xx},util:{Promise:So,Delay:Bo,Tools:we,VK:Td,URI:qC,Class:Ex,EventDispatcher:wC,Observable:TC,I18n:ws,XHR:Lx,JSON:Ox,JSONRequest:Bx,JSONP:Dx,LocalStorage:Mx,Color:function(t){var e={},n=0,o=0,i=0,r=function(t){var r;return"object"==typeof t?"r"in t?(n=t.r,o=t.g,i=t.b):"v"in t&&function(t,e,r){if(t=(parseInt(t,10)||0)%360,e=parseInt(e,10)/100,r=parseInt(r,10)/100,e=Px(0,Ax(e,1)),r=Px(0,Ax(r,1)),0!==e){var a=t/60,s=r*e,l=s*(1-Math.abs(a%2-1)),c=r-s;switch(Math.floor(a)){case 0:n=s,o=l,i=0;break;case 1:n=l,o=s,i=0;break;case 2:n=0,o=s,i=l;break;case 3:n=0,o=l,i=s;break;case 4:n=l,o=0,i=s;break;case 5:n=s,o=0,i=l;break;default:n=o=i=0}n=Nx(255*(n+c)),o=Nx(255*(o+c)),i=Nx(255*(i+c))}else n=o=i=Nx(255*r)}(t.h,t.s,t.v):(r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(t))?(n=parseInt(r[1],10),o=parseInt(r[2],10),i=parseInt(r[3],10)):(r=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(t))?(n=parseInt(r[1],16),o=parseInt(r[2],16),i=parseInt(r[3],16)):(r=/#([0-F])([0-F])([0-F])/gi.exec(t))&&(n=parseInt(r[1]+r[1],16),o=parseInt(r[2]+r[2],16),i=parseInt(r[3]+r[3],16)),n=n<0?0:255<n?255:n,o=o<0?0:255<o?255:o,i=i<0?0:255<i?255:i,e};return t&&r(t),e.toRgb=function(){return{r:n,g:o,b:i}},e.toHsv=function(){return t=n,e=o,r=i,s=0,(l=Ax(t/=255,Ax(e/=255,r/=255)))===(c=Px(t,Px(e,r)))?{h:0,s:0,v:100*(s=l)}:(a=(c-l)/c,{h:Nx(60*((t===l?3:r===l?1:5)-(t===l?e-r:r===l?t-e:r-t)/((s=c)-l))),s:Nx(100*a),v:Nx(100*s)});var t,e,r,a,s,l,c},e.toHex=function(){var t=function(t){return 1<(t=parseInt(t,10).toString(16)).length?t:"0"+t};return"#"+t(n)+t(o)+t(i)},e.parse=r,e}},dom:{EventUtils:mr,Sizzle:ma,DomQuery:es,TreeWalker:Fo,TextSeeker:qs,DOMUtils:us,ScriptLoader:ps,RangeUtils:qd,Serializer:Mg,StyleSheetLoader:Io,ControlSelection:Ed,BookmarkManager:Cd,Selection:gg,Event:mr.Event},html:{Styles:sr,Entities:Gi,Node:Hf,Schema:rr,SaxParser:Xf,DomParser:Rg,Writer:Zf,Serializer:qf},Env:ge,AddOnManager:Ss,Annotator:_d,Formatter:Lv,UndoManager:Rv,EditorCommands:dC,WindowManager:hv,NotificationManager:uv,EditorObservable:NC,Shortcuts:zC,Editor:JC,FocusManager:xf,EditorManager:hx,DOM:us.DOM,ScriptLoader:ps.ScriptLoader,PluginManager:dv,ThemeManager:fv,IconManager:ev,Resource:Sx,trim:we.trim,isArray:we.isArray,is:we.is,toArray:we.toArray,makeMap:we.makeMap,each:we.each,map:we.map,grep:we.grep,inArray:we.inArray,extend:we.extend,create:we.create,walk:we.walk,createNS:we.createNS,resolve:we.resolve,explode:we.explode,_addCacheSuffix:we._addCacheSuffix,isOpera:ge.opera,isWebKit:ge.webkit,isIE:ge.ie,isGecko:ge.gecko,isMac:ge.mac},Hx=we.extend(hx,jx);Fx=Hx,window.tinymce=Fx,window.tinyMCE=Fx,function(t){if("object"==typeof module)try{module.exports=t}catch(t){}}(Hx)}(),function(t){"use strict";var e,n,o,i,r=void 0!==t.window?t.window:Function("return this;")(),a=function(t,e){return{isRequired:t,applyPatch:e}},s=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=e.apply(this,n),r=void 0===i?n:i;return t.apply(this,r)}},l=function(t){return function(){return t}},c=l(!1),u=l(!0),d=function(){return f},f=(e=function(t){return t.isNone()},i={fold:function(t,e){return t()},is:c,isSome:c,isNone:u,getOr:o=function(t){return t},getOrThunk:n=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:o,orThunk:n,map:d,each:function(){},bind:d,exists:c,forall:u,filter:d,equals:e,equals_:e,toArray:function(){return[]},toString:l("none()")},Object.freeze&&Object.freeze(i),i),h=function(t){var e=l(t),n=function(){return i},o=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:u,isNone:c,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return h(e(t))},each:function(e){e(t)},bind:o,exists:o,forall:o,filter:function(e){return e(t)?i:f},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(c,function(e){return n(t,e)})}};return i},p=d,m=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},g=m("object"),v=m("array"),y=m("undefined"),_=m("function"),b=(Array.prototype.slice,Array.prototype.indexOf),w=Array.prototype.push,C=function(t,e){return function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!v(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);w.apply(e,t[n])}return e}(function(t,e){for(var n=t.length,o=new Array(n),i=0;i<n;i++){var r=t[i];o[i]=e(r,i)}return o}(t,e))},x=(_(Array.from)&&Array.from,Object.prototype.hasOwnProperty),S=function(t){return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var o={},i=0;i<e.length;i++){var r=e[i];for(var a in r)x.call(r,a)&&(o[a]=t(o[a],r[a]))}return o}},T=S(function(t,e){return g(t)&&g(e)?T(t,e):e}),k=S(function(t,e){return e}),E=Object.keys,A=Object.hasOwnProperty,P=function(t,e){for(var n=E(t),o=0,i=n.length;o<i;o++){var r=n[o];e(t[r],r)}},N=function(t,e){return O(t,e)?function(t){return null==t?f:h(t)}(t[e]):p()},O=function(t,e){return A.call(t,e)},D=function(t){if(y(t)||""===t)return[];var e=v(t)?C(t,function(t){return t.split(/[\s+,]/)}):t.split(/[\s+,]/);return C(e,function(t){return 0<t.length?[t.trim()]:[]})},L=function(t,e){var n,o,i,r=T(t,e),a=D(e.plugins),s=N(r,"custom_plugin_urls").getOr({}),l=(n=function(t,e){return function(t,e){return n=t,o=e,-1<b.call(n,o);var n,o}(a,e)},o={},i={},P(s,function(t,e){(n(0,e)?o:i)[e]=t}),{t:o,f:i}),c=N(r,"external_plugins").getOr({}),u={};P(l.t,function(t,e){u[e]=t});var d=k(u,c);return k(e,0===E(d).length?{}:{external_plugins:d})},R={getCustomPluginUrls:L,patch:a(function(){return!0},function(t){t.EditorManager.init=s(t.EditorManager.init,function(e){return[L(t.defaultSettings,e)]})})},B=function(t,e){return function(t,e){for(var n=null!=e?e:r,o=0;o<t.length&&null!=n;++o)n=n[t[o]];return n}(t.split("."),e)},I=function(t){return parseInt(t,10)},M=function(t,e){var n=t-e;return 0===n?0:0<n?1:-1},z=function(t,e,n){return{major:t,minor:e,patch:n}},F=function(t){var e=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(t);return e?z(I(e[1]),I(e[2]),I(e[3])):z(0,0,0)},j=function(t,e){return!!t&&-1===function(t,e){var n=M(t.major,e.major);if(0!==n)return n;var o=M(t.minor,e.minor);if(0!==o)return o;var i=M(t.patch,e.patch);return 0!==i?i:0}(F([(n=t).majorVersion,n.minorVersion].join(".").split(".").slice(0,3).join(".")),F(e));var n},H={patch:a(function(t){return j(t,"4.7.0")},function(t){var e;t.EditorManager.init=s(t.EditorManager.init,(e=t.EditorManager,function(t){var n=B("tinymce.util.Tools",r),o=D(t.plugins),i=e.defaultSettings.forced_plugins||[],a=0<i.length?o.concat(i):o;return[n.extend({},t,{plugins:a})]}))})},U=function(){return(new Date).getTime()},$=function(t){t.parentNode.removeChild(t)},Z=function(e,n){var o,i,r=((o=t.document.createElement("div")).style.display="none",o.className="mce-floatpanel",o);t.document.body.appendChild(r),function(e,n,o,i,r){var a,s=U();a=t.setInterval(function(){e()&&(t.clearInterval(a),n()),U()-s>r&&(t.clearInterval(a),o())},i)}((i=r,function(){var e,n,o,r=(e=i,n="position",o=e.currentStyle?e.currentStyle[n]:t.window.getComputedStyle(e,null)[n],o||"").toLowerCase();return"absolute"===r||"fixed"===r}),function(){$(r),e()},function(){$(r),n()},10,5e3)},q=function(t){var e,n,o=B("tinymce.util.URI",r);(e=t.base_url)&&(this.baseURL=new o(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new o(this.baseURL)),n=t.suffix,t.suffix&&(this.suffix=n),this.defaultSettings=t},W=function(t){return[B("tinymce.util.Tools",r).extend({},this.defaultSettings,t)]},V={patch:a(function(t){return"function"!=typeof t.overrideDefaults},function(e){(function(e){e.EditorManager.on("AddEditor",function(e){var n=e.editor,o=n.settings.service_message;o&&Z(function(){!function(t,e){t.notificationManager?t.notificationManager.open({text:e,type:"warning",timeout:0,icon:""}):t.windowManager.alert(e)}(n,n.settings.service_message)},function(){t.alert(o)})})})(e),e.overrideDefaults=q,e.EditorManager.init=s(e.EditorManager.init,W)})},G={patch:a(function(t){return j(t,"4.5.0")},function(t){var e;t.overrideDefaults=s(t.overrideDefaults,(e=t,function(t){var n=t.plugin_base_urls;for(var o in n)e.PluginManager.urls[o]=n[o]}))})};!function(t){!function(t,e){if(t)for(var n=0;n<e.length;n++)e[n].isRequired(t)&&e[n].applyPatch(t)}(t,[V.patch,G.patch,H.patch,R.patch])}(r.tinymce)}(window),tinymce.overrideDefaults({imagetools_proxy:"https://imageproxy.tiny.cloud/2/image",suffix:".min",linkchecker_service_url:"https://hyperlinking.tiny.cloud",spellchecker_rpc_url:"https://spelling.tiny.cloud",spellchecker_api_key:"xkvck8j22kz49focvgs9kk7rads595vxxdze6xj4sgn1d2e5",tinydrive_service_url:"https://catalog.tiny.cloud",api_key:"xkvck8j22kz49focvgs9kk7rads595vxxdze6xj4sgn1d2e5",imagetools_api_key:"xkvck8j22kz49focvgs9kk7rads595vxxdze6xj4sgn1d2e5",tinydrive_api_key:"xkvck8j22kz49focvgs9kk7rads595vxxdze6xj4sgn1d2e5",forced_plugins:["chiffer"],referrer_policy:"origin",content_css_cors:!0,custom_plugin_urls:{},chiffer_snowplow_service_url:"https://sp.tinymce.com/i",mediaembed_api_key:"xkvck8j22kz49focvgs9kk7rads595vxxdze6xj4sgn1d2e5",linkchecker_api_key:"xkvck8j22kz49focvgs9kk7rads595vxxdze6xj4sgn1d2e5",mediaembed_service_url:"https://hyperlinking.tiny.cloud"}),tinymce.baseURL="https://cdn.tiny.cloud/1/xkvck8j22kz49focvgs9kk7rads595vxxdze6xj4sgn1d2e5/tinymce/5.5.1-99",function(){"use strict";function t(){}function e(){return(new Date).getTime()}var n,o,i,r,a=("string",function(t){return t=typeof(e=t),"string"===(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t);var e});i={load:t},i=void 0===(r=function(t){return t=t.api_key,a(t)?t:void 0}(o=tinymce.defaultSettings))?i:((n=function(n,o){var i,r,a;return i=n,r=o,o={send:function(t,n,o){t="?aid="+r+"&tna=tinymce_cloud&p=web&dtm="+n+"&stm="+e()+"&tz="+("undefined"!=typeof Intl?encodeURIComponent(Intl.DateTimeFormat().resolvedOptions().timeZone):"N%2FA")+"&e=se&se_ca="+t;var a=document.createElement("img");a.src=i.chiffer_snowplow_service_url+t,t=function(t){return function(){a.onload=null,a.onerror=null,o(t)}},a.onload=t(!0),a.onerror=t(!1)}},a=o,{sendStat:function(n){return function(){a.send(n,e(),t)}}}}(o,r)).sendStat("script_load")(),{load:function(t){t.once("init",n.sendStat("init")),t.once("focus",n.sendStat("focus")),t.on("ExportPdf",n.sendStat("export_pdf"))}}),tinymce.PluginManager.add("chiffer",i.load)}(),function(t){"use strict";var e=null,n=null;!function(){var e=["webkit","moz","o","ms"],n=t.document.createElement("div"),o=-1;for(o=0;o<e.length&&!t.requestAnimationFrame;o++)t.requestAnimationFrame=t[e[o]+"RequestAnimationFrame"];void 0===n.nextElementSibling&&Object.defineProperty(t.Element.prototype,"nextElementSibling",{get:function(){for(var t=this.nextSibling;t;){if(1===t.nodeType)return t;t=t.nextSibling}return null}}),function(t){t.matches=t.matches||t.machesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){return Array.prototype.indexOf.call(this.parentElement.querySelectorAll(t),this)>-1}}(t.Element.prototype),Object.keys||(Object.keys=function(){var t,e,n,o=Object.prototype.hasOwnProperty;return t=!{toString:null}.propertyIsEnumerable("toString"),n=(e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(i){var r=[],a="",s=-1;if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");for(a in i)o.call(i,a)&&r.push(a);if(t)for(s=0;s<n;s++)o.call(i,e[s])&&r.push(e[s]);return r}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),"function"!=typeof Object.create&&(Object.create=function(t){var e=function(){};return function(t,n){if(t!==Object(t)&&null!==t)throw TypeError("Argument must be an object, or null");e.prototype=t||{};var o=new e;return e.prototype=null,void 0!==n&&Object.defineProperties(o,n),null===t&&(o.__proto__=null),o}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e,n,o,i;if(null===this)throw new TypeError;if(0===(i=(o=Object(this)).length>>>0))return-1;if(e=0,arguments.length>1&&((e=Number(arguments[1]))!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),e>=i)return-1;for(n=e>=0?e:Math.max(i-Math.abs(e),0);n<i;n++)if(n in o&&o[n]===t)return n;return-1}),Function.prototype.bind||(Function.prototype.bind=function(t){var e,n,o,i;if("function"!=typeof this)throw new TypeError;return e=Array.prototype.slice.call(arguments,1),n=this,o=function(){},i=function(){return n.apply(this instanceof o?this:t,e.concat(Array.prototype.slice.call(arguments)))},this.prototype&&(o.prototype=this.prototype),i.prototype=new o,i}),t.Element.prototype.dispatchEvent||(t.Element.prototype.dispatchEvent=function(t){try{return this.fireEvent("on"+t.type,t)}catch(t){}})}(),(e=function(o,i,r){var a=null,s=!1,l=null,c=null,u=null,d=[],f="",h=[],p=-1;if(u=r||t.document,(s=arguments[3])&&(s="boolean"==typeof s),"string"==typeof o)h=u.querySelectorAll(o);else if(o&&"object"==typeof o&&n.isElement(o,u))h=[o];else{if(!o||"object"!=typeof o||!o.length)throw new Error(e.messages.errorFactoryInvalidContainer());h=o}if(h.length<1)throw new Error(e.messages.errorFactoryContainerNotFound());for(p=0;(a=h[p])&&(!(p>0)||s);p++)a.id?f=a.id:(f="MixItUp"+n.randomHex(),a.id=f),e.instances[f]instanceof e.Mixer?(l=e.instances[f],(!i||i&&i.debug&&!1!==i.debug.showWarnings)&&console.warn(e.messages.warningFactoryPreexistingInstance())):((l=new e.Mixer).attach(a,u,f,i),e.instances[f]=l),c=new e.Facade(l),i&&i.debug&&i.debug.enable?d.push(l):d.push(c);return s?new e.Collection(d):d[0]}).use=function(t){e.Base.prototype.callActions.call(e,"beforeUse",arguments),"function"==typeof t&&"mixitup-extension"===t.TYPE?void 0===e.extensions[t.NAME]&&(t(e),e.extensions[t.NAME]=t):t.fn&&t.fn.jquery&&(e.libraries.$=t),e.Base.prototype.callActions.call(e,"afterUse",arguments)},e.instances={},e.extensions={},e.libraries={},n={hasClass:function(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){this.hasClass(t,e)||(t.className+=t.className?" "+e:e)},removeClass:function(t,e){if(this.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ").trim()}},extend:function(t,e,n,o){var i=[],r="",a=-1;n=n||!1,o=o||!1;try{if(Array.isArray(e))for(a=0;a<e.length;a++)i.push(a);else e&&(i=Object.keys(e));for(a=0;a<i.length;a++)r=i[a],!n||"object"!=typeof e[r]||this.isElement(e[r])?t[r]=e[r]:Array.isArray(e[r])?(t[r]||(t[r]=[]),this.extend(t[r],e[r],n,o)):(t[r]||(t[r]={}),this.extend(t[r],e[r],n,o))}catch(e){if(!o)throw e;this.handleExtendError(e,t)}return t},handleExtendError:function(t,n){var o=null,i="",r="",a="",s="",l="",c=-1,u=-1;if(t instanceof TypeError&&(o=/property "?(\w*)"?[,:] object/i.exec(t.message))){for(l in i=o[1],n){for(u=0;u<i.length&&i.charAt(u)===l.charAt(u);)u++;u>c&&(c=u,s=l)}throw c>1&&(a=e.messages.errorConfigInvalidPropertySuggestion({probableMatch:s})),r=e.messages.errorConfigInvalidProperty({erroneous:i,suggestion:a}),new TypeError(r)}throw t},template:function(t){for(var e=/\${([\w]*)}/g,n={},o=null;o=e.exec(t);)n[o[1]]=new RegExp("\\${"+o[1]+"}","g");return function(e){var o="",i=t;for(o in e=e||{},n)i=i.replace(n[o],void 0!==e[o]?e[o]:"");return i}},on:function(e,n,o,i){e&&(e.addEventListener?e.addEventListener(n,o,i):e.attachEvent&&(e["e"+n+o]=o,e[n+o]=function(){e["e"+n+o](t.event)},e.attachEvent("on"+n,e[n+o])))},off:function(t,e,n){t&&(t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&(t.detachEvent("on"+e,t[e+n]),t[e+n]=null))},getCustomEvent:function(e,n,o){var i=null;return o=o||t.document,"function"==typeof t.CustomEvent?i=new t.CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):"function"==typeof o.createEvent?(i=o.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n):((i=o.createEventObject()).type=e,i.returnValue=!1,i.cancelBubble=!1,i.detail=n),i},getOriginalEvent:function(t){return t.touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t},index:function(t,e){for(var n=0;null!==(t=t.previousElementSibling);)e&&!t.matches(e)||++n;return n},camelCase:function(t){return t.toLowerCase().replace(/([_-][a-z])/g,function(t){return t.toUpperCase().replace(/[_-]/,"")})},pascalCase:function(t){return(t=this.camelCase(t)).charAt(0).toUpperCase()+t.slice(1)},dashCase:function(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()},isElement:function(e,n){return n=n||t.document,!!(t.HTMLElement&&e instanceof t.HTMLElement)||!!(n.defaultView&&n.defaultView.HTMLElement&&e instanceof n.defaultView.HTMLElement)||null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},createElement:function(e,n){var o=null,i=null;for(o=(n=n||t.document).createDocumentFragment(),(i=n.createElement("div")).innerHTML=e.trim();i.firstChild;)o.appendChild(i.firstChild);return o},removeWhitespace:function(t){for(var e;t&&"#text"===t.nodeName;)e=t,t=t.previousSibling,e.parentElement&&e.parentElement.removeChild(e)},isEqualArray:function(t,e){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0},deepEquals:function(t,e){var n;if("object"==typeof t&&t&&"object"==typeof e&&e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(!e.hasOwnProperty(n)||!this.deepEquals(t[n],e[n]))return!1}else if(t!==e)return!1;return!0},arrayShuffle:function(t){for(var e=t.slice(),n=e.length,o=n,i=-1,r=[];o--;)i=~~(Math.random()*n),r=e[o],e[o]=e[i],e[i]=r;return e},arrayFromList:function(t){var e,n;try{return Array.prototype.slice.call(t)}catch(o){for(e=[],n=0;n<t.length;n++)e.push(t[n]);return e}},debounce:function(t,e,n){var o;return function(){var i,r=this,a=arguments,s=n&&!o;i=function(){o=null,n||t.apply(r,a)},clearTimeout(o),o=setTimeout(i,e),s&&t.apply(r,a)}},position:function(t){for(var e=0,n=0,o=t;t;)e-=t.scrollLeft,n-=t.scrollTop,t===o&&(e+=t.offsetLeft,n+=t.offsetTop,o=t.offsetParent),t=t.parentElement;return{x:e,y:n}},getHypotenuse:function(t,e){var n=t.x-e.x,o=t.y-e.y;return n=n<0?-1*n:n,o=o<0?-1*o:o,Math.sqrt(Math.pow(n,2)+Math.pow(o,2))},getIntersectionRatio:function(t,e){var n,o=t.width*t.height;return n=Math.max(0,Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left)),Math.max(0,Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top))*n/o},closestParent:function(e,n,o,i){var r=e.parentNode;if(i=i||t.document,o&&e.matches(n))return e;for(;r&&r!=i.body;){if(r.matches&&r.matches(n))return r;if(!r.parentNode)return null;r=r.parentNode}return null},children:function(e,n,o){var i=[],r="";return o=o||t.doc,e&&(e.id||(r="Temp"+this.randomHexKey(),e.id=r),i=o.querySelectorAll("#"+e.id+" > "+n),r&&e.removeAttribute("id")),i},clean:function(t){var e=[],n=-1;for(n=0;n<t.length;n++)""!==t[n]&&e.push(t[n]);return e},defer:function(n){var o=null,i=null,r=null;return i=new this.Deferred,e.features.has.promises?i.promise=new Promise(function(t,e){i.resolve=t,i.reject=e}):(r=t.jQuery||n.$)&&"function"==typeof r.Deferred?(o=r.Deferred(),i.promise=o.promise(),i.resolve=o.resolve,i.reject=o.reject):t.console&&console.warn(e.messages.warningNoPromiseImplementation()),i},all:function(n,o){var i=null;return e.features.has.promises?Promise.all(n):(i=t.jQuery||o.$)&&"function"==typeof i.when?i.when.apply(i,n).done(function(){return arguments}):(t.console&&console.warn(e.messages.warningNoPromiseImplementation()),[])},getPrefix:function(t,e,o){var i=-1,r="";if(n.dashCase(e)in t.style)return"";for(i=0;r=o[i];i++)if(r+e in t.style)return r.toLowerCase();return"unsupported"},randomHex:function(){return("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6).toUpperCase()},getDocumentState:function(e){return e="object"==typeof e.body?e:t.document,{scrollTop:t.pageYOffset,scrollLeft:t.pageXOffset,docHeight:e.documentElement.scrollHeight,docWidth:e.documentElement.scrollWidth,viewportHeight:e.documentElement.clientHeight,viewportWidth:e.documentElement.clientWidth}},bind:function(t,e){return function(){return e.apply(t,arguments)}},isVisible:function(e){var n=null;return!!e.offsetParent||"fixed"===(n=t.getComputedStyle(e)).position&&"hidden"!==n.visibility&&"0"!==n.opacity},seal:function(t){"function"==typeof Object.seal&&Object.seal(t)},freeze:function(t){"function"==typeof Object.freeze&&Object.freeze(t)},compareVersions:function(t,e){var n=t.split("."),o=e.split("."),i=-1,r=-1,a=-1;for(a=0;a<n.length;a++){if(i=parseInt(n[a].replace(/[^\d.]/g,"")),(r=parseInt(o[a].replace(/[^\d.]/g,"")||0))<i)return!1;if(r>i)return!0}return!0},Deferred:function(){this.promise=null,this.resolve=null,this.reject=null,this.id=n.randomHex()},isEmptyObject:function(t){var e="";if("function"==typeof Object.keys)return 0===Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},getClassname:function(t,e,n){var o="";return(o+=t.block).length&&(o+=t.delineatorElement),o+=t["element"+this.pascalCase(e)],n?(o.length&&(o+=t.delineatorModifier),o+=n):o},getProperty:function(t,e){var n,o=e.split("."),i="",r=0;if(!e)return t;for(n=function(t){return t?t[i]:null};r<o.length;)i=o[r],t=n(t),r++;return void 0!==t?t:null}},e.h=n,e.Base=function(){},e.Base.prototype={constructor:e.Base,callActions:function(t,e){var o=this.constructor.actions[t],i="";if(o&&!n.isEmptyObject(o))for(i in o)o[i].apply(this,e)},callFilters:function(t,e,o){var i=this.constructor.filters[t],r=e,a="";if(!i||n.isEmptyObject(i))return r;for(a in o=o||[],i)(o=n.arrayFromList(o)).unshift(r),r=i[a].apply(this,o);return r}},e.BaseStatic=function(){this.actions={},this.filters={},this.extend=function(t){n.extend(this.prototype,t)},this.registerAction=function(t,e,n){(this.actions[t]=this.actions[t]||{})[e]=n},this.registerFilter=function(t,e,n){(this.filters[t]=this.filters[t]||{})[e]=n}},e.Features=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.boxSizingPrefix="",this.transformPrefix="",this.transitionPrefix="",this.boxSizingPrefix="",this.transformProp="",this.transformRule="",this.transitionProp="",this.perspectiveProp="",this.perspectiveOriginProp="",this.has=new e.Has,this.canary=null,this.BOX_SIZING_PROP="boxSizing",this.TRANSITION_PROP="transition",this.TRANSFORM_PROP="transform",this.PERSPECTIVE_PROP="perspective",this.PERSPECTIVE_ORIGIN_PROP="perspectiveOrigin",this.VENDORS=["Webkit","moz","O","ms"],this.TWEENABLE=["opacity","width","height","marginRight","marginBottom","x","y","scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],this.callActions("afterConstruct")},e.BaseStatic.call(e.Features),e.Features.prototype=Object.create(e.Base.prototype),n.extend(e.Features.prototype,{constructor:e.Features,init:function(){var t=this;t.callActions("beforeInit",arguments),t.canary=document.createElement("div"),t.setPrefixes(),t.runTests(),t.callActions("beforeInit",arguments)},runTests:function(){var e=this;e.callActions("beforeRunTests",arguments),e.has.promises="function"==typeof t.Promise,e.has.transitions="unsupported"!==e.transitionPrefix,e.callActions("afterRunTests",arguments),n.freeze(e.has)},setPrefixes:function(){var t=this;t.callActions("beforeSetPrefixes",arguments),t.transitionPrefix=n.getPrefix(t.canary,"Transition",t.VENDORS),t.transformPrefix=n.getPrefix(t.canary,"Transform",t.VENDORS),t.boxSizingPrefix=n.getPrefix(t.canary,"BoxSizing",t.VENDORS),t.boxSizingProp=t.boxSizingPrefix?t.boxSizingPrefix+n.pascalCase(t.BOX_SIZING_PROP):t.BOX_SIZING_PROP,t.transitionProp=t.transitionPrefix?t.transitionPrefix+n.pascalCase(t.TRANSITION_PROP):t.TRANSITION_PROP,t.transformProp=t.transformPrefix?t.transformPrefix+n.pascalCase(t.TRANSFORM_PROP):t.TRANSFORM_PROP,t.transformRule=t.transformPrefix?"-"+t.transformPrefix+"-"+t.TRANSFORM_PROP:t.TRANSFORM_PROP,t.perspectiveProp=t.transformPrefix?t.transformPrefix+n.pascalCase(t.PERSPECTIVE_PROP):t.PERSPECTIVE_PROP,t.perspectiveOriginProp=t.transformPrefix?t.transformPrefix+n.pascalCase(t.PERSPECTIVE_ORIGIN_PROP):t.PERSPECTIVE_ORIGIN_PROP,t.callActions("afterSetPrefixes",arguments)}}),e.Has=function(){this.transitions=!1,this.promises=!1,n.seal(this)},e.features=new e.Features,e.features.init(),e.ConfigAnimation=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.effects="fade scale",this.effectsIn="",this.effectsOut="",this.duration=600,this.easing="ease",this.applyPerspective=!0,this.perspectiveDistance="3000px",this.perspectiveOrigin="50% 50%",this.queue=!0,this.queueLimit=3,this.animateResizeContainer=!0,this.animateResizeTargets=!1,this.staggerSequence=null,this.reverseOut=!1,this.nudge=!0,this.clampHeight=!0,this.clampWidth=!0,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigAnimation),e.ConfigAnimation.prototype=Object.create(e.Base.prototype),e.ConfigAnimation.prototype.constructor=e.ConfigAnimation,e.ConfigBehavior=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.liveSort=!1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigBehavior),e.ConfigBehavior.prototype=Object.create(e.Base.prototype),e.ConfigBehavior.prototype.constructor=e.ConfigBehavior,e.ConfigCallbacks=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.onMixStart=null,this.onMixBusy=null,this.onMixEnd=null,this.onMixFail=null,this.onMixClick=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigCallbacks),e.ConfigCallbacks.prototype=Object.create(e.Base.prototype),e.ConfigCallbacks.prototype.constructor=e.ConfigCallbacks,e.ConfigControls=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.live=!1,this.scope="global",this.toggleLogic="or",this.toggleDefault="all",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigControls),e.ConfigControls.prototype=Object.create(e.Base.prototype),e.ConfigControls.prototype.constructor=e.ConfigControls,e.ConfigClassNames=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.block="mixitup",this.elementContainer="container",this.elementFilter="control",this.elementSort="control",this.elementMultimix="control",this.elementToggle="control",this.modifierActive="active",this.modifierDisabled="disabled",this.modifierFailed="failed",this.delineatorElement="-",this.delineatorModifier="-",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigClassNames),e.ConfigClassNames.prototype=Object.create(e.Base.prototype),e.ConfigClassNames.prototype.constructor=e.ConfigClassNames,e.ConfigData=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.uidKey="",this.dirtyCheck=!1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigData),e.ConfigData.prototype=Object.create(e.Base.prototype),e.ConfigData.prototype.constructor=e.ConfigData,e.ConfigDebug=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.enable=!1,this.showWarnings=!0,this.fauxAsync=!1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigDebug),e.ConfigDebug.prototype=Object.create(e.Base.prototype),e.ConfigDebug.prototype.constructor=e.ConfigDebug,e.ConfigLayout=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.allowNestedTargets=!0,this.containerClassName="",this.siblingBefore=null,this.siblingAfter=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigLayout),e.ConfigLayout.prototype=Object.create(e.Base.prototype),e.ConfigLayout.prototype.constructor=e.ConfigLayout,e.ConfigLoad=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.filter="all",this.sort="default:asc",this.dataset=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigLoad),e.ConfigLoad.prototype=Object.create(e.Base.prototype),e.ConfigLoad.prototype.constructor=e.ConfigLoad,e.ConfigSelectors=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.target=".mix",this.control="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigSelectors),e.ConfigSelectors.prototype=Object.create(e.Base.prototype),e.ConfigSelectors.prototype.constructor=e.ConfigSelectors,e.ConfigRender=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.target=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigRender),e.ConfigRender.prototype=Object.create(e.Base.prototype),e.ConfigRender.prototype.constructor=e.ConfigRender,e.ConfigTemplates=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigTemplates),e.ConfigTemplates.prototype=Object.create(e.Base.prototype),e.ConfigTemplates.prototype.constructor=e.ConfigTemplates,e.Config=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.animation=new e.ConfigAnimation,this.behavior=new e.ConfigBehavior,this.callbacks=new e.ConfigCallbacks,this.controls=new e.ConfigControls,this.classNames=new e.ConfigClassNames,this.data=new e.ConfigData,this.debug=new e.ConfigDebug,this.layout=new e.ConfigLayout,this.load=new e.ConfigLoad,this.selectors=new e.ConfigSelectors,this.render=new e.ConfigRender,this.templates=new e.ConfigTemplates,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Config),e.Config.prototype=Object.create(e.Base.prototype),e.Config.prototype.constructor=e.Config,e.MixerDom=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.document=null,this.body=null,this.container=null,this.parent=null,this.targets=[],this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.MixerDom),e.MixerDom.prototype=Object.create(e.Base.prototype),e.MixerDom.prototype.constructor=e.MixerDom,e.UiClassNames=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.base="",this.active="",this.disabled="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.UiClassNames),e.UiClassNames.prototype=Object.create(e.Base.prototype),e.UiClassNames.prototype.constructor=e.UiClassNames,e.CommandDataset=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.dataset=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandDataset),e.CommandDataset.prototype=Object.create(e.Base.prototype),e.CommandDataset.prototype.constructor=e.CommandDataset,e.CommandMultimix=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.filter=null,this.sort=null,this.insert=null,this.remove=null,this.changeLayout=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandMultimix),e.CommandMultimix.prototype=Object.create(e.Base.prototype),e.CommandMultimix.prototype.constructor=e.CommandMultimix,e.CommandFilter=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.selector="",this.collection=null,this.action="show",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandFilter),e.CommandFilter.prototype=Object.create(e.Base.prototype),e.CommandFilter.prototype.constructor=e.CommandFilter,e.CommandSort=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.sortString="",this.attribute="",this.order="asc",this.collection=null,this.next=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandSort),e.CommandSort.prototype=Object.create(e.Base.prototype),e.CommandSort.prototype.constructor=e.CommandSort,e.CommandInsert=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.index=0,this.collection=[],this.position="before",this.sibling=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandInsert),e.CommandInsert.prototype=Object.create(e.Base.prototype),e.CommandInsert.prototype.constructor=e.CommandInsert,e.CommandRemove=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.targets=[],this.collection=[],this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandRemove),e.CommandRemove.prototype=Object.create(e.Base.prototype),e.CommandRemove.prototype.constructor=e.CommandRemove,e.CommandChangeLayout=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.containerClassName="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandChangeLayout),e.CommandChangeLayout.prototype=Object.create(e.Base.prototype),e.CommandChangeLayout.prototype.constructor=e.CommandChangeLayout,e.ControlDefinition=function(t,o,i,r){e.Base.call(this),this.callActions("beforeConstruct"),this.type=t,this.selector=o,this.live=i||!1,this.parent=r||"",this.callActions("afterConstruct"),n.freeze(this),n.seal(this)},e.BaseStatic.call(e.ControlDefinition),e.ControlDefinition.prototype=Object.create(e.Base.prototype),e.ControlDefinition.prototype.constructor=e.ControlDefinition,e.controlDefinitions=[],e.controlDefinitions.push(new e.ControlDefinition("multimix","[data-filter][data-sort]")),e.controlDefinitions.push(new e.ControlDefinition("filter","[data-filter]")),e.controlDefinitions.push(new e.ControlDefinition("sort","[data-sort]")),e.controlDefinitions.push(new e.ControlDefinition("toggle","[data-toggle]")),e.Control=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.selector="",this.bound=[],this.pending=-1,this.type="",this.status="inactive",this.filter="",this.sort="",this.canDisable=!1,this.handler=null,this.classNames=new e.UiClassNames,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Control),e.Control.prototype=Object.create(e.Base.prototype),n.extend(e.Control.prototype,{constructor:e.Control,init:function(t,n,o){var i=this;if(this.callActions("beforeInit",arguments),i.el=t,i.type=n,i.selector=o,i.selector)i.status="live";else switch(i.canDisable="boolean"==typeof i.el.disable,i.type){case"filter":i.filter=i.el.getAttribute("data-filter");break;case"toggle":i.filter=i.el.getAttribute("data-toggle");break;case"sort":i.sort=i.el.getAttribute("data-sort");break;case"multimix":i.filter=i.el.getAttribute("data-filter"),i.sort=i.el.getAttribute("data-sort")}i.bindClick(),e.controls.push(i),this.callActions("afterInit",arguments)},isBound:function(t){var e;return this.callActions("beforeIsBound",arguments),e=this.bound.indexOf(t)>-1,this.callFilters("afterIsBound",e,arguments)},addBinding:function(t){this.callActions("beforeAddBinding",arguments),this.isBound()||this.bound.push(t),this.callActions("afterAddBinding",arguments)},removeBinding:function(t){var n=this,o=-1;this.callActions("beforeRemoveBinding",arguments),(o=n.bound.indexOf(t))>-1&&n.bound.splice(o,1),n.bound.length<1&&(n.unbindClick(),o=e.controls.indexOf(n),e.controls.splice(o,1),"active"===n.status&&n.renderStatus(n.el,"inactive")),this.callActions("afterRemoveBinding",arguments)},bindClick:function(){var t=this;this.callActions("beforeBindClick",arguments),t.handler=function(e){t.handleClick(e)},n.on(t.el,"click",t.handler),this.callActions("afterBindClick",arguments)},unbindClick:function(){var t=this;this.callActions("beforeUnbindClick",arguments),n.off(t.el,"click",t.handler),t.handler=null,this.callActions("afterUnbindClick",arguments)},handleClick:function(t){var o=this,i=null,r=null,a=!1,s={},l=null,c=[],u=-1;if(this.callActions("beforeHandleClick",arguments),this.pending=0,r=o.bound[0],i=o.selector?n.closestParent(t.target,r.config.selectors.control+o.selector,!0,r.dom.document):o.el){switch(o.type){case"filter":s.filter=o.filter||i.getAttribute("data-filter");break;case"sort":s.sort=o.sort||i.getAttribute("data-sort");break;case"multimix":s.filter=o.filter||i.getAttribute("data-filter"),s.sort=o.sort||i.getAttribute("data-sort");break;case"toggle":s.filter=o.filter||i.getAttribute("data-toggle"),a="live"===o.status?n.hasClass(i,o.classNames.active):"active"===o.status}for(u=0;u<o.bound.length;u++)l=new e.CommandMultimix,n.extend(l,s),c.push(l);for(c=o.callFilters("commandsHandleClick",c,arguments),o.pending=o.bound.length,u=0;r=o.bound[u];u++)(s=c[u])&&(r.lastClicked||(r.lastClicked=i),e.events.fire("mixClick",r.dom.container,{state:r.state,instance:r,originalEvent:t,control:r.lastClicked},r.dom.document),"function"==typeof r.config.callbacks.onMixClick&&!1===r.config.callbacks.onMixClick.call(r.lastClicked,r.state,t,r)||("toggle"===o.type?a?r.toggleOff(s.filter):r.toggleOn(s.filter):r.multimix(s)));this.callActions("afterHandleClick",arguments)}else o.callActions("afterHandleClick",arguments)},update:function(t,n){var o=this,i=new e.CommandMultimix;o.callActions("beforeUpdate",arguments),o.pending--,o.pending=Math.max(0,o.pending),o.pending>0||("live"===o.status?o.updateLive(t,n):(i.sort=o.sort,i.filter=o.filter,o.callFilters("actionsUpdate",i,arguments),o.parseStatusChange(o.el,t,i,n)),o.callActions("afterUpdate",arguments))},updateLive:function(t,n){var o=this,i=null,r=null,a=null,s=-1;if(o.callActions("beforeUpdateLive",arguments),o.el){for(i=o.el.querySelectorAll(o.selector),s=0;a=i[s];s++){switch(r=new e.CommandMultimix,o.type){case"filter":r.filter=a.getAttribute("data-filter");break;case"sort":r.sort=a.getAttribute("data-sort");break;case"multimix":r.filter=a.getAttribute("data-filter"),r.sort=a.getAttribute("data-sort");break;case"toggle":r.filter=a.getAttribute("data-toggle")}r=o.callFilters("actionsUpdateLive",r,arguments),o.parseStatusChange(a,t,r,n)}o.callActions("afterUpdateLive",arguments)}},parseStatusChange:function(t,e,n,o){var i=this,r="",a=-1;switch(i.callActions("beforeParseStatusChange",arguments),i.type){case"filter":e.filter===n.filter?i.renderStatus(t,"active"):i.renderStatus(t,"inactive");break;case"multimix":e.sort===n.sort&&e.filter===n.filter?i.renderStatus(t,"active"):i.renderStatus(t,"inactive");break;case"sort":e.sort.match(/:asc/g)&&(r=e.sort.replace(/:asc/g,"")),e.sort===n.sort||r===n.sort?i.renderStatus(t,"active"):i.renderStatus(t,"inactive");break;case"toggle":for(o.length<1&&i.renderStatus(t,"inactive"),e.filter===n.filter&&i.renderStatus(t,"active"),a=0;a<o.length;a++){if(o[a]===n.filter){i.renderStatus(t,"active");break}i.renderStatus(t,"inactive")}}i.callActions("afterParseStatusChange",arguments)},renderStatus:function(t,e){var o=this;switch(o.callActions("beforeRenderStatus",arguments),e){case"active":n.addClass(t,o.classNames.active),n.removeClass(t,o.classNames.disabled),o.canDisable&&(o.el.disabled=!1);break;case"inactive":n.removeClass(t,o.classNames.active),n.removeClass(t,o.classNames.disabled),o.canDisable&&(o.el.disabled=!1);break;case"disabled":o.canDisable&&(o.el.disabled=!0),n.addClass(t,o.classNames.disabled),n.removeClass(t,o.classNames.active)}"live"!==o.status&&(o.status=e),o.callActions("afterRenderStatus",arguments)}}),e.controls=[],e.StyleData=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.x=0,this.y=0,this.top=0,this.right=0,this.bottom=0,this.left=0,this.width=0,this.height=0,this.marginRight=0,this.marginBottom=0,this.opacity=0,this.scale=new e.TransformData,this.translateX=new e.TransformData,this.translateY=new e.TransformData,this.translateZ=new e.TransformData,this.rotateX=new e.TransformData,this.rotateY=new e.TransformData,this.rotateZ=new e.TransformData,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.StyleData),e.StyleData.prototype=Object.create(e.Base.prototype),e.StyleData.prototype.constructor=e.StyleData,e.TransformData=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.value=0,this.unit="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.TransformData),e.TransformData.prototype=Object.create(e.Base.prototype),e.TransformData.prototype.constructor=e.TransformData,e.TransformDefaults=function(){e.StyleData.apply(this),this.callActions("beforeConstruct"),this.scale.value=.01,this.scale.unit="",this.translateX.value=20,this.translateX.unit="px",this.translateY.value=20,this.translateY.unit="px",this.translateZ.value=20,this.translateZ.unit="px",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateY.value=90,this.rotateY.unit="deg",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateZ.value=180,this.rotateZ.unit="deg",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.TransformDefaults),e.TransformDefaults.prototype=Object.create(e.StyleData.prototype),e.TransformDefaults.prototype.constructor=e.TransformDefaults,e.transformDefaults=new e.TransformDefaults,e.EventDetail=function(){this.state=null,this.futureState=null,this.instance=null,this.originalEvent=null},e.Events=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.mixStart=null,this.mixBusy=null,this.mixEnd=null,this.mixFail=null,this.mixClick=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Events),e.Events.prototype=Object.create(e.Base.prototype),e.Events.prototype.constructor=e.Events,e.Events.prototype.fire=function(t,o,i,r){var a,s=this,l=new e.EventDetail;if(s.callActions("beforeFire",arguments),void 0===s[t])throw new Error('Event type "'+t+'" not found.');l.state=new e.State,n.extend(l.state,i.state),i.futureState&&(l.futureState=new e.State,n.extend(l.futureState,i.futureState)),l.instance=i.instance,i.originalEvent&&(l.originalEvent=i.originalEvent),a=n.getCustomEvent(t,l,r),s.callFilters("eventFire",a,arguments),o.dispatchEvent(a)},e.events=new e.Events,e.QueueItem=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.args=[],this.instruction=null,this.triggerElement=null,this.deferred=null,this.isToggling=!1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.QueueItem),e.QueueItem.prototype=Object.create(e.Base.prototype),e.QueueItem.prototype.constructor=e.QueueItem,e.Mixer=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.config=new e.Config,this.id="",this.isBusy=!1,this.isToggling=!1,this.incPadding=!0,this.controls=[],this.targets=[],this.origOrder=[],this.cache={},this.toggleArray=[],this.targetsMoved=0,this.targetsImmovable=0,this.targetsBound=0,this.targetsDone=0,this.staggerDuration=0,this.effectsIn=null,this.effectsOut=null,this.transformIn=[],this.transformOut=[],this.queue=[],this.state=null,this.lastOperation=null,this.lastClicked=null,this.userCallback=null,this.userDeferred=null,this.dom=new e.MixerDom,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Mixer),e.Mixer.prototype=Object.create(e.Base.prototype),n.extend(e.Mixer.prototype,{constructor:e.Mixer,attach:function(o,i,r,a){var s=this,l=null,c=-1;for(s.callActions("beforeAttach",arguments),s.id=r,a&&n.extend(s.config,a,!0,!0),s.sanitizeConfig(),s.cacheDom(o,i),s.config.layout.containerClassName&&n.addClass(s.dom.container,s.config.layout.containerClassName),e.features.has.transitions||(s.config.animation.enable=!1),void 0===t.console&&(s.config.debug.showWarnings=!1),s.config.data.uidKey&&(s.config.controls.enable=!1),s.indexTargets(),s.state=s.getInitialState(),c=0;l=s.lastOperation.toHide[c];c++)l.hide();s.config.controls.enable&&(s.initControls(),s.buildToggleArray(null,s.state),s.updateControls({filter:s.state.activeFilter,sort:s.state.activeSort})),s.parseEffects(),s.callActions("afterAttach",arguments)},sanitizeConfig:function(){var t=this;t.callActions("beforeSanitizeConfig",arguments),t.config.controls.scope=t.config.controls.scope.toLowerCase().trim(),t.config.controls.toggleLogic=t.config.controls.toggleLogic.toLowerCase().trim(),t.config.controls.toggleDefault=t.config.controls.toggleDefault.toLowerCase().trim(),t.config.animation.effects=t.config.animation.effects.trim(),t.callActions("afterSanitizeConfig",arguments)},getInitialState:function(){var t=this,n=new e.State,o=new e.Operation;if(t.callActions("beforeGetInitialState",arguments),n.activeContainerClassName=t.config.layout.containerClassName,t.config.load.dataset){if(!t.config.data.uidKey||"string"!=typeof t.config.data.uidKey)throw new TypeError(e.messages.errorConfigDataUidKeyNotSet());o.startDataset=o.newDataset=n.activeDataset=t.config.load.dataset.slice(),o.startContainerClassName=o.newContainerClassName=n.activeContainerClassName,o.show=t.targets.slice(),n=t.callFilters("stateGetInitialState",n,arguments)}else n.activeFilter=t.parseFilterArgs([t.config.load.filter]).command,n.activeSort=t.parseSortArgs([t.config.load.sort]).command,n.totalTargets=t.targets.length,(n=t.callFilters("stateGetInitialState",n,arguments)).activeSort.collection||n.activeSort.attribute||"random"===n.activeSort.order||"desc"===n.activeSort.order?(o.newSort=n.activeSort,t.sortOperation(o),t.printSort(!1,o),t.targets=o.newOrder):o.startOrder=o.newOrder=t.targets,o.startFilter=o.newFilter=n.activeFilter,o.startSort=o.newSort=n.activeSort,o.startContainerClassName=o.newContainerClassName=n.activeContainerClassName,"all"===o.newFilter.selector?o.newFilter.selector=t.config.selectors.target:"none"===o.newFilter.selector&&(o.newFilter.selector="");return o=t.callFilters("operationGetInitialState",o,[n]),t.lastOperation=o,o.newFilter&&t.filterOperation(o),t.buildState(o)},cacheDom:function(t,e){var n=this;n.callActions("beforeCacheDom",arguments),n.dom.document=e,n.dom.body=n.dom.document.querySelector("body"),n.dom.container=t,n.dom.parent=t,n.callActions("afterCacheDom",arguments)},indexTargets:function(){var t,o=this,i=null,r=null,a=-1;if(o.callActions("beforeIndexTargets",arguments),o.dom.targets=o.config.layout.allowNestedTargets?o.dom.container.querySelectorAll(o.config.selectors.target):n.children(o.dom.container,o.config.selectors.target,o.dom.document),o.dom.targets=n.arrayFromList(o.dom.targets),o.targets=[],(t=o.config.load.dataset)&&t.length!==o.dom.targets.length)throw new Error(e.messages.errorDatasetPrerenderedMismatch());if(o.dom.targets.length){for(a=0;r=o.dom.targets[a];a++)(i=new e.Target).init(r,o,t?t[a]:void 0),i.isInDom=!0,o.targets.push(i);o.dom.parent=o.dom.targets[0].parentElement===o.dom.container?o.dom.container:o.dom.targets[0].parentElement}o.origOrder=o.targets,o.callActions("afterIndexTargets",arguments)},initControls:function(){var t=this,n="",o=null,i=null,r=null,a=null,s=null,l=-1,c=-1;switch(t.callActions("beforeInitControls",arguments),t.config.controls.scope){case"local":r=t.dom.container;break;case"global":r=t.dom.document;break;default:throw new Error(e.messages.errorConfigInvalidControlsScope())}for(l=0;n=e.controlDefinitions[l];l++)if(t.config.controls.live||n.live){if(n.parent){if(!(a=t.dom[n.parent])||a.length<0)continue;"number"!=typeof a.length&&(a=[a])}else a=[r];for(c=0;i=a[c];c++)s=t.getControl(i,n.type,n.selector),t.controls.push(s)}else for(o=r.querySelectorAll(t.config.selectors.control+n.selector),c=0;i=o[c];c++)(s=t.getControl(i,n.type,""))&&t.controls.push(s);t.callActions("afterInitControls",arguments)},getControl:function(t,o,i){var r=this,a=null,s=-1;if(r.callActions("beforeGetControl",arguments),!i)for(s=0;a=e.controls[s];s++){if(a.el===t&&a.isBound(r))return r.callFilters("controlGetControl",null,arguments);if(a.el===t&&a.type===o&&a.selector===i)return a.addBinding(r),r.callFilters("controlGetControl",a,arguments)}return(a=new e.Control).init(t,o,i),a.classNames.base=n.getClassname(r.config.classNames,o),a.classNames.active=n.getClassname(r.config.classNames,o,r.config.classNames.modifierActive),a.classNames.disabled=n.getClassname(r.config.classNames,o,r.config.classNames.modifierDisabled),a.addBinding(r),r.callFilters("controlGetControl",a,arguments)},getToggleSelector:function(){var t=this,e="or"===t.config.controls.toggleLogic?", ":"",o="";return t.callActions("beforeGetToggleSelector",arguments),t.toggleArray=n.clean(t.toggleArray),""===(o=t.toggleArray.join(e))&&(o=t.config.controls.toggleDefault),t.callFilters("selectorGetToggleSelector",o,arguments)},buildToggleArray:function(t,e){var o=this,i="";if(o.callActions("beforeBuildToggleArray",arguments),t&&t.filter)i=t.filter.selector.replace(/\s/g,"");else{if(!e)return;i=e.activeFilter.selector.replace(/\s/g,"")}i!==o.config.selectors.target&&"all"!==i||(i=""),"or"===o.config.controls.toggleLogic?o.toggleArray=i.split(","):o.toggleArray=o.splitCompoundSelector(i),o.toggleArray=n.clean(o.toggleArray),o.callActions("afterBuildToggleArray",arguments)},splitCompoundSelector:function(t){var e=t.split(/([\.\[])/g),n=[],o="",i=-1;for(""===e[0]&&e.shift(),i=0;i<e.length;i++)i%2==0&&(o=""),o+=e[i],i%2!=0&&n.push(o);return n},updateControls:function(t){var o=this,i=null,r=new e.CommandMultimix,a=-1;for(o.callActions("beforeUpdateControls",arguments),t.filter?r.filter=t.filter.selector:r.filter=o.state.activeFilter.selector,t.sort?r.sort=o.buildSortString(t.sort):r.sort=o.buildSortString(o.state.activeSort),r.filter===o.config.selectors.target&&(r.filter="all"),""===r.filter&&(r.filter="none"),n.freeze(r),a=0;i=o.controls[a];a++)i.update(r,o.toggleArray);o.callActions("afterUpdateControls",arguments)},buildSortString:function(t){var e="";return e+=t.sortString,t.next&&(e+=" "+this.buildSortString(t.next)),e},insertTargets:function(t,o){var i,r=this,a=-1,s=null,l=null,c=null,u=-1;if(r.callActions("beforeInsertTargets",arguments),void 0===t.index&&(t.index=0),i=r.getNextSibling(t.index,t.sibling,t.position),s=r.dom.document.createDocumentFragment(),a=i?n.index(i,r.config.selectors.target):r.targets.length,t.collection){for(u=0;c=t.collection[u];u++){if(r.dom.targets.indexOf(c)>-1)throw new Error(e.messages.errorInsertPreexistingElement());c.style.display="none",s.appendChild(c),s.appendChild(r.dom.document.createTextNode(" ")),n.isElement(c,r.dom.document)&&c.matches(r.config.selectors.target)&&((l=new e.Target).init(c,r),l.isInDom=!0,r.targets.splice(a,0,l),a++)}r.dom.parent.insertBefore(s,i)}o.startOrder=r.origOrder=r.targets,r.callActions("afterInsertTargets",arguments)},getNextSibling:function(t,e,n){var o=this,i=null;return t=Math.max(t,0),e&&"before"===n?i=e:e&&"after"===n?i=e.nextElementSibling||null:o.targets.length>0&&void 0!==t?i=t<o.targets.length||!o.targets.length?o.targets[t].dom.el:o.targets[o.targets.length-1].dom.el.nextElementSibling:0===o.targets.length&&o.dom.parent.children.length>0&&(o.config.layout.siblingAfter?i=o.config.layout.siblingAfter:o.config.layout.siblingBefore?i=o.config.layout.siblingBefore.nextElementSibling:o.dom.parent.children[0]),o.callFilters("elementGetNextSibling",i,arguments)},filterOperation:function(t){var e,n=this,o=!1,i=-1,r=null,a=-1;for(n.callActions("beforeFilterOperation",arguments),e=t.newFilter.action,a=0;r=t.newOrder[a];a++)o=t.newFilter.collection?t.newFilter.collection.indexOf(r.dom.el)>-1:""!==t.newFilter.selector&&r.dom.el.matches(t.newFilter.selector),n.evaluateHideShow(o,r,e,t);if(t.toRemove.length)for(a=0;r=t.show[a];a++)t.toRemove.indexOf(r)>-1&&(t.show.splice(a,1),(i=t.toShow.indexOf(r))>-1&&t.toShow.splice(i,1),t.toHide.push(r),t.hide.push(r),a--);t.matching=t.show.slice(),0===t.show.length&&""!==t.newFilter.selector&&0!==n.targets.length&&(t.hasFailed=!0),n.callActions("afterFilterOperation",arguments)},evaluateHideShow:function(t,e,n,o){var i,r=this,a=Array.prototype.slice.call(arguments,1);i=r.callFilters("testResultEvaluateHideShow",t,a),r.callActions("beforeEvaluateHideShow",arguments),!0===i&&"show"===n||!1===i&&"hide"===n?(o.show.push(e),!e.isShown&&o.toShow.push(e)):(o.hide.push(e),e.isShown&&o.toHide.push(e)),r.callActions("afterEvaluateHideShow",arguments)},sortOperation:function(t){var o=this,i=[],r=null,a=null,s=-1;if(o.callActions("beforeSortOperation",arguments),t.startOrder=o.targets,t.newSort.collection){for(i=[],s=0;a=t.newSort.collection[s];s++){if(o.dom.targets.indexOf(a)<0)throw new Error(e.messages.errorSortNonExistentElement());(r=new e.Target).init(a,o),r.isInDom=!0,i.push(r)}t.newOrder=i}else"random"===t.newSort.order?t.newOrder=n.arrayShuffle(t.startOrder):""===t.newSort.attribute?(t.newOrder=o.origOrder.slice(),"desc"===t.newSort.order&&t.newOrder.reverse()):(t.newOrder=t.startOrder.slice(),t.newOrder.sort(function(e,n){return o.compare(e,n,t.newSort)}));n.isEqualArray(t.newOrder,t.startOrder)&&(t.willSort=!1),o.callActions("afterSortOperation",arguments)},compare:function(t,e,n){var o=this,i=n.order,r=o.getAttributeValue(t,n.attribute),a=o.getAttributeValue(e,n.attribute);return isNaN(1*r)||isNaN(1*a)?(r=r.toLowerCase(),a=a.toLowerCase()):(r*=1,a*=1),r<a?"asc"===i?-1:1:r>a?"asc"===i?1:-1:r===a&&n.next?o.compare(t,e,n.next):0},getAttributeValue:function(t,n){var o;return null===(o=t.dom.el.getAttribute("data-"+n))&&this.config.debug.showWarnings&&console.warn(e.messages.warningInconsistentSortingAttributes({attribute:"data-"+n})),this.callFilters("valueGetAttributeValue",o||0,arguments)},printSort:function(e,o){var i,r=this,a=e?o.newOrder:o.startOrder,s=e?o.startOrder:o.newOrder,l=a.length?a[a.length-1].dom.el.nextElementSibling:null,c=t.document.createDocumentFragment(),u=null,d=null,f=-1;for(r.callActions("beforePrintSort",arguments),f=0;u=a[f];f++)"absolute"!==(d=u.dom.el).style.position&&(n.removeWhitespace(d.previousSibling),d.parentElement.removeChild(d));for((i=l?l.previousSibling:r.dom.parent.lastChild)&&"#text"===i.nodeName&&n.removeWhitespace(i),f=0;u=s[f];f++)d=u.dom.el,n.isElement(c.lastChild)&&c.appendChild(t.document.createTextNode(" ")),c.appendChild(d);r.dom.parent.firstChild&&r.dom.parent.firstChild!==l&&c.insertBefore(t.document.createTextNode(" "),c.childNodes[0]),l?(c.appendChild(t.document.createTextNode(" ")),r.dom.parent.insertBefore(c,l)):r.dom.parent.appendChild(c),r.callActions("afterPrintSort",arguments)},parseSortString:function(t,o){var i=t.split(" "),r=o,a=[],s=-1;for(s=0;s<i.length;s++){switch(a=i[s].split(":"),r.sortString=i[s],r.attribute=n.dashCase(a[0]),r.order=a[1]||"asc",r.attribute){case"default":r.attribute="";break;case"random":r.attribute="",r.order="random"}if(!r.attribute||"random"===r.order)break;s<i.length-1&&(r.next=new e.CommandSort,n.freeze(r),r=r.next)}return this.callFilters("commandsParseSort",o,arguments)},parseEffects:function(){var t=this,n="",o=t.config.animation.effectsIn||t.config.animation.effects,i=t.config.animation.effectsOut||t.config.animation.effects;for(n in t.callActions("beforeParseEffects",arguments),t.effectsIn=new e.StyleData,t.effectsOut=new e.StyleData,t.transformIn=[],t.transformOut=[],t.effectsIn.opacity=t.effectsOut.opacity=1,t.parseEffect("fade",o,t.effectsIn,t.transformIn),t.parseEffect("fade",i,t.effectsOut,t.transformOut,!0),e.transformDefaults)e.transformDefaults[n]instanceof e.TransformData&&(t.parseEffect(n,o,t.effectsIn,t.transformIn),t.parseEffect(n,i,t.effectsOut,t.transformOut,!0));t.parseEffect("stagger",o,t.effectsIn,t.transformIn),t.parseEffect("stagger",i,t.effectsOut,t.transformOut,!0),t.callActions("afterParseEffects",arguments)},parseEffect:function(t,n,o,i,r){var a,s=this,l="",c="",u=["%","px","em","rem","vh","vw","deg"],d="",f=-1;if(s.callActions("beforeParseEffect",arguments),"string"!=typeof n)throw new TypeError(e.messages.errorConfigInvalidAnimationEffects());if(n.indexOf(t)<0)"stagger"===t&&(s.staggerDuration=0);else{switch((a=n.indexOf(t+"("))>-1&&(l=n.substring(a),c=/\(([^)]+)\)/.exec(l)[1]),t){case"fade":o.opacity=c?parseFloat(c):0;break;case"stagger":s.staggerDuration=c?parseFloat(c):100;break;default:if(r&&s.config.animation.reverseOut&&"scale"!==t?o[t].value=-1*(c?parseFloat(c):e.transformDefaults[t].value):o[t].value=c?parseFloat(c):e.transformDefaults[t].value,c){for(f=0;d=u[f];f++)if(c.indexOf(d)>-1){o[t].unit=d;break}}else o[t].unit=e.transformDefaults[t].unit;i.push(t+"("+o[t].value+o[t].unit+")")}s.callActions("afterParseEffect",arguments)}},buildState:function(t){var n=this,o=new e.State,i=null,r=-1;for(n.callActions("beforeBuildState",arguments),r=0;i=n.targets[r];r++)(!t.toRemove.length||t.toRemove.indexOf(i)<0)&&o.targets.push(i.dom.el);for(r=0;i=t.matching[r];r++)o.matching.push(i.dom.el);for(r=0;i=t.show[r];r++)o.show.push(i.dom.el);for(r=0;i=t.hide[r];r++)(!t.toRemove.length||t.toRemove.indexOf(i)<0)&&o.hide.push(i.dom.el);return o.id=n.id,o.container=n.dom.container,o.activeFilter=t.newFilter,o.activeSort=t.newSort,o.activeDataset=t.newDataset,o.activeContainerClassName=t.newContainerClassName,o.hasFailed=t.hasFailed,o.totalTargets=n.targets.length,o.totalShow=t.show.length,o.totalHide=t.hide.length,o.totalMatching=t.matching.length,o.triggerElement=t.triggerElement,n.callFilters("stateBuildState",o,arguments)},goMix:function(o,i){var r,a=this;return a.callActions("beforeGoMix",arguments),a.config.animation.duration&&a.config.animation.effects&&n.isVisible(a.dom.container)||(o=!1),i.toShow.length||i.toHide.length||i.willSort||i.willChangeLayout||(o=!1),i.startState.show.length||i.show.length||(o=!1),e.events.fire("mixStart",a.dom.container,{state:i.startState,futureState:i.newState,instance:a},a.dom.document),"function"==typeof a.config.callbacks.onMixStart&&a.config.callbacks.onMixStart.call(a.dom.container,i.startState,i.newState,a),n.removeClass(a.dom.container,n.getClassname(a.config.classNames,"container",a.config.classNames.modifierFailed)),r=a.userDeferred?a.userDeferred:a.userDeferred=n.defer(e.libraries),a.isBusy=!0,o&&e.features.has.transitions?(t.pageYOffset!==i.docState.scrollTop&&t.scrollTo(i.docState.scrollLeft,i.docState.scrollTop),a.config.animation.applyPerspective&&(a.dom.parent.style[e.features.perspectiveProp]=a.config.animation.perspectiveDistance,a.dom.parent.style[e.features.perspectiveOriginProp]=a.config.animation.perspectiveOrigin),a.config.animation.animateResizeContainer&&i.startHeight!==i.newHeight&&i.viewportDeltaY!==i.startHeight-i.newHeight&&(a.dom.parent.style.height=i.startHeight+"px"),a.config.animation.animateResizeContainer&&i.startWidth!==i.newWidth&&i.viewportDeltaX!==i.startWidth-i.newWidth&&(a.dom.parent.style.width=i.startWidth+"px"),i.startHeight===i.newHeight&&(a.dom.parent.style.height=i.startHeight+"px"),i.startWidth===i.newWidth&&(a.dom.parent.style.width=i.startWidth+"px"),i.startHeight===i.newHeight&&i.startWidth===i.newWidth&&(a.dom.parent.style.overflow="hidden"),requestAnimationFrame(function(){a.moveTargets(i)}),a.callFilters("promiseGoMix",r.promise,arguments)):(a.config.debug.fauxAsync?setTimeout(function(){a.cleanUp(i)},a.config.animation.duration):a.cleanUp(i),a.callFilters("promiseGoMix",r.promise,arguments))},getStartMixData:function(n){var o=this,i=t.getComputedStyle(o.dom.parent),r=o.dom.parent.getBoundingClientRect(),a=null,s={},l=-1,c=i[e.features.boxSizingProp];for(o.incPadding="border-box"===c,o.callActions("beforeGetStartMixData",arguments),l=0;a=n.show[l];l++)s=a.getPosData(),n.showPosData[l]={startPosData:s};for(l=0;a=n.toHide[l];l++)s=a.getPosData(),n.toHidePosData[l]={startPosData:s};n.startX=r.left,n.startY=r.top,n.startHeight=o.incPadding?r.height:r.height-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderTop)-parseFloat(i.borderBottom),n.startWidth=o.incPadding?r.width:r.width-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderLeft)-parseFloat(i.borderRight),o.callActions("afterGetStartMixData",arguments)},setInter:function(t){var e=this,o=null,i=-1;for(e.callActions("beforeSetInter",arguments),e.config.animation.clampHeight&&(e.dom.parent.style.height=t.startHeight+"px",e.dom.parent.style.overflow="hidden"),e.config.animation.clampWidth&&(e.dom.parent.style.width=t.startWidth+"px",e.dom.parent.style.overflow="hidden"),i=0;o=t.toShow[i];i++)o.show();t.willChangeLayout&&(n.removeClass(e.dom.container,t.startContainerClassName),n.addClass(e.dom.container,t.newContainerClassName)),e.callActions("afterSetInter",arguments)},getInterMixData:function(t){var e=null,n=-1;for(this.callActions("beforeGetInterMixData",arguments),n=0;e=t.show[n];n++)t.showPosData[n].interPosData=e.getPosData();for(n=0;e=t.toHide[n];n++)t.toHidePosData[n].interPosData=e.getPosData();this.callActions("afterGetInterMixData",arguments)},setFinal:function(t){var e=this,n=null,o=-1;for(e.callActions("beforeSetFinal",arguments),t.willSort&&e.printSort(!1,t),o=0;n=t.toHide[o];o++)n.hide();e.callActions("afterSetFinal",arguments)},getFinalMixData:function(e){var o,i=this,r=null,a=null,s=-1;for(i.callActions("beforeGetFinalMixData",arguments),s=0;a=e.show[s];s++)e.showPosData[s].finalPosData=a.getPosData();for(s=0;a=e.toHide[s];s++)e.toHidePosData[s].finalPosData=a.getPosData();for((i.config.animation.clampHeight||i.config.animation.clampWidth)&&(i.dom.parent.style.height=i.dom.parent.style.width=i.dom.parent.style.overflow=""),i.incPadding||(r=t.getComputedStyle(i.dom.parent)),o=i.dom.parent.getBoundingClientRect(),e.newX=o.left,e.newY=o.top,e.newHeight=i.incPadding?o.height:o.height-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderTop)-parseFloat(r.borderBottom),e.newWidth=i.incPadding?o.width:o.width-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderLeft)-parseFloat(r.borderRight),e.viewportDeltaX=e.docState.viewportWidth-this.dom.document.documentElement.clientWidth,e.viewportDeltaY=e.docState.viewportHeight-this.dom.document.documentElement.clientHeight,e.willSort&&i.printSort(!0,e),s=0;a=e.toShow[s];s++)a.hide();for(s=0;a=e.toHide[s];s++)a.show();e.willChangeLayout&&(n.removeClass(i.dom.container,e.newContainerClassName),n.addClass(i.dom.container,i.config.layout.containerClassName)),i.callActions("afterGetFinalMixData",arguments)},getTweenData:function(t){var n=this,o=null,i=null,r=Object.getOwnPropertyNames(n.effectsIn),a="",s=null,l=-1,c=-1,u=-1,d=-1;for(n.callActions("beforeGetTweenData",arguments),u=0;o=t.show[u];u++)for((i=t.showPosData[u]).posIn=new e.StyleData,i.posOut=new e.StyleData,i.tweenData=new e.StyleData,o.isShown?(i.posIn.x=i.startPosData.x-i.interPosData.x,i.posIn.y=i.startPosData.y-i.interPosData.y):i.posIn.x=i.posIn.y=0,i.posOut.x=i.finalPosData.x-i.interPosData.x,i.posOut.y=i.finalPosData.y-i.interPosData.y,i.posIn.opacity=o.isShown?1:n.effectsIn.opacity,i.posOut.opacity=1,i.tweenData.opacity=i.posOut.opacity-i.posIn.opacity,o.isShown||n.config.animation.nudge||(i.posIn.x=i.posOut.x,i.posIn.y=i.posOut.y),i.tweenData.x=i.posOut.x-i.posIn.x,i.tweenData.y=i.posOut.y-i.posIn.y,n.config.animation.animateResizeTargets&&(i.posIn.width=i.startPosData.width,i.posIn.height=i.startPosData.height,l=(i.startPosData.width||i.finalPosData.width)-i.interPosData.width,i.posIn.marginRight=i.startPosData.marginRight-l,c=(i.startPosData.height||i.finalPosData.height)-i.interPosData.height,i.posIn.marginBottom=i.startPosData.marginBottom-c,i.posOut.width=i.finalPosData.width,i.posOut.height=i.finalPosData.height,l=(i.finalPosData.width||i.startPosData.width)-i.interPosData.width,i.posOut.marginRight=i.finalPosData.marginRight-l,c=(i.finalPosData.height||i.startPosData.height)-i.interPosData.height,i.posOut.marginBottom=i.finalPosData.marginBottom-c,i.tweenData.width=i.posOut.width-i.posIn.width,i.tweenData.height=i.posOut.height-i.posIn.height,i.tweenData.marginRight=i.posOut.marginRight-i.posIn.marginRight,i.tweenData.marginBottom=i.posOut.marginBottom-i.posIn.marginBottom),d=0;a=r[d];d++)(s=n.effectsIn[a])instanceof e.TransformData&&s.value&&(i.posIn[a].value=s.value,i.posOut[a].value=0,i.tweenData[a].value=i.posOut[a].value-i.posIn[a].value,i.posIn[a].unit=i.posOut[a].unit=i.tweenData[a].unit=s.unit);for(u=0;o=t.toHide[u];u++)for((i=t.toHidePosData[u]).posIn=new e.StyleData,i.posOut=new e.StyleData,i.tweenData=new e.StyleData,i.posIn.x=o.isShown?i.startPosData.x-i.interPosData.x:0,i.posIn.y=o.isShown?i.startPosData.y-i.interPosData.y:0,i.posOut.x=n.config.animation.nudge?0:i.posIn.x,i.posOut.y=n.config.animation.nudge?0:i.posIn.y,i.tweenData.x=i.posOut.x-i.posIn.x,i.tweenData.y=i.posOut.y-i.posIn.y,n.config.animation.animateResizeTargets&&(i.posIn.width=i.startPosData.width,i.posIn.height=i.startPosData.height,l=i.startPosData.width-i.interPosData.width,i.posIn.marginRight=i.startPosData.marginRight-l,c=i.startPosData.height-i.interPosData.height,i.posIn.marginBottom=i.startPosData.marginBottom-c),i.posIn.opacity=1,i.posOut.opacity=n.effectsOut.opacity,i.tweenData.opacity=i.posOut.opacity-i.posIn.opacity,d=0;a=r[d];d++)(s=n.effectsOut[a])instanceof e.TransformData&&s.value&&(i.posIn[a].value=0,i.posOut[a].value=s.value,i.tweenData[a].value=i.posOut[a].value-i.posIn[a].value,i.posIn[a].unit=i.posOut[a].unit=i.tweenData[a].unit=s.unit);n.callActions("afterGetTweenData",arguments)},moveTargets:function(t){var o=this,i=null,r=null,a=null,s="",l=!1,c=-1,u=-1,d=o.checkProgress.bind(o);for(o.callActions("beforeMoveTargets",arguments),u=0;i=t.show[u];u++)r=new e.IMoveData,a=t.showPosData[u],s=i.isShown?"none":"show",(l=o.willTransition(s,t.hasEffect,a.posIn,a.posOut))&&c++,i.show(),r.posIn=a.posIn,r.posOut=a.posOut,r.statusChange=s,r.staggerIndex=c,r.operation=t,r.callback=l?d:null,i.move(r);for(u=0;i=t.toHide[u];u++)a=t.toHidePosData[u],r=new e.IMoveData,s="hide",l=o.willTransition(s,a.posIn,a.posOut),r.posIn=a.posIn,r.posOut=a.posOut,r.statusChange=s,r.staggerIndex=u,r.operation=t,r.callback=l?d:null,i.move(r);o.config.animation.animateResizeContainer&&(o.dom.parent.style[e.features.transitionProp]="height "+o.config.animation.duration+"ms ease, width "+o.config.animation.duration+"ms ease ",requestAnimationFrame(function(){t.startHeight!==t.newHeight&&t.viewportDeltaY!==t.startHeight-t.newHeight&&(o.dom.parent.style.height=t.newHeight+"px"),t.startWidth!==t.newWidth&&t.viewportDeltaX!==t.startWidth-t.newWidth&&(o.dom.parent.style.width=t.newWidth+"px")})),t.willChangeLayout&&(n.removeClass(o.dom.container,o.config.layout.ContainerClassName),n.addClass(o.dom.container,t.newContainerClassName)),o.callActions("afterMoveTargets",arguments)},hasEffect:function(){var t=this,e=["scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],n="",o=null,i=!1,r=-1;if(1!==t.effectsIn.opacity)return t.callFilters("resultHasEffect",!0,arguments);for(r=0;n=e[r];r++)if(0!==("undefined"!==(o=t.effectsIn[n]).value?o.value:o)){i=!0;break}return t.callFilters("resultHasEffect",i,arguments)},willTransition:function(t,e,o,i){var r,a=this;return r=!(!n.isVisible(a.dom.container)||!("none"!==t&&e||o.x!==i.x||o.y!==i.y)&&(!a.config.animation.animateResizeTargets||o.width===i.width&&o.height===i.height&&o.marginRight===i.marginRight&&o.marginTop===i.marginTop)),a.callFilters("resultWillTransition",r,arguments)},checkProgress:function(t){var e=this;e.targetsDone++,e.targetsBound===e.targetsDone&&e.cleanUp(t)},cleanUp:function(t){var o=this,i=null,r=null,a=null,s=null,l=-1;for(o.callActions("beforeCleanUp",arguments),o.targetsMoved=o.targetsImmovable=o.targetsBound=o.targetsDone=0,l=0;i=t.show[l];l++)i.cleanUp(),i.show();for(l=0;i=t.toHide[l];l++)i.cleanUp(),i.hide();if(t.willSort&&o.printSort(!1,t),o.dom.parent.style[e.features.transitionProp]=o.dom.parent.style.height=o.dom.parent.style.width=o.dom.parent.style.overflow=o.dom.parent.style[e.features.perspectiveProp]=o.dom.parent.style[e.features.perspectiveOriginProp]="",t.willChangeLayout&&(n.removeClass(o.dom.container,t.startContainerClassName),n.addClass(o.dom.container,t.newContainerClassName)),t.toRemove.length){for(l=0;i=o.targets[l];l++)t.toRemove.indexOf(i)>-1&&((r=i.dom.el.previousSibling)&&"#text"===r.nodeName&&(a=i.dom.el.nextSibling)&&"#text"===a.nodeName&&n.removeWhitespace(r),t.willSort||o.dom.parent.removeChild(i.dom.el),o.targets.splice(l,1),i.isInDom=!1,l--);o.origOrder=o.targets}t.willSort&&(o.targets=t.newOrder),o.state=t.newState,o.lastOperation=t,o.dom.targets=o.state.targets,e.events.fire("mixEnd",o.dom.container,{state:o.state,instance:o},o.dom.document),"function"==typeof o.config.callbacks.onMixEnd&&o.config.callbacks.onMixEnd.call(o.dom.container,o.state,o),t.hasFailed&&(e.events.fire("mixFail",o.dom.container,{state:o.state,instance:o},o.dom.document),"function"==typeof o.config.callbacks.onMixFail&&o.config.callbacks.onMixFail.call(o.dom.container,o.state,o),n.addClass(o.dom.container,n.getClassname(o.config.classNames,"container",o.config.classNames.modifierFailed))),"function"==typeof o.userCallback&&o.userCallback.call(o.dom.container,o.state,o),"function"==typeof o.userDeferred.resolve&&o.userDeferred.resolve(o.state),o.userCallback=null,o.userDeferred=null,o.lastClicked=null,o.isToggling=!1,o.isBusy=!1,o.queue.length&&(o.callActions("beforeReadQueueCleanUp",arguments),s=o.queue.shift(),o.userDeferred=s.deferred,o.isToggling=s.isToggling,o.lastClicked=s.triggerElement,s.instruction.command instanceof e.CommandMultimix?o.multimix.apply(o,s.args):o.dataset.apply(o,s.args)),o.callActions("afterCleanUp",arguments)},parseMultimixArgs:function(t){var o=this,i=new e.UserInstruction,r=null,a=-1;for(i.animate=o.config.animation.enable,i.command=new e.CommandMultimix,a=0;a<t.length;a++)null!==(r=t[a])&&("object"==typeof r?n.extend(i.command,r):"boolean"==typeof r?i.animate=r:"function"==typeof r&&(i.callback=r));return!i.command.insert||i.command.insert instanceof e.CommandInsert||(i.command.insert=o.parseInsertArgs([i.command.insert]).command),!i.command.remove||i.command.remove instanceof e.CommandRemove||(i.command.remove=o.parseRemoveArgs([i.command.remove]).command),!i.command.filter||i.command.filter instanceof e.CommandFilter||(i.command.filter=o.parseFilterArgs([i.command.filter]).command),!i.command.sort||i.command.sort instanceof e.CommandSort||(i.command.sort=o.parseSortArgs([i.command.sort]).command),!i.command.changeLayout||i.command.changeLayout instanceof e.CommandChangeLayout||(i.command.changeLayout=o.parseChangeLayoutArgs([i.command.changeLayout]).command),i=o.callFilters("instructionParseMultimixArgs",i,arguments),n.freeze(i),i},parseFilterArgs:function(t){var o=this,i=new e.UserInstruction,r=null,a=-1;for(i.animate=o.config.animation.enable,i.command=new e.CommandFilter,a=0;a<t.length;a++)"string"==typeof(r=t[a])?i.command.selector=r:null===r?i.command.collection=[]:"object"==typeof r&&n.isElement(r,o.dom.document)?i.command.collection=[r]:"object"==typeof r&&void 0!==r.length?i.command.collection=n.arrayFromList(r):"object"==typeof r?n.extend(i.command,r):"boolean"==typeof r?i.animate=r:"function"==typeof r&&(i.callback=r);if(i.command.selector&&i.command.collection)throw new Error(e.messages.errorFilterInvalidArguments());return i=o.callFilters("instructionParseFilterArgs",i,arguments),n.freeze(i),i},parseSortArgs:function(t){var o=this,i=new e.UserInstruction,r=null,a="",s=-1;for(i.animate=o.config.animation.enable,i.command=new e.CommandSort,s=0;s<t.length;s++)if(null!==(r=t[s]))switch(typeof r){case"string":a=r;break;case"object":r.length&&(i.command.collection=n.arrayFromList(r));break;case"boolean":i.animate=r;break;case"function":i.callback=r}return a&&(i.command=o.parseSortString(a,i.command)),i=o.callFilters("instructionParseSortArgs",i,arguments),n.freeze(i),i},parseInsertArgs:function(t){var o=this,i=new e.UserInstruction,r=null,a=-1;for(i.animate=o.config.animation.enable,i.command=new e.CommandInsert,a=0;a<t.length;a++)null!==(r=t[a])&&("number"==typeof r?i.command.index=r:"string"==typeof r&&["before","after"].indexOf(r)>-1?i.command.position=r:"string"==typeof r?i.command.collection=n.arrayFromList(n.createElement(r).childNodes):"object"==typeof r&&n.isElement(r,o.dom.document)?i.command.collection.length?i.command.sibling=r:i.command.collection=[r]:"object"==typeof r&&r.length?i.command.collection.length?i.command.sibling=r[0]:i.command.collection=r:"object"==typeof r&&r.childNodes&&r.childNodes.length?i.command.collection.length?i.command.sibling=r.childNodes[0]:i.command.collection=n.arrayFromList(r.childNodes):"object"==typeof r?n.extend(i.command,r):"boolean"==typeof r?i.animate=r:"function"==typeof r&&(i.callback=r));if(i.command.index&&i.command.sibling)throw new Error(e.messages.errorInsertInvalidArguments());return!i.command.collection.length&&o.config.debug.showWarnings&&console.warn(e.messages.warningInsertNoElements()),i=o.callFilters("instructionParseInsertArgs",i,arguments),n.freeze(i),i},parseRemoveArgs:function(t){var o=this,i=new e.UserInstruction,r=null,a=null,s=-1;for(i.animate=o.config.animation.enable,i.command=new e.CommandRemove,s=0;s<t.length;s++)if(null!==(a=t[s]))switch(typeof a){case"number":o.targets[a]&&(i.command.targets[0]=o.targets[a]);break;case"string":i.command.collection=n.arrayFromList(o.dom.parent.querySelectorAll(a));break;case"object":a&&a.length?i.command.collection=a:n.isElement(a,o.dom.document)?i.command.collection=[a]:n.extend(i.command,a);break;case"boolean":i.animate=a;break;case"function":i.callback=a}if(i.command.collection.length)for(s=0;r=o.targets[s];s++)i.command.collection.indexOf(r.dom.el)>-1&&i.command.targets.push(r);return!i.command.targets.length&&o.config.debug.showWarnings&&console.warn(e.messages.warningRemoveNoElements()),n.freeze(i),i},parseDatasetArgs:function(t){var o=new e.UserInstruction,i=null,r=-1;for(o.animate=this.config.animation.enable,o.command=new e.CommandDataset,r=0;r<t.length;r++)if(null!==(i=t[r]))switch(typeof i){case"object":Array.isArray(i)||"number"==typeof i.length?o.command.dataset=i:n.extend(o.command,i);break;case"boolean":o.animate=i;break;case"function":o.callback=i}return n.freeze(o),o},parseChangeLayoutArgs:function(t){var o=new e.UserInstruction,i=null,r=-1;for(o.animate=this.config.animation.enable,o.command=new e.CommandChangeLayout,r=0;r<t.length;r++)if(null!==(i=t[r]))switch(typeof i){case"string":o.command.containerClassName=i;break;case"object":n.extend(o.command,i);break;case"boolean":o.animate=i;break;case"function":o.callback=i}return n.freeze(o),o},queueMix:function(t){var o=this,i=null,r="";return o.callActions("beforeQueueMix",arguments),i=n.defer(e.libraries),o.config.animation.queue&&o.queue.length<o.config.animation.queueLimit?(t.deferred=i,o.queue.push(t),o.config.controls.enable&&(o.isToggling?(o.buildToggleArray(t.instruction.command),r=o.getToggleSelector(),o.updateControls({filter:{selector:r}})):o.updateControls(t.instruction.command))):(o.config.debug.showWarnings&&console.warn(e.messages.warningMultimixInstanceQueueFull()),i.resolve(o.state),e.events.fire("mixBusy",o.dom.container,{state:o.state,instance:o},o.dom.document),"function"==typeof o.config.callbacks.onMixBusy&&o.config.callbacks.onMixBusy.call(o.dom.container,o.state,o)),o.callFilters("promiseQueueMix",i.promise,arguments)},getDataOperation:function(t){var o=this,i=new e.Operation,r=[];if(i=o.callFilters("operationUnmappedGetDataOperation",i,arguments),o.dom.targets.length&&!(r=o.state.activeDataset||[]).length)throw new Error(e.messages.errorDatasetNotSet());return i.id=n.randomHex(),i.startState=o.state,i.startDataset=r,i.newDataset=t.slice(),o.diffDatasets(i),i.startOrder=o.targets,i.newOrder=i.show,o.config.animation.enable&&(o.getStartMixData(i),o.setInter(i),i.docState=n.getDocumentState(o.dom.document),o.getInterMixData(i),o.setFinal(i),o.getFinalMixData(i),o.parseEffects(),i.hasEffect=o.hasEffect(),o.getTweenData(i)),o.targets=i.show.slice(),i.newState=o.buildState(i),Array.prototype.push.apply(o.targets,i.toRemove),o.callFilters("operationMappedGetDataOperation",i,arguments)},diffDatasets:function(t){var o=this,i=[],r=[],a=[],s=null,l=null,c=null,u=null,d=null,f={},h="",p=-1;for(o.callActions("beforeDiffDatasets",arguments),p=0;s=t.newDataset[p];p++){if(void 0===(h=s[o.config.data.uidKey])||h.toString().length<1)throw new TypeError(e.messages.errorDatasetInvalidUidKey({uidKey:o.config.data.uidKey}));if(f[h])throw new Error(e.messages.errorDatasetDuplicateUid({uid:h}));f[h]=!0,(l=o.cache[h])instanceof e.Target?(o.config.data.dirtyCheck&&!n.deepEquals(s,l.data)&&(c=l.render(s),l.data=s,c!==l.dom.el&&(l.isInDom&&(l.unbindEvents(),o.dom.parent.replaceChild(c,l.dom.el)),l.isShown||(c.style.display="none"),l.dom.el=c,l.isInDom&&l.bindEvents())),c=l.dom.el):((l=new e.Target).init(null,o,s),l.hide()),l.isInDom?(d=l.dom.el.nextElementSibling,r.push(h),u&&(u.lastElementChild&&u.appendChild(o.dom.document.createTextNode(" ")),o.insertDatasetFrag(u,l.dom.el,a),u=null)):(u||(u=o.dom.document.createDocumentFragment()),u.lastElementChild&&u.appendChild(o.dom.document.createTextNode(" ")),u.appendChild(l.dom.el),l.isInDom=!0,l.unbindEvents(),l.bindEvents(),l.hide(),t.toShow.push(l),a.push(l)),t.show.push(l)}for(u&&((d=d||o.config.layout.siblingAfter)&&u.appendChild(o.dom.document.createTextNode(" ")),o.insertDatasetFrag(u,d,a)),p=0;s=t.startDataset[p];p++)h=s[o.config.data.uidKey],l=o.cache[h],t.show.indexOf(l)<0?(t.hide.push(l),t.toHide.push(l),t.toRemove.push(l)):i.push(h);n.isEqualArray(i,r)||(t.willSort=!0),o.callActions("afterDiffDatasets",arguments)},insertDatasetFrag:function(t,e,o){var i=this,r=e?n.arrayFromList(i.dom.parent.children).indexOf(e):i.targets.length;for(i.dom.parent.insertBefore(t,e);o.length;)i.targets.splice(r,0,o.shift()),r++},willSort:function(t,e){var n,o=this;return n=!!(o.config.behavior.liveSort||"random"===t.order||t.attribute!==e.attribute||t.order!==e.order||t.collection!==e.collection||null===t.next&&e.next||t.next&&null===e.next)||!(!t.next||!e.next)&&o.willSort(t.next,e.next),o.callFilters("resultWillSort",n,arguments)},show:function(){return this.filter("all")},hide:function(){return this.filter("none")},isMixing:function(){return this.isBusy},filter:function(){var t=this.parseFilterArgs(arguments);return this.multimix({filter:t.command},t.animate,t.callback)},toggleOn:function(){var t,e=this,n=e.parseFilterArgs(arguments),o=n.command.selector;return e.isToggling=!0,e.toggleArray.indexOf(o)<0&&e.toggleArray.push(o),t=e.getToggleSelector(),e.multimix({filter:t},n.animate,n.callback)},toggleOff:function(){var t,e=this,n=e.parseFilterArgs(arguments),o=n.command.selector,i=e.toggleArray.indexOf(o);return e.isToggling=!0,i>-1&&e.toggleArray.splice(i,1),t=e.getToggleSelector(),e.multimix({filter:t},n.animate,n.callback)},sort:function(){var t=this.parseSortArgs(arguments);return this.multimix({sort:t.command},t.animate,t.callback)},changeLayout:function(){var t=this.parseChangeLayoutArgs(arguments);return this.multimix({changeLayout:t.command},t.animate,t.callback)},dataset:function(){var t=this,n=t.parseDatasetArgs(arguments),o=null,i=null,r=!1;return t.callActions("beforeDataset",arguments),t.isBusy?((i=new e.QueueItem).args=arguments,i.instruction=n,t.queueMix(i)):(n.callback&&(t.userCallback=n.callback),r=n.animate^t.config.animation.enable?n.animate:t.config.animation.enable,o=t.getDataOperation(n.command.dataset),t.goMix(r,o))},multimix:function(){var t=this,n=null,o=!1,i=null,r=t.parseMultimixArgs(arguments);return t.callActions("beforeMultimix",arguments),t.isBusy?((i=new e.QueueItem).args=arguments,i.instruction=r,i.triggerElement=t.lastClicked,i.isToggling=t.isToggling,t.queueMix(i)):(n=t.getOperation(r.command),t.config.controls.enable&&(r.command.filter&&!t.isToggling&&(t.toggleArray.length=0,t.buildToggleArray(n.command)),t.queue.length<1&&t.updateControls(n.command)),r.callback&&(t.userCallback=r.callback),o=r.animate^t.config.animation.enable?r.animate:t.config.animation.enable,t.callFilters("operationMultimix",n,arguments),t.goMix(o,n))},getOperation:function(t){var o=this,i=t.sort,r=t.filter,a=t.changeLayout,s=t.remove,l=t.insert,c=new e.Operation;return(c=o.callFilters("operationUnmappedGetOperation",c,arguments)).id=n.randomHex(),c.command=t,c.startState=o.state,c.triggerElement=o.lastClicked,o.isBusy?(o.config.debug.showWarnings&&console.warn(e.messages.warningGetOperationInstanceBusy()),null):(l&&o.insertTargets(l,c),s&&(c.toRemove=s.targets),c.startSort=c.newSort=c.startState.activeSort,c.startOrder=c.newOrder=o.targets,i&&(c.startSort=c.startState.activeSort,c.newSort=i,c.willSort=o.willSort(i,c.startState.activeSort),c.willSort&&o.sortOperation(c)),c.startFilter=c.startState.activeFilter,c.newFilter=r||n.extend(new e.CommandFilter,c.startFilter),"all"===c.newFilter.selector?c.newFilter.selector=o.config.selectors.target:"none"===c.newFilter.selector&&(c.newFilter.selector=""),o.filterOperation(c),c.startContainerClassName=c.startState.activeContainerClassName,a?(c.newContainerClassName=a.containerClassName,c.newContainerClassName!==c.startContainerClassName&&(c.willChangeLayout=!0)):c.newContainerClassName=c.startContainerClassName,o.config.animation.enable&&(o.getStartMixData(c),o.setInter(c),c.docState=n.getDocumentState(o.dom.document),o.getInterMixData(c),o.setFinal(c),o.getFinalMixData(c),o.parseEffects(),c.hasEffect=o.hasEffect(),o.getTweenData(c)),c.willSort&&(o.targets=c.newOrder),c.newState=o.buildState(c),o.callFilters("operationMappedGetOperation",c,arguments))},tween:function(t,e){var n=null,o=null,i=-1,r=-1;for(e=Math.min(e,1),e=Math.max(e,0),r=0;n=t.show[r];r++)o=t.showPosData[r],n.applyTween(o,e);for(r=0;n=t.hide[r];r++)n.isShown&&n.hide(),(i=t.toHide.indexOf(n))>-1&&(o=t.toHidePosData[i],n.isShown||n.show(),n.applyTween(o,e))},insert:function(){var t=this.parseInsertArgs(arguments);return this.multimix({insert:t.command},t.animate,t.callback)},insertBefore:function(){var t=this.parseInsertArgs(arguments);return this.insert(t.command.collection,"before",t.command.sibling,t.animate,t.callback)},insertAfter:function(){var t=this.parseInsertArgs(arguments);return this.insert(t.command.collection,"after",t.command.sibling,t.animate,t.callback)},prepend:function(){var t=this.parseInsertArgs(arguments);return this.insert(0,t.command.collection,t.animate,t.callback)},append:function(){var t=this,e=t.parseInsertArgs(arguments);return t.insert(t.state.totalTargets,e.command.collection,e.animate,e.callback)},remove:function(){var t=this.parseRemoveArgs(arguments);return this.multimix({remove:t.command},t.animate,t.callback)},getConfig:function(t){var e,o=this;return e=t?n.getProperty(o.config,t):o.config,o.callFilters("valueGetConfig",e,arguments)},configure:function(t){var e=this;e.callActions("beforeConfigure",arguments),n.extend(e.config,t,!0,!0),e.callActions("afterConfigure",arguments)},getState:function(){var t;return t=new e.State,n.extend(t,this.state),n.freeze(t),this.callFilters("stateGetState",t,arguments)},forceRefresh:function(){this.indexTargets()},forceRender:function(){var t=this,e=null,n=null,o="";for(o in t.cache)(n=(e=t.cache[o]).render(e.data))!==e.dom.el&&(e.isInDom&&(e.unbindEvents(),t.dom.parent.replaceChild(n,e.dom.el)),e.isShown||(n.style.display="none"),e.dom.el=n,e.isInDom&&e.bindEvents());t.state=t.buildState(t.lastOperation)},destroy:function(t){var n=this,o=null,i=null,r=0;for(n.callActions("beforeDestroy",arguments),r=0;o=n.controls[r];r++)o.removeBinding(n);for(r=0;i=n.targets[r];r++)t&&i.show(),i.unbindEvents();n.dom.container.id.match(/^MixItUp/)&&n.dom.container.removeAttribute("id"),delete e.instances[n.id],n.callActions("afterDestroy",arguments)}}),e.IMoveData=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.posIn=null,this.posOut=null,this.operation=null,this.callback=null,this.statusChange="",this.duration=-1,this.staggerIndex=-1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.IMoveData),e.IMoveData.prototype=Object.create(e.Base.prototype),e.IMoveData.prototype.constructor=e.IMoveData,e.TargetDom=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.TargetDom),e.TargetDom.prototype=Object.create(e.Base.prototype),e.TargetDom.prototype.constructor=e.TargetDom,e.Target=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.sortString="",this.mixer=null,this.callback=null,this.isShown=!1,this.isBound=!1,this.isExcluded=!1,this.isInDom=!1,this.handler=null,this.operation=null,this.data=null,this.dom=new e.TargetDom,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Target),e.Target.prototype=Object.create(e.Base.prototype),n.extend(e.Target.prototype,{constructor:e.Target,init:function(t,n,o){var i=this,r="";if(i.callActions("beforeInit",arguments),i.mixer=n,t||(t=i.render(o)),i.cacheDom(t),i.bindEvents(),"none"!==i.dom.el.style.display&&(i.isShown=!0),o&&n.config.data.uidKey){if(void 0===(r=o[n.config.data.uidKey])||r.toString().length<1)throw new TypeError(e.messages.errorDatasetInvalidUidKey({uidKey:n.config.data.uidKey}));i.id=r,i.data=o,n.cache[r]=i}i.callActions("afterInit",arguments)},render:function(t){var o,i=this,r=null,a=null,s=null;if(i.callActions("beforeRender",arguments),"function"!=typeof(r=i.callFilters("renderRender",i.mixer.config.render.target,arguments)))throw new TypeError(e.messages.errorDatasetRendererNotSet());return(o=r(t))&&"object"==typeof o&&n.isElement(o)?a=o:"string"==typeof o&&((s=document.createElement("div")).innerHTML=o,a=s.firstElementChild),i.callFilters("elRender",a,arguments)},cacheDom:function(t){var e=this;e.callActions("beforeCacheDom",arguments),e.dom.el=t,e.callActions("afterCacheDom",arguments)},getSortString:function(t){var e=this,n=e.dom.el.getAttribute("data-"+t)||"";e.callActions("beforeGetSortString",arguments),n=isNaN(1*n)?n.toLowerCase():1*n,e.sortString=n,e.callActions("afterGetSortString",arguments)},show:function(){var t=this;t.callActions("beforeShow",arguments),t.isShown||(t.dom.el.style.display="",t.isShown=!0),t.callActions("afterShow",arguments)},hide:function(){var t=this;t.callActions("beforeHide",arguments),t.isShown&&(t.dom.el.style.display="none",t.isShown=!1),t.callActions("afterHide",arguments)},move:function(t){var e=this;e.callActions("beforeMove",arguments),e.isExcluded||e.mixer.targetsMoved++,e.applyStylesIn(t),requestAnimationFrame(function(){e.applyStylesOut(t)}),e.callActions("afterMove",arguments)},applyTween:function(t,n){var o=this,i="",r=null,a=t.posIn,s=[],l=new e.StyleData,c=-1;for(o.callActions("beforeApplyTween",arguments),l.x=a.x,l.y=a.y,0===n?o.hide():o.isShown||o.show(),c=0;i=e.features.TWEENABLE[c];c++)if(r=t.tweenData[i],"x"===i){if(!r)continue;l.x=a.x+r*n}else if("y"===i){if(!r)continue;l.y=a.y+r*n}else if(r instanceof e.TransformData){if(!r.value)continue;l[i].value=a[i].value+r.value*n,l[i].unit=r.unit,s.push(i+"("+l[i].value+r.unit+")")}else{if(!r)continue;l[i]=a[i]+r*n,o.dom.el.style[i]=l[i]}(l.x||l.y)&&s.unshift("translate("+l.x+"px, "+l.y+"px)"),s.length&&(o.dom.el.style[e.features.transformProp]=s.join(" ")),o.callActions("afterApplyTween",arguments)},applyStylesIn:function(t){var n=this,o=t.posIn,i=1!==n.mixer.effectsIn.opacity,r=[];n.callActions("beforeApplyStylesIn",arguments),r.push("translate("+o.x+"px, "+o.y+"px)"),n.mixer.config.animation.animateResizeTargets&&("show"!==t.statusChange&&(n.dom.el.style.width=o.width+"px",n.dom.el.style.height=o.height+"px"),n.dom.el.style.marginRight=o.marginRight+"px",n.dom.el.style.marginBottom=o.marginBottom+"px"),i&&(n.dom.el.style.opacity=o.opacity),"show"===t.statusChange&&(r=r.concat(n.mixer.transformIn)),n.dom.el.style[e.features.transformProp]=r.join(" "),n.callActions("afterApplyStylesIn",arguments)},applyStylesOut:function(t){var n=this,o=[],i=[],r=n.mixer.config.animation.animateResizeTargets,a=void 0!==n.mixer.effectsIn.opacity;if(n.callActions("beforeApplyStylesOut",arguments),o.push(n.writeTransitionRule(e.features.transformRule,t.staggerIndex)),"none"!==t.statusChange&&o.push(n.writeTransitionRule("opacity",t.staggerIndex,t.duration)),r&&(o.push(n.writeTransitionRule("width",t.staggerIndex,t.duration)),o.push(n.writeTransitionRule("height",t.staggerIndex,t.duration)),o.push(n.writeTransitionRule("margin",t.staggerIndex,t.duration))),!t.callback)return n.mixer.targetsImmovable++,void(n.mixer.targetsMoved===n.mixer.targetsImmovable&&n.mixer.cleanUp(t.operation));switch(n.operation=t.operation,n.callback=t.callback,!n.isExcluded&&n.mixer.targetsBound++,n.isBound=!0,n.applyTransition(o),r&&t.posOut.width>0&&t.posOut.height>0&&(n.dom.el.style.width=t.posOut.width+"px",n.dom.el.style.height=t.posOut.height+"px",n.dom.el.style.marginRight=t.posOut.marginRight+"px",n.dom.el.style.marginBottom=t.posOut.marginBottom+"px"),n.mixer.config.animation.nudge||"hide"!==t.statusChange||i.push("translate("+t.posOut.x+"px, "+t.posOut.y+"px)"),t.statusChange){case"hide":a&&(n.dom.el.style.opacity=n.mixer.effectsOut.opacity),i=i.concat(n.mixer.transformOut);break;case"show":a&&(n.dom.el.style.opacity=1)}(n.mixer.config.animation.nudge||!n.mixer.config.animation.nudge&&"hide"!==t.statusChange)&&i.push("translate("+t.posOut.x+"px, "+t.posOut.y+"px)"),n.dom.el.style[e.features.transformProp]=i.join(" "),n.callActions("afterApplyStylesOut",arguments)},writeTransitionRule:function(t,e,n){var o,i=this,r=i.getDelay(e);return o=t+" "+(n>0?n:i.mixer.config.animation.duration)+"ms "+r+"ms "+("opacity"===t?"linear":i.mixer.config.animation.easing),i.callFilters("ruleWriteTransitionRule",o,arguments)},getDelay:function(t){var e,n=this;return"function"==typeof n.mixer.config.animation.staggerSequence&&(t=n.mixer.config.animation.staggerSequence.call(n,t,n.state)),e=n.mixer.staggerDuration?t*n.mixer.staggerDuration:0,n.callFilters("delayGetDelay",e,arguments)},applyTransition:function(t){var n=this,o=t.join(", ");n.callActions("beforeApplyTransition",arguments),n.dom.el.style[e.features.transitionProp]=o,n.callActions("afterApplyTransition",arguments)},handleTransitionEnd:function(t){var e=this,n=t.propertyName,o=e.mixer.config.animation.animateResizeTargets;e.callActions("beforeHandleTransitionEnd",arguments),e.isBound&&t.target.matches(e.mixer.config.selectors.target)&&(n.indexOf("transform")>-1||n.indexOf("opacity")>-1||o&&n.indexOf("height")>-1||o&&n.indexOf("width")>-1||o&&n.indexOf("margin")>-1)&&(e.callback.call(e,e.operation),e.isBound=!1,e.callback=null,e.operation=null),e.callActions("afterHandleTransitionEnd",arguments)},eventBus:function(t){var e=this;switch(e.callActions("beforeEventBus",arguments),t.type){case"webkitTransitionEnd":case"transitionend":e.handleTransitionEnd(t)}e.callActions("afterEventBus",arguments)},unbindEvents:function(){var t=this;t.callActions("beforeUnbindEvents",arguments),n.off(t.dom.el,"webkitTransitionEnd",t.handler),n.off(t.dom.el,"transitionend",t.handler),t.callActions("afterUnbindEvents",arguments)},bindEvents:function(){var t,o=this;o.callActions("beforeBindEvents",arguments),t="webkit"===e.features.transitionPrefix?"webkitTransitionEnd":"transitionend",o.handler=function(t){return o.eventBus(t)},n.on(o.dom.el,t,o.handler),o.callActions("afterBindEvents",arguments)},getPosData:function(n){var o=this,i={},r=null,a=new e.StyleData;return o.callActions("beforeGetPosData",arguments),a.x=o.dom.el.offsetLeft,a.y=o.dom.el.offsetTop,(o.mixer.config.animation.animateResizeTargets||n)&&(r=o.dom.el.getBoundingClientRect(),a.top=r.top,a.right=r.right,a.bottom=r.bottom,a.left=r.left,a.width=r.width,a.height=r.height),o.mixer.config.animation.animateResizeTargets&&(i=t.getComputedStyle(o.dom.el),a.marginBottom=parseFloat(i.marginBottom),a.marginRight=parseFloat(i.marginRight)),o.callFilters("posDataGetPosData",a,arguments)},cleanUp:function(){var t=this;t.callActions("beforeCleanUp",arguments),t.dom.el.style[e.features.transformProp]="",t.dom.el.style[e.features.transitionProp]="",t.dom.el.style.opacity="",t.mixer.config.animation.animateResizeTargets&&(t.dom.el.style.width="",t.dom.el.style.height="",t.dom.el.style.marginRight="",t.dom.el.style.marginBottom=""),t.callActions("afterCleanUp",arguments)}}),e.Collection=function(t){var e=null,o=-1;for(this.callActions("beforeConstruct"),o=0;e=t[o];o++)this[o]=e;this.length=t.length,this.callActions("afterConstruct"),n.freeze(this)},e.BaseStatic.call(e.Collection),e.Collection.prototype=Object.create(e.Base.prototype),n.extend(e.Collection.prototype,{constructor:e.Collection,mixitup:function(t){var o=null,i=Array.prototype.slice.call(arguments),r=[],a=-1;for(this.callActions("beforeMixitup"),i.shift(),a=0;o=this[a];a++)r.push(o[t].apply(o,i));return this.callFilters("promiseMixitup",n.all(r,e.libraries),arguments)}}),e.Operation=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.args=[],this.command=null,this.showPosData=[],this.toHidePosData=[],this.startState=null,this.newState=null,this.docState=null,this.willSort=!1,this.willChangeLayout=!1,this.hasEffect=!1,this.hasFailed=!1,this.triggerElement=null,this.show=[],this.hide=[],this.matching=[],this.toShow=[],this.toHide=[],this.toMove=[],this.toRemove=[],this.startOrder=[],this.newOrder=[],this.startSort=null,this.newSort=null,this.startFilter=null,this.newFilter=null,this.startDataset=null,this.newDataset=null,this.viewportDeltaX=0,this.viewportDeltaY=0,this.startX=0,this.startY=0,this.startHeight=0,this.startWidth=0,this.newX=0,this.newY=0,this.newHeight=0,this.newWidth=0,this.startContainerClassName="",this.startDisplay="",this.newContainerClassName="",this.newDisplay="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Operation),e.Operation.prototype=Object.create(e.Base.prototype),e.Operation.prototype.constructor=e.Operation,e.State=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.activeFilter=null,this.activeSort=null,this.activeContainerClassName="",this.container=null,this.targets=[],this.hide=[],this.show=[],this.matching=[],this.totalTargets=-1,this.totalShow=-1,this.totalHide=-1,this.totalMatching=-1,this.hasFailed=!1,this.triggerElement=null,this.activeDataset=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.State),e.State.prototype=Object.create(e.Base.prototype),e.State.prototype.constructor=e.State,e.UserInstruction=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.command={},this.animate=!1,this.callback=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.UserInstruction),e.UserInstruction.prototype=Object.create(e.Base.prototype),e.UserInstruction.prototype.constructor=e.UserInstruction,e.Messages=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.ERROR_FACTORY_INVALID_CONTAINER="[MixItUp] An invalid selector or element reference was passed to the mixitup factory function",this.ERROR_FACTORY_CONTAINER_NOT_FOUND="[MixItUp] The provided selector yielded no container element",this.ERROR_CONFIG_INVALID_ANIMATION_EFFECTS="[MixItUp] Invalid value for `animation.effects`",this.ERROR_CONFIG_INVALID_CONTROLS_SCOPE="[MixItUp] Invalid value for `controls.scope`",this.ERROR_CONFIG_INVALID_PROPERTY='[MixitUp] Invalid configuration object property "${erroneous}"${suggestion}',this.ERROR_CONFIG_INVALID_PROPERTY_SUGGESTION='. Did you mean "${probableMatch}"?',this.ERROR_CONFIG_DATA_UID_KEY_NOT_SET="[MixItUp] To use the dataset API, a UID key must be specified using `data.uidKey`",this.ERROR_DATASET_INVALID_UID_KEY='[MixItUp] The specified UID key "${uidKey}" is not present on one or more dataset items',this.ERROR_DATASET_DUPLICATE_UID='[MixItUp] The UID "${uid}" was found on two or more dataset items. UIDs must be unique.',this.ERROR_INSERT_INVALID_ARGUMENTS="[MixItUp] Please provider either an index or a sibling and position to insert, not both",this.ERROR_INSERT_PREEXISTING_ELEMENT="[MixItUp] An element to be inserted already exists in the container",this.ERROR_FILTER_INVALID_ARGUMENTS="[MixItUp] Please provide either a selector or collection `.filter()`, not both",this.ERROR_DATASET_NOT_SET="[MixItUp] To use the dataset API with pre-rendered targets, a starting dataset must be set using `load.dataset`",this.ERROR_DATASET_PRERENDERED_MISMATCH="[MixItUp] `load.dataset` does not match pre-rendered targets",this.ERROR_DATASET_RENDERER_NOT_SET="[MixItUp] To insert an element via the dataset API, a target renderer function must be provided to `render.target`",this.ERROR_SORT_NON_EXISTENT_ELEMENT="[MixItUp] An element to be sorted does not already exist in the container",this.WARNING_FACTORY_PREEXISTING_INSTANCE="[MixItUp] WARNING: This element already has an active MixItUp instance. The provided configuration object will be ignored. If you wish to perform additional methods on this instance, please create a reference.",this.WARNING_INSERT_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.insert()`",this.WARNING_REMOVE_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.remove()`",this.WARNING_MULTIMIX_INSTANCE_QUEUE_FULL="[MixItUp] WARNING: An operation was requested but the MixItUp instance was busy. The operation was rejected because the queue is full or queuing is disabled.",this.WARNING_GET_OPERATION_INSTANCE_BUSY="[MixItUp] WARNING: Operations can be be created while the MixItUp instance is busy.",this.WARNING_NO_PROMISE_IMPLEMENTATION="[MixItUp] WARNING: No Promise implementations could be found. If you wish to use promises with MixItUp please install an ES6 Promise polyfill.",this.WARNING_INCONSISTENT_SORTING_ATTRIBUTES='[MixItUp] WARNING: The requested sorting data attribute "${attribute}" was not present on one or more target elements which may product unexpected sort output',this.callActions("afterConstruct"),this.compileTemplates(),n.seal(this)},e.BaseStatic.call(e.Messages),e.Messages.prototype=Object.create(e.Base.prototype),e.Messages.prototype.constructor=e.Messages,e.Messages.prototype.compileTemplates=function(){var t="",e="";for(t in this)"string"==typeof(e=this[t])&&(this[n.camelCase(t)]=n.template(e))},e.messages=new e.Messages,e.Facade=function(t){e.Base.call(this),this.callActions("beforeConstruct",arguments),this.configure=t.configure.bind(t),this.show=t.show.bind(t),this.hide=t.hide.bind(t),this.filter=t.filter.bind(t),this.toggleOn=t.toggleOn.bind(t),this.toggleOff=t.toggleOff.bind(t),this.sort=t.sort.bind(t),this.changeLayout=t.changeLayout.bind(t),this.multimix=t.multimix.bind(t),this.dataset=t.dataset.bind(t),this.tween=t.tween.bind(t),this.insert=t.insert.bind(t),this.insertBefore=t.insertBefore.bind(t),this.insertAfter=t.insertAfter.bind(t),this.prepend=t.prepend.bind(t),this.append=t.append.bind(t),this.remove=t.remove.bind(t),this.destroy=t.destroy.bind(t),this.forceRefresh=t.forceRefresh.bind(t),this.forceRender=t.forceRender.bind(t),this.isMixing=t.isMixing.bind(t),this.getOperation=t.getOperation.bind(t),this.getConfig=t.getConfig.bind(t),this.getState=t.getState.bind(t),this.callActions("afterConstruct",arguments),n.freeze(this),n.seal(this)},e.BaseStatic.call(e.Facade),e.Facade.prototype=Object.create(e.Base.prototype),e.Facade.prototype.constructor=e.Facade,"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):void 0!==t.mixitup&&"function"==typeof t.mixitup||(t.mixitup=e),e.BaseStatic.call(e.constructor),e.NAME="mixitup",e.CORE_VERSION="3.3.1"}(window);
